ARM GAS  /tmp/cckdBZRC.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"Mytouch.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.TP_Write_Byte,"ax",%progbits
  19              		.align	1
  20              		.global	TP_Write_Byte
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	TP_Write_Byte:
  26              	.LVL0:
  27              	.LFB147:
  28              		.file 1 "Core/Src/Mytouch.c"
   1:Core/Src/Mytouch.c **** //
   2:Core/Src/Mytouch.c **** // Created by wbh on 2021/2/14.
   3:Core/Src/Mytouch.c **** // 移植自正点原子HAL库实例
   4:Core/Src/Mytouch.c **** //
   5:Core/Src/Mytouch.c **** 
   6:Core/Src/Mytouch.c **** #include "Mytouch.h"
   7:Core/Src/Mytouch.c **** #include <stdio.h>
   8:Core/Src/Mytouch.c **** 
   9:Core/Src/Mytouch.c **** _m_tp_dev tp_dev=
  10:Core/Src/Mytouch.c **** {
  11:Core/Src/Mytouch.c **** 	TP_Init,
  12:Core/Src/Mytouch.c **** 	TP_Scan,
  13:Core/Src/Mytouch.c **** 	TP_Adjust,
  14:Core/Src/Mytouch.c **** 	0,
  15:Core/Src/Mytouch.c **** 	0, 
  16:Core/Src/Mytouch.c **** 	0,
  17:Core/Src/Mytouch.c **** 	0,
  18:Core/Src/Mytouch.c **** 	0,
  19:Core/Src/Mytouch.c **** 	0,	  	 		
  20:Core/Src/Mytouch.c **** 	0,
  21:Core/Src/Mytouch.c **** 	0,	  	 		
  22:Core/Src/Mytouch.c **** };					
  23:Core/Src/Mytouch.c **** //默认为touchtype=0的数据.
  24:Core/Src/Mytouch.c **** u8 CMD_RDX=0XD0;
  25:Core/Src/Mytouch.c **** u8 CMD_RDY=0X90;
  26:Core/Src/Mytouch.c ****  	 			    					   
  27:Core/Src/Mytouch.c **** //SPI写数据
  28:Core/Src/Mytouch.c **** //向触摸屏IC写入1byte数据    
  29:Core/Src/Mytouch.c **** //num:要写入的数据
  30:Core/Src/Mytouch.c **** void TP_Write_Byte(u8 num)    
ARM GAS  /tmp/cckdBZRC.s 			page 2


  31:Core/Src/Mytouch.c **** {  
  29              		.loc 1 31 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 31 1 is_stmt 0 view .LVU1
  34 0000 70B5     		push	{r4, r5, r6, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 16
  37              		.cfi_offset 4, -16
  38              		.cfi_offset 5, -12
  39              		.cfi_offset 6, -8
  40              		.cfi_offset 14, -4
  41 0002 0446     		mov	r4, r0
  32:Core/Src/Mytouch.c **** 	u8 count=0;   
  42              		.loc 1 32 2 is_stmt 1 view .LVU2
  43              	.LVL1:
  33:Core/Src/Mytouch.c **** 	for(count=0;count<8;count++)  
  44              		.loc 1 33 2 view .LVU3
  45              		.loc 1 33 11 is_stmt 0 view .LVU4
  46 0004 0025     		movs	r5, #0
  47              		.loc 1 33 2 view .LVU5
  48 0006 16E0     		b	.L2
  49              	.LVL2:
  50              	.L3:
  34:Core/Src/Mytouch.c **** 	{ 	  
  35:Core/Src/Mytouch.c **** 		if(num&0x80)TDIN(1);  
  36:Core/Src/Mytouch.c **** 		else TDIN(0);   
  51              		.loc 1 36 8 is_stmt 1 view .LVU6
  52 0008 0022     		movs	r2, #0
  53 000a 0821     		movs	r1, #8
  54 000c 1048     		ldr	r0, .L8
  55 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
  56              	.LVL3:
  57              	.L4:
  37:Core/Src/Mytouch.c **** 		num<<=1;    
  58              		.loc 1 37 3 discriminator 2 view .LVU7
  59              		.loc 1 37 6 is_stmt 0 discriminator 2 view .LVU8
  60 0012 6400     		lsls	r4, r4, #1
  61              	.LVL4:
  62              		.loc 1 37 6 discriminator 2 view .LVU9
  63 0014 E4B2     		uxtb	r4, r4
  64              	.LVL5:
  38:Core/Src/Mytouch.c **** 		TCLK(0); 
  65              		.loc 1 38 3 is_stmt 1 discriminator 2 view .LVU10
  66 0016 0F4E     		ldr	r6, .L8+4
  67 0018 0022     		movs	r2, #0
  68 001a 4021     		movs	r1, #64
  69 001c 3046     		mov	r0, r6
  70 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
  71              	.LVL6:
  39:Core/Src/Mytouch.c **** 		delay_us(1);
  72              		.loc 1 39 3 discriminator 2 view .LVU11
  73 0022 0120     		movs	r0, #1
  74 0024 FFF7FEFF 		bl	delay_us
  75              	.LVL7:
  40:Core/Src/Mytouch.c **** 		TCLK(1);		//上升沿有效	        
ARM GAS  /tmp/cckdBZRC.s 			page 3


  76              		.loc 1 40 3 discriminator 2 view .LVU12
  77 0028 0122     		movs	r2, #1
  78 002a 4021     		movs	r1, #64
  79 002c 3046     		mov	r0, r6
  80 002e FFF7FEFF 		bl	HAL_GPIO_WritePin
  81              	.LVL8:
  33:Core/Src/Mytouch.c **** 	{ 	  
  82              		.loc 1 33 22 discriminator 2 view .LVU13
  33:Core/Src/Mytouch.c **** 	{ 	  
  83              		.loc 1 33 27 is_stmt 0 discriminator 2 view .LVU14
  84 0032 0135     		adds	r5, r5, #1
  85              	.LVL9:
  33:Core/Src/Mytouch.c **** 	{ 	  
  86              		.loc 1 33 27 discriminator 2 view .LVU15
  87 0034 EDB2     		uxtb	r5, r5
  88              	.LVL10:
  89              	.L2:
  33:Core/Src/Mytouch.c **** 	{ 	  
  90              		.loc 1 33 14 is_stmt 1 discriminator 1 view .LVU16
  33:Core/Src/Mytouch.c **** 	{ 	  
  91              		.loc 1 33 2 is_stmt 0 discriminator 1 view .LVU17
  92 0036 072D     		cmp	r5, #7
  93 0038 08D8     		bhi	.L7
  35:Core/Src/Mytouch.c **** 		else TDIN(0);   
  94              		.loc 1 35 3 is_stmt 1 view .LVU18
  35:Core/Src/Mytouch.c **** 		else TDIN(0);   
  95              		.loc 1 35 5 is_stmt 0 view .LVU19
  96 003a 14F0800F 		tst	r4, #128
  97 003e E3D0     		beq	.L3
  35:Core/Src/Mytouch.c **** 		else TDIN(0);   
  98              		.loc 1 35 15 is_stmt 1 discriminator 1 view .LVU20
  99 0040 0122     		movs	r2, #1
 100 0042 0821     		movs	r1, #8
 101 0044 0248     		ldr	r0, .L8
 102 0046 FFF7FEFF 		bl	HAL_GPIO_WritePin
 103              	.LVL11:
 104 004a E2E7     		b	.L4
 105              	.L7:
  41:Core/Src/Mytouch.c **** 	}		 			    
  42:Core/Src/Mytouch.c **** } 		 
 106              		.loc 1 42 1 is_stmt 0 view .LVU21
 107 004c 70BD     		pop	{r4, r5, r6, pc}
 108              	.LVL12:
 109              	.L9:
 110              		.loc 1 42 1 view .LVU22
 111 004e 00BF     		.align	2
 112              	.L8:
 113 0050 00200258 		.word	1476534272
 114 0054 001C0258 		.word	1476533248
 115              		.cfi_endproc
 116              	.LFE147:
 118              		.section	.text.TP_Read_AD,"ax",%progbits
 119              		.align	1
 120              		.global	TP_Read_AD
 121              		.syntax unified
 122              		.thumb
 123              		.thumb_func
ARM GAS  /tmp/cckdBZRC.s 			page 4


 125              	TP_Read_AD:
 126              	.LVL13:
 127              	.LFB148:
  43:Core/Src/Mytouch.c **** //SPI读数据 
  44:Core/Src/Mytouch.c **** //从触摸屏IC读取adc值
  45:Core/Src/Mytouch.c **** //CMD:指令
  46:Core/Src/Mytouch.c **** //返回值:读到的数据	   
  47:Core/Src/Mytouch.c **** u16 TP_Read_AD(u8 CMD)	  
  48:Core/Src/Mytouch.c **** { 	 
 128              		.loc 1 48 1 is_stmt 1 view -0
 129              		.cfi_startproc
 130              		@ args = 0, pretend = 0, frame = 0
 131              		@ frame_needed = 0, uses_anonymous_args = 0
 132              		.loc 1 48 1 is_stmt 0 view .LVU24
 133 0000 70B5     		push	{r4, r5, r6, lr}
 134              	.LCFI1:
 135              		.cfi_def_cfa_offset 16
 136              		.cfi_offset 4, -16
 137              		.cfi_offset 5, -12
 138              		.cfi_offset 6, -8
 139              		.cfi_offset 14, -4
 140 0002 0546     		mov	r5, r0
  49:Core/Src/Mytouch.c **** 	u8 count=0; 	  
 141              		.loc 1 49 2 is_stmt 1 view .LVU25
 142              	.LVL14:
  50:Core/Src/Mytouch.c **** 	u16 Num=0; 
 143              		.loc 1 50 2 view .LVU26
  51:Core/Src/Mytouch.c **** 	TCLK(0);		//先拉低时钟 	 
 144              		.loc 1 51 2 view .LVU27
 145 0004 2A4C     		ldr	r4, .L16
 146 0006 0022     		movs	r2, #0
 147 0008 4021     		movs	r1, #64
 148 000a 2046     		mov	r0, r4
 149              	.LVL15:
 150              		.loc 1 51 2 is_stmt 0 view .LVU28
 151 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 152              	.LVL16:
  52:Core/Src/Mytouch.c **** 	TDIN(0); 	//拉低数据线
 153              		.loc 1 52 2 is_stmt 1 view .LVU29
 154 0010 284E     		ldr	r6, .L16+4
 155 0012 0022     		movs	r2, #0
 156 0014 0821     		movs	r1, #8
 157 0016 3046     		mov	r0, r6
 158 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 159              	.LVL17:
  53:Core/Src/Mytouch.c **** 	TCS(0); 		//选中触摸屏IC
 160              		.loc 1 53 2 view .LVU30
 161 001c 0022     		movs	r2, #0
 162 001e 4FF48071 		mov	r1, #256
 163 0022 3046     		mov	r0, r6
 164 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 165              	.LVL18:
  54:Core/Src/Mytouch.c **** 	TP_Write_Byte(CMD);//发送命令字
 166              		.loc 1 54 2 view .LVU31
 167 0028 2846     		mov	r0, r5
 168 002a FFF7FEFF 		bl	TP_Write_Byte
 169              	.LVL19:
ARM GAS  /tmp/cckdBZRC.s 			page 5


  55:Core/Src/Mytouch.c **** 	delay_us(6);//ADS7846的转换时间最长为6us
 170              		.loc 1 55 2 view .LVU32
 171 002e 0620     		movs	r0, #6
 172 0030 FFF7FEFF 		bl	delay_us
 173              	.LVL20:
  56:Core/Src/Mytouch.c **** 	TCLK(0); 	     	    
 174              		.loc 1 56 2 view .LVU33
 175 0034 0022     		movs	r2, #0
 176 0036 4021     		movs	r1, #64
 177 0038 2046     		mov	r0, r4
 178 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 179              	.LVL21:
  57:Core/Src/Mytouch.c **** 	delay_us(1);    	   
 180              		.loc 1 57 2 view .LVU34
 181 003e 0120     		movs	r0, #1
 182 0040 FFF7FEFF 		bl	delay_us
 183              	.LVL22:
  58:Core/Src/Mytouch.c **** 	TCLK(1);		//给1个时钟，清除BUSY
 184              		.loc 1 58 2 view .LVU35
 185 0044 0122     		movs	r2, #1
 186 0046 4021     		movs	r1, #64
 187 0048 2046     		mov	r0, r4
 188 004a FFF7FEFF 		bl	HAL_GPIO_WritePin
 189              	.LVL23:
  59:Core/Src/Mytouch.c **** 	delay_us(1);    
 190              		.loc 1 59 2 view .LVU36
 191 004e 0120     		movs	r0, #1
 192 0050 FFF7FEFF 		bl	delay_us
 193              	.LVL24:
  60:Core/Src/Mytouch.c **** 	TCLK(0); 	     	    
 194              		.loc 1 60 2 view .LVU37
 195 0054 0022     		movs	r2, #0
 196 0056 4021     		movs	r1, #64
 197 0058 2046     		mov	r0, r4
 198 005a FFF7FEFF 		bl	HAL_GPIO_WritePin
 199              	.LVL25:
  61:Core/Src/Mytouch.c **** 	for(count=0;count<16;count++)//读出16位数据,只有高12位有效 
 200              		.loc 1 61 2 view .LVU38
  50:Core/Src/Mytouch.c **** 	TCLK(0);		//先拉低时钟 	 
 201              		.loc 1 50 6 is_stmt 0 view .LVU39
 202 005e 0024     		movs	r4, #0
 203              		.loc 1 61 11 view .LVU40
 204 0060 2546     		mov	r5, r4
 205              		.loc 1 61 2 view .LVU41
 206 0062 01E0     		b	.L11
 207              	.LVL26:
 208              	.L12:
 209              		.loc 1 61 23 is_stmt 1 discriminator 2 view .LVU42
 210              		.loc 1 61 28 is_stmt 0 discriminator 2 view .LVU43
 211 0064 0135     		adds	r5, r5, #1
 212              	.LVL27:
 213              		.loc 1 61 28 discriminator 2 view .LVU44
 214 0066 EDB2     		uxtb	r5, r5
 215              	.LVL28:
 216              	.L11:
 217              		.loc 1 61 14 is_stmt 1 discriminator 1 view .LVU45
 218              		.loc 1 61 2 is_stmt 0 discriminator 1 view .LVU46
ARM GAS  /tmp/cckdBZRC.s 			page 6


 219 0068 0F2D     		cmp	r5, #15
 220 006a 18D8     		bhi	.L15
  62:Core/Src/Mytouch.c **** 	{ 				  
  63:Core/Src/Mytouch.c **** 		Num<<=1; 	 
 221              		.loc 1 63 3 is_stmt 1 view .LVU47
 222              		.loc 1 63 6 is_stmt 0 view .LVU48
 223 006c 6400     		lsls	r4, r4, #1
 224              	.LVL29:
 225              		.loc 1 63 6 view .LVU49
 226 006e A4B2     		uxth	r4, r4
 227              	.LVL30:
  64:Core/Src/Mytouch.c **** 		TCLK(0);	//下降沿有效  	    	   
 228              		.loc 1 64 3 is_stmt 1 view .LVU50
 229 0070 0F4E     		ldr	r6, .L16
 230 0072 0022     		movs	r2, #0
 231 0074 4021     		movs	r1, #64
 232 0076 3046     		mov	r0, r6
 233 0078 FFF7FEFF 		bl	HAL_GPIO_WritePin
 234              	.LVL31:
  65:Core/Src/Mytouch.c **** 		delay_us(1);    
 235              		.loc 1 65 3 view .LVU51
 236 007c 0120     		movs	r0, #1
 237 007e FFF7FEFF 		bl	delay_us
 238              	.LVL32:
  66:Core/Src/Mytouch.c ****  		TCLK(1);
 239              		.loc 1 66 4 view .LVU52
 240 0082 0122     		movs	r2, #1
 241 0084 4021     		movs	r1, #64
 242 0086 3046     		mov	r0, r6
 243 0088 FFF7FEFF 		bl	HAL_GPIO_WritePin
 244              	.LVL33:
  67:Core/Src/Mytouch.c ****  		if(DOUT)Num++; 		 
 245              		.loc 1 67 4 view .LVU53
 246              		.loc 1 67 7 is_stmt 0 view .LVU54
 247 008c 0821     		movs	r1, #8
 248 008e 0A48     		ldr	r0, .L16+8
 249 0090 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 250              	.LVL34:
 251              		.loc 1 67 6 view .LVU55
 252 0094 0028     		cmp	r0, #0
 253 0096 E5D0     		beq	.L12
 254              		.loc 1 67 12 is_stmt 1 discriminator 1 view .LVU56
 255              		.loc 1 67 15 is_stmt 0 discriminator 1 view .LVU57
 256 0098 0134     		adds	r4, r4, #1
 257              	.LVL35:
 258              		.loc 1 67 15 discriminator 1 view .LVU58
 259 009a A4B2     		uxth	r4, r4
 260              	.LVL36:
 261              		.loc 1 67 15 discriminator 1 view .LVU59
 262 009c E2E7     		b	.L12
 263              	.L15:
  68:Core/Src/Mytouch.c **** 	}  	
  69:Core/Src/Mytouch.c **** 	Num>>=4;   	//只有高12位有效.
 264              		.loc 1 69 2 is_stmt 1 view .LVU60
 265              		.loc 1 69 5 is_stmt 0 view .LVU61
 266 009e 2409     		lsrs	r4, r4, #4
 267              	.LVL37:
ARM GAS  /tmp/cckdBZRC.s 			page 7


  70:Core/Src/Mytouch.c **** 	TCS(1);		//释放片选	 
 268              		.loc 1 70 2 is_stmt 1 view .LVU62
 269 00a0 0122     		movs	r2, #1
 270 00a2 4FF48071 		mov	r1, #256
 271 00a6 0348     		ldr	r0, .L16+4
 272 00a8 FFF7FEFF 		bl	HAL_GPIO_WritePin
 273              	.LVL38:
  71:Core/Src/Mytouch.c **** 	return(Num);   
 274              		.loc 1 71 2 view .LVU63
  72:Core/Src/Mytouch.c **** }
 275              		.loc 1 72 1 is_stmt 0 view .LVU64
 276 00ac 2046     		mov	r0, r4
 277 00ae 70BD     		pop	{r4, r5, r6, pc}
 278              	.LVL39:
 279              	.L17:
 280              		.loc 1 72 1 view .LVU65
 281              		.align	2
 282              	.L16:
 283 00b0 001C0258 		.word	1476533248
 284 00b4 00200258 		.word	1476534272
 285 00b8 00180258 		.word	1476532224
 286              		.cfi_endproc
 287              	.LFE148:
 289              		.section	.text.TP_Read_XOY,"ax",%progbits
 290              		.align	1
 291              		.global	TP_Read_XOY
 292              		.syntax unified
 293              		.thumb
 294              		.thumb_func
 296              	TP_Read_XOY:
 297              	.LVL40:
 298              	.LFB149:
  73:Core/Src/Mytouch.c **** //读取一个坐标值(x或者y)
  74:Core/Src/Mytouch.c **** //连续读取READ_TIMES次数据,对这些数据升序排列,
  75:Core/Src/Mytouch.c **** //然后去掉最低和最高LOST_VAL个数,取平均值 
  76:Core/Src/Mytouch.c **** //xy:指令（CMD_RDX/CMD_RDY）
  77:Core/Src/Mytouch.c **** //返回值:读到的数据
  78:Core/Src/Mytouch.c **** #define READ_TIMES 5 	//读取次数
  79:Core/Src/Mytouch.c **** #define LOST_VAL 1	  	//丢弃值
  80:Core/Src/Mytouch.c **** u16 TP_Read_XOY(u8 xy)
  81:Core/Src/Mytouch.c **** {
 299              		.loc 1 81 1 is_stmt 1 view -0
 300              		.cfi_startproc
 301              		@ args = 0, pretend = 0, frame = 16
 302              		@ frame_needed = 0, uses_anonymous_args = 0
 303              		.loc 1 81 1 is_stmt 0 view .LVU67
 304 0000 30B5     		push	{r4, r5, lr}
 305              	.LCFI2:
 306              		.cfi_def_cfa_offset 12
 307              		.cfi_offset 4, -12
 308              		.cfi_offset 5, -8
 309              		.cfi_offset 14, -4
 310 0002 85B0     		sub	sp, sp, #20
 311              	.LCFI3:
 312              		.cfi_def_cfa_offset 32
 313 0004 0546     		mov	r5, r0
  82:Core/Src/Mytouch.c **** 	u16 i, j;
ARM GAS  /tmp/cckdBZRC.s 			page 8


 314              		.loc 1 82 2 is_stmt 1 view .LVU68
  83:Core/Src/Mytouch.c **** 	u16 buf[READ_TIMES];
 315              		.loc 1 83 2 view .LVU69
  84:Core/Src/Mytouch.c **** 	u16 sum=0;
 316              		.loc 1 84 2 view .LVU70
 317              	.LVL41:
  85:Core/Src/Mytouch.c **** 	u16 temp;
 318              		.loc 1 85 2 view .LVU71
  86:Core/Src/Mytouch.c **** 	for(i=0;i<READ_TIMES;i++)buf[i]=TP_Read_AD(xy);		 		    
 319              		.loc 1 86 2 view .LVU72
 320              		.loc 1 86 7 is_stmt 0 view .LVU73
 321 0006 0024     		movs	r4, #0
 322              		.loc 1 86 2 view .LVU74
 323 0008 09E0     		b	.L19
 324              	.LVL42:
 325              	.L20:
 326              		.loc 1 86 27 is_stmt 1 discriminator 3 view .LVU75
 327              		.loc 1 86 34 is_stmt 0 discriminator 3 view .LVU76
 328 000a 2846     		mov	r0, r5
 329 000c FFF7FEFF 		bl	TP_Read_AD
 330              	.LVL43:
 331              		.loc 1 86 33 discriminator 3 view .LVU77
 332 0010 04AB     		add	r3, sp, #16
 333 0012 03EB4403 		add	r3, r3, r4, lsl #1
 334 0016 23F80C0C 		strh	r0, [r3, #-12]	@ movhi
 335              		.loc 1 86 23 is_stmt 1 discriminator 3 view .LVU78
 336              		.loc 1 86 24 is_stmt 0 discriminator 3 view .LVU79
 337 001a 0134     		adds	r4, r4, #1
 338              	.LVL44:
 339              		.loc 1 86 24 discriminator 3 view .LVU80
 340 001c A4B2     		uxth	r4, r4
 341              	.LVL45:
 342              	.L19:
 343              		.loc 1 86 10 is_stmt 1 discriminator 1 view .LVU81
 344              		.loc 1 86 2 is_stmt 0 discriminator 1 view .LVU82
 345 001e 042C     		cmp	r4, #4
 346 0020 F3D9     		bls	.L20
  87:Core/Src/Mytouch.c **** 	for(i=0;i<READ_TIMES-1; i++)//排序
 347              		.loc 1 87 7 view .LVU83
 348 0022 0020     		movs	r0, #0
 349 0024 1AE0     		b	.L21
 350              	.LVL46:
 351              	.L23:
  88:Core/Src/Mytouch.c **** 	{
  89:Core/Src/Mytouch.c **** 		for(j=i+1;j<READ_TIMES;j++)
 352              		.loc 1 89 26 is_stmt 1 discriminator 2 view .LVU84
 353              		.loc 1 89 27 is_stmt 0 discriminator 2 view .LVU85
 354 0026 0133     		adds	r3, r3, #1
 355              	.LVL47:
 356              		.loc 1 89 27 discriminator 2 view .LVU86
 357 0028 9BB2     		uxth	r3, r3
 358              	.LVL48:
 359              	.L22:
 360              		.loc 1 89 13 is_stmt 1 discriminator 1 view .LVU87
 361              		.loc 1 89 3 is_stmt 0 discriminator 1 view .LVU88
 362 002a 042B     		cmp	r3, #4
 363 002c 15D8     		bhi	.L29
ARM GAS  /tmp/cckdBZRC.s 			page 9


  90:Core/Src/Mytouch.c **** 		{
  91:Core/Src/Mytouch.c **** 			if(buf[i]>buf[j])//升序排列
 364              		.loc 1 91 4 is_stmt 1 view .LVU89
 365              		.loc 1 91 10 is_stmt 0 view .LVU90
 366 002e 04AA     		add	r2, sp, #16
 367 0030 02EB4002 		add	r2, r2, r0, lsl #1
 368 0034 32F80C2C 		ldrh	r2, [r2, #-12]
 369              		.loc 1 91 17 view .LVU91
 370 0038 04A9     		add	r1, sp, #16
 371 003a 01EB4301 		add	r1, r1, r3, lsl #1
 372 003e 31F80C1C 		ldrh	r1, [r1, #-12]
 373              		.loc 1 91 6 view .LVU92
 374 0042 8A42     		cmp	r2, r1
 375 0044 EFD9     		bls	.L23
  92:Core/Src/Mytouch.c **** 			{
  93:Core/Src/Mytouch.c **** 				temp=buf[i];
 376              		.loc 1 93 5 is_stmt 1 view .LVU93
 377              	.LVL49:
  94:Core/Src/Mytouch.c **** 				buf[i]=buf[j];
 378              		.loc 1 94 5 view .LVU94
 379              		.loc 1 94 11 is_stmt 0 view .LVU95
 380 0046 04AD     		add	r5, sp, #16
 381 0048 05EB400C 		add	ip, r5, r0, lsl #1
 382 004c 2CF80C1C 		strh	r1, [ip, #-12]	@ movhi
  95:Core/Src/Mytouch.c **** 				buf[j]=temp;
 383              		.loc 1 95 5 is_stmt 1 view .LVU96
 384              		.loc 1 95 11 is_stmt 0 view .LVU97
 385 0050 05EB4301 		add	r1, r5, r3, lsl #1
 386 0054 21F80C2C 		strh	r2, [r1, #-12]	@ movhi
 387 0058 E5E7     		b	.L23
 388              	.LVL50:
 389              	.L29:
  87:Core/Src/Mytouch.c **** 	{
 390              		.loc 1 87 27 view .LVU98
 391 005a 2046     		mov	r0, r4
 392              	.LVL51:
 393              	.L21:
  87:Core/Src/Mytouch.c **** 	{
 394              		.loc 1 87 10 is_stmt 1 discriminator 1 view .LVU99
  87:Core/Src/Mytouch.c **** 	{
 395              		.loc 1 87 2 is_stmt 0 discriminator 1 view .LVU100
 396 005c 0328     		cmp	r0, #3
 397 005e 03D8     		bhi	.L30
  89:Core/Src/Mytouch.c **** 		{
 398              		.loc 1 89 3 is_stmt 1 view .LVU101
  89:Core/Src/Mytouch.c **** 		{
 399              		.loc 1 89 8 is_stmt 0 view .LVU102
 400 0060 441C     		adds	r4, r0, #1
 401 0062 A4B2     		uxth	r4, r4
 402              	.LVL52:
  89:Core/Src/Mytouch.c **** 		{
 403              		.loc 1 89 8 view .LVU103
 404 0064 2346     		mov	r3, r4
  89:Core/Src/Mytouch.c **** 		{
 405              		.loc 1 89 3 view .LVU104
 406 0066 E0E7     		b	.L22
 407              	.LVL53:
ARM GAS  /tmp/cckdBZRC.s 			page 10


 408              	.L30:
  96:Core/Src/Mytouch.c **** 			}
  97:Core/Src/Mytouch.c **** 		}
  98:Core/Src/Mytouch.c **** 	}	  
  99:Core/Src/Mytouch.c **** 	sum=0;
 409              		.loc 1 99 5 view .LVU105
 410 0068 0020     		movs	r0, #0
 411              	.LVL54:
 100:Core/Src/Mytouch.c **** 	for(i=LOST_VAL;i<READ_TIMES-LOST_VAL;i++)sum+=buf[i];
 412              		.loc 1 100 7 view .LVU106
 413 006a 0123     		movs	r3, #1
 414 006c 08E0     		b	.L26
 415              	.LVL55:
 416              	.L27:
 417              		.loc 1 100 43 is_stmt 1 discriminator 3 view .LVU107
 418              		.loc 1 100 51 is_stmt 0 discriminator 3 view .LVU108
 419 006e 04AA     		add	r2, sp, #16
 420 0070 02EB4302 		add	r2, r2, r3, lsl #1
 421 0074 32F80C2C 		ldrh	r2, [r2, #-12]
 422              		.loc 1 100 46 discriminator 3 view .LVU109
 423 0078 1044     		add	r0, r0, r2
 424              	.LVL56:
 425              		.loc 1 100 46 discriminator 3 view .LVU110
 426 007a 80B2     		uxth	r0, r0
 427              	.LVL57:
 428              		.loc 1 100 39 is_stmt 1 discriminator 3 view .LVU111
 429              		.loc 1 100 40 is_stmt 0 discriminator 3 view .LVU112
 430 007c 0133     		adds	r3, r3, #1
 431              	.LVL58:
 432              		.loc 1 100 40 discriminator 3 view .LVU113
 433 007e 9BB2     		uxth	r3, r3
 434              	.LVL59:
 435              	.L26:
 436              		.loc 1 100 17 is_stmt 1 discriminator 1 view .LVU114
 437              		.loc 1 100 2 is_stmt 0 discriminator 1 view .LVU115
 438 0080 032B     		cmp	r3, #3
 439 0082 F4D9     		bls	.L27
 101:Core/Src/Mytouch.c **** 	temp=sum/(READ_TIMES-2*LOST_VAL);
 440              		.loc 1 101 2 is_stmt 1 view .LVU116
 441              		.loc 1 101 6 is_stmt 0 view .LVU117
 442 0084 034B     		ldr	r3, .L31
 443              	.LVL60:
 444              		.loc 1 101 6 view .LVU118
 445 0086 A3FB0030 		umull	r3, r0, r3, r0
 446              	.LVL61:
 102:Core/Src/Mytouch.c **** 	return temp;   
 447              		.loc 1 102 2 is_stmt 1 view .LVU119
 103:Core/Src/Mytouch.c **** } 
 448              		.loc 1 103 1 is_stmt 0 view .LVU120
 449 008a C0F34F00 		ubfx	r0, r0, #1, #16
 450              	.LVL62:
 451              		.loc 1 103 1 view .LVU121
 452 008e 05B0     		add	sp, sp, #20
 453              	.LCFI4:
 454              		.cfi_def_cfa_offset 12
 455              		@ sp needed
 456 0090 30BD     		pop	{r4, r5, pc}
ARM GAS  /tmp/cckdBZRC.s 			page 11


 457              	.L32:
 458 0092 00BF     		.align	2
 459              	.L31:
 460 0094 ABAAAAAA 		.word	-1431655765
 461              		.cfi_endproc
 462              	.LFE149:
 464              		.section	.text.TP_Read_XY,"ax",%progbits
 465              		.align	1
 466              		.global	TP_Read_XY
 467              		.syntax unified
 468              		.thumb
 469              		.thumb_func
 471              	TP_Read_XY:
 472              	.LVL63:
 473              	.LFB150:
 104:Core/Src/Mytouch.c **** //读取x,y坐标
 105:Core/Src/Mytouch.c **** //最小值不能少于100.
 106:Core/Src/Mytouch.c **** //x,y:读取到的坐标值
 107:Core/Src/Mytouch.c **** //返回值:0,失败;1,成功。
 108:Core/Src/Mytouch.c **** u8 TP_Read_XY(u16 *x,u16 *y)
 109:Core/Src/Mytouch.c **** {
 474              		.loc 1 109 1 is_stmt 1 view -0
 475              		.cfi_startproc
 476              		@ args = 0, pretend = 0, frame = 0
 477              		@ frame_needed = 0, uses_anonymous_args = 0
 478              		.loc 1 109 1 is_stmt 0 view .LVU123
 479 0000 70B5     		push	{r4, r5, r6, lr}
 480              	.LCFI5:
 481              		.cfi_def_cfa_offset 16
 482              		.cfi_offset 4, -16
 483              		.cfi_offset 5, -12
 484              		.cfi_offset 6, -8
 485              		.cfi_offset 14, -4
 486 0002 0546     		mov	r5, r0
 487 0004 0C46     		mov	r4, r1
 110:Core/Src/Mytouch.c **** 	u16 xtemp,ytemp;			 	 		  
 488              		.loc 1 110 2 is_stmt 1 view .LVU124
 111:Core/Src/Mytouch.c **** 	xtemp=TP_Read_XOY(CMD_RDX);
 489              		.loc 1 111 2 view .LVU125
 490              		.loc 1 111 8 is_stmt 0 view .LVU126
 491 0006 064B     		ldr	r3, .L35
 492 0008 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 493              	.LVL64:
 494              		.loc 1 111 8 view .LVU127
 495 000a FFF7FEFF 		bl	TP_Read_XOY
 496              	.LVL65:
 497              		.loc 1 111 8 view .LVU128
 498 000e 0646     		mov	r6, r0
 499              	.LVL66:
 112:Core/Src/Mytouch.c **** 	ytemp=TP_Read_XOY(CMD_RDY);	  												   
 500              		.loc 1 112 2 is_stmt 1 view .LVU129
 501              		.loc 1 112 8 is_stmt 0 view .LVU130
 502 0010 044B     		ldr	r3, .L35+4
 503 0012 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 504 0014 FFF7FEFF 		bl	TP_Read_XOY
 505              	.LVL67:
 113:Core/Src/Mytouch.c **** 	//if(xtemp<100||ytemp<100)return 0;//读数失败
ARM GAS  /tmp/cckdBZRC.s 			page 12


 114:Core/Src/Mytouch.c **** 	*x=xtemp;
 506              		.loc 1 114 2 is_stmt 1 view .LVU131
 507              		.loc 1 114 4 is_stmt 0 view .LVU132
 508 0018 2E80     		strh	r6, [r5]	@ movhi
 115:Core/Src/Mytouch.c **** 	*y=ytemp;
 509              		.loc 1 115 2 is_stmt 1 view .LVU133
 510              		.loc 1 115 4 is_stmt 0 view .LVU134
 511 001a 2080     		strh	r0, [r4]	@ movhi
 116:Core/Src/Mytouch.c **** 	return 1;//读数成功
 512              		.loc 1 116 2 is_stmt 1 view .LVU135
 117:Core/Src/Mytouch.c **** }
 513              		.loc 1 117 1 is_stmt 0 view .LVU136
 514 001c 0120     		movs	r0, #1
 515              	.LVL68:
 516              		.loc 1 117 1 view .LVU137
 517 001e 70BD     		pop	{r4, r5, r6, pc}
 518              	.LVL69:
 519              	.L36:
 520              		.loc 1 117 1 view .LVU138
 521              		.align	2
 522              	.L35:
 523 0020 00000000 		.word	.LANCHOR0
 524 0024 00000000 		.word	.LANCHOR1
 525              		.cfi_endproc
 526              	.LFE150:
 528              		.section	.text.TP_Read_XY2,"ax",%progbits
 529              		.align	1
 530              		.global	TP_Read_XY2
 531              		.syntax unified
 532              		.thumb
 533              		.thumb_func
 535              	TP_Read_XY2:
 536              	.LVL70:
 537              	.LFB151:
 118:Core/Src/Mytouch.c **** //连续2次读取触摸屏IC,且这两次的偏差不能超过
 119:Core/Src/Mytouch.c **** //ERR_RANGE,满足条件,则认为读数正确,否则读数错误.	   
 120:Core/Src/Mytouch.c **** //该函数能大大提高准确度
 121:Core/Src/Mytouch.c **** //x,y:读取到的坐标值
 122:Core/Src/Mytouch.c **** //返回值:0,失败;1,成功。
 123:Core/Src/Mytouch.c **** #define ERR_RANGE 50 //误差范围 
 124:Core/Src/Mytouch.c **** u8 TP_Read_XY2(u16 *x,u16 *y) 
 125:Core/Src/Mytouch.c **** {
 538              		.loc 1 125 1 is_stmt 1 view -0
 539              		.cfi_startproc
 540              		@ args = 0, pretend = 0, frame = 8
 541              		@ frame_needed = 0, uses_anonymous_args = 0
 542              		.loc 1 125 1 is_stmt 0 view .LVU140
 543 0000 30B5     		push	{r4, r5, lr}
 544              	.LCFI6:
 545              		.cfi_def_cfa_offset 12
 546              		.cfi_offset 4, -12
 547              		.cfi_offset 5, -8
 548              		.cfi_offset 14, -4
 549 0002 83B0     		sub	sp, sp, #12
 550              	.LCFI7:
 551              		.cfi_def_cfa_offset 24
 552 0004 0546     		mov	r5, r0
ARM GAS  /tmp/cckdBZRC.s 			page 13


 553 0006 0C46     		mov	r4, r1
 126:Core/Src/Mytouch.c **** 	u16 x1,y1;
 554              		.loc 1 126 2 is_stmt 1 view .LVU141
 127:Core/Src/Mytouch.c ****  	u16 x2,y2;
 555              		.loc 1 127 3 view .LVU142
 128:Core/Src/Mytouch.c ****  	u8 flag;    
 556              		.loc 1 128 3 view .LVU143
 129:Core/Src/Mytouch.c ****     flag=TP_Read_XY(&x1,&y1);   
 557              		.loc 1 129 5 view .LVU144
 558              		.loc 1 129 10 is_stmt 0 view .LVU145
 559 0008 01A9     		add	r1, sp, #4
 560              	.LVL71:
 561              		.loc 1 129 10 view .LVU146
 562 000a 0DF10600 		add	r0, sp, #6
 563              	.LVL72:
 564              		.loc 1 129 10 view .LVU147
 565 000e FFF7FEFF 		bl	TP_Read_XY
 566              	.LVL73:
 130:Core/Src/Mytouch.c ****     if(flag==0)return(0);
 567              		.loc 1 130 5 is_stmt 1 view .LVU148
 568              		.loc 1 130 7 is_stmt 0 view .LVU149
 569 0012 08B9     		cbnz	r0, .L50
 570              	.L38:
 131:Core/Src/Mytouch.c ****     flag=TP_Read_XY(&x2,&y2);	   
 132:Core/Src/Mytouch.c ****     if(flag==0)return(0);   
 133:Core/Src/Mytouch.c ****     if(((x2<=x1&&x1<x2+ERR_RANGE)||(x1<=x2&&x2<x1+ERR_RANGE))//前后两次采样在+-50内
 134:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 135:Core/Src/Mytouch.c ****     {
 136:Core/Src/Mytouch.c ****         *x=(x1+x2)/2;
 137:Core/Src/Mytouch.c ****         *y=(y1+y2)/2;
 138:Core/Src/Mytouch.c ****         return 1;
 139:Core/Src/Mytouch.c ****     }else return 0;	  
 140:Core/Src/Mytouch.c **** }   
 571              		.loc 1 140 1 view .LVU150
 572 0014 03B0     		add	sp, sp, #12
 573              	.LCFI8:
 574              		.cfi_remember_state
 575              		.cfi_def_cfa_offset 12
 576              		@ sp needed
 577 0016 30BD     		pop	{r4, r5, pc}
 578              	.LVL74:
 579              	.L50:
 580              	.LCFI9:
 581              		.cfi_restore_state
 131:Core/Src/Mytouch.c ****     flag=TP_Read_XY(&x2,&y2);	   
 582              		.loc 1 131 5 is_stmt 1 view .LVU151
 131:Core/Src/Mytouch.c ****     flag=TP_Read_XY(&x2,&y2);	   
 583              		.loc 1 131 10 is_stmt 0 view .LVU152
 584 0018 6946     		mov	r1, sp
 585 001a 0DF10200 		add	r0, sp, #2
 586 001e FFF7FEFF 		bl	TP_Read_XY
 587              	.LVL75:
 132:Core/Src/Mytouch.c ****     if(((x2<=x1&&x1<x2+ERR_RANGE)||(x1<=x2&&x2<x1+ERR_RANGE))//前后两次采样在+-50内
 588              		.loc 1 132 5 is_stmt 1 view .LVU153
 132:Core/Src/Mytouch.c ****     if(((x2<=x1&&x1<x2+ERR_RANGE)||(x1<=x2&&x2<x1+ERR_RANGE))//前后两次采样在+-50内
 589              		.loc 1 132 7 is_stmt 0 view .LVU154
 590 0022 0028     		cmp	r0, #0
ARM GAS  /tmp/cckdBZRC.s 			page 14


 591 0024 F6D0     		beq	.L38
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 592              		.loc 1 133 5 is_stmt 1 view .LVU155
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 593              		.loc 1 133 12 is_stmt 0 view .LVU156
 594 0026 BDF80220 		ldrh	r2, [sp, #2]
 595 002a BDF80630 		ldrh	r3, [sp, #6]
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 596              		.loc 1 133 7 view .LVU157
 597 002e 9A42     		cmp	r2, r3
 598 0030 03D8     		bhi	.L39
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 599              		.loc 1 133 20 discriminator 1 view .LVU158
 600 0032 02F13101 		add	r1, r2, #49
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 601              		.loc 1 133 16 discriminator 1 view .LVU159
 602 0036 9942     		cmp	r1, r3
 603 0038 05DA     		bge	.L40
 604              	.L39:
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 605              		.loc 1 133 34 discriminator 3 view .LVU160
 606 003a 9A42     		cmp	r2, r3
 607 003c 1ED3     		bcc	.L45
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 608              		.loc 1 133 47 discriminator 4 view .LVU161
 609 003e 03F13101 		add	r1, r3, #49
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 610              		.loc 1 133 43 discriminator 4 view .LVU162
 611 0042 9142     		cmp	r1, r2
 612 0044 1CDB     		blt	.L46
 613              	.L40:
 134:Core/Src/Mytouch.c ****     {
 614              		.loc 1 134 11 view .LVU163
 615 0046 BDF80000 		ldrh	r0, [sp]
 616              	.LVL76:
 134:Core/Src/Mytouch.c ****     {
 617              		.loc 1 134 11 view .LVU164
 618 004a BDF80410 		ldrh	r1, [sp, #4]
 134:Core/Src/Mytouch.c ****     {
 619              		.loc 1 134 5 view .LVU165
 620 004e 8842     		cmp	r0, r1
 621 0050 03D8     		bhi	.L41
 134:Core/Src/Mytouch.c ****     {
 622              		.loc 1 134 19 discriminator 1 view .LVU166
 623 0052 00F1310C 		add	ip, r0, #49
 134:Core/Src/Mytouch.c ****     {
 624              		.loc 1 134 15 discriminator 1 view .LVU167
 625 0056 8C45     		cmp	ip, r1
 626 0058 04DA     		bge	.L42
 627              	.L41:
 134:Core/Src/Mytouch.c ****     {
 628              		.loc 1 134 33 discriminator 3 view .LVU168
 629 005a 8842     		cmp	r0, r1
 630 005c 12D3     		bcc	.L47
 134:Core/Src/Mytouch.c ****     {
 631              		.loc 1 134 46 discriminator 4 view .LVU169
 632 005e 3131     		adds	r1, r1, #49
ARM GAS  /tmp/cckdBZRC.s 			page 15


 134:Core/Src/Mytouch.c ****     {
 633              		.loc 1 134 42 discriminator 4 view .LVU170
 634 0060 8142     		cmp	r1, r0
 635 0062 11DB     		blt	.L48
 636              	.L42:
 136:Core/Src/Mytouch.c ****         *y=(y1+y2)/2;
 637              		.loc 1 136 9 is_stmt 1 view .LVU171
 136:Core/Src/Mytouch.c ****         *y=(y1+y2)/2;
 638              		.loc 1 136 19 is_stmt 0 view .LVU172
 639 0064 1344     		add	r3, r3, r2
 640 0066 5B10     		asrs	r3, r3, #1
 136:Core/Src/Mytouch.c ****         *y=(y1+y2)/2;
 641              		.loc 1 136 11 view .LVU173
 642 0068 2B80     		strh	r3, [r5]	@ movhi
 137:Core/Src/Mytouch.c ****         return 1;
 643              		.loc 1 137 9 is_stmt 1 view .LVU174
 137:Core/Src/Mytouch.c ****         return 1;
 644              		.loc 1 137 15 is_stmt 0 view .LVU175
 645 006a BDF80430 		ldrh	r3, [sp, #4]
 646 006e BDF80020 		ldrh	r2, [sp]
 137:Core/Src/Mytouch.c ****         return 1;
 647              		.loc 1 137 19 view .LVU176
 648 0072 1344     		add	r3, r3, r2
 649 0074 5B10     		asrs	r3, r3, #1
 137:Core/Src/Mytouch.c ****         return 1;
 650              		.loc 1 137 11 view .LVU177
 651 0076 2380     		strh	r3, [r4]	@ movhi
 138:Core/Src/Mytouch.c ****     }else return 0;	  
 652              		.loc 1 138 9 is_stmt 1 view .LVU178
 138:Core/Src/Mytouch.c ****     }else return 0;	  
 653              		.loc 1 138 16 is_stmt 0 view .LVU179
 654 0078 0120     		movs	r0, #1
 655 007a CBE7     		b	.L38
 656              	.LVL77:
 657              	.L45:
 139:Core/Src/Mytouch.c **** }   
 658              		.loc 1 139 18 view .LVU180
 659 007c 0020     		movs	r0, #0
 660              	.LVL78:
 139:Core/Src/Mytouch.c **** }   
 661              		.loc 1 139 18 view .LVU181
 662 007e C9E7     		b	.L38
 663              	.LVL79:
 664              	.L46:
 139:Core/Src/Mytouch.c **** }   
 665              		.loc 1 139 18 view .LVU182
 666 0080 0020     		movs	r0, #0
 667              	.LVL80:
 139:Core/Src/Mytouch.c **** }   
 668              		.loc 1 139 18 view .LVU183
 669 0082 C7E7     		b	.L38
 670              	.L47:
 671 0084 0020     		movs	r0, #0
 672 0086 C5E7     		b	.L38
 673              	.L48:
 674 0088 0020     		movs	r0, #0
 675 008a C3E7     		b	.L38
ARM GAS  /tmp/cckdBZRC.s 			page 16


 676              		.cfi_endproc
 677              	.LFE151:
 679              		.section	.text.TP_Scan,"ax",%progbits
 680              		.align	1
 681              		.global	TP_Scan
 682              		.syntax unified
 683              		.thumb
 684              		.thumb_func
 686              	TP_Scan:
 687              	.LVL81:
 688              	.LFB154:
 141:Core/Src/Mytouch.c **** //////////////////////////////////////////////////////////////////////////////////		  
 142:Core/Src/Mytouch.c **** //与LCD部分有关的函数  
 143:Core/Src/Mytouch.c **** //画一个触摸点
 144:Core/Src/Mytouch.c **** //用来校准用的
 145:Core/Src/Mytouch.c **** //x,y:坐标
 146:Core/Src/Mytouch.c **** //color:颜色
 147:Core/Src/Mytouch.c **** void TP_Drow_Touch_Point(u16 x,u16 y,u16 color)
 148:Core/Src/Mytouch.c **** {
 149:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 150:Core/Src/Mytouch.c **** 	LCD_DrawLine(x-12,y,x+13,y);//横线
 151:Core/Src/Mytouch.c **** 	LCD_DrawLine(x,y-12,x,y+13);//竖线
 152:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y+1);
 153:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x-1,y+1);
 154:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y-1);
 155:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x-1,y-1);
 156:Core/Src/Mytouch.c **** 	LCD_Draw_Circle(x,y,6);//画中心圈
 157:Core/Src/Mytouch.c **** }	  
 158:Core/Src/Mytouch.c **** //画一个大点(2*2的点)		   
 159:Core/Src/Mytouch.c **** //x,y:坐标
 160:Core/Src/Mytouch.c **** //color:颜色
 161:Core/Src/Mytouch.c **** void TP_Draw_Big_Point(u16 x,u16 y,u16 color)
 162:Core/Src/Mytouch.c **** {	    
 163:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 164:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y);//中心点 
 165:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y);
 166:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y+1);
 167:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y+1);	 	  	
 168:Core/Src/Mytouch.c **** }							  
 169:Core/Src/Mytouch.c **** //////////////////////////////////////////////////////////////////////////////////		  
 170:Core/Src/Mytouch.c **** //触摸按键扫描
 171:Core/Src/Mytouch.c **** //tp:0,屏幕坐标;1,物理坐标(校准等特殊场合用)
 172:Core/Src/Mytouch.c **** //返回值:当前触屏状态.
 173:Core/Src/Mytouch.c **** //0,触屏无触摸;1,触屏有触摸
 174:Core/Src/Mytouch.c **** u8 TP_Scan(u8 tp)
 175:Core/Src/Mytouch.c **** {			   
 689              		.loc 1 175 1 is_stmt 1 view -0
 690              		.cfi_startproc
 691              		@ args = 0, pretend = 0, frame = 0
 692              		@ frame_needed = 0, uses_anonymous_args = 0
 693              		.loc 1 175 1 is_stmt 0 view .LVU185
 694 0000 10B5     		push	{r4, lr}
 695              	.LCFI10:
 696              		.cfi_def_cfa_offset 8
 697              		.cfi_offset 4, -8
 698              		.cfi_offset 14, -4
 699 0002 0446     		mov	r4, r0
ARM GAS  /tmp/cckdBZRC.s 			page 17


 176:Core/Src/Mytouch.c **** 	if(PEN==0)//有按键按下
 700              		.loc 1 176 2 is_stmt 1 view .LVU186
 701              		.loc 1 176 5 is_stmt 0 view .LVU187
 702 0004 8021     		movs	r1, #128
 703 0006 3548     		ldr	r0, .L59
 704              	.LVL82:
 705              		.loc 1 176 5 view .LVU188
 706 0008 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 707              	.LVL83:
 708              		.loc 1 176 4 view .LVU189
 709 000c 0028     		cmp	r0, #0
 710 000e 4FD1     		bne	.L52
 177:Core/Src/Mytouch.c **** 	{
 178:Core/Src/Mytouch.c **** 		if(tp)TP_Read_XY2(&tp_dev.x[0],&tp_dev.y[0]);//读取物理坐标
 711              		.loc 1 178 3 is_stmt 1 view .LVU190
 712              		.loc 1 178 5 is_stmt 0 view .LVU191
 713 0010 C4B1     		cbz	r4, .L53
 714              		.loc 1 178 9 is_stmt 1 discriminator 1 view .LVU192
 715 0012 3348     		ldr	r0, .L59+4
 716 0014 00F11601 		add	r1, r0, #22
 717 0018 0C30     		adds	r0, r0, #12
 718 001a FFF7FEFF 		bl	TP_Read_XY2
 719              	.LVL84:
 720              	.L54:
 179:Core/Src/Mytouch.c **** 		else if(TP_Read_XY2(&tp_dev.x[0],&tp_dev.y[0]))//读取屏幕坐标
 180:Core/Src/Mytouch.c **** 		{
 181:Core/Src/Mytouch.c **** 	 		tp_dev.x[0]=tp_dev.xfac*tp_dev.x[0]+tp_dev.xoff;//将结果转换为屏幕坐标
 182:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 183:Core/Src/Mytouch.c **** 	 	} 
 184:Core/Src/Mytouch.c **** 		if((tp_dev.sta&TP_PRES_DOWN)==0)//之前没有被按下
 721              		.loc 1 184 3 view .LVU193
 722              		.loc 1 184 31 is_stmt 0 view .LVU194
 723 001e 304B     		ldr	r3, .L59+4
 724 0020 93F92030 		ldrsb	r3, [r3, #32]
 725              		.loc 1 184 5 view .LVU195
 726 0024 002B     		cmp	r3, #0
 727 0026 07DB     		blt	.L55
 185:Core/Src/Mytouch.c **** 		{		 
 186:Core/Src/Mytouch.c **** 			tp_dev.sta=TP_PRES_DOWN|TP_CATH_PRES;//按键按下  
 728              		.loc 1 186 4 is_stmt 1 view .LVU196
 729              		.loc 1 186 14 is_stmt 0 view .LVU197
 730 0028 2D4B     		ldr	r3, .L59+4
 731 002a C022     		movs	r2, #192
 732 002c 83F82020 		strb	r2, [r3, #32]
 187:Core/Src/Mytouch.c **** 			tp_dev.x[4]=tp_dev.x[0];//记录第一次按下时的坐标
 733              		.loc 1 187 4 is_stmt 1 view .LVU198
 734              		.loc 1 187 24 is_stmt 0 view .LVU199
 735 0030 9A89     		ldrh	r2, [r3, #12]
 736              		.loc 1 187 15 view .LVU200
 737 0032 9A82     		strh	r2, [r3, #20]	@ movhi
 188:Core/Src/Mytouch.c **** 			tp_dev.y[4]=tp_dev.y[0];  	   			 
 738              		.loc 1 188 4 is_stmt 1 view .LVU201
 739              		.loc 1 188 24 is_stmt 0 view .LVU202
 740 0034 DA8A     		ldrh	r2, [r3, #22]
 741              		.loc 1 188 15 view .LVU203
 742 0036 DA83     		strh	r2, [r3, #30]	@ movhi
 743              	.L55:
ARM GAS  /tmp/cckdBZRC.s 			page 18


 189:Core/Src/Mytouch.c **** 		}			   
 190:Core/Src/Mytouch.c **** 	}else
 191:Core/Src/Mytouch.c **** 	{
 192:Core/Src/Mytouch.c **** 		if(tp_dev.sta&TP_PRES_DOWN)//之前是被按下的
 193:Core/Src/Mytouch.c **** 		{
 194:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<7);//标记按键松开	
 195:Core/Src/Mytouch.c **** 		}else//之前就没有被按下
 196:Core/Src/Mytouch.c **** 		{
 197:Core/Src/Mytouch.c **** 			tp_dev.x[4]=0;
 198:Core/Src/Mytouch.c **** 			tp_dev.y[4]=0;
 199:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 200:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 201:Core/Src/Mytouch.c **** 		}	    
 202:Core/Src/Mytouch.c **** 	}
 203:Core/Src/Mytouch.c **** 	return tp_dev.sta&TP_PRES_DOWN;//返回当前的触屏状态
 744              		.loc 1 203 2 is_stmt 1 view .LVU204
 745              		.loc 1 203 15 is_stmt 0 view .LVU205
 746 0038 294B     		ldr	r3, .L59+4
 747 003a 93F82000 		ldrb	r0, [r3, #32]	@ zero_extendqisi2
 204:Core/Src/Mytouch.c **** }  
 748              		.loc 1 204 1 view .LVU206
 749 003e 00F08000 		and	r0, r0, #128
 750 0042 10BD     		pop	{r4, pc}
 751              	.L53:
 179:Core/Src/Mytouch.c **** 		{
 752              		.loc 1 179 8 is_stmt 1 view .LVU207
 179:Core/Src/Mytouch.c **** 		{
 753              		.loc 1 179 11 is_stmt 0 view .LVU208
 754 0044 2648     		ldr	r0, .L59+4
 755 0046 00F11601 		add	r1, r0, #22
 756 004a 0C30     		adds	r0, r0, #12
 757 004c FFF7FEFF 		bl	TP_Read_XY2
 758              	.LVL85:
 179:Core/Src/Mytouch.c **** 		{
 759              		.loc 1 179 10 view .LVU209
 760 0050 0028     		cmp	r0, #0
 761 0052 E4D0     		beq	.L54
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 762              		.loc 1 181 5 is_stmt 1 view .LVU210
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 763              		.loc 1 181 23 is_stmt 0 view .LVU211
 764 0054 224B     		ldr	r3, .L59+4
 765 0056 93ED097A 		vldr.32	s14, [r3, #36]
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 766              		.loc 1 181 37 view .LVU212
 767 005a 9A89     		ldrh	r2, [r3, #12]
 768 005c 07EE902A 		vmov	s15, r2	@ int
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 769              		.loc 1 181 28 view .LVU213
 770 0060 F8EEE77A 		vcvt.f32.s32	s15, s15
 771 0064 27EE877A 		vmul.f32	s14, s15, s14
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 772              		.loc 1 181 47 view .LVU214
 773 0068 B3F92C20 		ldrsh	r2, [r3, #44]
 774 006c 07EE902A 		vmov	s15, r2	@ int
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 775              		.loc 1 181 40 view .LVU215
ARM GAS  /tmp/cckdBZRC.s 			page 19


 776 0070 F8EEE77A 		vcvt.f32.s32	s15, s15
 777 0074 77EE877A 		vadd.f32	s15, s15, s14
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 778              		.loc 1 181 16 view .LVU216
 779 0078 FCEEE77A 		vcvt.u32.f32	s15, s15
 780 007c 17EE902A 		vmov	r2, s15	@ int
 781 0080 9A81     		strh	r2, [r3, #12]	@ movhi
 182:Core/Src/Mytouch.c **** 	 	} 
 782              		.loc 1 182 4 is_stmt 1 view .LVU217
 182:Core/Src/Mytouch.c **** 	 	} 
 783              		.loc 1 182 22 is_stmt 0 view .LVU218
 784 0082 93ED0A7A 		vldr.32	s14, [r3, #40]
 182:Core/Src/Mytouch.c **** 	 	} 
 785              		.loc 1 182 36 view .LVU219
 786 0086 DA8A     		ldrh	r2, [r3, #22]
 787 0088 07EE902A 		vmov	s15, r2	@ int
 182:Core/Src/Mytouch.c **** 	 	} 
 788              		.loc 1 182 27 view .LVU220
 789 008c F8EEE77A 		vcvt.f32.s32	s15, s15
 790 0090 27EE877A 		vmul.f32	s14, s15, s14
 182:Core/Src/Mytouch.c **** 	 	} 
 791              		.loc 1 182 46 view .LVU221
 792 0094 B3F92E20 		ldrsh	r2, [r3, #46]
 793 0098 07EE902A 		vmov	s15, r2	@ int
 182:Core/Src/Mytouch.c **** 	 	} 
 794              		.loc 1 182 39 view .LVU222
 795 009c F8EEE77A 		vcvt.f32.s32	s15, s15
 796 00a0 77EE877A 		vadd.f32	s15, s15, s14
 182:Core/Src/Mytouch.c **** 	 	} 
 797              		.loc 1 182 15 view .LVU223
 798 00a4 FCEEE77A 		vcvt.u32.f32	s15, s15
 799 00a8 17EE902A 		vmov	r2, s15	@ int
 800 00ac DA82     		strh	r2, [r3, #22]	@ movhi
 801 00ae B6E7     		b	.L54
 802              	.L52:
 192:Core/Src/Mytouch.c **** 		{
 803              		.loc 1 192 3 is_stmt 1 view .LVU224
 192:Core/Src/Mytouch.c **** 		{
 804              		.loc 1 192 12 is_stmt 0 view .LVU225
 805 00b0 0B4B     		ldr	r3, .L59+4
 806 00b2 93F82020 		ldrb	r2, [r3, #32]	@ zero_extendqisi2
 192:Core/Src/Mytouch.c **** 		{
 807              		.loc 1 192 6 view .LVU226
 808 00b6 93F92030 		ldrsb	r3, [r3, #32]
 192:Core/Src/Mytouch.c **** 		{
 809              		.loc 1 192 5 view .LVU227
 810 00ba 002B     		cmp	r3, #0
 811 00bc 08DB     		blt	.L58
 197:Core/Src/Mytouch.c **** 			tp_dev.y[4]=0;
 812              		.loc 1 197 4 is_stmt 1 view .LVU228
 197:Core/Src/Mytouch.c **** 			tp_dev.y[4]=0;
 813              		.loc 1 197 15 is_stmt 0 view .LVU229
 814 00be 084B     		ldr	r3, .L59+4
 815 00c0 0022     		movs	r2, #0
 816 00c2 9A82     		strh	r2, [r3, #20]	@ movhi
 198:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 817              		.loc 1 198 4 is_stmt 1 view .LVU230
ARM GAS  /tmp/cckdBZRC.s 			page 20


 198:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 818              		.loc 1 198 15 is_stmt 0 view .LVU231
 819 00c4 DA83     		strh	r2, [r3, #30]	@ movhi
 199:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 820              		.loc 1 199 4 is_stmt 1 view .LVU232
 199:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 821              		.loc 1 199 15 is_stmt 0 view .LVU233
 822 00c6 4FF6FF72 		movw	r2, #65535
 823 00ca 9A81     		strh	r2, [r3, #12]	@ movhi
 200:Core/Src/Mytouch.c **** 		}	    
 824              		.loc 1 200 4 is_stmt 1 view .LVU234
 200:Core/Src/Mytouch.c **** 		}	    
 825              		.loc 1 200 15 is_stmt 0 view .LVU235
 826 00cc DA82     		strh	r2, [r3, #22]	@ movhi
 827 00ce B3E7     		b	.L55
 828              	.L58:
 194:Core/Src/Mytouch.c **** 		}else//之前就没有被按下
 829              		.loc 1 194 4 is_stmt 1 view .LVU236
 194:Core/Src/Mytouch.c **** 		}else//之前就没有被按下
 830              		.loc 1 194 14 is_stmt 0 view .LVU237
 831 00d0 02F07F02 		and	r2, r2, #127
 832 00d4 024B     		ldr	r3, .L59+4
 833 00d6 83F82020 		strb	r2, [r3, #32]
 834 00da ADE7     		b	.L55
 835              	.L60:
 836              		.align	2
 837              	.L59:
 838 00dc 001C0258 		.word	1476533248
 839 00e0 00000000 		.word	.LANCHOR2
 840              		.cfi_endproc
 841              	.LFE154:
 843              		.section	.text.TP_Drow_Touch_Point,"ax",%progbits
 844              		.align	1
 845              		.global	TP_Drow_Touch_Point
 846              		.syntax unified
 847              		.thumb
 848              		.thumb_func
 850              	TP_Drow_Touch_Point:
 851              	.LVL86:
 852              	.LFB152:
 148:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 853              		.loc 1 148 1 is_stmt 1 view -0
 854              		.cfi_startproc
 855              		@ args = 0, pretend = 0, frame = 0
 856              		@ frame_needed = 0, uses_anonymous_args = 0
 148:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 857              		.loc 1 148 1 is_stmt 0 view .LVU239
 858 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 859              	.LCFI11:
 860              		.cfi_def_cfa_offset 24
 861              		.cfi_offset 4, -24
 862              		.cfi_offset 5, -20
 863              		.cfi_offset 6, -16
 864              		.cfi_offset 7, -12
 865              		.cfi_offset 8, -8
 866              		.cfi_offset 14, -4
 867 0004 0446     		mov	r4, r0
ARM GAS  /tmp/cckdBZRC.s 			page 21


 868 0006 0D46     		mov	r5, r1
 149:Core/Src/Mytouch.c **** 	LCD_DrawLine(x-12,y,x+13,y);//横线
 869              		.loc 1 149 2 is_stmt 1 view .LVU240
 149:Core/Src/Mytouch.c **** 	LCD_DrawLine(x-12,y,x+13,y);//横线
 870              		.loc 1 149 13 is_stmt 0 view .LVU241
 871 0008 1A4B     		ldr	r3, .L63
 872 000a 1A60     		str	r2, [r3]
 150:Core/Src/Mytouch.c **** 	LCD_DrawLine(x,y-12,x,y+13);//竖线
 873              		.loc 1 150 2 is_stmt 1 view .LVU242
 874 000c 00F10D02 		add	r2, r0, #13
 875              	.LVL87:
 150:Core/Src/Mytouch.c **** 	LCD_DrawLine(x,y-12,x,y+13);//竖线
 876              		.loc 1 150 2 is_stmt 0 view .LVU243
 877 0010 0C38     		subs	r0, r0, #12
 878              	.LVL88:
 150:Core/Src/Mytouch.c **** 	LCD_DrawLine(x,y-12,x,y+13);//竖线
 879              		.loc 1 150 2 view .LVU244
 880 0012 0B46     		mov	r3, r1
 881 0014 92B2     		uxth	r2, r2
 882 0016 80B2     		uxth	r0, r0
 883 0018 FFF7FEFF 		bl	LCD_DrawLine
 884              	.LVL89:
 151:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y+1);
 885              		.loc 1 151 2 is_stmt 1 view .LVU245
 886 001c 05F10D03 		add	r3, r5, #13
 887 0020 A5F10C01 		sub	r1, r5, #12
 888 0024 9BB2     		uxth	r3, r3
 889 0026 2246     		mov	r2, r4
 890 0028 89B2     		uxth	r1, r1
 891 002a 2046     		mov	r0, r4
 892 002c FFF7FEFF 		bl	LCD_DrawLine
 893              	.LVL90:
 152:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x-1,y+1);
 894              		.loc 1 152 2 view .LVU246
 895 0030 04F10108 		add	r8, r4, #1
 896 0034 1FFA88F8 		uxth	r8, r8
 897 0038 6F1C     		adds	r7, r5, #1
 898 003a BFB2     		uxth	r7, r7
 899 003c 3946     		mov	r1, r7
 900 003e 4046     		mov	r0, r8
 901 0040 FFF7FEFF 		bl	LCD_DrawPoint
 902              	.LVL91:
 153:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y-1);
 903              		.loc 1 153 2 view .LVU247
 904 0044 661E     		subs	r6, r4, #1
 905 0046 B6B2     		uxth	r6, r6
 906 0048 3946     		mov	r1, r7
 907 004a 3046     		mov	r0, r6
 908 004c FFF7FEFF 		bl	LCD_DrawPoint
 909              	.LVL92:
 154:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x-1,y-1);
 910              		.loc 1 154 2 view .LVU248
 911 0050 6F1E     		subs	r7, r5, #1
 912 0052 BFB2     		uxth	r7, r7
 913 0054 3946     		mov	r1, r7
 914 0056 4046     		mov	r0, r8
 915 0058 FFF7FEFF 		bl	LCD_DrawPoint
ARM GAS  /tmp/cckdBZRC.s 			page 22


 916              	.LVL93:
 155:Core/Src/Mytouch.c **** 	LCD_Draw_Circle(x,y,6);//画中心圈
 917              		.loc 1 155 2 view .LVU249
 918 005c 3946     		mov	r1, r7
 919 005e 3046     		mov	r0, r6
 920 0060 FFF7FEFF 		bl	LCD_DrawPoint
 921              	.LVL94:
 156:Core/Src/Mytouch.c **** }	  
 922              		.loc 1 156 2 view .LVU250
 923 0064 0622     		movs	r2, #6
 924 0066 2946     		mov	r1, r5
 925 0068 2046     		mov	r0, r4
 926 006a FFF7FEFF 		bl	LCD_Draw_Circle
 927              	.LVL95:
 157:Core/Src/Mytouch.c **** //画一个大点(2*2的点)		   
 928              		.loc 1 157 1 is_stmt 0 view .LVU251
 929 006e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 930              	.L64:
 931 0072 00BF     		.align	2
 932              	.L63:
 933 0074 00000000 		.word	POINT_COLOR
 934              		.cfi_endproc
 935              	.LFE152:
 937              		.section	.text.TP_Draw_Big_Point,"ax",%progbits
 938              		.align	1
 939              		.global	TP_Draw_Big_Point
 940              		.syntax unified
 941              		.thumb
 942              		.thumb_func
 944              	TP_Draw_Big_Point:
 945              	.LVL96:
 946              	.LFB153:
 162:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 947              		.loc 1 162 1 is_stmt 1 view -0
 948              		.cfi_startproc
 949              		@ args = 0, pretend = 0, frame = 0
 950              		@ frame_needed = 0, uses_anonymous_args = 0
 162:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 951              		.loc 1 162 1 is_stmt 0 view .LVU253
 952 0000 70B5     		push	{r4, r5, r6, lr}
 953              	.LCFI12:
 954              		.cfi_def_cfa_offset 16
 955              		.cfi_offset 4, -16
 956              		.cfi_offset 5, -12
 957              		.cfi_offset 6, -8
 958              		.cfi_offset 14, -4
 959 0002 0646     		mov	r6, r0
 960 0004 0C46     		mov	r4, r1
 163:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y);//中心点 
 961              		.loc 1 163 2 is_stmt 1 view .LVU254
 163:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y);//中心点 
 962              		.loc 1 163 13 is_stmt 0 view .LVU255
 963 0006 0A4B     		ldr	r3, .L67
 964 0008 1A60     		str	r2, [r3]
 164:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y);
 965              		.loc 1 164 2 is_stmt 1 view .LVU256
 966 000a FFF7FEFF 		bl	LCD_DrawPoint
ARM GAS  /tmp/cckdBZRC.s 			page 23


 967              	.LVL97:
 165:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y+1);
 968              		.loc 1 165 2 view .LVU257
 969 000e 751C     		adds	r5, r6, #1
 970 0010 ADB2     		uxth	r5, r5
 971 0012 2146     		mov	r1, r4
 972 0014 2846     		mov	r0, r5
 973 0016 FFF7FEFF 		bl	LCD_DrawPoint
 974              	.LVL98:
 166:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y+1);	 	  	
 975              		.loc 1 166 2 view .LVU258
 976 001a 0134     		adds	r4, r4, #1
 977 001c A4B2     		uxth	r4, r4
 978 001e 2146     		mov	r1, r4
 979 0020 3046     		mov	r0, r6
 980 0022 FFF7FEFF 		bl	LCD_DrawPoint
 981              	.LVL99:
 167:Core/Src/Mytouch.c **** }							  
 982              		.loc 1 167 2 view .LVU259
 983 0026 2146     		mov	r1, r4
 984 0028 2846     		mov	r0, r5
 985 002a FFF7FEFF 		bl	LCD_DrawPoint
 986              	.LVL100:
 168:Core/Src/Mytouch.c **** //////////////////////////////////////////////////////////////////////////////////		  
 987              		.loc 1 168 1 is_stmt 0 view .LVU260
 988 002e 70BD     		pop	{r4, r5, r6, pc}
 989              	.L68:
 990              		.align	2
 991              	.L67:
 992 0030 00000000 		.word	POINT_COLOR
 993              		.cfi_endproc
 994              	.LFE153:
 996              		.section	.rodata.TP_Adj_Info_Show.str1.4,"aMS",%progbits,1
 997              		.align	2
 998              	.LC0:
 999 0000 78313A00 		.ascii	"x1:\000"
 1000              		.align	2
 1001              	.LC1:
 1002 0004 79313A00 		.ascii	"y1:\000"
 1003              		.align	2
 1004              	.LC2:
 1005 0008 78323A00 		.ascii	"x2:\000"
 1006              		.align	2
 1007              	.LC3:
 1008 000c 79323A00 		.ascii	"y2:\000"
 1009              		.align	2
 1010              	.LC4:
 1011 0010 78333A00 		.ascii	"x3:\000"
 1012              		.align	2
 1013              	.LC5:
 1014 0014 79333A00 		.ascii	"y3:\000"
 1015              		.align	2
 1016              	.LC6:
 1017 0018 78343A00 		.ascii	"x4:\000"
 1018              		.align	2
 1019              	.LC7:
 1020 001c 79343A00 		.ascii	"y4:\000"
ARM GAS  /tmp/cckdBZRC.s 			page 24


 1021              		.align	2
 1022              	.LC8:
 1023 0020 66616320 		.ascii	"fac is:\000"
 1023      69733A00 
 1024              		.section	.text.TP_Adj_Info_Show,"ax",%progbits
 1025              		.align	1
 1026              		.global	TP_Adj_Info_Show
 1027              		.syntax unified
 1028              		.thumb
 1029              		.thumb_func
 1031              	TP_Adj_Info_Show:
 1032              	.LVL101:
 1033              	.LFB157:
 205:Core/Src/Mytouch.c **** //////////////////////////////////////////////////////////////////////////	 
 206:Core/Src/Mytouch.c **** //保存在EEPROM里面的地址区间基址,占用13个字节(RANGE:SAVE_ADDR_BASE~SAVE_ADDR_BASE+
 207:Core/Src/Mytouch.c **** #define SAVE_ADDR_BASE 40
 208:Core/Src/Mytouch.c **** //保存校准参数										    
 209:Core/Src/Mytouch.c **** void TP_Save_Adjdata(void)
 210:Core/Src/Mytouch.c **** {
 211:Core/Src/Mytouch.c **** 	int temp;			 
 212:Core/Src/Mytouch.c **** 	//保存校正结果!		   							  
 213:Core/Src/Mytouch.c **** 	temp=tp_dev.xfac*100000000;//保存x校正因素      
 214:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE,temp,4);   
 215:Core/Src/Mytouch.c **** 	temp=tp_dev.yfac*100000000;//保存y校正因素    
 216:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+4,temp,4);
 217:Core/Src/Mytouch.c **** 	//保存x偏移量
 218:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+8,tp_dev.xoff,2);		    
 219:Core/Src/Mytouch.c **** 	//保存y偏移量
 220:Core/Src/Mytouch.c **** 	AT24CXX_WriteLenByte(SAVE_ADDR_BASE+10,tp_dev.yoff,2);	
 221:Core/Src/Mytouch.c **** 	//保存触屏类型
 222:Core/Src/Mytouch.c **** 	AT24CXX_WriteOneByte(SAVE_ADDR_BASE+12,tp_dev.touchtype);	
 223:Core/Src/Mytouch.c **** 	temp=0X0A;//标记校准过了
 224:Core/Src/Mytouch.c **** 	AT24CXX_WriteOneByte(SAVE_ADDR_BASE+13,temp); 
 225:Core/Src/Mytouch.c **** }
 226:Core/Src/Mytouch.c **** //得到保存在EEPROM里面的校准值
 227:Core/Src/Mytouch.c **** //返回值：1，成功获取数据
 228:Core/Src/Mytouch.c **** //        0，获取失败，要重新校准
 229:Core/Src/Mytouch.c **** u8 TP_Get_Adjdata(void)
 230:Core/Src/Mytouch.c **** {					  
 231:Core/Src/Mytouch.c **** 	int tempfac;
 232:Core/Src/Mytouch.c **** 	tempfac=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+13);//读取标记字,看是否校准过！ 		 
 233:Core/Src/Mytouch.c **** 	if(tempfac==0X0A)//触摸屏已经校准过了			   
 234:Core/Src/Mytouch.c **** 	{    												 
 235:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE,4);		   
 236:Core/Src/Mytouch.c **** 		tp_dev.xfac=(float)tempfac/100000000;//得到x校准参数
 237:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 238:Core/Src/Mytouch.c **** 		tp_dev.yfac=(float)tempfac/100000000;//得到y校准参数
 239:Core/Src/Mytouch.c **** 	    //得到x偏移量
 240:Core/Src/Mytouch.c **** 		tp_dev.xoff=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+8,2);			   	  
 241:Core/Src/Mytouch.c ****  	    //得到y偏移量
 242:Core/Src/Mytouch.c **** 		tp_dev.yoff=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+10,2);				 	  
 243:Core/Src/Mytouch.c ****  		tp_dev.touchtype=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+12);//读取触屏类型标记
 244:Core/Src/Mytouch.c **** 		if(tp_dev.touchtype)//X,Y方向与屏幕相反
 245:Core/Src/Mytouch.c **** 		{
 246:Core/Src/Mytouch.c **** 			CMD_RDX=0X90;
 247:Core/Src/Mytouch.c **** 			CMD_RDY=0XD0;	 
 248:Core/Src/Mytouch.c **** 		}else				   //X,Y方向与屏幕相同
ARM GAS  /tmp/cckdBZRC.s 			page 25


 249:Core/Src/Mytouch.c **** 		{
 250:Core/Src/Mytouch.c **** 			CMD_RDX=0XD0;
 251:Core/Src/Mytouch.c **** 			CMD_RDY=0X90;	 
 252:Core/Src/Mytouch.c **** 		}		 
 253:Core/Src/Mytouch.c **** 		return 1;	 
 254:Core/Src/Mytouch.c **** 	}
 255:Core/Src/Mytouch.c **** 	return 0;
 256:Core/Src/Mytouch.c **** }	 
 257:Core/Src/Mytouch.c **** //提示字符串
 258:Core/Src/Mytouch.c **** u8* const TP_REMIND_MSG_TBL="Please use the stylus click the cross on the screen.The cross will alw
 259:Core/Src/Mytouch.c ****  					  
 260:Core/Src/Mytouch.c **** //提示校准结果(各个参数)
 261:Core/Src/Mytouch.c **** void TP_Adj_Info_Show(u16 x0,u16 y0,u16 x1,u16 y1,u16 x2,u16 y2,u16 x3,u16 y3,u16 fac)
 262:Core/Src/Mytouch.c **** {	  
 1034              		.loc 1 262 1 is_stmt 1 view -0
 1035              		.cfi_startproc
 1036              		@ args = 20, pretend = 0, frame = 0
 1037              		@ frame_needed = 0, uses_anonymous_args = 0
 1038              		.loc 1 262 1 is_stmt 0 view .LVU262
 1039 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1040              	.LCFI13:
 1041              		.cfi_def_cfa_offset 28
 1042              		.cfi_offset 4, -28
 1043              		.cfi_offset 5, -24
 1044              		.cfi_offset 6, -20
 1045              		.cfi_offset 7, -16
 1046              		.cfi_offset 8, -12
 1047              		.cfi_offset 9, -8
 1048              		.cfi_offset 14, -4
 1049 0004 83B0     		sub	sp, sp, #12
 1050              	.LCFI14:
 1051              		.cfi_def_cfa_offset 40
 1052 0006 8146     		mov	r9, r0
 1053 0008 8846     		mov	r8, r1
 1054 000a 1746     		mov	r7, r2
 1055 000c 1E46     		mov	r6, r3
 263:Core/Src/Mytouch.c **** 	POINT_COLOR=RED;
 1056              		.loc 1 263 2 is_stmt 1 view .LVU263
 1057              		.loc 1 263 13 is_stmt 0 view .LVU264
 1058 000e 4F4B     		ldr	r3, .L71
 1059              	.LVL102:
 1060              		.loc 1 263 13 view .LVU265
 1061 0010 4FF47842 		mov	r2, #63488
 1062              	.LVL103:
 1063              		.loc 1 263 13 view .LVU266
 1064 0014 1A60     		str	r2, [r3]
 264:Core/Src/Mytouch.c **** 	LCD_ShowString(40,160,lcddev.width,lcddev.height,16,"x1:");
 1065              		.loc 1 264 2 is_stmt 1 view .LVU267
 1066 0016 4E4D     		ldr	r5, .L71+4
 1067 0018 4E4B     		ldr	r3, .L71+8
 1068 001a 0193     		str	r3, [sp, #4]
 1069 001c 1024     		movs	r4, #16
 1070 001e 0094     		str	r4, [sp]
 1071 0020 6B88     		ldrh	r3, [r5, #2]
 1072 0022 2A88     		ldrh	r2, [r5]
 1073 0024 A021     		movs	r1, #160
 1074              	.LVL104:
ARM GAS  /tmp/cckdBZRC.s 			page 26


 1075              		.loc 1 264 2 is_stmt 0 view .LVU268
 1076 0026 2820     		movs	r0, #40
 1077              	.LVL105:
 1078              		.loc 1 264 2 view .LVU269
 1079 0028 FFF7FEFF 		bl	LCD_ShowString
 1080              	.LVL106:
 265:Core/Src/Mytouch.c ****  	LCD_ShowString(40+80,160,lcddev.width,lcddev.height,16,"y1:");
 1081              		.loc 1 265 3 is_stmt 1 view .LVU270
 1082 002c 4A4B     		ldr	r3, .L71+12
 1083 002e 0193     		str	r3, [sp, #4]
 1084 0030 0094     		str	r4, [sp]
 1085 0032 6B88     		ldrh	r3, [r5, #2]
 1086 0034 2A88     		ldrh	r2, [r5]
 1087 0036 A021     		movs	r1, #160
 1088 0038 7820     		movs	r0, #120
 1089 003a FFF7FEFF 		bl	LCD_ShowString
 1090              	.LVL107:
 266:Core/Src/Mytouch.c ****  	LCD_ShowString(40,180,lcddev.width,lcddev.height,16,"x2:");
 1091              		.loc 1 266 3 view .LVU271
 1092 003e 474B     		ldr	r3, .L71+16
 1093 0040 0193     		str	r3, [sp, #4]
 1094 0042 0094     		str	r4, [sp]
 1095 0044 6B88     		ldrh	r3, [r5, #2]
 1096 0046 2A88     		ldrh	r2, [r5]
 1097 0048 B421     		movs	r1, #180
 1098 004a 2820     		movs	r0, #40
 1099 004c FFF7FEFF 		bl	LCD_ShowString
 1100              	.LVL108:
 267:Core/Src/Mytouch.c ****  	LCD_ShowString(40+80,180,lcddev.width,lcddev.height,16,"y2:");
 1101              		.loc 1 267 3 view .LVU272
 1102 0050 434B     		ldr	r3, .L71+20
 1103 0052 0193     		str	r3, [sp, #4]
 1104 0054 0094     		str	r4, [sp]
 1105 0056 6B88     		ldrh	r3, [r5, #2]
 1106 0058 2A88     		ldrh	r2, [r5]
 1107 005a B421     		movs	r1, #180
 1108 005c 7820     		movs	r0, #120
 1109 005e FFF7FEFF 		bl	LCD_ShowString
 1110              	.LVL109:
 268:Core/Src/Mytouch.c **** 	LCD_ShowString(40,200,lcddev.width,lcddev.height,16,"x3:");
 1111              		.loc 1 268 2 view .LVU273
 1112 0062 404B     		ldr	r3, .L71+24
 1113 0064 0193     		str	r3, [sp, #4]
 1114 0066 0094     		str	r4, [sp]
 1115 0068 6B88     		ldrh	r3, [r5, #2]
 1116 006a 2A88     		ldrh	r2, [r5]
 1117 006c C821     		movs	r1, #200
 1118 006e 2820     		movs	r0, #40
 1119 0070 FFF7FEFF 		bl	LCD_ShowString
 1120              	.LVL110:
 269:Core/Src/Mytouch.c ****  	LCD_ShowString(40+80,200,lcddev.width,lcddev.height,16,"y3:");
 1121              		.loc 1 269 3 view .LVU274
 1122 0074 3C4B     		ldr	r3, .L71+28
 1123 0076 0193     		str	r3, [sp, #4]
 1124 0078 0094     		str	r4, [sp]
 1125 007a 6B88     		ldrh	r3, [r5, #2]
 1126 007c 2A88     		ldrh	r2, [r5]
ARM GAS  /tmp/cckdBZRC.s 			page 27


 1127 007e C821     		movs	r1, #200
 1128 0080 7820     		movs	r0, #120
 1129 0082 FFF7FEFF 		bl	LCD_ShowString
 1130              	.LVL111:
 270:Core/Src/Mytouch.c **** 	LCD_ShowString(40,220,lcddev.width,lcddev.height,16,"x4:");
 1131              		.loc 1 270 2 view .LVU275
 1132 0086 394B     		ldr	r3, .L71+32
 1133 0088 0193     		str	r3, [sp, #4]
 1134 008a 0094     		str	r4, [sp]
 1135 008c 6B88     		ldrh	r3, [r5, #2]
 1136 008e 2A88     		ldrh	r2, [r5]
 1137 0090 DC21     		movs	r1, #220
 1138 0092 2820     		movs	r0, #40
 1139 0094 FFF7FEFF 		bl	LCD_ShowString
 1140              	.LVL112:
 271:Core/Src/Mytouch.c ****  	LCD_ShowString(40+80,220,lcddev.width,lcddev.height,16,"y4:");  
 1141              		.loc 1 271 3 view .LVU276
 1142 0098 354B     		ldr	r3, .L71+36
 1143 009a 0193     		str	r3, [sp, #4]
 1144 009c 0094     		str	r4, [sp]
 1145 009e 6B88     		ldrh	r3, [r5, #2]
 1146 00a0 2A88     		ldrh	r2, [r5]
 1147 00a2 DC21     		movs	r1, #220
 1148 00a4 7820     		movs	r0, #120
 1149 00a6 FFF7FEFF 		bl	LCD_ShowString
 1150              	.LVL113:
 272:Core/Src/Mytouch.c ****  	LCD_ShowString(40,240,lcddev.width,lcddev.height,16,"fac is:");     
 1151              		.loc 1 272 3 view .LVU277
 1152 00aa 324B     		ldr	r3, .L71+40
 1153 00ac 0193     		str	r3, [sp, #4]
 1154 00ae 0094     		str	r4, [sp]
 1155 00b0 6B88     		ldrh	r3, [r5, #2]
 1156 00b2 2A88     		ldrh	r2, [r5]
 1157 00b4 F021     		movs	r1, #240
 1158 00b6 2820     		movs	r0, #40
 1159 00b8 FFF7FEFF 		bl	LCD_ShowString
 1160              	.LVL114:
 273:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24,160,x0,4,16);		//显示数值
 1161              		.loc 1 273 2 view .LVU278
 1162 00bc 0094     		str	r4, [sp]
 1163 00be 0423     		movs	r3, #4
 1164 00c0 4A46     		mov	r2, r9
 1165 00c2 A021     		movs	r1, #160
 1166 00c4 4020     		movs	r0, #64
 1167 00c6 FFF7FEFF 		bl	LCD_ShowNum
 1168              	.LVL115:
 274:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24+80,160,y0,4,16);	//显示数值
 1169              		.loc 1 274 2 view .LVU279
 1170 00ca 0094     		str	r4, [sp]
 1171 00cc 0423     		movs	r3, #4
 1172 00ce 4246     		mov	r2, r8
 1173 00d0 A021     		movs	r1, #160
 1174 00d2 9020     		movs	r0, #144
 1175 00d4 FFF7FEFF 		bl	LCD_ShowNum
 1176              	.LVL116:
 275:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24,180,x1,4,16);		//显示数值
 1177              		.loc 1 275 2 view .LVU280
ARM GAS  /tmp/cckdBZRC.s 			page 28


 1178 00d8 0094     		str	r4, [sp]
 1179 00da 0423     		movs	r3, #4
 1180 00dc 3A46     		mov	r2, r7
 1181 00de B421     		movs	r1, #180
 1182 00e0 4020     		movs	r0, #64
 1183 00e2 FFF7FEFF 		bl	LCD_ShowNum
 1184              	.LVL117:
 276:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24+80,180,y1,4,16);	//显示数值
 1185              		.loc 1 276 2 view .LVU281
 1186 00e6 0094     		str	r4, [sp]
 1187 00e8 0423     		movs	r3, #4
 1188 00ea 3246     		mov	r2, r6
 1189 00ec B421     		movs	r1, #180
 1190 00ee 9020     		movs	r0, #144
 1191 00f0 FFF7FEFF 		bl	LCD_ShowNum
 1192              	.LVL118:
 277:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24,200,x2,4,16);		//显示数值
 1193              		.loc 1 277 2 view .LVU282
 1194 00f4 0094     		str	r4, [sp]
 1195 00f6 0423     		movs	r3, #4
 1196 00f8 BDF82820 		ldrh	r2, [sp, #40]
 1197 00fc C821     		movs	r1, #200
 1198 00fe 4020     		movs	r0, #64
 1199 0100 FFF7FEFF 		bl	LCD_ShowNum
 1200              	.LVL119:
 278:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24+80,200,y2,4,16);	//显示数值
 1201              		.loc 1 278 2 view .LVU283
 1202 0104 0094     		str	r4, [sp]
 1203 0106 0423     		movs	r3, #4
 1204 0108 BDF82C20 		ldrh	r2, [sp, #44]
 1205 010c C821     		movs	r1, #200
 1206 010e 9020     		movs	r0, #144
 1207 0110 FFF7FEFF 		bl	LCD_ShowNum
 1208              	.LVL120:
 279:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24,220,x3,4,16);		//显示数值
 1209              		.loc 1 279 2 view .LVU284
 1210 0114 0094     		str	r4, [sp]
 1211 0116 0423     		movs	r3, #4
 1212 0118 BDF83020 		ldrh	r2, [sp, #48]
 1213 011c DC21     		movs	r1, #220
 1214 011e 4020     		movs	r0, #64
 1215 0120 FFF7FEFF 		bl	LCD_ShowNum
 1216              	.LVL121:
 280:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24+80,220,y3,4,16);	//显示数值
 1217              		.loc 1 280 2 view .LVU285
 1218 0124 0094     		str	r4, [sp]
 1219 0126 0423     		movs	r3, #4
 1220 0128 BDF83420 		ldrh	r2, [sp, #52]
 1221 012c DC21     		movs	r1, #220
 1222 012e 9020     		movs	r0, #144
 1223 0130 FFF7FEFF 		bl	LCD_ShowNum
 1224              	.LVL122:
 281:Core/Src/Mytouch.c ****  	LCD_ShowNum(40+56,240,fac,3,16); 	//显示数值,该数值必须在95~105范围之内.
 1225              		.loc 1 281 3 view .LVU286
 1226 0134 0094     		str	r4, [sp]
 1227 0136 0323     		movs	r3, #3
 1228 0138 BDF83820 		ldrh	r2, [sp, #56]
ARM GAS  /tmp/cckdBZRC.s 			page 29


 1229 013c F021     		movs	r1, #240
 1230 013e 6020     		movs	r0, #96
 1231 0140 FFF7FEFF 		bl	LCD_ShowNum
 1232              	.LVL123:
 282:Core/Src/Mytouch.c **** 
 283:Core/Src/Mytouch.c **** }
 1233              		.loc 1 283 1 is_stmt 0 view .LVU287
 1234 0144 03B0     		add	sp, sp, #12
 1235              	.LCFI15:
 1236              		.cfi_def_cfa_offset 28
 1237              		@ sp needed
 1238 0146 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1239              	.LVL124:
 1240              	.L72:
 1241              		.loc 1 283 1 view .LVU288
 1242 014a 00BF     		.align	2
 1243              	.L71:
 1244 014c 00000000 		.word	POINT_COLOR
 1245 0150 00000000 		.word	lcddev
 1246 0154 00000000 		.word	.LC0
 1247 0158 04000000 		.word	.LC1
 1248 015c 08000000 		.word	.LC2
 1249 0160 0C000000 		.word	.LC3
 1250 0164 10000000 		.word	.LC4
 1251 0168 14000000 		.word	.LC5
 1252 016c 18000000 		.word	.LC6
 1253 0170 1C000000 		.word	.LC7
 1254 0174 20000000 		.word	.LC8
 1255              		.cfi_endproc
 1256              	.LFE157:
 1258              		.section	.text.CT_Delay,"ax",%progbits
 1259              		.align	1
 1260              		.global	CT_Delay
 1261              		.syntax unified
 1262              		.thumb
 1263              		.thumb_func
 1265              	CT_Delay:
 1266              	.LFB160:
 284:Core/Src/Mytouch.c **** 		 
 285:Core/Src/Mytouch.c **** //触摸屏校准代码
 286:Core/Src/Mytouch.c **** //得到四个校准参数
 287:Core/Src/Mytouch.c **** void TP_Adjust(void)
 288:Core/Src/Mytouch.c **** {								 
 289:Core/Src/Mytouch.c **** 	u16 pos_temp[4][2];//坐标缓存值
 290:Core/Src/Mytouch.c **** 	u8  cnt=0;	
 291:Core/Src/Mytouch.c **** 	u16 d1,d2;
 292:Core/Src/Mytouch.c **** 	u32 tem1,tem2;
 293:Core/Src/Mytouch.c **** 	double fac; 	
 294:Core/Src/Mytouch.c **** 	u16 outtime=0;
 295:Core/Src/Mytouch.c ****  	cnt=0;				
 296:Core/Src/Mytouch.c **** 	POINT_COLOR=BLUE;
 297:Core/Src/Mytouch.c **** 	BACK_COLOR =WHITE;
 298:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏   
 299:Core/Src/Mytouch.c **** 	POINT_COLOR=RED;//红色 
 300:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏 	   
 301:Core/Src/Mytouch.c **** 	POINT_COLOR=BLACK;
 302:Core/Src/Mytouch.c **** 	LCD_ShowString(40,40,160,100,16,(u8*)TP_REMIND_MSG_TBL);//显示提示信息
ARM GAS  /tmp/cckdBZRC.s 			page 30


 303:Core/Src/Mytouch.c **** 	TP_Drow_Touch_Point(20,20,RED);//画点1 
 304:Core/Src/Mytouch.c **** 	tp_dev.sta=0;//消除触发信号 
 305:Core/Src/Mytouch.c **** 	tp_dev.xfac=0;//xfac用来标记是否校准过,所以校准之前必须清掉!以免错误	 
 306:Core/Src/Mytouch.c **** 	while(1)//如果连续10秒钟没有按下,则自动退出
 307:Core/Src/Mytouch.c **** 	{
 308:Core/Src/Mytouch.c **** 		tp_dev.scan(1);//扫描物理坐标
 309:Core/Src/Mytouch.c **** 		if((tp_dev.sta&0xc0)==TP_CATH_PRES)//按键按下了一次(此时按键松开了.)
 310:Core/Src/Mytouch.c **** 		{	
 311:Core/Src/Mytouch.c **** 			outtime=0;		
 312:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 313:Core/Src/Mytouch.c **** 						   			   
 314:Core/Src/Mytouch.c **** 			pos_temp[cnt][0]=tp_dev.x[0];
 315:Core/Src/Mytouch.c **** 			pos_temp[cnt][1]=tp_dev.y[0];
 316:Core/Src/Mytouch.c **** 			cnt++;	  
 317:Core/Src/Mytouch.c **** 			switch(cnt)
 318:Core/Src/Mytouch.c **** 			{			   
 319:Core/Src/Mytouch.c **** 				case 1:						 
 320:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,20,WHITE);				//清除点1 
 321:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(lcddev.width-20,20,RED);	//画点2
 322:Core/Src/Mytouch.c **** 					break;
 323:Core/Src/Mytouch.c **** 				case 2:
 324:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,20,WHITE);	//清除点2
 325:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,lcddev.height-20,RED);	//画点3
 326:Core/Src/Mytouch.c **** 					break;
 327:Core/Src/Mytouch.c **** 				case 3:
 328:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(20,lcddev.height-20,WHITE);			//清除点3
 329:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,RED);	//画点4
 330:Core/Src/Mytouch.c **** 					break;
 331:Core/Src/Mytouch.c **** 				case 4:	 //全部四个点已经得到
 332:Core/Src/Mytouch.c **** 	    		    //对边相等
 333:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[0][0]-pos_temp[1][0]);//x1-x2
 334:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 335:Core/Src/Mytouch.c **** 					tem1*=tem1;
 336:Core/Src/Mytouch.c **** 					tem2*=tem2;
 337:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,2的距离
 338:Core/Src/Mytouch.c **** 					
 339:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[2][0]-pos_temp[3][0]);//x3-x4
 340:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 341:Core/Src/Mytouch.c **** 					tem1*=tem1;
 342:Core/Src/Mytouch.c **** 					tem2*=tem2;
 343:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到3,4的距离
 344:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 345:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 346:Core/Src/Mytouch.c **** 					{
 347:Core/Src/Mytouch.c **** 						cnt=0;
 348:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 349:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 350:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 351:Core/Src/Mytouch.c ****  						continue;
 352:Core/Src/Mytouch.c **** 					}
 353:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[0][0]-pos_temp[2][0]);//x1-x3
 354:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[2][1]);//y1-y3
 355:Core/Src/Mytouch.c **** 					tem1*=tem1;
 356:Core/Src/Mytouch.c **** 					tem2*=tem2;
 357:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,3的距离
 358:Core/Src/Mytouch.c **** 					
 359:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[1][0]-pos_temp[3][0]);//x2-x4
ARM GAS  /tmp/cckdBZRC.s 			page 31


 360:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[3][1]);//y2-y4
 361:Core/Src/Mytouch.c **** 					tem1*=tem1;
 362:Core/Src/Mytouch.c **** 					tem2*=tem2;
 363:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,4的距离
 364:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 365:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 366:Core/Src/Mytouch.c **** 					{
 367:Core/Src/Mytouch.c **** 						cnt=0;
 368:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 369:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 370:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 371:Core/Src/Mytouch.c **** 						continue;
 372:Core/Src/Mytouch.c **** 					}//正确了
 373:Core/Src/Mytouch.c **** 								   
 374:Core/Src/Mytouch.c **** 					//对角线相等
 375:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[1][0]-pos_temp[2][0]);//x1-x3
 376:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[2][1]);//y1-y3
 377:Core/Src/Mytouch.c **** 					tem1*=tem1;
 378:Core/Src/Mytouch.c **** 					tem2*=tem2;
 379:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,4的距离
 380:Core/Src/Mytouch.c **** 	
 381:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[0][0]-pos_temp[3][0]);//x2-x4
 382:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[3][1]);//y2-y4
 383:Core/Src/Mytouch.c **** 					tem1*=tem1;
 384:Core/Src/Mytouch.c **** 					tem2*=tem2;
 385:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,3的距离
 386:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 387:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 388:Core/Src/Mytouch.c **** 					{
 389:Core/Src/Mytouch.c **** 						cnt=0;
 390:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 391:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 392:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 393:Core/Src/Mytouch.c **** 						continue;
 394:Core/Src/Mytouch.c **** 					}//正确了
 395:Core/Src/Mytouch.c **** 					//计算结果
 396:Core/Src/Mytouch.c **** 					tp_dev.xfac=(float)(lcddev.width-40)/(pos_temp[1][0]-pos_temp[0][0]);//得到xfac		 
 397:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 398:Core/Src/Mytouch.c **** 						  
 399:Core/Src/Mytouch.c **** 					tp_dev.yfac=(float)(lcddev.height-40)/(pos_temp[2][1]-pos_temp[0][1]);//得到yfac
 400:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 401:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 402:Core/Src/Mytouch.c **** 					{
 403:Core/Src/Mytouch.c **** 						cnt=0;
 404:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 405:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 406:Core/Src/Mytouch.c **** 						LCD_ShowString(40,26,lcddev.width,lcddev.height,16,"TP Need readjust!");
 407:Core/Src/Mytouch.c **** 						tp_dev.touchtype=!tp_dev.touchtype;//修改触屏类型.
 408:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 409:Core/Src/Mytouch.c **** 						{
 410:Core/Src/Mytouch.c **** 							CMD_RDX=0X90;
 411:Core/Src/Mytouch.c **** 							CMD_RDY=0XD0;	 
 412:Core/Src/Mytouch.c **** 						}else				   //X,Y方向与屏幕相同
 413:Core/Src/Mytouch.c **** 						{
 414:Core/Src/Mytouch.c **** 							CMD_RDX=0XD0;
 415:Core/Src/Mytouch.c **** 							CMD_RDY=0X90;	 
 416:Core/Src/Mytouch.c **** 						}			    
ARM GAS  /tmp/cckdBZRC.s 			page 32


 417:Core/Src/Mytouch.c **** 						continue;
 418:Core/Src/Mytouch.c **** 					}		
 419:Core/Src/Mytouch.c **** 					POINT_COLOR=BLUE;
 420:Core/Src/Mytouch.c **** 					LCD_Clear(WHITE);//清屏
 421:Core/Src/Mytouch.c **** 					LCD_ShowString(35,110,lcddev.width,lcddev.height,16,"Touch Screen Adjust OK!");//校正完成
 422:Core/Src/Mytouch.c **** 					HAL_Delay(1000);
 423:Core/Src/Mytouch.c **** 					TP_Save_Adjdata();  
 424:Core/Src/Mytouch.c ****  					LCD_Clear(WHITE);//清屏   
 425:Core/Src/Mytouch.c **** 					return;//校正完成				 
 426:Core/Src/Mytouch.c **** 			}
 427:Core/Src/Mytouch.c **** 		}
 428:Core/Src/Mytouch.c **** 		HAL_Delay(10);
 429:Core/Src/Mytouch.c **** 		outtime++;
 430:Core/Src/Mytouch.c **** 		if(outtime>1000)
 431:Core/Src/Mytouch.c **** 		{
 432:Core/Src/Mytouch.c **** 			TP_Get_Adjdata();
 433:Core/Src/Mytouch.c **** 			break;
 434:Core/Src/Mytouch.c **** 	 	} 
 435:Core/Src/Mytouch.c ****  	}
 436:Core/Src/Mytouch.c **** }
 437:Core/Src/Mytouch.c **** //触摸屏初始化  		    
 438:Core/Src/Mytouch.c **** //返回值:0,没有进行校准
 439:Core/Src/Mytouch.c **** //       1,进行过校准
 440:Core/Src/Mytouch.c **** u8 TP_Init(void)
 441:Core/Src/Mytouch.c **** {	
 442:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 443:Core/Src/Mytouch.c **** 	if(lcddev.id==0X5510||lcddev.id==0X4342||lcddev.id==0X4384) //4.3 800*40MCU电容触摸屏或者4.
 444:Core/Src/Mytouch.c **** 	{
 445:Core/Src/Mytouch.c **** 		if(GT9147_Init()==0)	//是GT9147
 446:Core/Src/Mytouch.c **** 		{ 
 447:Core/Src/Mytouch.c **** 			tp_dev.scan=GT9147_Scan;	//扫描函数指向GT9147触摸屏扫描
 448:Core/Src/Mytouch.c **** 		}else
 449:Core/Src/Mytouch.c **** 		{
 450:Core/Src/Mytouch.c **** 			OTT2001A_Init();
 451:Core/Src/Mytouch.c **** 			tp_dev.scan=OTT2001A_Scan;	//扫描函数指向OTT2001A触摸屏扫描
 452:Core/Src/Mytouch.c **** 		}
 453:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=0X80;	//电容屏 
 454:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 455:Core/Src/Mytouch.c **** 		return 0;
 456:Core/Src/Mytouch.c **** 	}else if(lcddev.id==0X1963||lcddev.id==0X7084||lcddev.id==0X7016)//SSD1963 7寸屏或者 7寸800*4
 457:Core/Src/Mytouch.c **** 	{
 458:Core/Src/Mytouch.c **** 		FT5206_Init();
 459:Core/Src/Mytouch.c **** 		tp_dev.scan=FT5206_Scan;		//扫描函数指向GT9147触摸屏扫描		
 460:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=0X80;			//电容屏 
 461:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 462:Core/Src/Mytouch.c **** 		return 0;
 463:Core/Src/Mytouch.c **** 	}else
 464:Core/Src/Mytouch.c **** 	{
 465:Core/Src/Mytouch.c ****         
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 468:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 469:Core/Src/Mytouch.c ****         
 470:Core/Src/Mytouch.c **** 		//PH6
 471:Core/Src/Mytouch.c **** 		GPIO_Initure.Pin=GPIO_PIN_6;            //PH6
 472:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 473:Core/Src/Mytouch.c **** 		GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
ARM GAS  /tmp/cckdBZRC.s 			page 33


 474:Core/Src/Mytouch.c **** 		GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 475:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 476:Core/Src/Mytouch.c ****         
 477:Core/Src/Mytouch.c **** 		//PI3,8
 478:Core/Src/Mytouch.c **** 		GPIO_Initure.Pin=GPIO_PIN_3|GPIO_PIN_8; //PI3,8
 479:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 480:Core/Src/Mytouch.c ****         
 481:Core/Src/Mytouch.c **** 		//PH7
 482:Core/Src/Mytouch.c **** 		GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 483:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 484:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 485:Core/Src/Mytouch.c ****         
 486:Core/Src/Mytouch.c **** 		//PG3
 487:Core/Src/Mytouch.c **** 		GPIO_Initure.Pin=GPIO_PIN_3;            //PG3
 488:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOG,&GPIO_Initure);     //初始化
 489:Core/Src/Mytouch.c ****         
 490:Core/Src/Mytouch.c **** 		TP_Read_XY(&tp_dev.x[0],&tp_dev.y[0]);//第一次读取初始化	 
 491:Core/Src/Mytouch.c **** 		AT24CXX_Init();		//初始化24CXX
 492:Core/Src/Mytouch.c **** 		if(TP_Get_Adjdata())return 0;//已经校准
 493:Core/Src/Mytouch.c **** 		else			   //未校准?
 494:Core/Src/Mytouch.c **** 		{ 										    
 495:Core/Src/Mytouch.c **** 			LCD_Clear(WHITE);//清屏
 496:Core/Src/Mytouch.c **** 			TP_Adjust();  	//屏幕校准 
 497:Core/Src/Mytouch.c **** 			TP_Save_Adjdata();	 
 498:Core/Src/Mytouch.c **** 		}			
 499:Core/Src/Mytouch.c **** 		TP_Get_Adjdata();	
 500:Core/Src/Mytouch.c **** 	}
 501:Core/Src/Mytouch.c **** 	return 1; 									 
 502:Core/Src/Mytouch.c **** }
 503:Core/Src/Mytouch.c **** 
 504:Core/Src/Mytouch.c **** 
 505:Core/Src/Mytouch.c **** /* 触摸芯片IIC接口 */
 506:Core/Src/Mytouch.c **** 
 507:Core/Src/Mytouch.c ****  //控制I2C速度的延时
 508:Core/Src/Mytouch.c **** void CT_Delay(void)
 509:Core/Src/Mytouch.c **** {
 1267              		.loc 1 509 1 is_stmt 1 view -0
 1268              		.cfi_startproc
 1269              		@ args = 0, pretend = 0, frame = 0
 1270              		@ frame_needed = 0, uses_anonymous_args = 0
 1271 0000 08B5     		push	{r3, lr}
 1272              	.LCFI16:
 1273              		.cfi_def_cfa_offset 8
 1274              		.cfi_offset 3, -8
 1275              		.cfi_offset 14, -4
 510:Core/Src/Mytouch.c **** 	delay_us(2);
 1276              		.loc 1 510 2 view .LVU290
 1277 0002 0220     		movs	r0, #2
 1278 0004 FFF7FEFF 		bl	delay_us
 1279              	.LVL125:
 511:Core/Src/Mytouch.c **** } 
 1280              		.loc 1 511 1 is_stmt 0 view .LVU291
 1281 0008 08BD     		pop	{r3, pc}
 1282              		.cfi_endproc
 1283              	.LFE160:
 1285              		.section	.text.CT_IIC_Init,"ax",%progbits
 1286              		.align	1
ARM GAS  /tmp/cckdBZRC.s 			page 34


 1287              		.global	CT_IIC_Init
 1288              		.syntax unified
 1289              		.thumb
 1290              		.thumb_func
 1292              	CT_IIC_Init:
 1293              	.LFB161:
 512:Core/Src/Mytouch.c **** 
 513:Core/Src/Mytouch.c **** //电容触摸芯片IIC接口初始化
 514:Core/Src/Mytouch.c **** void CT_IIC_Init(void)
 515:Core/Src/Mytouch.c **** {					     
 1294              		.loc 1 515 1 is_stmt 1 view -0
 1295              		.cfi_startproc
 1296              		@ args = 0, pretend = 0, frame = 32
 1297              		@ frame_needed = 0, uses_anonymous_args = 0
 1298 0000 00B5     		push	{lr}
 1299              	.LCFI17:
 1300              		.cfi_def_cfa_offset 4
 1301              		.cfi_offset 14, -4
 1302 0002 89B0     		sub	sp, sp, #36
 1303              	.LCFI18:
 1304              		.cfi_def_cfa_offset 40
 516:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 1305              		.loc 1 516 5 view .LVU293
 517:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
 1306              		.loc 1 517 5 view .LVU294
 1307              	.LBB2:
 1308              		.loc 1 517 5 view .LVU295
 1309              		.loc 1 517 5 view .LVU296
 1310 0004 164B     		ldr	r3, .L77
 1311 0006 D3F8E020 		ldr	r2, [r3, #224]
 1312 000a 42F08002 		orr	r2, r2, #128
 1313 000e C3F8E020 		str	r2, [r3, #224]
 1314              		.loc 1 517 5 view .LVU297
 1315 0012 D3F8E020 		ldr	r2, [r3, #224]
 1316 0016 02F08002 		and	r2, r2, #128
 1317 001a 0192     		str	r2, [sp, #4]
 1318              		.loc 1 517 5 view .LVU298
 1319 001c 019A     		ldr	r2, [sp, #4]
 1320              	.LBE2:
 1321              		.loc 1 517 5 view .LVU299
 518:Core/Src/Mytouch.c **** 	__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 1322              		.loc 1 518 2 view .LVU300
 1323              	.LBB3:
 1324              		.loc 1 518 2 view .LVU301
 1325              		.loc 1 518 2 view .LVU302
 1326 001e D3F8E020 		ldr	r2, [r3, #224]
 1327 0022 42F48072 		orr	r2, r2, #256
 1328 0026 C3F8E020 		str	r2, [r3, #224]
 1329              		.loc 1 518 2 view .LVU303
 1330 002a D3F8E030 		ldr	r3, [r3, #224]
 1331 002e 03F48073 		and	r3, r3, #256
 1332 0032 0293     		str	r3, [sp, #8]
 1333              		.loc 1 518 2 view .LVU304
 1334 0034 029B     		ldr	r3, [sp, #8]
 1335              	.LBE3:
 1336              		.loc 1 518 2 view .LVU305
 519:Core/Src/Mytouch.c ****     
ARM GAS  /tmp/cckdBZRC.s 			page 35


 520:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_6;            //PH6
 1337              		.loc 1 520 5 view .LVU306
 1338              		.loc 1 520 21 is_stmt 0 view .LVU307
 1339 0036 4023     		movs	r3, #64
 1340 0038 0393     		str	r3, [sp, #12]
 521:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_OD;  //开漏输出
 1341              		.loc 1 521 5 is_stmt 1 view .LVU308
 1342              		.loc 1 521 22 is_stmt 0 view .LVU309
 1343 003a 1123     		movs	r3, #17
 1344 003c 0493     		str	r3, [sp, #16]
 522:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 1345              		.loc 1 522 5 is_stmt 1 view .LVU310
 1346              		.loc 1 522 22 is_stmt 0 view .LVU311
 1347 003e 0123     		movs	r3, #1
 1348 0040 0593     		str	r3, [sp, #20]
 523:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 1349              		.loc 1 523 5 is_stmt 1 view .LVU312
 1350              		.loc 1 523 23 is_stmt 0 view .LVU313
 1351 0042 0323     		movs	r3, #3
 1352 0044 0693     		str	r3, [sp, #24]
 524:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 1353              		.loc 1 524 5 is_stmt 1 view .LVU314
 1354 0046 03A9     		add	r1, sp, #12
 1355 0048 0648     		ldr	r0, .L77+4
 1356 004a FFF7FEFF 		bl	HAL_GPIO_Init
 1357              	.LVL126:
 525:Core/Src/Mytouch.c **** 	
 526:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_3;            //PI3
 1358              		.loc 1 526 5 view .LVU315
 1359              		.loc 1 526 21 is_stmt 0 view .LVU316
 1360 004e 0823     		movs	r3, #8
 1361 0050 0393     		str	r3, [sp, #12]
 527:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 1362              		.loc 1 527 5 is_stmt 1 view .LVU317
 1363 0052 03A9     		add	r1, sp, #12
 1364 0054 0448     		ldr	r0, .L77+8
 1365 0056 FFF7FEFF 		bl	HAL_GPIO_Init
 1366              	.LVL127:
 528:Core/Src/Mytouch.c **** }
 1367              		.loc 1 528 1 is_stmt 0 view .LVU318
 1368 005a 09B0     		add	sp, sp, #36
 1369              	.LCFI19:
 1370              		.cfi_def_cfa_offset 4
 1371              		@ sp needed
 1372 005c 5DF804FB 		ldr	pc, [sp], #4
 1373              	.L78:
 1374              		.align	2
 1375              	.L77:
 1376 0060 00440258 		.word	1476543488
 1377 0064 001C0258 		.word	1476533248
 1378 0068 00200258 		.word	1476534272
 1379              		.cfi_endproc
 1380              	.LFE161:
 1382              		.section	.text.CT_IIC_Start,"ax",%progbits
 1383              		.align	1
 1384              		.global	CT_IIC_Start
 1385              		.syntax unified
ARM GAS  /tmp/cckdBZRC.s 			page 36


 1386              		.thumb
 1387              		.thumb_func
 1389              	CT_IIC_Start:
 1390              	.LFB162:
 529:Core/Src/Mytouch.c **** 
 530:Core/Src/Mytouch.c **** //产生IIC起始信号
 531:Core/Src/Mytouch.c **** void CT_IIC_Start(void)
 532:Core/Src/Mytouch.c **** {
 1391              		.loc 1 532 1 is_stmt 1 view -0
 1392              		.cfi_startproc
 1393              		@ args = 0, pretend = 0, frame = 0
 1394              		@ frame_needed = 0, uses_anonymous_args = 0
 1395 0000 38B5     		push	{r3, r4, r5, lr}
 1396              	.LCFI20:
 1397              		.cfi_def_cfa_offset 16
 1398              		.cfi_offset 3, -16
 1399              		.cfi_offset 4, -12
 1400              		.cfi_offset 5, -8
 1401              		.cfi_offset 14, -4
 533:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);	  	  
 1402              		.loc 1 533 2 view .LVU320
 1403 0002 0E4D     		ldr	r5, .L81
 1404 0004 0122     		movs	r2, #1
 1405 0006 0821     		movs	r1, #8
 1406 0008 2846     		mov	r0, r5
 1407 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1408              	.LVL128:
 534:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1409              		.loc 1 534 2 view .LVU321
 1410 000e 0C4C     		ldr	r4, .L81+4
 1411 0010 0122     		movs	r2, #1
 1412 0012 4021     		movs	r1, #64
 1413 0014 2046     		mov	r0, r4
 1414 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1415              	.LVL129:
 535:Core/Src/Mytouch.c ****     CT_Delay();
 1416              		.loc 1 535 5 view .LVU322
 1417 001a FFF7FEFF 		bl	CT_Delay
 1418              	.LVL130:
 536:Core/Src/Mytouch.c ****  	CT_IIC_SDA(0);//START:when CLK is high,DATA change form high to low 
 1419              		.loc 1 536 3 view .LVU323
 1420 001e 0022     		movs	r2, #0
 1421 0020 0821     		movs	r1, #8
 1422 0022 2846     		mov	r0, r5
 1423 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1424              	.LVL131:
 537:Core/Src/Mytouch.c ****     CT_Delay();
 1425              		.loc 1 537 5 view .LVU324
 1426 0028 FFF7FEFF 		bl	CT_Delay
 1427              	.LVL132:
 538:Core/Src/Mytouch.c **** 	CT_IIC_SCL(0);//钳住I2C总线，准备发送或接收数据 
 1428              		.loc 1 538 2 view .LVU325
 1429 002c 0022     		movs	r2, #0
 1430 002e 4021     		movs	r1, #64
 1431 0030 2046     		mov	r0, r4
 1432 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1433              	.LVL133:
ARM GAS  /tmp/cckdBZRC.s 			page 37


 539:Core/Src/Mytouch.c ****     CT_Delay();
 1434              		.loc 1 539 5 view .LVU326
 1435 0036 FFF7FEFF 		bl	CT_Delay
 1436              	.LVL134:
 540:Core/Src/Mytouch.c **** }	 
 1437              		.loc 1 540 1 is_stmt 0 view .LVU327
 1438 003a 38BD     		pop	{r3, r4, r5, pc}
 1439              	.L82:
 1440              		.align	2
 1441              	.L81:
 1442 003c 00200258 		.word	1476534272
 1443 0040 001C0258 		.word	1476533248
 1444              		.cfi_endproc
 1445              	.LFE162:
 1447              		.section	.text.CT_IIC_Stop,"ax",%progbits
 1448              		.align	1
 1449              		.global	CT_IIC_Stop
 1450              		.syntax unified
 1451              		.thumb
 1452              		.thumb_func
 1454              	CT_IIC_Stop:
 1455              	.LFB163:
 541:Core/Src/Mytouch.c **** 
 542:Core/Src/Mytouch.c **** //产生IIC停止信号
 543:Core/Src/Mytouch.c **** void CT_IIC_Stop(void)
 544:Core/Src/Mytouch.c **** {
 1456              		.loc 1 544 1 is_stmt 1 view -0
 1457              		.cfi_startproc
 1458              		@ args = 0, pretend = 0, frame = 0
 1459              		@ frame_needed = 0, uses_anonymous_args = 0
 1460 0000 10B5     		push	{r4, lr}
 1461              	.LCFI21:
 1462              		.cfi_def_cfa_offset 8
 1463              		.cfi_offset 4, -8
 1464              		.cfi_offset 14, -4
 545:Core/Src/Mytouch.c **** 	CT_IIC_SDA(0);
 1465              		.loc 1 545 2 view .LVU329
 1466 0002 0A4C     		ldr	r4, .L85
 1467 0004 0022     		movs	r2, #0
 1468 0006 0821     		movs	r1, #8
 1469 0008 2046     		mov	r0, r4
 1470 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1471              	.LVL135:
 546:Core/Src/Mytouch.c ****     CT_Delay();
 1472              		.loc 1 546 5 view .LVU330
 1473 000e FFF7FEFF 		bl	CT_Delay
 1474              	.LVL136:
 547:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1475              		.loc 1 547 2 view .LVU331
 1476 0012 0122     		movs	r2, #1
 1477 0014 4021     		movs	r1, #64
 1478 0016 0648     		ldr	r0, .L85+4
 1479 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1480              	.LVL137:
 548:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);//STOP:when CLK is high DATA change form low to high
 1481              		.loc 1 548 2 view .LVU332
 1482 001c 0122     		movs	r2, #1
ARM GAS  /tmp/cckdBZRC.s 			page 38


 1483 001e 0821     		movs	r1, #8
 1484 0020 2046     		mov	r0, r4
 1485 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1486              	.LVL138:
 549:Core/Src/Mytouch.c **** 	CT_Delay();
 1487              		.loc 1 549 2 view .LVU333
 1488 0026 FFF7FEFF 		bl	CT_Delay
 1489              	.LVL139:
 550:Core/Src/Mytouch.c **** }
 1490              		.loc 1 550 1 is_stmt 0 view .LVU334
 1491 002a 10BD     		pop	{r4, pc}
 1492              	.L86:
 1493              		.align	2
 1494              	.L85:
 1495 002c 00200258 		.word	1476534272
 1496 0030 001C0258 		.word	1476533248
 1497              		.cfi_endproc
 1498              	.LFE163:
 1500              		.section	.text.CT_IIC_Wait_Ack,"ax",%progbits
 1501              		.align	1
 1502              		.global	CT_IIC_Wait_Ack
 1503              		.syntax unified
 1504              		.thumb
 1505              		.thumb_func
 1507              	CT_IIC_Wait_Ack:
 1508              	.LFB164:
 551:Core/Src/Mytouch.c **** //等待应答信号到来
 552:Core/Src/Mytouch.c **** //返回值：1，接收应答失败
 553:Core/Src/Mytouch.c **** //        0，接收应答成功
 554:Core/Src/Mytouch.c **** u8 CT_IIC_Wait_Ack(void)
 555:Core/Src/Mytouch.c **** {
 1509              		.loc 1 555 1 is_stmt 1 view -0
 1510              		.cfi_startproc
 1511              		@ args = 0, pretend = 0, frame = 0
 1512              		@ frame_needed = 0, uses_anonymous_args = 0
 1513 0000 38B5     		push	{r3, r4, r5, lr}
 1514              	.LCFI22:
 1515              		.cfi_def_cfa_offset 16
 1516              		.cfi_offset 3, -16
 1517              		.cfi_offset 4, -12
 1518              		.cfi_offset 5, -8
 1519              		.cfi_offset 14, -4
 556:Core/Src/Mytouch.c **** 	u8 ucErrTime=0;
 1520              		.loc 1 556 2 view .LVU336
 1521              	.LVL140:
 557:Core/Src/Mytouch.c ****     u8 rack = 0;
 1522              		.loc 1 557 5 view .LVU337
 558:Core/Src/Mytouch.c **** 
 559:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);	
 1523              		.loc 1 559 2 view .LVU338
 1524 0002 0122     		movs	r2, #1
 1525 0004 0821     		movs	r1, #8
 1526 0006 1148     		ldr	r0, .L92
 1527 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1528              	.LVL141:
 560:Core/Src/Mytouch.c **** 	CT_Delay();
 1529              		.loc 1 560 2 view .LVU339
ARM GAS  /tmp/cckdBZRC.s 			page 39


 1530 000c FFF7FEFF 		bl	CT_Delay
 1531              	.LVL142:
 561:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1532              		.loc 1 561 2 view .LVU340
 1533 0010 0122     		movs	r2, #1
 1534 0012 4021     		movs	r1, #64
 1535 0014 0E48     		ldr	r0, .L92+4
 1536 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1537              	.LVL143:
 562:Core/Src/Mytouch.c **** 	CT_Delay();
 1538              		.loc 1 562 2 view .LVU341
 1539 001a FFF7FEFF 		bl	CT_Delay
 1540              	.LVL144:
 563:Core/Src/Mytouch.c ****     
 564:Core/Src/Mytouch.c **** 	while(CT_READ_SDA)
 1541              		.loc 1 564 2 view .LVU342
 556:Core/Src/Mytouch.c ****     u8 rack = 0;
 1542              		.loc 1 556 5 is_stmt 0 view .LVU343
 1543 001e 0024     		movs	r4, #0
 1544              	.LVL145:
 1545              	.L88:
 1546              		.loc 1 564 7 is_stmt 1 view .LVU344
 1547              		.loc 1 564 8 is_stmt 0 view .LVU345
 1548 0020 0821     		movs	r1, #8
 1549 0022 0A48     		ldr	r0, .L92
 1550 0024 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1551              	.LVL146:
 1552              		.loc 1 564 7 view .LVU346
 1553 0028 0546     		mov	r5, r0
 1554 002a 30B1     		cbz	r0, .L89
 565:Core/Src/Mytouch.c **** 	{
 566:Core/Src/Mytouch.c **** 		ucErrTime++;
 1555              		.loc 1 566 3 is_stmt 1 view .LVU347
 1556              		.loc 1 566 12 is_stmt 0 view .LVU348
 1557 002c 0134     		adds	r4, r4, #1
 1558              	.LVL147:
 1559              		.loc 1 566 12 view .LVU349
 1560 002e E4B2     		uxtb	r4, r4
 1561              	.LVL148:
 567:Core/Src/Mytouch.c ****         
 568:Core/Src/Mytouch.c **** 		if(ucErrTime>250)
 1562              		.loc 1 568 3 is_stmt 1 view .LVU350
 1563              		.loc 1 568 5 is_stmt 0 view .LVU351
 1564 0030 FA2C     		cmp	r4, #250
 1565 0032 F5D9     		bls	.L88
 569:Core/Src/Mytouch.c **** 		{
 570:Core/Src/Mytouch.c **** 			CT_IIC_Stop();
 1566              		.loc 1 570 4 is_stmt 1 view .LVU352
 1567 0034 FFF7FEFF 		bl	CT_IIC_Stop
 1568              	.LVL149:
 571:Core/Src/Mytouch.c ****             rack = 1;
 1569              		.loc 1 571 13 view .LVU353
 572:Core/Src/Mytouch.c ****             break;
 1570              		.loc 1 572 13 view .LVU354
 571:Core/Src/Mytouch.c ****             rack = 1;
 1571              		.loc 1 571 18 is_stmt 0 view .LVU355
 1572 0038 0125     		movs	r5, #1
ARM GAS  /tmp/cckdBZRC.s 			page 40


 1573              	.LVL150:
 1574              	.L89:
 573:Core/Src/Mytouch.c **** 		} 
 574:Core/Src/Mytouch.c **** 	}
 575:Core/Src/Mytouch.c ****     
 576:Core/Src/Mytouch.c **** 	CT_IIC_SCL(0);//时钟输出0 	
 1575              		.loc 1 576 2 is_stmt 1 view .LVU356
 1576 003a 0022     		movs	r2, #0
 1577 003c 4021     		movs	r1, #64
 1578 003e 0448     		ldr	r0, .L92+4
 1579 0040 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1580              	.LVL151:
 577:Core/Src/Mytouch.c ****     CT_Delay(); 
 1581              		.loc 1 577 5 view .LVU357
 1582 0044 FFF7FEFF 		bl	CT_Delay
 1583              	.LVL152:
 578:Core/Src/Mytouch.c ****     return rack;
 1584              		.loc 1 578 5 view .LVU358
 579:Core/Src/Mytouch.c **** } 
 1585              		.loc 1 579 1 is_stmt 0 view .LVU359
 1586 0048 2846     		mov	r0, r5
 1587 004a 38BD     		pop	{r3, r4, r5, pc}
 1588              	.LVL153:
 1589              	.L93:
 1590              		.loc 1 579 1 view .LVU360
 1591              		.align	2
 1592              	.L92:
 1593 004c 00200258 		.word	1476534272
 1594 0050 001C0258 		.word	1476533248
 1595              		.cfi_endproc
 1596              	.LFE164:
 1598              		.section	.text.CT_IIC_Ack,"ax",%progbits
 1599              		.align	1
 1600              		.global	CT_IIC_Ack
 1601              		.syntax unified
 1602              		.thumb
 1603              		.thumb_func
 1605              	CT_IIC_Ack:
 1606              	.LFB165:
 580:Core/Src/Mytouch.c **** 
 581:Core/Src/Mytouch.c **** //产生ACK应答
 582:Core/Src/Mytouch.c **** void CT_IIC_Ack(void)
 583:Core/Src/Mytouch.c **** {
 1607              		.loc 1 583 1 is_stmt 1 view -0
 1608              		.cfi_startproc
 1609              		@ args = 0, pretend = 0, frame = 0
 1610              		@ frame_needed = 0, uses_anonymous_args = 0
 1611 0000 38B5     		push	{r3, r4, r5, lr}
 1612              	.LCFI23:
 1613              		.cfi_def_cfa_offset 16
 1614              		.cfi_offset 3, -16
 1615              		.cfi_offset 4, -12
 1616              		.cfi_offset 5, -8
 1617              		.cfi_offset 14, -4
 584:Core/Src/Mytouch.c **** 	CT_IIC_SDA(0);
 1618              		.loc 1 584 2 view .LVU362
 1619 0002 0F4C     		ldr	r4, .L96
ARM GAS  /tmp/cckdBZRC.s 			page 41


 1620 0004 0022     		movs	r2, #0
 1621 0006 0821     		movs	r1, #8
 1622 0008 2046     		mov	r0, r4
 1623 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1624              	.LVL154:
 585:Core/Src/Mytouch.c **** 	CT_Delay();
 1625              		.loc 1 585 2 view .LVU363
 1626 000e FFF7FEFF 		bl	CT_Delay
 1627              	.LVL155:
 586:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1628              		.loc 1 586 2 view .LVU364
 1629 0012 0C4D     		ldr	r5, .L96+4
 1630 0014 0122     		movs	r2, #1
 1631 0016 4021     		movs	r1, #64
 1632 0018 2846     		mov	r0, r5
 1633 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1634              	.LVL156:
 587:Core/Src/Mytouch.c **** 	CT_Delay();
 1635              		.loc 1 587 2 view .LVU365
 1636 001e FFF7FEFF 		bl	CT_Delay
 1637              	.LVL157:
 588:Core/Src/Mytouch.c **** 	CT_IIC_SCL(0);
 1638              		.loc 1 588 2 view .LVU366
 1639 0022 0022     		movs	r2, #0
 1640 0024 4021     		movs	r1, #64
 1641 0026 2846     		mov	r0, r5
 1642 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1643              	.LVL158:
 589:Core/Src/Mytouch.c **** 	CT_Delay();
 1644              		.loc 1 589 2 view .LVU367
 1645 002c FFF7FEFF 		bl	CT_Delay
 1646              	.LVL159:
 590:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);
 1647              		.loc 1 590 2 view .LVU368
 1648 0030 0122     		movs	r2, #1
 1649 0032 0821     		movs	r1, #8
 1650 0034 2046     		mov	r0, r4
 1651 0036 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1652              	.LVL160:
 591:Core/Src/Mytouch.c **** 	CT_Delay();
 1653              		.loc 1 591 2 view .LVU369
 1654 003a FFF7FEFF 		bl	CT_Delay
 1655              	.LVL161:
 592:Core/Src/Mytouch.c **** }
 1656              		.loc 1 592 1 is_stmt 0 view .LVU370
 1657 003e 38BD     		pop	{r3, r4, r5, pc}
 1658              	.L97:
 1659              		.align	2
 1660              	.L96:
 1661 0040 00200258 		.word	1476534272
 1662 0044 001C0258 		.word	1476533248
 1663              		.cfi_endproc
 1664              	.LFE165:
 1666              		.section	.text.CT_IIC_NAck,"ax",%progbits
 1667              		.align	1
 1668              		.global	CT_IIC_NAck
 1669              		.syntax unified
ARM GAS  /tmp/cckdBZRC.s 			page 42


 1670              		.thumb
 1671              		.thumb_func
 1673              	CT_IIC_NAck:
 1674              	.LFB166:
 593:Core/Src/Mytouch.c **** //不产生ACK应答		    
 594:Core/Src/Mytouch.c **** void CT_IIC_NAck(void)
 595:Core/Src/Mytouch.c **** {
 1675              		.loc 1 595 1 is_stmt 1 view -0
 1676              		.cfi_startproc
 1677              		@ args = 0, pretend = 0, frame = 0
 1678              		@ frame_needed = 0, uses_anonymous_args = 0
 1679 0000 10B5     		push	{r4, lr}
 1680              	.LCFI24:
 1681              		.cfi_def_cfa_offset 8
 1682              		.cfi_offset 4, -8
 1683              		.cfi_offset 14, -4
 596:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);
 1684              		.loc 1 596 2 view .LVU372
 1685 0002 0122     		movs	r2, #1
 1686 0004 0821     		movs	r1, #8
 1687 0006 0A48     		ldr	r0, .L100
 1688 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1689              	.LVL162:
 597:Core/Src/Mytouch.c **** 	CT_Delay();
 1690              		.loc 1 597 2 view .LVU373
 1691 000c FFF7FEFF 		bl	CT_Delay
 1692              	.LVL163:
 598:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1693              		.loc 1 598 2 view .LVU374
 1694 0010 084C     		ldr	r4, .L100+4
 1695 0012 0122     		movs	r2, #1
 1696 0014 4021     		movs	r1, #64
 1697 0016 2046     		mov	r0, r4
 1698 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1699              	.LVL164:
 599:Core/Src/Mytouch.c **** 	CT_Delay();
 1700              		.loc 1 599 2 view .LVU375
 1701 001c FFF7FEFF 		bl	CT_Delay
 1702              	.LVL165:
 600:Core/Src/Mytouch.c **** 	CT_IIC_SCL(0);
 1703              		.loc 1 600 2 view .LVU376
 1704 0020 0022     		movs	r2, #0
 1705 0022 4021     		movs	r1, #64
 1706 0024 2046     		mov	r0, r4
 1707 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1708              	.LVL166:
 601:Core/Src/Mytouch.c ****     CT_Delay();
 1709              		.loc 1 601 5 view .LVU377
 1710 002a FFF7FEFF 		bl	CT_Delay
 1711              	.LVL167:
 602:Core/Src/Mytouch.c **** }					 				     
 1712              		.loc 1 602 1 is_stmt 0 view .LVU378
 1713 002e 10BD     		pop	{r4, pc}
 1714              	.L101:
 1715              		.align	2
 1716              	.L100:
 1717 0030 00200258 		.word	1476534272
ARM GAS  /tmp/cckdBZRC.s 			page 43


 1718 0034 001C0258 		.word	1476533248
 1719              		.cfi_endproc
 1720              	.LFE166:
 1722              		.section	.text.CT_IIC_Send_Byte,"ax",%progbits
 1723              		.align	1
 1724              		.global	CT_IIC_Send_Byte
 1725              		.syntax unified
 1726              		.thumb
 1727              		.thumb_func
 1729              	CT_IIC_Send_Byte:
 1730              	.LVL168:
 1731              	.LFB167:
 603:Core/Src/Mytouch.c **** //IIC发送一个字节
 604:Core/Src/Mytouch.c **** //返回从机有无应答
 605:Core/Src/Mytouch.c **** //1，有应答
 606:Core/Src/Mytouch.c **** //0，无应答			  
 607:Core/Src/Mytouch.c **** void CT_IIC_Send_Byte(u8 txd)
 608:Core/Src/Mytouch.c **** {                        
 1732              		.loc 1 608 1 is_stmt 1 view -0
 1733              		.cfi_startproc
 1734              		@ args = 0, pretend = 0, frame = 0
 1735              		@ frame_needed = 0, uses_anonymous_args = 0
 1736              		.loc 1 608 1 is_stmt 0 view .LVU380
 1737 0000 70B5     		push	{r4, r5, r6, lr}
 1738              	.LCFI25:
 1739              		.cfi_def_cfa_offset 16
 1740              		.cfi_offset 4, -16
 1741              		.cfi_offset 5, -12
 1742              		.cfi_offset 6, -8
 1743              		.cfi_offset 14, -4
 1744 0002 0446     		mov	r4, r0
 609:Core/Src/Mytouch.c ****     u8 t;   
 1745              		.loc 1 609 5 is_stmt 1 view .LVU381
 610:Core/Src/Mytouch.c **** 
 611:Core/Src/Mytouch.c **** 	for(t=0;t<8;t++)
 1746              		.loc 1 611 2 view .LVU382
 1747              	.LVL169:
 1748              		.loc 1 611 7 is_stmt 0 view .LVU383
 1749 0004 0025     		movs	r5, #0
 1750              		.loc 1 611 2 view .LVU384
 1751 0006 17E0     		b	.L103
 1752              	.LVL170:
 1753              	.L104:
 612:Core/Src/Mytouch.c ****     {              
 613:Core/Src/Mytouch.c ****         CT_IIC_SDA((txd&0x80)>>7); 
 1754              		.loc 1 613 9 discriminator 2 view .LVU385
 1755 0008 0022     		movs	r2, #0
 1756 000a 0821     		movs	r1, #8
 1757 000c 1348     		ldr	r0, .L109
 1758 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 1759              	.LVL171:
 1760              	.L105:
 614:Core/Src/Mytouch.c ****         CT_Delay();
 1761              		.loc 1 614 9 is_stmt 1 discriminator 2 view .LVU386
 1762 0012 FFF7FEFF 		bl	CT_Delay
 1763              	.LVL172:
 615:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 
ARM GAS  /tmp/cckdBZRC.s 			page 44


 1764              		.loc 1 615 3 discriminator 2 view .LVU387
 1765 0016 124E     		ldr	r6, .L109+4
 1766 0018 0122     		movs	r2, #1
 1767 001a 4021     		movs	r1, #64
 1768 001c 3046     		mov	r0, r6
 1769 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
 1770              	.LVL173:
 616:Core/Src/Mytouch.c **** 		CT_Delay();
 1771              		.loc 1 616 3 discriminator 2 view .LVU388
 1772 0022 FFF7FEFF 		bl	CT_Delay
 1773              	.LVL174:
 617:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1774              		.loc 1 617 3 discriminator 2 view .LVU389
 1775 0026 0022     		movs	r2, #0
 1776 0028 4021     		movs	r1, #64
 1777 002a 3046     		mov	r0, r6
 1778 002c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1779              	.LVL175:
 618:Core/Src/Mytouch.c ****         txd<<=1; 	      
 1780              		.loc 1 618 9 discriminator 2 view .LVU390
 1781              		.loc 1 618 12 is_stmt 0 discriminator 2 view .LVU391
 1782 0030 6400     		lsls	r4, r4, #1
 1783              	.LVL176:
 1784              		.loc 1 618 12 discriminator 2 view .LVU392
 1785 0032 E4B2     		uxtb	r4, r4
 1786              	.LVL177:
 611:Core/Src/Mytouch.c ****     {              
 1787              		.loc 1 611 14 is_stmt 1 discriminator 2 view .LVU393
 611:Core/Src/Mytouch.c ****     {              
 1788              		.loc 1 611 15 is_stmt 0 discriminator 2 view .LVU394
 1789 0034 0135     		adds	r5, r5, #1
 1790              	.LVL178:
 611:Core/Src/Mytouch.c ****     {              
 1791              		.loc 1 611 15 discriminator 2 view .LVU395
 1792 0036 EDB2     		uxtb	r5, r5
 1793              	.LVL179:
 1794              	.L103:
 611:Core/Src/Mytouch.c ****     {              
 1795              		.loc 1 611 10 is_stmt 1 discriminator 1 view .LVU396
 611:Core/Src/Mytouch.c ****     {              
 1796              		.loc 1 611 2 is_stmt 0 discriminator 1 view .LVU397
 1797 0038 072D     		cmp	r5, #7
 1798 003a 08D8     		bhi	.L108
 613:Core/Src/Mytouch.c ****         CT_Delay();
 1799              		.loc 1 613 9 is_stmt 1 view .LVU398
 1800 003c 14F0800F 		tst	r4, #128
 1801 0040 E2D0     		beq	.L104
 613:Core/Src/Mytouch.c ****         CT_Delay();
 1802              		.loc 1 613 9 is_stmt 0 discriminator 1 view .LVU399
 1803 0042 0122     		movs	r2, #1
 1804 0044 0821     		movs	r1, #8
 1805 0046 0548     		ldr	r0, .L109
 1806 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1807              	.LVL180:
 1808 004c E1E7     		b	.L105
 1809              	.L108:
 619:Core/Src/Mytouch.c ****     }
ARM GAS  /tmp/cckdBZRC.s 			page 45


 620:Core/Src/Mytouch.c ****     CT_IIC_SDA(1);
 1810              		.loc 1 620 5 is_stmt 1 view .LVU400
 1811 004e 0122     		movs	r2, #1
 1812 0050 0821     		movs	r1, #8
 1813 0052 0248     		ldr	r0, .L109
 1814 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1815              	.LVL181:
 621:Core/Src/Mytouch.c **** } 	    
 1816              		.loc 1 621 1 is_stmt 0 view .LVU401
 1817 0058 70BD     		pop	{r4, r5, r6, pc}
 1818              	.LVL182:
 1819              	.L110:
 1820              		.loc 1 621 1 view .LVU402
 1821 005a 00BF     		.align	2
 1822              	.L109:
 1823 005c 00200258 		.word	1476534272
 1824 0060 001C0258 		.word	1476533248
 1825              		.cfi_endproc
 1826              	.LFE167:
 1828              		.section	.text.CT_IIC_Read_Byte,"ax",%progbits
 1829              		.align	1
 1830              		.global	CT_IIC_Read_Byte
 1831              		.syntax unified
 1832              		.thumb
 1833              		.thumb_func
 1835              	CT_IIC_Read_Byte:
 1836              	.LVL183:
 1837              	.LFB168:
 622:Core/Src/Mytouch.c **** //读1个字节，ack=1时，发送ACK，ack=0，发送nACK   
 623:Core/Src/Mytouch.c **** u8 CT_IIC_Read_Byte(unsigned char ack)
 624:Core/Src/Mytouch.c **** {
 1838              		.loc 1 624 1 is_stmt 1 view -0
 1839              		.cfi_startproc
 1840              		@ args = 0, pretend = 0, frame = 0
 1841              		@ frame_needed = 0, uses_anonymous_args = 0
 1842              		.loc 1 624 1 is_stmt 0 view .LVU404
 1843 0000 70B5     		push	{r4, r5, r6, lr}
 1844              	.LCFI26:
 1845              		.cfi_def_cfa_offset 16
 1846              		.cfi_offset 4, -16
 1847              		.cfi_offset 5, -12
 1848              		.cfi_offset 6, -8
 1849              		.cfi_offset 14, -4
 1850 0002 0646     		mov	r6, r0
 625:Core/Src/Mytouch.c **** 	u8 i,receive=0;
 1851              		.loc 1 625 2 is_stmt 1 view .LVU405
 1852              	.LVL184:
 626:Core/Src/Mytouch.c **** 
 627:Core/Src/Mytouch.c **** 	for(i=0;i<8;i++ )
 1853              		.loc 1 627 2 view .LVU406
 625:Core/Src/Mytouch.c **** 	u8 i,receive=0;
 1854              		.loc 1 625 7 is_stmt 0 view .LVU407
 1855 0004 0024     		movs	r4, #0
 1856              		.loc 1 627 7 view .LVU408
 1857 0006 2546     		mov	r5, r4
 1858              		.loc 1 627 2 view .LVU409
 1859 0008 08E0     		b	.L112
ARM GAS  /tmp/cckdBZRC.s 			page 46


 1860              	.LVL185:
 1861              	.L113:
 628:Core/Src/Mytouch.c **** 	{ 
 629:Core/Src/Mytouch.c ****         receive<<=1;
 630:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 	    	   
 631:Core/Src/Mytouch.c **** 		CT_Delay();
 632:Core/Src/Mytouch.c ****         
 633:Core/Src/Mytouch.c **** 		if(CT_READ_SDA)receive++;   
 634:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1862              		.loc 1 634 3 is_stmt 1 discriminator 2 view .LVU410
 1863 000a 0022     		movs	r2, #0
 1864 000c 4021     		movs	r1, #64
 1865 000e 1148     		ldr	r0, .L119
 1866 0010 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1867              	.LVL186:
 635:Core/Src/Mytouch.c **** 		CT_Delay();
 1868              		.loc 1 635 3 discriminator 2 view .LVU411
 1869 0014 FFF7FEFF 		bl	CT_Delay
 1870              	.LVL187:
 627:Core/Src/Mytouch.c **** 	{ 
 1871              		.loc 1 627 14 discriminator 2 view .LVU412
 627:Core/Src/Mytouch.c **** 	{ 
 1872              		.loc 1 627 15 is_stmt 0 discriminator 2 view .LVU413
 1873 0018 0135     		adds	r5, r5, #1
 1874              	.LVL188:
 627:Core/Src/Mytouch.c **** 	{ 
 1875              		.loc 1 627 15 discriminator 2 view .LVU414
 1876 001a EDB2     		uxtb	r5, r5
 1877              	.LVL189:
 1878              	.L112:
 627:Core/Src/Mytouch.c **** 	{ 
 1879              		.loc 1 627 10 is_stmt 1 discriminator 1 view .LVU415
 627:Core/Src/Mytouch.c **** 	{ 
 1880              		.loc 1 627 2 is_stmt 0 discriminator 1 view .LVU416
 1881 001c 072D     		cmp	r5, #7
 1882 001e 11D8     		bhi	.L118
 629:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 	    	   
 1883              		.loc 1 629 9 is_stmt 1 view .LVU417
 629:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 	    	   
 1884              		.loc 1 629 16 is_stmt 0 view .LVU418
 1885 0020 6400     		lsls	r4, r4, #1
 1886              	.LVL190:
 629:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 	    	   
 1887              		.loc 1 629 16 view .LVU419
 1888 0022 E4B2     		uxtb	r4, r4
 1889              	.LVL191:
 630:Core/Src/Mytouch.c **** 		CT_Delay();
 1890              		.loc 1 630 3 is_stmt 1 view .LVU420
 1891 0024 0122     		movs	r2, #1
 1892 0026 4021     		movs	r1, #64
 1893 0028 0A48     		ldr	r0, .L119
 1894 002a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1895              	.LVL192:
 631:Core/Src/Mytouch.c ****         
 1896              		.loc 1 631 3 view .LVU421
 1897 002e FFF7FEFF 		bl	CT_Delay
 1898              	.LVL193:
ARM GAS  /tmp/cckdBZRC.s 			page 47


 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1899              		.loc 1 633 3 view .LVU422
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1900              		.loc 1 633 6 is_stmt 0 view .LVU423
 1901 0032 0821     		movs	r1, #8
 1902 0034 0848     		ldr	r0, .L119+4
 1903 0036 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1904              	.LVL194:
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1905              		.loc 1 633 5 view .LVU424
 1906 003a 0028     		cmp	r0, #0
 1907 003c E5D0     		beq	.L113
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1908              		.loc 1 633 18 is_stmt 1 discriminator 1 view .LVU425
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1909              		.loc 1 633 25 is_stmt 0 discriminator 1 view .LVU426
 1910 003e 0134     		adds	r4, r4, #1
 1911              	.LVL195:
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1912              		.loc 1 633 25 discriminator 1 view .LVU427
 1913 0040 E4B2     		uxtb	r4, r4
 1914              	.LVL196:
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1915              		.loc 1 633 25 discriminator 1 view .LVU428
 1916 0042 E2E7     		b	.L113
 1917              	.L118:
 636:Core/Src/Mytouch.c ****         
 637:Core/Src/Mytouch.c **** 	}	  				 
 638:Core/Src/Mytouch.c **** 	if (!ack)
 1918              		.loc 1 638 2 is_stmt 1 view .LVU429
 1919              		.loc 1 638 5 is_stmt 0 view .LVU430
 1920 0044 1EB9     		cbnz	r6, .L115
 639:Core/Src/Mytouch.c ****         CT_IIC_NAck();//发送nACK
 1921              		.loc 1 639 9 is_stmt 1 view .LVU431
 1922 0046 FFF7FEFF 		bl	CT_IIC_NAck
 1923              	.LVL197:
 1924              	.L116:
 640:Core/Src/Mytouch.c **** 	else 
 641:Core/Src/Mytouch.c ****         CT_IIC_Ack(); //发送ACK   
 642:Core/Src/Mytouch.c ****  	return receive;
 1925              		.loc 1 642 3 view .LVU432
 643:Core/Src/Mytouch.c **** }
 1926              		.loc 1 643 1 is_stmt 0 view .LVU433
 1927 004a 2046     		mov	r0, r4
 1928 004c 70BD     		pop	{r4, r5, r6, pc}
 1929              	.LVL198:
 1930              	.L115:
 641:Core/Src/Mytouch.c ****  	return receive;
 1931              		.loc 1 641 9 is_stmt 1 view .LVU434
 1932 004e FFF7FEFF 		bl	CT_IIC_Ack
 1933              	.LVL199:
 1934 0052 FAE7     		b	.L116
 1935              	.L120:
 1936              		.align	2
 1937              	.L119:
 1938 0054 001C0258 		.word	1476533248
 1939 0058 00200258 		.word	1476534272
ARM GAS  /tmp/cckdBZRC.s 			page 48


 1940              		.cfi_endproc
 1941              	.LFE168:
 1943              		.section	.text.GT9147_WR_Reg,"ax",%progbits
 1944              		.align	1
 1945              		.global	GT9147_WR_Reg
 1946              		.syntax unified
 1947              		.thumb
 1948              		.thumb_func
 1950              	GT9147_WR_Reg:
 1951              	.LVL200:
 1952              	.LFB170:
 644:Core/Src/Mytouch.c **** 
 645:Core/Src/Mytouch.c **** /* GT9147 */
 646:Core/Src/Mytouch.c **** 
 647:Core/Src/Mytouch.c **** 
 648:Core/Src/Mytouch.c **** const u8 GT9147_CFG_TBL[]=
 649:Core/Src/Mytouch.c **** { 
 650:Core/Src/Mytouch.c **** 	0X60,0XE0,0X01,0X20,0X03,0X05,0X35,0X00,0X02,0X08,
 651:Core/Src/Mytouch.c **** 	0X1E,0X08,0X50,0X3C,0X0F,0X05,0X00,0X00,0XFF,0X67,
 652:Core/Src/Mytouch.c **** 	0X50,0X00,0X00,0X18,0X1A,0X1E,0X14,0X89,0X28,0X0A,
 653:Core/Src/Mytouch.c **** 	0X30,0X2E,0XBB,0X0A,0X03,0X00,0X00,0X02,0X33,0X1D,
 654:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X32,0X00,0X00,
 655:Core/Src/Mytouch.c **** 	0X2A,0X1C,0X5A,0X94,0XC5,0X02,0X07,0X00,0X00,0X00,
 656:Core/Src/Mytouch.c **** 	0XB5,0X1F,0X00,0X90,0X28,0X00,0X77,0X32,0X00,0X62,
 657:Core/Src/Mytouch.c **** 	0X3F,0X00,0X52,0X50,0X00,0X52,0X00,0X00,0X00,0X00,
 658:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 659:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X0F,
 660:Core/Src/Mytouch.c **** 	0X0F,0X03,0X06,0X10,0X42,0XF8,0X0F,0X14,0X00,0X00,
 661:Core/Src/Mytouch.c **** 	0X00,0X00,0X1A,0X18,0X16,0X14,0X12,0X10,0X0E,0X0C,
 662:Core/Src/Mytouch.c **** 	0X0A,0X08,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 663:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 664:Core/Src/Mytouch.c **** 	0X00,0X00,0X29,0X28,0X24,0X22,0X20,0X1F,0X1E,0X1D,
 665:Core/Src/Mytouch.c **** 	0X0E,0X0C,0X0A,0X08,0X06,0X05,0X04,0X02,0X00,0XFF,
 666:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 667:Core/Src/Mytouch.c **** 	0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,
 668:Core/Src/Mytouch.c **** 	0XFF,0XFF,0XFF,0XFF,
 669:Core/Src/Mytouch.c **** };  
 670:Core/Src/Mytouch.c **** //发送GT9147配置参数
 671:Core/Src/Mytouch.c **** //mode:0,参数不保存到flash
 672:Core/Src/Mytouch.c **** //     1,参数保存到flash
 673:Core/Src/Mytouch.c **** u8 GT9147_Send_Cfg(u8 mode)
 674:Core/Src/Mytouch.c **** {
 675:Core/Src/Mytouch.c **** 	u8 buf[2];
 676:Core/Src/Mytouch.c **** 	u8 i=0;
 677:Core/Src/Mytouch.c **** 	buf[0]=0;
 678:Core/Src/Mytouch.c **** 	buf[1]=mode;	//是否写入到GT9147 FLASH?  即是否掉电保存
 679:Core/Src/Mytouch.c **** 	for(i=0;i<sizeof(GT9147_CFG_TBL);i++)buf[0]+=GT9147_CFG_TBL[i];//计算校验和
 680:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 681:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CFGS_REG,(u8*)GT9147_CFG_TBL,sizeof(GT9147_CFG_TBL));//发送寄存器配置
 682:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CHECK_REG,buf,2);//写入校验和,和配置更新标记
 683:Core/Src/Mytouch.c **** 	return 0;
 684:Core/Src/Mytouch.c **** } 
 685:Core/Src/Mytouch.c **** //向GT9147写入一次数据
 686:Core/Src/Mytouch.c **** //reg:起始寄存器地址
 687:Core/Src/Mytouch.c **** //buf:数据缓缓存区
 688:Core/Src/Mytouch.c **** //len:写数据长度
 689:Core/Src/Mytouch.c **** //返回值:0,成功;1,失败.
ARM GAS  /tmp/cckdBZRC.s 			page 49


 690:Core/Src/Mytouch.c **** u8 GT9147_WR_Reg(u16 reg,u8 *buf,u8 len)
 691:Core/Src/Mytouch.c **** {
 1953              		.loc 1 691 1 view -0
 1954              		.cfi_startproc
 1955              		@ args = 0, pretend = 0, frame = 0
 1956              		@ frame_needed = 0, uses_anonymous_args = 0
 1957              		.loc 1 691 1 is_stmt 0 view .LVU436
 1958 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1959              	.LCFI27:
 1960              		.cfi_def_cfa_offset 24
 1961              		.cfi_offset 3, -24
 1962              		.cfi_offset 4, -20
 1963              		.cfi_offset 5, -16
 1964              		.cfi_offset 6, -12
 1965              		.cfi_offset 7, -8
 1966              		.cfi_offset 14, -4
 1967 0002 0446     		mov	r4, r0
 1968 0004 0F46     		mov	r7, r1
 1969 0006 1546     		mov	r5, r2
 692:Core/Src/Mytouch.c **** 	u8 i;
 1970              		.loc 1 692 2 is_stmt 1 view .LVU437
 693:Core/Src/Mytouch.c **** 	u8 ret=0;
 1971              		.loc 1 693 2 view .LVU438
 1972              	.LVL201:
 694:Core/Src/Mytouch.c **** 	CT_IIC_Start();	
 1973              		.loc 1 694 2 view .LVU439
 1974 0008 FFF7FEFF 		bl	CT_IIC_Start
 1975              	.LVL202:
 695:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(GT_CMD_WR);   	//发送写命令 	 
 1976              		.loc 1 695 3 view .LVU440
 1977 000c 2820     		movs	r0, #40
 1978 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 1979              	.LVL203:
 696:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();
 1980              		.loc 1 696 2 view .LVU441
 1981 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 1982              	.LVL204:
 697:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg>>8);   	//发送高8位地址
 1983              		.loc 1 697 2 view .LVU442
 1984 0016 200A     		lsrs	r0, r4, #8
 1985 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 1986              	.LVL205:
 698:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 1987              		.loc 1 698 2 view .LVU443
 1988 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 1989              	.LVL206:
 699:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 1990              		.loc 1 699 2 view .LVU444
 1991 0020 E0B2     		uxtb	r0, r4
 1992 0022 FFF7FEFF 		bl	CT_IIC_Send_Byte
 1993              	.LVL207:
 700:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 1994              		.loc 1 700 2 view .LVU445
 1995 0026 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 1996              	.LVL208:
 701:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 1997              		.loc 1 701 2 view .LVU446
ARM GAS  /tmp/cckdBZRC.s 			page 50


 693:Core/Src/Mytouch.c **** 	CT_IIC_Start();	
 1998              		.loc 1 693 5 is_stmt 0 view .LVU447
 1999 002a 0026     		movs	r6, #0
 2000              		.loc 1 701 7 view .LVU448
 2001 002c 3446     		mov	r4, r6
 2002              		.loc 1 701 2 view .LVU449
 2003 002e 01E0     		b	.L122
 2004              	.LVL209:
 2005              	.L126:
 2006              		.loc 1 701 16 is_stmt 1 discriminator 2 view .LVU450
 2007              		.loc 1 701 17 is_stmt 0 discriminator 2 view .LVU451
 2008 0030 0134     		adds	r4, r4, #1
 2009              	.LVL210:
 2010              		.loc 1 701 17 discriminator 2 view .LVU452
 2011 0032 E4B2     		uxtb	r4, r4
 2012              	.LVL211:
 2013              	.L122:
 2014              		.loc 1 701 10 is_stmt 1 discriminator 1 view .LVU453
 2015              		.loc 1 701 2 is_stmt 0 discriminator 1 view .LVU454
 2016 0034 AC42     		cmp	r4, r5
 2017 0036 07D2     		bcs	.L123
 702:Core/Src/Mytouch.c **** 	{	   
 703:Core/Src/Mytouch.c ****     	CT_IIC_Send_Byte(buf[i]);  	//发数据
 2018              		.loc 1 703 6 is_stmt 1 view .LVU455
 2019 0038 385D     		ldrb	r0, [r7, r4]	@ zero_extendqisi2
 2020 003a FFF7FEFF 		bl	CT_IIC_Send_Byte
 2021              	.LVL212:
 704:Core/Src/Mytouch.c **** 		ret=CT_IIC_Wait_Ack();
 2022              		.loc 1 704 3 view .LVU456
 2023              		.loc 1 704 7 is_stmt 0 view .LVU457
 2024 003e FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2025              	.LVL213:
 705:Core/Src/Mytouch.c **** 		if(ret)break;  
 2026              		.loc 1 705 3 is_stmt 1 view .LVU458
 2027              		.loc 1 705 5 is_stmt 0 view .LVU459
 2028 0042 0646     		mov	r6, r0
 2029 0044 0028     		cmp	r0, #0
 2030 0046 F3D0     		beq	.L126
 2031              	.LVL214:
 2032              	.L123:
 706:Core/Src/Mytouch.c **** 	}
 707:Core/Src/Mytouch.c ****     CT_IIC_Stop();					//产生一个停止条件	    
 2033              		.loc 1 707 5 is_stmt 1 view .LVU460
 2034 0048 FFF7FEFF 		bl	CT_IIC_Stop
 2035              	.LVL215:
 708:Core/Src/Mytouch.c **** 	return ret; 
 2036              		.loc 1 708 2 view .LVU461
 709:Core/Src/Mytouch.c **** }
 2037              		.loc 1 709 1 is_stmt 0 view .LVU462
 2038 004c 3046     		mov	r0, r6
 2039 004e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2040              		.loc 1 709 1 view .LVU463
 2041              		.cfi_endproc
 2042              	.LFE170:
 2044              		.section	.text.GT9147_Send_Cfg,"ax",%progbits
 2045              		.align	1
 2046              		.global	GT9147_Send_Cfg
ARM GAS  /tmp/cckdBZRC.s 			page 51


 2047              		.syntax unified
 2048              		.thumb
 2049              		.thumb_func
 2051              	GT9147_Send_Cfg:
 2052              	.LVL216:
 2053              	.LFB169:
 674:Core/Src/Mytouch.c **** 	u8 buf[2];
 2054              		.loc 1 674 1 is_stmt 1 view -0
 2055              		.cfi_startproc
 2056              		@ args = 0, pretend = 0, frame = 8
 2057              		@ frame_needed = 0, uses_anonymous_args = 0
 674:Core/Src/Mytouch.c **** 	u8 buf[2];
 2058              		.loc 1 674 1 is_stmt 0 view .LVU465
 2059 0000 00B5     		push	{lr}
 2060              	.LCFI28:
 2061              		.cfi_def_cfa_offset 4
 2062              		.cfi_offset 14, -4
 2063 0002 83B0     		sub	sp, sp, #12
 2064              	.LCFI29:
 2065              		.cfi_def_cfa_offset 16
 675:Core/Src/Mytouch.c **** 	u8 i=0;
 2066              		.loc 1 675 2 is_stmt 1 view .LVU466
 676:Core/Src/Mytouch.c **** 	buf[0]=0;
 2067              		.loc 1 676 2 view .LVU467
 2068              	.LVL217:
 677:Core/Src/Mytouch.c **** 	buf[1]=mode;	//是否写入到GT9147 FLASH?  即是否掉电保存
 2069              		.loc 1 677 2 view .LVU468
 677:Core/Src/Mytouch.c **** 	buf[1]=mode;	//是否写入到GT9147 FLASH?  即是否掉电保存
 2070              		.loc 1 677 8 is_stmt 0 view .LVU469
 2071 0004 0023     		movs	r3, #0
 2072 0006 8DF80430 		strb	r3, [sp, #4]
 678:Core/Src/Mytouch.c **** 	for(i=0;i<sizeof(GT9147_CFG_TBL);i++)buf[0]+=GT9147_CFG_TBL[i];//计算校验和
 2073              		.loc 1 678 2 is_stmt 1 view .LVU470
 678:Core/Src/Mytouch.c **** 	for(i=0;i<sizeof(GT9147_CFG_TBL);i++)buf[0]+=GT9147_CFG_TBL[i];//计算校验和
 2074              		.loc 1 678 8 is_stmt 0 view .LVU471
 2075 000a 8DF80500 		strb	r0, [sp, #5]
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2076              		.loc 1 679 2 is_stmt 1 view .LVU472
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2077              		.loc 1 679 2 is_stmt 0 view .LVU473
 2078 000e 08E0     		b	.L128
 2079              	.LVL218:
 2080              	.L129:
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2081              		.loc 1 679 39 is_stmt 1 discriminator 3 view .LVU474
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2082              		.loc 1 679 61 is_stmt 0 discriminator 3 view .LVU475
 2083 0010 0F4A     		ldr	r2, .L131
 2084 0012 D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2085              		.loc 1 679 45 discriminator 3 view .LVU476
 2086 0014 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 2087 0018 0A44     		add	r2, r2, r1
 2088 001a 8DF80420 		strb	r2, [sp, #4]
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2089              		.loc 1 679 35 is_stmt 1 discriminator 3 view .LVU477
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
ARM GAS  /tmp/cckdBZRC.s 			page 52


 2090              		.loc 1 679 36 is_stmt 0 discriminator 3 view .LVU478
 2091 001e 0133     		adds	r3, r3, #1
 2092              	.LVL219:
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2093              		.loc 1 679 36 discriminator 3 view .LVU479
 2094 0020 DBB2     		uxtb	r3, r3
 2095              	.LVL220:
 2096              	.L128:
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2097              		.loc 1 679 10 is_stmt 1 discriminator 1 view .LVU480
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2098              		.loc 1 679 2 is_stmt 0 discriminator 1 view .LVU481
 2099 0022 B72B     		cmp	r3, #183
 2100 0024 F4D9     		bls	.L129
 680:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CFGS_REG,(u8*)GT9147_CFG_TBL,sizeof(GT9147_CFG_TBL));//发送寄存器配置
 2101              		.loc 1 680 5 is_stmt 1 view .LVU482
 680:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CFGS_REG,(u8*)GT9147_CFG_TBL,sizeof(GT9147_CFG_TBL));//发送寄存器配置
 2102              		.loc 1 680 17 is_stmt 0 view .LVU483
 2103 0026 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 2104              	.LVL221:
 680:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CFGS_REG,(u8*)GT9147_CFG_TBL,sizeof(GT9147_CFG_TBL));//发送寄存器配置
 2105              		.loc 1 680 11 view .LVU484
 2106 002a 5B42     		rsbs	r3, r3, #0
 2107 002c 8DF80430 		strb	r3, [sp, #4]
 681:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CHECK_REG,buf,2);//写入校验和,和配置更新标记
 2108              		.loc 1 681 2 is_stmt 1 view .LVU485
 2109 0030 B822     		movs	r2, #184
 2110 0032 0749     		ldr	r1, .L131
 2111 0034 48F24700 		movw	r0, #32839
 2112              	.LVL222:
 681:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CHECK_REG,buf,2);//写入校验和,和配置更新标记
 2113              		.loc 1 681 2 is_stmt 0 view .LVU486
 2114 0038 FFF7FEFF 		bl	GT9147_WR_Reg
 2115              	.LVL223:
 682:Core/Src/Mytouch.c **** 	return 0;
 2116              		.loc 1 682 2 is_stmt 1 view .LVU487
 2117 003c 0222     		movs	r2, #2
 2118 003e 01A9     		add	r1, sp, #4
 2119 0040 48F2FF00 		movw	r0, #33023
 2120 0044 FFF7FEFF 		bl	GT9147_WR_Reg
 2121              	.LVL224:
 683:Core/Src/Mytouch.c **** } 
 2122              		.loc 1 683 2 view .LVU488
 684:Core/Src/Mytouch.c **** //向GT9147写入一次数据
 2123              		.loc 1 684 1 is_stmt 0 view .LVU489
 2124 0048 0020     		movs	r0, #0
 2125 004a 03B0     		add	sp, sp, #12
 2126              	.LCFI30:
 2127              		.cfi_def_cfa_offset 4
 2128              		@ sp needed
 2129 004c 5DF804FB 		ldr	pc, [sp], #4
 2130              	.L132:
 2131              		.align	2
 2132              	.L131:
 2133 0050 00000000 		.word	.LANCHOR3
 2134              		.cfi_endproc
 2135              	.LFE169:
ARM GAS  /tmp/cckdBZRC.s 			page 53


 2137              		.section	.text.GT9147_RD_Reg,"ax",%progbits
 2138              		.align	1
 2139              		.global	GT9147_RD_Reg
 2140              		.syntax unified
 2141              		.thumb
 2142              		.thumb_func
 2144              	GT9147_RD_Reg:
 2145              	.LVL225:
 2146              	.LFB171:
 710:Core/Src/Mytouch.c **** //从GT9147读出一次数据
 711:Core/Src/Mytouch.c **** //reg:起始寄存器地址
 712:Core/Src/Mytouch.c **** //buf:数据缓缓存区
 713:Core/Src/Mytouch.c **** //len:读数据长度			  
 714:Core/Src/Mytouch.c **** void GT9147_RD_Reg(u16 reg,u8 *buf,u8 len)
 715:Core/Src/Mytouch.c **** {
 2147              		.loc 1 715 1 is_stmt 1 view -0
 2148              		.cfi_startproc
 2149              		@ args = 0, pretend = 0, frame = 0
 2150              		@ frame_needed = 0, uses_anonymous_args = 0
 2151              		.loc 1 715 1 is_stmt 0 view .LVU491
 2152 0000 70B5     		push	{r4, r5, r6, lr}
 2153              	.LCFI31:
 2154              		.cfi_def_cfa_offset 16
 2155              		.cfi_offset 4, -16
 2156              		.cfi_offset 5, -12
 2157              		.cfi_offset 6, -8
 2158              		.cfi_offset 14, -4
 2159 0002 0446     		mov	r4, r0
 2160 0004 0E46     		mov	r6, r1
 2161 0006 1546     		mov	r5, r2
 716:Core/Src/Mytouch.c **** 	u8 i; 
 2162              		.loc 1 716 2 is_stmt 1 view .LVU492
 717:Core/Src/Mytouch.c ****  	CT_IIC_Start();	
 2163              		.loc 1 717 3 view .LVU493
 2164 0008 FFF7FEFF 		bl	CT_IIC_Start
 2165              	.LVL226:
 718:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(GT_CMD_WR);   //发送写命令 	 
 2166              		.loc 1 718 3 view .LVU494
 2167 000c 2820     		movs	r0, #40
 2168 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 2169              	.LVL227:
 719:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();
 2170              		.loc 1 719 2 view .LVU495
 2171 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2172              	.LVL228:
 720:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg>>8);   	//发送高8位地址
 2173              		.loc 1 720 3 view .LVU496
 2174 0016 200A     		lsrs	r0, r4, #8
 2175 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 2176              	.LVL229:
 721:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 2177              		.loc 1 721 2 view .LVU497
 2178 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2179              	.LVL230:
 722:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 2180              		.loc 1 722 3 view .LVU498
 2181 0020 E0B2     		uxtb	r0, r4
ARM GAS  /tmp/cckdBZRC.s 			page 54


 2182 0022 FFF7FEFF 		bl	CT_IIC_Send_Byte
 2183              	.LVL231:
 723:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 2184              		.loc 1 723 2 view .LVU499
 2185 0026 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2186              	.LVL232:
 724:Core/Src/Mytouch.c ****  	CT_IIC_Start();  	 	   
 2187              		.loc 1 724 3 view .LVU500
 2188 002a FFF7FEFF 		bl	CT_IIC_Start
 2189              	.LVL233:
 725:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(GT_CMD_RD);   //发送读命令		   
 2190              		.loc 1 725 2 view .LVU501
 2191 002e 2920     		movs	r0, #41
 2192 0030 FFF7FEFF 		bl	CT_IIC_Send_Byte
 2193              	.LVL234:
 726:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();	   
 2194              		.loc 1 726 2 view .LVU502
 2195 0034 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2196              	.LVL235:
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2197              		.loc 1 727 2 view .LVU503
 2198              		.loc 1 727 7 is_stmt 0 view .LVU504
 2199 0038 0024     		movs	r4, #0
 2200              		.loc 1 727 2 view .LVU505
 2201 003a 08E0     		b	.L134
 2202              	.LVL236:
 2203              	.L135:
 728:Core/Src/Mytouch.c **** 	{	   
 729:Core/Src/Mytouch.c ****     	buf[i]=CT_IIC_Read_Byte(i==(len-1)?0:1); //发数据	  
 2204              		.loc 1 729 6 is_stmt 1 discriminator 3 view .LVU506
 2205              		.loc 1 729 37 is_stmt 0 discriminator 3 view .LVU507
 2206 003c 681E     		subs	r0, r5, #1
 2207              		.loc 1 729 13 discriminator 3 view .LVU508
 2208 003e 201A     		subs	r0, r4, r0
 2209 0040 18BF     		it	ne
 2210 0042 0120     		movne	r0, #1
 2211 0044 FFF7FEFF 		bl	CT_IIC_Read_Byte
 2212              	.LVL237:
 2213              		.loc 1 729 12 discriminator 3 view .LVU509
 2214 0048 3055     		strb	r0, [r6, r4]
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2215              		.loc 1 727 16 is_stmt 1 discriminator 3 view .LVU510
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2216              		.loc 1 727 17 is_stmt 0 discriminator 3 view .LVU511
 2217 004a 0134     		adds	r4, r4, #1
 2218              	.LVL238:
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2219              		.loc 1 727 17 discriminator 3 view .LVU512
 2220 004c E4B2     		uxtb	r4, r4
 2221              	.LVL239:
 2222              	.L134:
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2223              		.loc 1 727 10 is_stmt 1 discriminator 1 view .LVU513
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2224              		.loc 1 727 2 is_stmt 0 discriminator 1 view .LVU514
 2225 004e AC42     		cmp	r4, r5
 2226 0050 F4D3     		bcc	.L135
ARM GAS  /tmp/cckdBZRC.s 			page 55


 730:Core/Src/Mytouch.c **** 	} 
 731:Core/Src/Mytouch.c ****     CT_IIC_Stop();//产生一个停止条件    
 2227              		.loc 1 731 5 is_stmt 1 view .LVU515
 2228 0052 FFF7FEFF 		bl	CT_IIC_Stop
 2229              	.LVL240:
 732:Core/Src/Mytouch.c **** } 
 2230              		.loc 1 732 1 is_stmt 0 view .LVU516
 2231 0056 70BD     		pop	{r4, r5, r6, pc}
 2232              		.loc 1 732 1 view .LVU517
 2233              		.cfi_endproc
 2234              	.LFE171:
 2236              		.section	.text.GT9147_Scan,"ax",%progbits
 2237              		.align	1
 2238              		.global	GT9147_Scan
 2239              		.syntax unified
 2240              		.thumb
 2241              		.thumb_func
 2243              	GT9147_Scan:
 2244              	.LVL241:
 2245              	.LFB173:
 733:Core/Src/Mytouch.c **** //初始化GT9147触摸屏
 734:Core/Src/Mytouch.c **** //返回值:0,初始化成功;1,初始化失败 
 735:Core/Src/Mytouch.c **** u8 GT9147_Init(void)
 736:Core/Src/Mytouch.c **** {
 737:Core/Src/Mytouch.c **** 	u8 temp[5]; 
 738:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 739:Core/Src/Mytouch.c ****     
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
 741:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 742:Core/Src/Mytouch.c ****                 
 743:Core/Src/Mytouch.c ****     //PH7
 744:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 745:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 746:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 747:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 748:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 749:Core/Src/Mytouch.c ****             
 750:Core/Src/Mytouch.c ****     //PI8
 751:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_8;            //PI8
 752:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 753:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 754:Core/Src/Mytouch.c **** 	CT_IIC_Init();      	//初始化电容屏的I2C总线  
 755:Core/Src/Mytouch.c **** 	GT_RST(0);				//复位
 756:Core/Src/Mytouch.c **** 	HAL_Delay(10);
 757:Core/Src/Mytouch.c ****  	GT_RST(1);				//释放复位		    
 758:Core/Src/Mytouch.c **** 	HAL_Delay(10); 
 759:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 760:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 761:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_NOPULL;          //不带上下拉，浮空输入
 762:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 763:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 764:Core/Src/Mytouch.c **** 	HAL_Delay(100);  
 765:Core/Src/Mytouch.c **** 	GT9147_RD_Reg(GT_PID_REG,temp,4);//读取产品ID
 766:Core/Src/Mytouch.c **** 	temp[4]=0;
 767:Core/Src/Mytouch.c **** 	printf("CTP ID:%s\r\n",temp);	//打印ID
 768:Core/Src/Mytouch.c **** 	if(strcmp((char*)temp,"9147")==0)//ID==9147
 769:Core/Src/Mytouch.c **** 	{
ARM GAS  /tmp/cckdBZRC.s 			page 56


 770:Core/Src/Mytouch.c **** 		temp[0]=0X02;			
 771:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//软复位GT9147
 772:Core/Src/Mytouch.c **** 		GT9147_RD_Reg(GT_CFGS_REG,temp,1);//读取GT_CFGS_REG寄存器
 773:Core/Src/Mytouch.c **** 		if(temp[0]<0X60)//默认版本比较低,需要更新flash配置
 774:Core/Src/Mytouch.c **** 		{
 775:Core/Src/Mytouch.c **** 			printf("Default Ver:%d\r\n",temp[0]);
 776:Core/Src/Mytouch.c ****             if(lcddev.id==0X5510)GT9147_Send_Cfg(1);//更新并保存配置
 777:Core/Src/Mytouch.c **** 		}
 778:Core/Src/Mytouch.c **** 		HAL_Delay(10);
 779:Core/Src/Mytouch.c **** 		temp[0]=0X00;	 
 780:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//结束复位   
 781:Core/Src/Mytouch.c **** 		return 0;
 782:Core/Src/Mytouch.c **** 	} 
 783:Core/Src/Mytouch.c **** 	return 0;
 784:Core/Src/Mytouch.c **** }
 785:Core/Src/Mytouch.c **** const u16 GT9147_TPX_TBL[5]={GT_TP1_REG,GT_TP2_REG,GT_TP3_REG,GT_TP4_REG,GT_TP5_REG};
 786:Core/Src/Mytouch.c **** //扫描触摸屏(采用查询方式)
 787:Core/Src/Mytouch.c **** //mode:0,正常扫描.
 788:Core/Src/Mytouch.c **** //返回值:当前触屏状态.
 789:Core/Src/Mytouch.c **** //0,触屏无触摸;1,触屏有触摸
 790:Core/Src/Mytouch.c **** u8 GT9147_Scan(u8 mode)
 791:Core/Src/Mytouch.c **** {
 2246              		.loc 1 791 1 is_stmt 1 view -0
 2247              		.cfi_startproc
 2248              		@ args = 0, pretend = 0, frame = 16
 2249              		@ frame_needed = 0, uses_anonymous_args = 0
 2250              		.loc 1 791 1 is_stmt 0 view .LVU519
 2251 0000 70B5     		push	{r4, r5, r6, lr}
 2252              	.LCFI32:
 2253              		.cfi_def_cfa_offset 16
 2254              		.cfi_offset 4, -16
 2255              		.cfi_offset 5, -12
 2256              		.cfi_offset 6, -8
 2257              		.cfi_offset 14, -4
 2258 0002 84B0     		sub	sp, sp, #16
 2259              	.LCFI33:
 2260              		.cfi_def_cfa_offset 32
 2261 0004 8DF80700 		strb	r0, [sp, #7]
 792:Core/Src/Mytouch.c **** 	u8 buf[4];
 2262              		.loc 1 792 2 is_stmt 1 view .LVU520
 793:Core/Src/Mytouch.c **** 	u8 i=0;
 2263              		.loc 1 793 2 view .LVU521
 2264              	.LVL242:
 794:Core/Src/Mytouch.c **** 	u8 res=0;
 2265              		.loc 1 794 2 view .LVU522
 795:Core/Src/Mytouch.c **** 	u8 temp;
 2266              		.loc 1 795 2 view .LVU523
 796:Core/Src/Mytouch.c **** 	u8 tempsta;
 2267              		.loc 1 796 2 view .LVU524
 797:Core/Src/Mytouch.c ****  	static u8 t=0;//控制查询间隔,从而降低CPU占用率   
 2268              		.loc 1 797 3 view .LVU525
 798:Core/Src/Mytouch.c **** 	t++;
 2269              		.loc 1 798 2 view .LVU526
 2270              		.loc 1 798 3 is_stmt 0 view .LVU527
 2271 0008 B44B     		ldr	r3, .L164
 2272 000a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2273 000c 0132     		adds	r2, r2, #1
ARM GAS  /tmp/cckdBZRC.s 			page 57


 2274 000e D2B2     		uxtb	r2, r2
 2275 0010 1A70     		strb	r2, [r3]
 799:Core/Src/Mytouch.c **** 	if((t%10)==0||t<10)//空闲时,每进入10次CTP_Scan函数才检测1次,从而节省CPU使用率
 2276              		.loc 1 799 2 is_stmt 1 view .LVU528
 2277              		.loc 1 799 11 is_stmt 0 view .LVU529
 2278 0012 B34B     		ldr	r3, .L164+4
 2279 0014 A3FB0213 		umull	r1, r3, r3, r2
 2280 0018 DB08     		lsrs	r3, r3, #3
 2281 001a 03EB8303 		add	r3, r3, r3, lsl #2
 2282 001e A2EB4303 		sub	r3, r2, r3, lsl #1
 2283              		.loc 1 799 4 view .LVU530
 2284 0022 13F0FF0F 		tst	r3, #255
 2285 0026 02D0     		beq	.L138
 2286              		.loc 1 799 14 discriminator 1 view .LVU531
 2287 0028 092A     		cmp	r2, #9
 2288 002a 00F22E81 		bhi	.L155
 2289              	.L138:
 800:Core/Src/Mytouch.c **** 	{
 801:Core/Src/Mytouch.c **** 		GT9147_RD_Reg(GT_GSTID_REG,&mode,1);	//读取触摸点的状态  
 2290              		.loc 1 801 3 is_stmt 1 view .LVU532
 2291 002e 0122     		movs	r2, #1
 2292 0030 0DF10701 		add	r1, sp, #7
 2293 0034 48F24E10 		movw	r0, #33102
 2294              	.LVL243:
 2295              		.loc 1 801 3 is_stmt 0 view .LVU533
 2296 0038 FFF7FEFF 		bl	GT9147_RD_Reg
 2297              	.LVL244:
 802:Core/Src/Mytouch.c ****  		if(mode&0X80&&((mode&0XF)<6))
 2298              		.loc 1 802 4 is_stmt 1 view .LVU534
 2299              		.loc 1 802 7 is_stmt 0 view .LVU535
 2300 003c 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2301 0040 9DF90720 		ldrsb	r2, [sp, #7]
 2302              		.loc 1 802 6 view .LVU536
 2303 0044 002A     		cmp	r2, #0
 2304 0046 22DB     		blt	.L158
 2305              	.L140:
 803:Core/Src/Mytouch.c **** 		{
 804:Core/Src/Mytouch.c **** 			temp=0;
 805:Core/Src/Mytouch.c **** 			GT9147_WR_Reg(GT_GSTID_REG,&temp,1);//清标志 		
 806:Core/Src/Mytouch.c **** 		}		
 807:Core/Src/Mytouch.c **** 		if((mode&0XF)&&((mode&0XF)<6))
 2306              		.loc 1 807 3 is_stmt 1 view .LVU537
 2307              		.loc 1 807 11 is_stmt 0 view .LVU538
 2308 0048 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2309              		.loc 1 807 16 view .LVU539
 2310 004c 03F00F02 		and	r2, r3, #15
 2311 0050 13F00F03 		ands	r3, r3, #15
 2312 0054 18BF     		it	ne
 2313 0056 0123     		movne	r3, #1
 2314 0058 052A     		cmp	r2, #5
 2315 005a CCBF     		ite	gt
 2316 005c 0023     		movgt	r3, #0
 2317 005e 03F00103 		andle	r3, r3, #1
 2318              		.loc 1 807 5 view .LVU540
 2319 0062 002B     		cmp	r3, #0
 2320 0064 00F02181 		beq	.L156
 808:Core/Src/Mytouch.c **** 		{
ARM GAS  /tmp/cckdBZRC.s 			page 58


 809:Core/Src/Mytouch.c **** 			temp=0XFF<<(mode&0XF);		//将点的个数转换为1的位数,匹配tp_dev.sta定义 
 2321              		.loc 1 809 4 is_stmt 1 view .LVU541
 2322              		.loc 1 809 13 is_stmt 0 view .LVU542
 2323 0068 FF23     		movs	r3, #255
 2324 006a 9340     		lsls	r3, r3, r2
 2325              		.loc 1 809 8 view .LVU543
 2326 006c DBB2     		uxtb	r3, r3
 2327 006e 8DF80B30 		strb	r3, [sp, #11]
 810:Core/Src/Mytouch.c **** 			tempsta=tp_dev.sta;			//保存当前的tp_dev.sta值
 2328              		.loc 1 810 4 is_stmt 1 view .LVU544
 2329              		.loc 1 810 11 is_stmt 0 view .LVU545
 2330 0072 9C4A     		ldr	r2, .L164+8
 2331 0074 92F82050 		ldrb	r5, [r2, #32]	@ zero_extendqisi2
 2332              	.LVL245:
 811:Core/Src/Mytouch.c **** 			tp_dev.sta=(~temp)|TP_PRES_DOWN|TP_CATH_PRES; 
 2333              		.loc 1 811 4 is_stmt 1 view .LVU546
 2334              		.loc 1 811 35 is_stmt 0 view .LVU547
 2335 0078 DB43     		mvns	r3, r3
 2336 007a 63F03F03 		orn	r3, r3, #63
 2337              		.loc 1 811 14 view .LVU548
 2338 007e 82F82030 		strb	r3, [r2, #32]
 812:Core/Src/Mytouch.c **** 			tp_dev.x[4]=tp_dev.x[0];	//保存触点0的数据
 2339              		.loc 1 812 4 is_stmt 1 view .LVU549
 2340              		.loc 1 812 24 is_stmt 0 view .LVU550
 2341 0082 9389     		ldrh	r3, [r2, #12]
 2342              		.loc 1 812 15 view .LVU551
 2343 0084 9382     		strh	r3, [r2, #20]	@ movhi
 813:Core/Src/Mytouch.c **** 			tp_dev.y[4]=tp_dev.y[0];
 2344              		.loc 1 813 4 is_stmt 1 view .LVU552
 2345              		.loc 1 813 24 is_stmt 0 view .LVU553
 2346 0086 D38A     		ldrh	r3, [r2, #22]
 2347              		.loc 1 813 15 view .LVU554
 2348 0088 D383     		strh	r3, [r2, #30]	@ movhi
 814:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 2349              		.loc 1 814 4 is_stmt 1 view .LVU555
 2350              		.loc 1 814 9 is_stmt 0 view .LVU556
 2351 008a 0024     		movs	r4, #0
 2352              		.loc 1 814 4 view .LVU557
 2353 008c 2FE0     		b	.L141
 2354              	.LVL246:
 2355              	.L158:
 802:Core/Src/Mytouch.c **** 		{
 2356              		.loc 1 802 16 discriminator 1 view .LVU558
 2357 008e 03F00F03 		and	r3, r3, #15
 2358 0092 052B     		cmp	r3, #5
 2359 0094 D8D8     		bhi	.L140
 804:Core/Src/Mytouch.c **** 			GT9147_WR_Reg(GT_GSTID_REG,&temp,1);//清标志 		
 2360              		.loc 1 804 4 is_stmt 1 view .LVU559
 804:Core/Src/Mytouch.c **** 			GT9147_WR_Reg(GT_GSTID_REG,&temp,1);//清标志 		
 2361              		.loc 1 804 8 is_stmt 0 view .LVU560
 2362 0096 0023     		movs	r3, #0
 2363 0098 8DF80B30 		strb	r3, [sp, #11]
 805:Core/Src/Mytouch.c **** 		}		
 2364              		.loc 1 805 4 is_stmt 1 view .LVU561
 2365 009c 0122     		movs	r2, #1
 2366 009e 0DF10B01 		add	r1, sp, #11
 2367 00a2 48F24E10 		movw	r0, #33102
ARM GAS  /tmp/cckdBZRC.s 			page 59


 2368 00a6 FFF7FEFF 		bl	GT9147_WR_Reg
 2369              	.LVL247:
 2370 00aa CDE7     		b	.L140
 2371              	.LVL248:
 2372              	.L160:
 815:Core/Src/Mytouch.c **** 			{
 816:Core/Src/Mytouch.c **** 				if(tp_dev.sta&(1<<i))	//触摸有效?
 817:Core/Src/Mytouch.c **** 				{
 818:Core/Src/Mytouch.c **** 					GT9147_RD_Reg(GT9147_TPX_TBL[i],buf,4);	//读取XY坐标值
 819:Core/Src/Mytouch.c ****                     if(lcddev.id==0X5510)   //4.3寸800*480 MCU屏
 820:Core/Src/Mytouch.c ****                     {
 821:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01)//横屏
 2373              		.loc 1 821 25 view .LVU562
 2374              		.loc 1 821 34 is_stmt 0 view .LVU563
 2375 00ac 8D4B     		ldr	r3, .L164+8
 2376 00ae 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 2377              		.loc 1 821 27 view .LVU564
 2378 00b2 13F0010F 		tst	r3, #1
 2379 00b6 56D0     		beq	.L144
 822:Core/Src/Mytouch.c ****                         {
 823:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[1]<<8)+buf[0];
 2380              		.loc 1 823 29 is_stmt 1 view .LVU565
 2381              		.loc 1 823 50 is_stmt 0 view .LVU566
 2382 00b8 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 2383              		.loc 1 823 61 view .LVU567
 2384 00bc 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 2385              		.loc 1 823 57 view .LVU568
 2386 00c0 01EB0321 		add	r1, r1, r3, lsl #8
 2387              		.loc 1 823 40 view .LVU569
 2388 00c4 874A     		ldr	r2, .L164+8
 2389 00c6 04F10803 		add	r3, r4, #8
 2390 00ca 02EB4303 		add	r3, r2, r3, lsl #1
 2391 00ce D980     		strh	r1, [r3, #6]	@ movhi
 824:Core/Src/Mytouch.c ****                             tp_dev.x[i]=800-(((u16)buf[3]<<8)+buf[2]);
 2392              		.loc 1 824 29 is_stmt 1 view .LVU570
 2393              		.loc 1 824 55 is_stmt 0 view .LVU571
 2394 00d0 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 2395              		.loc 1 824 66 view .LVU572
 2396 00d4 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 2397              		.loc 1 824 62 view .LVU573
 2398 00d8 03EB0123 		add	r3, r3, r1, lsl #8
 2399 00dc 9BB2     		uxth	r3, r3
 2400              		.loc 1 824 44 view .LVU574
 2401 00de C3F54873 		rsb	r3, r3, #800
 2402              		.loc 1 824 40 view .LVU575
 2403 00e2 0436     		adds	r6, r6, #4
 2404 00e4 02EB4602 		add	r2, r2, r6, lsl #1
 2405 00e8 9380     		strh	r3, [r2, #4]	@ movhi
 2406              	.L142:
 814:Core/Src/Mytouch.c **** 			{
 2407              		.loc 1 814 16 is_stmt 1 discriminator 2 view .LVU576
 814:Core/Src/Mytouch.c **** 			{
 2408              		.loc 1 814 17 is_stmt 0 discriminator 2 view .LVU577
 2409 00ea 0134     		adds	r4, r4, #1
 2410              	.LVL249:
 814:Core/Src/Mytouch.c **** 			{
 2411              		.loc 1 814 17 discriminator 2 view .LVU578
ARM GAS  /tmp/cckdBZRC.s 			page 60


 2412 00ec E4B2     		uxtb	r4, r4
 2413              	.LVL250:
 2414              	.L141:
 814:Core/Src/Mytouch.c **** 			{
 2415              		.loc 1 814 12 is_stmt 1 discriminator 1 view .LVU579
 814:Core/Src/Mytouch.c **** 			{
 2416              		.loc 1 814 4 is_stmt 0 discriminator 1 view .LVU580
 2417 00ee 042C     		cmp	r4, #4
 2418 00f0 00F29F80 		bhi	.L159
 816:Core/Src/Mytouch.c **** 				{
 2419              		.loc 1 816 5 is_stmt 1 view .LVU581
 816:Core/Src/Mytouch.c **** 				{
 2420              		.loc 1 816 14 is_stmt 0 view .LVU582
 2421 00f4 7B4B     		ldr	r3, .L164+8
 2422 00f6 93F82030 		ldrb	r3, [r3, #32]	@ zero_extendqisi2
 816:Core/Src/Mytouch.c **** 				{
 2423              		.loc 1 816 8 view .LVU583
 2424 00fa 2646     		mov	r6, r4
 2425 00fc 2341     		asrs	r3, r3, r4
 816:Core/Src/Mytouch.c **** 				{
 2426              		.loc 1 816 7 view .LVU584
 2427 00fe 13F0010F 		tst	r3, #1
 2428 0102 F2D0     		beq	.L142
 818:Core/Src/Mytouch.c ****                     if(lcddev.id==0X5510)   //4.3寸800*480 MCU屏
 2429              		.loc 1 818 6 is_stmt 1 view .LVU585
 2430 0104 0422     		movs	r2, #4
 2431 0106 03A9     		add	r1, sp, #12
 2432 0108 774B     		ldr	r3, .L164+12
 2433 010a 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 2434 010e FFF7FEFF 		bl	GT9147_RD_Reg
 2435              	.LVL251:
 819:Core/Src/Mytouch.c ****                     {
 2436              		.loc 1 819 21 view .LVU586
 819:Core/Src/Mytouch.c ****                     {
 2437              		.loc 1 819 30 is_stmt 0 view .LVU587
 2438 0112 764B     		ldr	r3, .L164+16
 2439 0114 9B88     		ldrh	r3, [r3, #4]
 819:Core/Src/Mytouch.c ****                     {
 2440              		.loc 1 819 23 view .LVU588
 2441 0116 45F21052 		movw	r2, #21776
 2442 011a 9342     		cmp	r3, r2
 2443 011c C6D0     		beq	.L160
 825:Core/Src/Mytouch.c ****                         }else
 826:Core/Src/Mytouch.c ****                         {
 827:Core/Src/Mytouch.c ****                             tp_dev.x[i]=((u16)buf[1]<<8)+buf[0];
 828:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 829:Core/Src/Mytouch.c ****                         }  
 830:Core/Src/Mytouch.c ****                     }else if(lcddev.id==0X4342) //4.3寸480*272 RGB屏
 2444              		.loc 1 830 27 is_stmt 1 view .LVU589
 2445              		.loc 1 830 29 is_stmt 0 view .LVU590
 2446 011e 44F24232 		movw	r2, #17218
 2447 0122 9342     		cmp	r3, r2
 2448 0124 35D0     		beq	.L161
 831:Core/Src/Mytouch.c ****                     {
 832:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01)//横屏
 833:Core/Src/Mytouch.c ****                         {
 834:Core/Src/Mytouch.c ****                             tp_dev.x[i]=(((u16)buf[1]<<8)+buf[0]);
ARM GAS  /tmp/cckdBZRC.s 			page 61


 835:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 836:Core/Src/Mytouch.c ****                         }else
 837:Core/Src/Mytouch.c ****                         {
 838:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[1]<<8)+buf[0];
 839:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 840:Core/Src/Mytouch.c ****                         }
 841:Core/Src/Mytouch.c ****                     }else if(lcddev.id==0X4384) //4.3寸800*480 RGB屏
 2449              		.loc 1 841 27 is_stmt 1 view .LVU591
 2450              		.loc 1 841 29 is_stmt 0 view .LVU592
 2451 0126 44F28432 		movw	r2, #17284
 2452 012a 9342     		cmp	r3, r2
 2453 012c DDD1     		bne	.L142
 842:Core/Src/Mytouch.c ****                     {
 843:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01)//横屏
 2454              		.loc 1 843 25 is_stmt 1 view .LVU593
 2455              		.loc 1 843 34 is_stmt 0 view .LVU594
 2456 012e 6D4B     		ldr	r3, .L164+8
 2457 0130 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 2458              		.loc 1 843 27 view .LVU595
 2459 0134 13F0010F 		tst	r3, #1
 2460 0138 61D0     		beq	.L147
 844:Core/Src/Mytouch.c ****                         {
 845:Core/Src/Mytouch.c ****                             tp_dev.x[i]=(((u16)buf[1]<<8)+buf[0]);
 2461              		.loc 1 845 29 is_stmt 1 view .LVU596
 2462              		.loc 1 845 51 is_stmt 0 view .LVU597
 2463 013a 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 2464              		.loc 1 845 62 view .LVU598
 2465 013e 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 2466              		.loc 1 845 58 view .LVU599
 2467 0142 01EB0321 		add	r1, r1, r3, lsl #8
 2468              		.loc 1 845 40 view .LVU600
 2469 0146 674B     		ldr	r3, .L164+8
 2470 0148 221D     		adds	r2, r4, #4
 2471 014a 03EB4202 		add	r2, r3, r2, lsl #1
 2472 014e 9180     		strh	r1, [r2, #4]	@ movhi
 846:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2473              		.loc 1 846 29 is_stmt 1 view .LVU601
 2474              		.loc 1 846 51 is_stmt 0 view .LVU602
 2475 0150 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 2476              		.loc 1 846 62 view .LVU603
 2477 0154 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 2478              		.loc 1 846 58 view .LVU604
 2479 0158 02EB0122 		add	r2, r2, r1, lsl #8
 2480              		.loc 1 846 40 view .LVU605
 2481 015c 0836     		adds	r6, r6, #8
 2482 015e 03EB4603 		add	r3, r3, r6, lsl #1
 2483 0162 DA80     		strh	r2, [r3, #6]	@ movhi
 2484 0164 C1E7     		b	.L142
 2485              	.L144:
 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2486              		.loc 1 827 29 is_stmt 1 view .LVU606
 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2487              		.loc 1 827 50 is_stmt 0 view .LVU607
 2488 0166 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2489              		.loc 1 827 61 view .LVU608
 2490 016a 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
ARM GAS  /tmp/cckdBZRC.s 			page 62


 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2491              		.loc 1 827 57 view .LVU609
 2492 016e 01EB0321 		add	r1, r1, r3, lsl #8
 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2493              		.loc 1 827 40 view .LVU610
 2494 0172 5C4B     		ldr	r3, .L164+8
 2495 0174 221D     		adds	r2, r4, #4
 2496 0176 03EB4202 		add	r2, r3, r2, lsl #1
 2497 017a 9180     		strh	r1, [r2, #4]	@ movhi
 828:Core/Src/Mytouch.c ****                         }  
 2498              		.loc 1 828 29 is_stmt 1 view .LVU611
 828:Core/Src/Mytouch.c ****                         }  
 2499              		.loc 1 828 50 is_stmt 0 view .LVU612
 2500 017c 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 828:Core/Src/Mytouch.c ****                         }  
 2501              		.loc 1 828 61 view .LVU613
 2502 0180 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 828:Core/Src/Mytouch.c ****                         }  
 2503              		.loc 1 828 57 view .LVU614
 2504 0184 02EB0122 		add	r2, r2, r1, lsl #8
 828:Core/Src/Mytouch.c ****                         }  
 2505              		.loc 1 828 40 view .LVU615
 2506 0188 0836     		adds	r6, r6, #8
 2507 018a 03EB4603 		add	r3, r3, r6, lsl #1
 2508 018e DA80     		strh	r2, [r3, #6]	@ movhi
 2509 0190 ABE7     		b	.L142
 2510              	.L161:
 832:Core/Src/Mytouch.c ****                         {
 2511              		.loc 1 832 25 is_stmt 1 view .LVU616
 832:Core/Src/Mytouch.c ****                         {
 2512              		.loc 1 832 34 is_stmt 0 view .LVU617
 2513 0192 544B     		ldr	r3, .L164+8
 2514 0194 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 832:Core/Src/Mytouch.c ****                         {
 2515              		.loc 1 832 27 view .LVU618
 2516 0198 13F0010F 		tst	r3, #1
 2517 019c 15D0     		beq	.L146
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2518              		.loc 1 834 29 is_stmt 1 view .LVU619
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2519              		.loc 1 834 51 is_stmt 0 view .LVU620
 2520 019e 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2521              		.loc 1 834 62 view .LVU621
 2522 01a2 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2523              		.loc 1 834 58 view .LVU622
 2524 01a6 01EB0321 		add	r1, r1, r3, lsl #8
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2525              		.loc 1 834 40 view .LVU623
 2526 01aa 4E4B     		ldr	r3, .L164+8
 2527 01ac 221D     		adds	r2, r4, #4
 2528 01ae 03EB4202 		add	r2, r3, r2, lsl #1
 2529 01b2 9180     		strh	r1, [r2, #4]	@ movhi
 835:Core/Src/Mytouch.c ****                         }else
 2530              		.loc 1 835 29 is_stmt 1 view .LVU624
 835:Core/Src/Mytouch.c ****                         }else
ARM GAS  /tmp/cckdBZRC.s 			page 63


 2531              		.loc 1 835 51 is_stmt 0 view .LVU625
 2532 01b4 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 835:Core/Src/Mytouch.c ****                         }else
 2533              		.loc 1 835 62 view .LVU626
 2534 01b8 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 835:Core/Src/Mytouch.c ****                         }else
 2535              		.loc 1 835 58 view .LVU627
 2536 01bc 02EB0122 		add	r2, r2, r1, lsl #8
 835:Core/Src/Mytouch.c ****                         }else
 2537              		.loc 1 835 40 view .LVU628
 2538 01c0 0836     		adds	r6, r6, #8
 2539 01c2 03EB4603 		add	r3, r3, r6, lsl #1
 2540 01c6 DA80     		strh	r2, [r3, #6]	@ movhi
 2541 01c8 8FE7     		b	.L142
 2542              	.L146:
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2543              		.loc 1 838 29 is_stmt 1 view .LVU629
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2544              		.loc 1 838 50 is_stmt 0 view .LVU630
 2545 01ca 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2546              		.loc 1 838 61 view .LVU631
 2547 01ce 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2548              		.loc 1 838 57 view .LVU632
 2549 01d2 01EB0321 		add	r1, r1, r3, lsl #8
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2550              		.loc 1 838 40 view .LVU633
 2551 01d6 434A     		ldr	r2, .L164+8
 2552 01d8 04F10803 		add	r3, r4, #8
 2553 01dc 02EB4303 		add	r3, r2, r3, lsl #1
 2554 01e0 D980     		strh	r1, [r3, #6]	@ movhi
 839:Core/Src/Mytouch.c ****                         }
 2555              		.loc 1 839 29 is_stmt 1 view .LVU634
 839:Core/Src/Mytouch.c ****                         }
 2556              		.loc 1 839 55 is_stmt 0 view .LVU635
 2557 01e2 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 839:Core/Src/Mytouch.c ****                         }
 2558              		.loc 1 839 66 view .LVU636
 2559 01e6 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 839:Core/Src/Mytouch.c ****                         }
 2560              		.loc 1 839 62 view .LVU637
 2561 01ea 03EB0123 		add	r3, r3, r1, lsl #8
 2562 01ee 9BB2     		uxth	r3, r3
 839:Core/Src/Mytouch.c ****                         }
 2563              		.loc 1 839 44 view .LVU638
 2564 01f0 C3F58873 		rsb	r3, r3, #272
 839:Core/Src/Mytouch.c ****                         }
 2565              		.loc 1 839 40 view .LVU639
 2566 01f4 0436     		adds	r6, r6, #4
 2567 01f6 02EB4602 		add	r2, r2, r6, lsl #1
 2568 01fa 9380     		strh	r3, [r2, #4]	@ movhi
 2569 01fc 75E7     		b	.L142
 2570              	.L147:
 847:Core/Src/Mytouch.c ****                         }else
 848:Core/Src/Mytouch.c ****                         {
 849:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[1]<<8)+buf[0];
ARM GAS  /tmp/cckdBZRC.s 			page 64


 2571              		.loc 1 849 29 is_stmt 1 view .LVU640
 2572              		.loc 1 849 50 is_stmt 0 view .LVU641
 2573 01fe 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 2574              		.loc 1 849 61 view .LVU642
 2575 0202 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 2576              		.loc 1 849 57 view .LVU643
 2577 0206 01EB0321 		add	r1, r1, r3, lsl #8
 2578              		.loc 1 849 40 view .LVU644
 2579 020a 364A     		ldr	r2, .L164+8
 2580 020c 04F10803 		add	r3, r4, #8
 2581 0210 02EB4303 		add	r3, r2, r3, lsl #1
 2582 0214 D980     		strh	r1, [r3, #6]	@ movhi
 850:Core/Src/Mytouch.c ****                             tp_dev.x[i]=480-(((u16)buf[3]<<8)+buf[2]);
 2583              		.loc 1 850 29 is_stmt 1 view .LVU645
 2584              		.loc 1 850 55 is_stmt 0 view .LVU646
 2585 0216 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 2586              		.loc 1 850 66 view .LVU647
 2587 021a 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 2588              		.loc 1 850 62 view .LVU648
 2589 021e 03EB0123 		add	r3, r3, r1, lsl #8
 2590 0222 9BB2     		uxth	r3, r3
 2591              		.loc 1 850 44 view .LVU649
 2592 0224 C3F5F073 		rsb	r3, r3, #480
 2593              		.loc 1 850 40 view .LVU650
 2594 0228 0436     		adds	r6, r6, #4
 2595 022a 02EB4606 		add	r6, r2, r6, lsl #1
 2596 022e B380     		strh	r3, [r6, #4]	@ movhi
 2597 0230 5BE7     		b	.L142
 2598              	.L159:
 851:Core/Src/Mytouch.c ****                         }
 852:Core/Src/Mytouch.c ****                     }
 853:Core/Src/Mytouch.c **** 				}
 854:Core/Src/Mytouch.c **** 			}  
 855:Core/Src/Mytouch.c **** 			res=1;
 2599              		.loc 1 855 4 is_stmt 1 view .LVU651
 2600              	.LVL252:
 856:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)//非法数据(坐标超出了)
 2601              		.loc 1 856 4 view .LVU652
 2602              		.loc 1 856 15 is_stmt 0 view .LVU653
 2603 0232 2C4B     		ldr	r3, .L164+8
 2604 0234 9A89     		ldrh	r2, [r3, #12]
 2605              		.loc 1 856 25 view .LVU654
 2606 0236 2D4B     		ldr	r3, .L164+16
 2607 0238 1B88     		ldrh	r3, [r3]
 2608              		.loc 1 856 6 view .LVU655
 2609 023a 9A42     		cmp	r2, r3
 2610 023c 05D8     		bhi	.L149
 2611              		.loc 1 856 41 discriminator 1 view .LVU656
 2612 023e 294B     		ldr	r3, .L164+8
 2613 0240 DA8A     		ldrh	r2, [r3, #22]
 2614              		.loc 1 856 51 discriminator 1 view .LVU657
 2615 0242 2A4B     		ldr	r3, .L164+16
 2616 0244 5B88     		ldrh	r3, [r3, #2]
 2617              		.loc 1 856 31 discriminator 1 view .LVU658
 2618 0246 9A42     		cmp	r2, r3
 2619 0248 1AD9     		bls	.L150
 2620              	.L149:
ARM GAS  /tmp/cckdBZRC.s 			page 65


 857:Core/Src/Mytouch.c **** 			{ 
 858:Core/Src/Mytouch.c **** 				if((mode&0XF)>1)		//有其他点有数据,则复第二个触点的数据到第一个触点.
 2621              		.loc 1 858 5 is_stmt 1 view .LVU659
 2622              		.loc 1 858 18 is_stmt 0 view .LVU660
 2623 024a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2624              		.loc 1 858 7 view .LVU661
 2625 024e 13F00E0F 		tst	r3, #14
 2626 0252 09D0     		beq	.L151
 859:Core/Src/Mytouch.c **** 				{
 860:Core/Src/Mytouch.c **** 					tp_dev.x[0]=tp_dev.x[1];
 2627              		.loc 1 860 6 is_stmt 1 view .LVU662
 2628              		.loc 1 860 26 is_stmt 0 view .LVU663
 2629 0254 234B     		ldr	r3, .L164+8
 2630 0256 DA89     		ldrh	r2, [r3, #14]
 2631              		.loc 1 860 17 view .LVU664
 2632 0258 9A81     		strh	r2, [r3, #12]	@ movhi
 861:Core/Src/Mytouch.c **** 					tp_dev.y[0]=tp_dev.y[1];
 2633              		.loc 1 861 6 is_stmt 1 view .LVU665
 2634              		.loc 1 861 26 is_stmt 0 view .LVU666
 2635 025a 1A8B     		ldrh	r2, [r3, #24]
 2636              		.loc 1 861 17 view .LVU667
 2637 025c DA82     		strh	r2, [r3, #22]	@ movhi
 862:Core/Src/Mytouch.c **** 					t=0;				//触发一次,则会最少连续监测10次,从而提高命中率
 2638              		.loc 1 862 6 is_stmt 1 view .LVU668
 2639              		.loc 1 862 7 is_stmt 0 view .LVU669
 2640 025e 1F4B     		ldr	r3, .L164
 2641 0260 0022     		movs	r2, #0
 2642 0262 1A70     		strb	r2, [r3]
 855:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)//非法数据(坐标超出了)
 2643              		.loc 1 855 7 view .LVU670
 2644 0264 0120     		movs	r0, #1
 2645 0266 11E0     		b	.L139
 2646              	.L151:
 863:Core/Src/Mytouch.c **** 				}else					//非法数据,则忽略此次数据(还原原来的)  
 864:Core/Src/Mytouch.c **** 				{
 865:Core/Src/Mytouch.c **** 					tp_dev.x[0]=tp_dev.x[4];
 2647              		.loc 1 865 6 is_stmt 1 view .LVU671
 2648              		.loc 1 865 26 is_stmt 0 view .LVU672
 2649 0268 1E4B     		ldr	r3, .L164+8
 2650 026a 9A8A     		ldrh	r2, [r3, #20]
 2651              		.loc 1 865 17 view .LVU673
 2652 026c 9A81     		strh	r2, [r3, #12]	@ movhi
 866:Core/Src/Mytouch.c **** 					tp_dev.y[0]=tp_dev.y[4];
 2653              		.loc 1 866 6 is_stmt 1 view .LVU674
 2654              		.loc 1 866 26 is_stmt 0 view .LVU675
 2655 026e DA8B     		ldrh	r2, [r3, #30]
 2656              		.loc 1 866 17 view .LVU676
 2657 0270 DA82     		strh	r2, [r3, #22]	@ movhi
 867:Core/Src/Mytouch.c **** 					mode=0X80;		
 2658              		.loc 1 867 6 is_stmt 1 view .LVU677
 2659              		.loc 1 867 10 is_stmt 0 view .LVU678
 2660 0272 8022     		movs	r2, #128
 2661 0274 8DF80720 		strb	r2, [sp, #7]
 868:Core/Src/Mytouch.c **** 					tp_dev.sta=tempsta;	//恢复tp_dev.sta
 2662              		.loc 1 868 6 is_stmt 1 view .LVU679
 2663              		.loc 1 868 16 is_stmt 0 view .LVU680
 2664 0278 83F82050 		strb	r5, [r3, #32]
ARM GAS  /tmp/cckdBZRC.s 			page 66


 855:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)//非法数据(坐标超出了)
 2665              		.loc 1 855 7 view .LVU681
 2666 027c 0120     		movs	r0, #1
 2667 027e 05E0     		b	.L139
 2668              	.L150:
 869:Core/Src/Mytouch.c **** 				}
 870:Core/Src/Mytouch.c **** 			}else t=0;					//触发一次,则会最少连续监测10次,从而提高命中率
 2669              		.loc 1 870 10 is_stmt 1 view .LVU682
 2670              		.loc 1 870 11 is_stmt 0 view .LVU683
 2671 0280 164B     		ldr	r3, .L164
 2672 0282 0022     		movs	r2, #0
 2673 0284 1A70     		strb	r2, [r3]
 855:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)//非法数据(坐标超出了)
 2674              		.loc 1 855 7 view .LVU684
 2675 0286 0120     		movs	r0, #1
 2676 0288 00E0     		b	.L139
 2677              	.LVL253:
 2678              	.L155:
 794:Core/Src/Mytouch.c **** 	u8 temp;
 2679              		.loc 1 794 5 view .LVU685
 2680 028a 0020     		movs	r0, #0
 2681              	.LVL254:
 2682              	.L139:
 871:Core/Src/Mytouch.c **** 		}
 872:Core/Src/Mytouch.c **** 	}
 873:Core/Src/Mytouch.c **** 	if((mode&0X8F)==0X80)//无触摸点按下
 2683              		.loc 1 873 2 is_stmt 1 view .LVU686
 2684              		.loc 1 873 10 is_stmt 0 view .LVU687
 2685 028c 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2686              		.loc 1 873 4 view .LVU688
 2687 0290 03F08F03 		and	r3, r3, #143
 2688 0294 802B     		cmp	r3, #128
 2689 0296 0AD0     		beq	.L162
 2690              	.L152:
 874:Core/Src/Mytouch.c **** 	{ 
 875:Core/Src/Mytouch.c **** 		if(tp_dev.sta&TP_PRES_DOWN)	//之前是被按下的
 876:Core/Src/Mytouch.c **** 		{
 877:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<7);	//标记按键松开
 878:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 879:Core/Src/Mytouch.c **** 		{ 
 880:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 881:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 882:Core/Src/Mytouch.c **** 			tp_dev.sta&=0XE0;	//清除点有效标记	
 883:Core/Src/Mytouch.c **** 		}	 
 884:Core/Src/Mytouch.c **** 	} 	
 885:Core/Src/Mytouch.c **** 	if(t>240)t=10;//重新从10开始计数
 2691              		.loc 1 885 2 is_stmt 1 view .LVU689
 2692              		.loc 1 885 6 is_stmt 0 view .LVU690
 2693 0298 104B     		ldr	r3, .L164
 2694 029a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2695              		.loc 1 885 4 view .LVU691
 2696 029c F02B     		cmp	r3, #240
 2697 029e 02D9     		bls	.L154
 2698              		.loc 1 885 11 is_stmt 1 discriminator 1 view .LVU692
 2699              		.loc 1 885 12 is_stmt 0 discriminator 1 view .LVU693
 2700 02a0 0E4B     		ldr	r3, .L164
 2701 02a2 0A22     		movs	r2, #10
ARM GAS  /tmp/cckdBZRC.s 			page 67


 2702 02a4 1A70     		strb	r2, [r3]
 2703              	.L154:
 886:Core/Src/Mytouch.c **** 	return res;
 2704              		.loc 1 886 2 is_stmt 1 view .LVU694
 887:Core/Src/Mytouch.c **** }
 2705              		.loc 1 887 1 is_stmt 0 view .LVU695
 2706 02a6 04B0     		add	sp, sp, #16
 2707              	.LCFI34:
 2708              		.cfi_remember_state
 2709              		.cfi_def_cfa_offset 16
 2710              		@ sp needed
 2711 02a8 70BD     		pop	{r4, r5, r6, pc}
 2712              	.LVL255:
 2713              	.L156:
 2714              	.LCFI35:
 2715              		.cfi_restore_state
 794:Core/Src/Mytouch.c **** 	u8 temp;
 2716              		.loc 1 794 5 view .LVU696
 2717 02aa 0020     		movs	r0, #0
 2718 02ac EEE7     		b	.L139
 2719              	.LVL256:
 2720              	.L162:
 875:Core/Src/Mytouch.c **** 		{
 2721              		.loc 1 875 3 is_stmt 1 view .LVU697
 875:Core/Src/Mytouch.c **** 		{
 2722              		.loc 1 875 12 is_stmt 0 view .LVU698
 2723 02ae 0D4A     		ldr	r2, .L164+8
 2724 02b0 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
 875:Core/Src/Mytouch.c **** 		{
 2725              		.loc 1 875 6 view .LVU699
 2726 02b4 92F92020 		ldrsb	r2, [r2, #32]
 875:Core/Src/Mytouch.c **** 		{
 2727              		.loc 1 875 5 view .LVU700
 2728 02b8 002A     		cmp	r2, #0
 2729 02ba 09DB     		blt	.L163
 880:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 2730              		.loc 1 880 4 is_stmt 1 view .LVU701
 880:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 2731              		.loc 1 880 15 is_stmt 0 view .LVU702
 2732 02bc 094A     		ldr	r2, .L164+8
 2733 02be 4FF6FF71 		movw	r1, #65535
 2734 02c2 9181     		strh	r1, [r2, #12]	@ movhi
 881:Core/Src/Mytouch.c **** 			tp_dev.sta&=0XE0;	//清除点有效标记	
 2735              		.loc 1 881 4 is_stmt 1 view .LVU703
 881:Core/Src/Mytouch.c **** 			tp_dev.sta&=0XE0;	//清除点有效标记	
 2736              		.loc 1 881 15 is_stmt 0 view .LVU704
 2737 02c4 D182     		strh	r1, [r2, #22]	@ movhi
 882:Core/Src/Mytouch.c **** 		}	 
 2738              		.loc 1 882 4 is_stmt 1 view .LVU705
 882:Core/Src/Mytouch.c **** 		}	 
 2739              		.loc 1 882 14 is_stmt 0 view .LVU706
 2740 02c6 23F01F03 		bic	r3, r3, #31
 2741 02ca 82F82030 		strb	r3, [r2, #32]
 2742 02ce E3E7     		b	.L152
 2743              	.L163:
 877:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 2744              		.loc 1 877 4 is_stmt 1 view .LVU707
ARM GAS  /tmp/cckdBZRC.s 			page 68


 877:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 2745              		.loc 1 877 14 is_stmt 0 view .LVU708
 2746 02d0 03F07F03 		and	r3, r3, #127
 2747 02d4 034A     		ldr	r2, .L164+8
 2748 02d6 82F82030 		strb	r3, [r2, #32]
 2749 02da DDE7     		b	.L152
 2750              	.L165:
 2751              		.align	2
 2752              	.L164:
 2753 02dc 00000000 		.word	.LANCHOR4
 2754 02e0 CDCCCCCC 		.word	-858993459
 2755 02e4 00000000 		.word	.LANCHOR2
 2756 02e8 00000000 		.word	.LANCHOR5
 2757 02ec 00000000 		.word	lcddev
 2758              		.cfi_endproc
 2759              	.LFE173:
 2761              		.section	.rodata.GT9147_Init.str1.4,"aMS",%progbits,1
 2762              		.align	2
 2763              	.LC9:
 2764 0000 43545020 		.ascii	"CTP ID:%s\015\012\000"
 2764      49443A25 
 2764      730D0A00 
 2765              		.align	2
 2766              	.LC10:
 2767 000c 39313437 		.ascii	"9147\000"
 2767      00
 2768 0011 000000   		.align	2
 2769              	.LC11:
 2770 0014 44656661 		.ascii	"Default Ver:%d\015\012\000"
 2770      756C7420 
 2770      5665723A 
 2770      25640D0A 
 2770      00
 2771              		.section	.text.GT9147_Init,"ax",%progbits
 2772              		.align	1
 2773              		.global	GT9147_Init
 2774              		.syntax unified
 2775              		.thumb
 2776              		.thumb_func
 2778              	GT9147_Init:
 2779              	.LFB172:
 736:Core/Src/Mytouch.c **** 	u8 temp[5]; 
 2780              		.loc 1 736 1 is_stmt 1 view -0
 2781              		.cfi_startproc
 2782              		@ args = 0, pretend = 0, frame = 40
 2783              		@ frame_needed = 0, uses_anonymous_args = 0
 2784 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2785              	.LCFI36:
 2786              		.cfi_def_cfa_offset 32
 2787              		.cfi_offset 4, -32
 2788              		.cfi_offset 5, -28
 2789              		.cfi_offset 6, -24
 2790              		.cfi_offset 7, -20
 2791              		.cfi_offset 8, -16
 2792              		.cfi_offset 9, -12
 2793              		.cfi_offset 10, -8
 2794              		.cfi_offset 14, -4
ARM GAS  /tmp/cckdBZRC.s 			page 69


 2795 0004 8AB0     		sub	sp, sp, #40
 2796              	.LCFI37:
 2797              		.cfi_def_cfa_offset 72
 737:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 2798              		.loc 1 737 2 view .LVU710
 738:Core/Src/Mytouch.c ****     
 2799              		.loc 1 738 5 view .LVU711
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2800              		.loc 1 740 5 view .LVU712
 2801              	.LBB4:
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2802              		.loc 1 740 5 view .LVU713
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2803              		.loc 1 740 5 view .LVU714
 2804 0006 4A4B     		ldr	r3, .L172
 2805 0008 D3F8E020 		ldr	r2, [r3, #224]
 2806 000c 42F08002 		orr	r2, r2, #128
 2807 0010 C3F8E020 		str	r2, [r3, #224]
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2808              		.loc 1 740 5 view .LVU715
 2809 0014 D3F8E020 		ldr	r2, [r3, #224]
 2810 0018 02F08002 		and	r2, r2, #128
 2811 001c 0192     		str	r2, [sp, #4]
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2812              		.loc 1 740 5 view .LVU716
 2813 001e 019A     		ldr	r2, [sp, #4]
 2814              	.LBE4:
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2815              		.loc 1 740 5 view .LVU717
 741:Core/Src/Mytouch.c ****                 
 2816              		.loc 1 741 5 view .LVU718
 2817              	.LBB5:
 741:Core/Src/Mytouch.c ****                 
 2818              		.loc 1 741 5 view .LVU719
 741:Core/Src/Mytouch.c ****                 
 2819              		.loc 1 741 5 view .LVU720
 2820 0020 D3F8E020 		ldr	r2, [r3, #224]
 2821 0024 42F48072 		orr	r2, r2, #256
 2822 0028 C3F8E020 		str	r2, [r3, #224]
 741:Core/Src/Mytouch.c ****                 
 2823              		.loc 1 741 5 view .LVU721
 2824 002c D3F8E030 		ldr	r3, [r3, #224]
 2825 0030 03F48073 		and	r3, r3, #256
 2826 0034 0293     		str	r3, [sp, #8]
 741:Core/Src/Mytouch.c ****                 
 2827              		.loc 1 741 5 view .LVU722
 2828 0036 029B     		ldr	r3, [sp, #8]
 2829              	.LBE5:
 741:Core/Src/Mytouch.c ****                 
 2830              		.loc 1 741 5 view .LVU723
 744:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 2831              		.loc 1 744 5 view .LVU724
 744:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 2832              		.loc 1 744 21 is_stmt 0 view .LVU725
 2833 0038 4FF0800A 		mov	r10, #128
 2834 003c CDF80CA0 		str	r10, [sp, #12]
 745:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
ARM GAS  /tmp/cckdBZRC.s 			page 70


 2835              		.loc 1 745 5 is_stmt 1 view .LVU726
 745:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 2836              		.loc 1 745 22 is_stmt 0 view .LVU727
 2837 0040 0024     		movs	r4, #0
 2838 0042 0494     		str	r4, [sp, #16]
 746:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 2839              		.loc 1 746 5 is_stmt 1 view .LVU728
 746:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 2840              		.loc 1 746 22 is_stmt 0 view .LVU729
 2841 0044 0127     		movs	r7, #1
 2842 0046 0597     		str	r7, [sp, #20]
 747:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 2843              		.loc 1 747 5 is_stmt 1 view .LVU730
 747:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 2844              		.loc 1 747 23 is_stmt 0 view .LVU731
 2845 0048 4FF00309 		mov	r9, #3
 2846 004c CDF81890 		str	r9, [sp, #24]
 748:Core/Src/Mytouch.c ****             
 2847              		.loc 1 748 5 is_stmt 1 view .LVU732
 2848 0050 DFF8F480 		ldr	r8, .L172+24
 2849 0054 03A9     		add	r1, sp, #12
 2850 0056 4046     		mov	r0, r8
 2851 0058 FFF7FEFF 		bl	HAL_GPIO_Init
 2852              	.LVL257:
 751:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 2853              		.loc 1 751 5 view .LVU733
 751:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 2854              		.loc 1 751 21 is_stmt 0 view .LVU734
 2855 005c 4FF48076 		mov	r6, #256
 2856 0060 0396     		str	r6, [sp, #12]
 752:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 2857              		.loc 1 752 5 is_stmt 1 view .LVU735
 752:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 2858              		.loc 1 752 22 is_stmt 0 view .LVU736
 2859 0062 0497     		str	r7, [sp, #16]
 753:Core/Src/Mytouch.c **** 	CT_IIC_Init();      	//初始化电容屏的I2C总线  
 2860              		.loc 1 753 5 is_stmt 1 view .LVU737
 2861 0064 334D     		ldr	r5, .L172+4
 2862 0066 03A9     		add	r1, sp, #12
 2863 0068 2846     		mov	r0, r5
 2864 006a FFF7FEFF 		bl	HAL_GPIO_Init
 2865              	.LVL258:
 754:Core/Src/Mytouch.c **** 	GT_RST(0);				//复位
 2866              		.loc 1 754 2 view .LVU738
 2867 006e FFF7FEFF 		bl	CT_IIC_Init
 2868              	.LVL259:
 755:Core/Src/Mytouch.c **** 	HAL_Delay(10);
 2869              		.loc 1 755 2 view .LVU739
 2870 0072 2246     		mov	r2, r4
 2871 0074 3146     		mov	r1, r6
 2872 0076 2846     		mov	r0, r5
 2873 0078 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2874              	.LVL260:
 756:Core/Src/Mytouch.c ****  	GT_RST(1);				//释放复位		    
 2875              		.loc 1 756 2 view .LVU740
 2876 007c 0A20     		movs	r0, #10
 2877 007e FFF7FEFF 		bl	HAL_Delay
ARM GAS  /tmp/cckdBZRC.s 			page 71


 2878              	.LVL261:
 757:Core/Src/Mytouch.c **** 	HAL_Delay(10); 
 2879              		.loc 1 757 3 view .LVU741
 2880 0082 3A46     		mov	r2, r7
 2881 0084 3146     		mov	r1, r6
 2882 0086 2846     		mov	r0, r5
 2883 0088 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2884              	.LVL262:
 758:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 2885              		.loc 1 758 2 view .LVU742
 2886 008c 0A20     		movs	r0, #10
 2887 008e FFF7FEFF 		bl	HAL_Delay
 2888              	.LVL263:
 759:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 2889              		.loc 1 759 5 view .LVU743
 759:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 2890              		.loc 1 759 21 is_stmt 0 view .LVU744
 2891 0092 CDF80CA0 		str	r10, [sp, #12]
 760:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_NOPULL;          //不带上下拉，浮空输入
 2892              		.loc 1 760 5 is_stmt 1 view .LVU745
 760:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_NOPULL;          //不带上下拉，浮空输入
 2893              		.loc 1 760 22 is_stmt 0 view .LVU746
 2894 0096 0494     		str	r4, [sp, #16]
 761:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 2895              		.loc 1 761 5 is_stmt 1 view .LVU747
 761:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 2896              		.loc 1 761 22 is_stmt 0 view .LVU748
 2897 0098 0594     		str	r4, [sp, #20]
 762:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 2898              		.loc 1 762 5 is_stmt 1 view .LVU749
 762:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 2899              		.loc 1 762 23 is_stmt 0 view .LVU750
 2900 009a CDF81890 		str	r9, [sp, #24]
 763:Core/Src/Mytouch.c **** 	HAL_Delay(100);  
 2901              		.loc 1 763 5 is_stmt 1 view .LVU751
 2902 009e 03A9     		add	r1, sp, #12
 2903 00a0 4046     		mov	r0, r8
 2904 00a2 FFF7FEFF 		bl	HAL_GPIO_Init
 2905              	.LVL264:
 764:Core/Src/Mytouch.c **** 	GT9147_RD_Reg(GT_PID_REG,temp,4);//读取产品ID
 2906              		.loc 1 764 2 view .LVU752
 2907 00a6 6420     		movs	r0, #100
 2908 00a8 FFF7FEFF 		bl	HAL_Delay
 2909              	.LVL265:
 765:Core/Src/Mytouch.c **** 	temp[4]=0;
 2910              		.loc 1 765 2 view .LVU753
 2911 00ac 0422     		movs	r2, #4
 2912 00ae 08A9     		add	r1, sp, #32
 2913 00b0 48F24010 		movw	r0, #33088
 2914 00b4 FFF7FEFF 		bl	GT9147_RD_Reg
 2915              	.LVL266:
 766:Core/Src/Mytouch.c **** 	printf("CTP ID:%s\r\n",temp);	//打印ID
 2916              		.loc 1 766 2 view .LVU754
 766:Core/Src/Mytouch.c **** 	printf("CTP ID:%s\r\n",temp);	//打印ID
 2917              		.loc 1 766 9 is_stmt 0 view .LVU755
 2918 00b8 8DF82440 		strb	r4, [sp, #36]
 767:Core/Src/Mytouch.c **** 	if(strcmp((char*)temp,"9147")==0)//ID==9147
ARM GAS  /tmp/cckdBZRC.s 			page 72


 2919              		.loc 1 767 2 is_stmt 1 view .LVU756
 2920 00bc 08A9     		add	r1, sp, #32
 2921 00be 1E48     		ldr	r0, .L172+8
 2922 00c0 FFF7FEFF 		bl	printf
 2923              	.LVL267:
 768:Core/Src/Mytouch.c **** 	{
 2924              		.loc 1 768 2 view .LVU757
 768:Core/Src/Mytouch.c **** 	{
 2925              		.loc 1 768 5 is_stmt 0 view .LVU758
 2926 00c4 1D49     		ldr	r1, .L172+12
 2927 00c6 08A8     		add	r0, sp, #32
 2928 00c8 FFF7FEFF 		bl	strcmp
 2929              	.LVL268:
 768:Core/Src/Mytouch.c **** 	{
 2930              		.loc 1 768 4 view .LVU759
 2931 00cc 18B1     		cbz	r0, .L170
 2932              	.L167:
 784:Core/Src/Mytouch.c **** const u16 GT9147_TPX_TBL[5]={GT_TP1_REG,GT_TP2_REG,GT_TP3_REG,GT_TP4_REG,GT_TP5_REG};
 2933              		.loc 1 784 1 view .LVU760
 2934 00ce 0020     		movs	r0, #0
 2935 00d0 0AB0     		add	sp, sp, #40
 2936              	.LCFI38:
 2937              		.cfi_remember_state
 2938              		.cfi_def_cfa_offset 32
 2939              		@ sp needed
 2940 00d2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2941              	.L170:
 2942              	.LCFI39:
 2943              		.cfi_restore_state
 770:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//软复位GT9147
 2944              		.loc 1 770 3 is_stmt 1 view .LVU761
 770:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//软复位GT9147
 2945              		.loc 1 770 10 is_stmt 0 view .LVU762
 2946 00d6 0223     		movs	r3, #2
 2947 00d8 8DF82030 		strb	r3, [sp, #32]
 771:Core/Src/Mytouch.c **** 		GT9147_RD_Reg(GT_CFGS_REG,temp,1);//读取GT_CFGS_REG寄存器
 2948              		.loc 1 771 3 is_stmt 1 view .LVU763
 2949 00dc 3A46     		mov	r2, r7
 2950 00de 08A9     		add	r1, sp, #32
 2951 00e0 48F24000 		movw	r0, #32832
 2952 00e4 FFF7FEFF 		bl	GT9147_WR_Reg
 2953              	.LVL269:
 772:Core/Src/Mytouch.c **** 		if(temp[0]<0X60)//默认版本比较低,需要更新flash配置
 2954              		.loc 1 772 3 view .LVU764
 2955 00e8 3A46     		mov	r2, r7
 2956 00ea 08A9     		add	r1, sp, #32
 2957 00ec 48F24700 		movw	r0, #32839
 2958 00f0 FFF7FEFF 		bl	GT9147_RD_Reg
 2959              	.LVL270:
 773:Core/Src/Mytouch.c **** 		{
 2960              		.loc 1 773 3 view .LVU765
 773:Core/Src/Mytouch.c **** 		{
 2961              		.loc 1 773 10 is_stmt 0 view .LVU766
 2962 00f4 9DF82010 		ldrb	r1, [sp, #32]	@ zero_extendqisi2
 773:Core/Src/Mytouch.c **** 		{
 2963              		.loc 1 773 5 view .LVU767
 2964 00f8 5F29     		cmp	r1, #95
ARM GAS  /tmp/cckdBZRC.s 			page 73


 2965 00fa 0CD9     		bls	.L171
 2966              	.L168:
 778:Core/Src/Mytouch.c **** 		temp[0]=0X00;	 
 2967              		.loc 1 778 3 is_stmt 1 view .LVU768
 2968 00fc 0A20     		movs	r0, #10
 2969 00fe FFF7FEFF 		bl	HAL_Delay
 2970              	.LVL271:
 779:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//结束复位   
 2971              		.loc 1 779 3 view .LVU769
 779:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//结束复位   
 2972              		.loc 1 779 10 is_stmt 0 view .LVU770
 2973 0102 0023     		movs	r3, #0
 2974 0104 8DF82030 		strb	r3, [sp, #32]
 780:Core/Src/Mytouch.c **** 		return 0;
 2975              		.loc 1 780 3 is_stmt 1 view .LVU771
 2976 0108 0122     		movs	r2, #1
 2977 010a 08A9     		add	r1, sp, #32
 2978 010c 48F24000 		movw	r0, #32832
 2979 0110 FFF7FEFF 		bl	GT9147_WR_Reg
 2980              	.LVL272:
 781:Core/Src/Mytouch.c **** 	} 
 2981              		.loc 1 781 3 view .LVU772
 781:Core/Src/Mytouch.c **** 	} 
 2982              		.loc 1 781 10 is_stmt 0 view .LVU773
 2983 0114 DBE7     		b	.L167
 2984              	.L171:
 775:Core/Src/Mytouch.c ****             if(lcddev.id==0X5510)GT9147_Send_Cfg(1);//更新并保存配置
 2985              		.loc 1 775 4 is_stmt 1 view .LVU774
 2986 0116 0A48     		ldr	r0, .L172+16
 2987 0118 FFF7FEFF 		bl	printf
 2988              	.LVL273:
 776:Core/Src/Mytouch.c **** 		}
 2989              		.loc 1 776 13 view .LVU775
 776:Core/Src/Mytouch.c **** 		}
 2990              		.loc 1 776 22 is_stmt 0 view .LVU776
 2991 011c 094B     		ldr	r3, .L172+20
 2992 011e 9A88     		ldrh	r2, [r3, #4]
 776:Core/Src/Mytouch.c **** 		}
 2993              		.loc 1 776 15 view .LVU777
 2994 0120 45F21053 		movw	r3, #21776
 2995 0124 9A42     		cmp	r2, r3
 2996 0126 E9D1     		bne	.L168
 776:Core/Src/Mytouch.c **** 		}
 2997              		.loc 1 776 34 is_stmt 1 discriminator 1 view .LVU778
 2998 0128 3846     		mov	r0, r7
 2999 012a FFF7FEFF 		bl	GT9147_Send_Cfg
 3000              	.LVL274:
 3001 012e E5E7     		b	.L168
 3002              	.L173:
 3003              		.align	2
 3004              	.L172:
 3005 0130 00440258 		.word	1476543488
 3006 0134 00200258 		.word	1476534272
 3007 0138 00000000 		.word	.LC9
 3008 013c 0C000000 		.word	.LC10
 3009 0140 14000000 		.word	.LC11
 3010 0144 00000000 		.word	lcddev
ARM GAS  /tmp/cckdBZRC.s 			page 74


 3011 0148 001C0258 		.word	1476533248
 3012              		.cfi_endproc
 3013              	.LFE172:
 3015              		.section	.text.OTT2001A_WR_Reg,"ax",%progbits
 3016              		.align	1
 3017              		.global	OTT2001A_WR_Reg
 3018              		.syntax unified
 3019              		.thumb
 3020              		.thumb_func
 3022              	OTT2001A_WR_Reg:
 3023              	.LVL275:
 3024              	.LFB174:
 888:Core/Src/Mytouch.c **** 
 889:Core/Src/Mytouch.c **** /* OTT2001A */
 890:Core/Src/Mytouch.c **** 
 891:Core/Src/Mytouch.c **** 
 892:Core/Src/Mytouch.c **** //向OTT2001A写入一次数据
 893:Core/Src/Mytouch.c **** //reg:起始寄存器地址
 894:Core/Src/Mytouch.c **** //buf:数据缓缓存区
 895:Core/Src/Mytouch.c **** //len:写数据长度
 896:Core/Src/Mytouch.c **** //返回值:0,成功;1,失败.
 897:Core/Src/Mytouch.c **** u8 OTT2001A_WR_Reg(u16 reg,u8 *buf,u8 len)
 898:Core/Src/Mytouch.c **** {
 3025              		.loc 1 898 1 view -0
 3026              		.cfi_startproc
 3027              		@ args = 0, pretend = 0, frame = 0
 3028              		@ frame_needed = 0, uses_anonymous_args = 0
 3029              		.loc 1 898 1 is_stmt 0 view .LVU780
 3030 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3031              	.LCFI40:
 3032              		.cfi_def_cfa_offset 24
 3033              		.cfi_offset 3, -24
 3034              		.cfi_offset 4, -20
 3035              		.cfi_offset 5, -16
 3036              		.cfi_offset 6, -12
 3037              		.cfi_offset 7, -8
 3038              		.cfi_offset 14, -4
 3039 0002 0446     		mov	r4, r0
 3040 0004 0F46     		mov	r7, r1
 3041 0006 1546     		mov	r5, r2
 899:Core/Src/Mytouch.c **** 	u8 i;
 3042              		.loc 1 899 2 is_stmt 1 view .LVU781
 900:Core/Src/Mytouch.c **** 	u8 ret=0;
 3043              		.loc 1 900 2 view .LVU782
 3044              	.LVL276:
 901:Core/Src/Mytouch.c **** 	CT_IIC_Start();	
 3045              		.loc 1 901 2 view .LVU783
 3046 0008 FFF7FEFF 		bl	CT_IIC_Start
 3047              	.LVL277:
 902:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(OTT_CMD_WR);   //发送写命令 	 
 3048              		.loc 1 902 3 view .LVU784
 3049 000c B220     		movs	r0, #178
 3050 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 3051              	.LVL278:
 903:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();
 3052              		.loc 1 903 2 view .LVU785
 3053 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
ARM GAS  /tmp/cckdBZRC.s 			page 75


 3054              	.LVL279:
 904:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg>>8);   	//发送高8位地址
 3055              		.loc 1 904 2 view .LVU786
 3056 0016 200A     		lsrs	r0, r4, #8
 3057 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3058              	.LVL280:
 905:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 3059              		.loc 1 905 2 view .LVU787
 3060 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3061              	.LVL281:
 906:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 3062              		.loc 1 906 2 view .LVU788
 3063 0020 E0B2     		uxtb	r0, r4
 3064 0022 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3065              	.LVL282:
 907:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 3066              		.loc 1 907 2 view .LVU789
 3067 0026 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3068              	.LVL283:
 908:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3069              		.loc 1 908 2 view .LVU790
 900:Core/Src/Mytouch.c **** 	CT_IIC_Start();	
 3070              		.loc 1 900 5 is_stmt 0 view .LVU791
 3071 002a 0026     		movs	r6, #0
 3072              		.loc 1 908 7 view .LVU792
 3073 002c 3446     		mov	r4, r6
 3074              		.loc 1 908 2 view .LVU793
 3075 002e 01E0     		b	.L175
 3076              	.LVL284:
 3077              	.L179:
 3078              		.loc 1 908 16 is_stmt 1 discriminator 2 view .LVU794
 3079              		.loc 1 908 17 is_stmt 0 discriminator 2 view .LVU795
 3080 0030 0134     		adds	r4, r4, #1
 3081              	.LVL285:
 3082              		.loc 1 908 17 discriminator 2 view .LVU796
 3083 0032 E4B2     		uxtb	r4, r4
 3084              	.LVL286:
 3085              	.L175:
 3086              		.loc 1 908 10 is_stmt 1 discriminator 1 view .LVU797
 3087              		.loc 1 908 2 is_stmt 0 discriminator 1 view .LVU798
 3088 0034 AC42     		cmp	r4, r5
 3089 0036 07D2     		bcs	.L176
 909:Core/Src/Mytouch.c **** 	{	   
 910:Core/Src/Mytouch.c ****     	CT_IIC_Send_Byte(buf[i]);  	//发数据
 3090              		.loc 1 910 6 is_stmt 1 view .LVU799
 3091 0038 385D     		ldrb	r0, [r7, r4]	@ zero_extendqisi2
 3092 003a FFF7FEFF 		bl	CT_IIC_Send_Byte
 3093              	.LVL287:
 911:Core/Src/Mytouch.c **** 		ret=CT_IIC_Wait_Ack();
 3094              		.loc 1 911 3 view .LVU800
 3095              		.loc 1 911 7 is_stmt 0 view .LVU801
 3096 003e FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3097              	.LVL288:
 912:Core/Src/Mytouch.c **** 		if(ret)break;  
 3098              		.loc 1 912 3 is_stmt 1 view .LVU802
 3099              		.loc 1 912 5 is_stmt 0 view .LVU803
 3100 0042 0646     		mov	r6, r0
ARM GAS  /tmp/cckdBZRC.s 			page 76


 3101 0044 0028     		cmp	r0, #0
 3102 0046 F3D0     		beq	.L179
 3103              	.LVL289:
 3104              	.L176:
 913:Core/Src/Mytouch.c **** 	}
 914:Core/Src/Mytouch.c ****     CT_IIC_Stop();					//产生一个停止条件	    
 3105              		.loc 1 914 5 is_stmt 1 view .LVU804
 3106 0048 FFF7FEFF 		bl	CT_IIC_Stop
 3107              	.LVL290:
 915:Core/Src/Mytouch.c **** 	return ret; 
 3108              		.loc 1 915 2 view .LVU805
 916:Core/Src/Mytouch.c **** }
 3109              		.loc 1 916 1 is_stmt 0 view .LVU806
 3110 004c 3046     		mov	r0, r6
 3111 004e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3112              		.loc 1 916 1 view .LVU807
 3113              		.cfi_endproc
 3114              	.LFE174:
 3116              		.section	.text.OTT2001A_RD_Reg,"ax",%progbits
 3117              		.align	1
 3118              		.global	OTT2001A_RD_Reg
 3119              		.syntax unified
 3120              		.thumb
 3121              		.thumb_func
 3123              	OTT2001A_RD_Reg:
 3124              	.LVL291:
 3125              	.LFB175:
 917:Core/Src/Mytouch.c **** //从OTT2001A读出一次数据
 918:Core/Src/Mytouch.c **** //reg:起始寄存器地址
 919:Core/Src/Mytouch.c **** //buf:数据缓缓存区
 920:Core/Src/Mytouch.c **** //len:读数据长度			  
 921:Core/Src/Mytouch.c **** void OTT2001A_RD_Reg(u16 reg,u8 *buf,u8 len)
 922:Core/Src/Mytouch.c **** {
 3126              		.loc 1 922 1 is_stmt 1 view -0
 3127              		.cfi_startproc
 3128              		@ args = 0, pretend = 0, frame = 0
 3129              		@ frame_needed = 0, uses_anonymous_args = 0
 3130              		.loc 1 922 1 is_stmt 0 view .LVU809
 3131 0000 70B5     		push	{r4, r5, r6, lr}
 3132              	.LCFI41:
 3133              		.cfi_def_cfa_offset 16
 3134              		.cfi_offset 4, -16
 3135              		.cfi_offset 5, -12
 3136              		.cfi_offset 6, -8
 3137              		.cfi_offset 14, -4
 3138 0002 0446     		mov	r4, r0
 3139 0004 0E46     		mov	r6, r1
 3140 0006 1546     		mov	r5, r2
 923:Core/Src/Mytouch.c **** 	u8 i; 
 3141              		.loc 1 923 2 is_stmt 1 view .LVU810
 924:Core/Src/Mytouch.c ****  	CT_IIC_Start();	
 3142              		.loc 1 924 3 view .LVU811
 3143 0008 FFF7FEFF 		bl	CT_IIC_Start
 3144              	.LVL292:
 925:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(OTT_CMD_WR);   //发送写命令 	 
 3145              		.loc 1 925 3 view .LVU812
 3146 000c B220     		movs	r0, #178
ARM GAS  /tmp/cckdBZRC.s 			page 77


 3147 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 3148              	.LVL293:
 926:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();
 3149              		.loc 1 926 2 view .LVU813
 3150 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3151              	.LVL294:
 927:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg>>8);   	//发送高8位地址
 3152              		.loc 1 927 3 view .LVU814
 3153 0016 200A     		lsrs	r0, r4, #8
 3154 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3155              	.LVL295:
 928:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 3156              		.loc 1 928 2 view .LVU815
 3157 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3158              	.LVL296:
 929:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 3159              		.loc 1 929 3 view .LVU816
 3160 0020 E0B2     		uxtb	r0, r4
 3161 0022 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3162              	.LVL297:
 930:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 3163              		.loc 1 930 2 view .LVU817
 3164 0026 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3165              	.LVL298:
 931:Core/Src/Mytouch.c ****  	CT_IIC_Start();  	 	   
 3166              		.loc 1 931 3 view .LVU818
 3167 002a FFF7FEFF 		bl	CT_IIC_Start
 3168              	.LVL299:
 932:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(OTT_CMD_RD);   //发送读命令		   
 3169              		.loc 1 932 2 view .LVU819
 3170 002e B320     		movs	r0, #179
 3171 0030 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3172              	.LVL300:
 933:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();	   
 3173              		.loc 1 933 2 view .LVU820
 3174 0034 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3175              	.LVL301:
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3176              		.loc 1 934 2 view .LVU821
 3177              		.loc 1 934 7 is_stmt 0 view .LVU822
 3178 0038 0024     		movs	r4, #0
 3179              		.loc 1 934 2 view .LVU823
 3180 003a 08E0     		b	.L181
 3181              	.LVL302:
 3182              	.L182:
 935:Core/Src/Mytouch.c **** 	{	   
 936:Core/Src/Mytouch.c ****     	buf[i]=CT_IIC_Read_Byte(i==(len-1)?0:1); //发数据	  
 3183              		.loc 1 936 6 is_stmt 1 discriminator 3 view .LVU824
 3184              		.loc 1 936 37 is_stmt 0 discriminator 3 view .LVU825
 3185 003c 681E     		subs	r0, r5, #1
 3186              		.loc 1 936 13 discriminator 3 view .LVU826
 3187 003e 201A     		subs	r0, r4, r0
 3188 0040 18BF     		it	ne
 3189 0042 0120     		movne	r0, #1
 3190 0044 FFF7FEFF 		bl	CT_IIC_Read_Byte
 3191              	.LVL303:
 3192              		.loc 1 936 12 discriminator 3 view .LVU827
ARM GAS  /tmp/cckdBZRC.s 			page 78


 3193 0048 3055     		strb	r0, [r6, r4]
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3194              		.loc 1 934 16 is_stmt 1 discriminator 3 view .LVU828
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3195              		.loc 1 934 17 is_stmt 0 discriminator 3 view .LVU829
 3196 004a 0134     		adds	r4, r4, #1
 3197              	.LVL304:
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3198              		.loc 1 934 17 discriminator 3 view .LVU830
 3199 004c E4B2     		uxtb	r4, r4
 3200              	.LVL305:
 3201              	.L181:
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3202              		.loc 1 934 10 is_stmt 1 discriminator 1 view .LVU831
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3203              		.loc 1 934 2 is_stmt 0 discriminator 1 view .LVU832
 3204 004e AC42     		cmp	r4, r5
 3205 0050 F4D3     		bcc	.L182
 937:Core/Src/Mytouch.c **** 	} 
 938:Core/Src/Mytouch.c ****     CT_IIC_Stop();//产生一个停止条件    
 3206              		.loc 1 938 5 is_stmt 1 view .LVU833
 3207 0052 FFF7FEFF 		bl	CT_IIC_Stop
 3208              	.LVL306:
 939:Core/Src/Mytouch.c **** }
 3209              		.loc 1 939 1 is_stmt 0 view .LVU834
 3210 0056 70BD     		pop	{r4, r5, r6, pc}
 3211              		.loc 1 939 1 view .LVU835
 3212              		.cfi_endproc
 3213              	.LFE175:
 3215              		.section	.text.OTT2001A_Scan,"ax",%progbits
 3216              		.align	1
 3217              		.global	OTT2001A_Scan
 3218              		.syntax unified
 3219              		.thumb
 3220              		.thumb_func
 3222              	OTT2001A_Scan:
 3223              	.LVL307:
 3224              	.LFB178:
 940:Core/Src/Mytouch.c **** //传感器打开/关闭操作
 941:Core/Src/Mytouch.c **** //cmd:1,打开传感器;0,关闭传感器
 942:Core/Src/Mytouch.c **** void OTT2001A_SensorControl(u8 cmd)
 943:Core/Src/Mytouch.c **** {
 944:Core/Src/Mytouch.c **** 	u8 regval=0X00;
 945:Core/Src/Mytouch.c **** 	if(cmd)regval=0X80;
 946:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
 947:Core/Src/Mytouch.c **** } 
 948:Core/Src/Mytouch.c **** //初始化触摸屏
 949:Core/Src/Mytouch.c **** //返回值:0,初始化成功;1,初始化失败 
 950:Core/Src/Mytouch.c **** u8 OTT2001A_Init(void)
 951:Core/Src/Mytouch.c **** {
 952:Core/Src/Mytouch.c ****  	u8 regval=0; 
 953:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 954:Core/Src/Mytouch.c ****  
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
 956:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 957:Core/Src/Mytouch.c ****                 
 958:Core/Src/Mytouch.c ****     //PH7
ARM GAS  /tmp/cckdBZRC.s 			page 79


 959:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 960:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 961:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 962:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 963:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 964:Core/Src/Mytouch.c ****             
 965:Core/Src/Mytouch.c ****     //PI8
 966:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_8;            //PI8
 967:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 968:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 969:Core/Src/Mytouch.c ****     
 970:Core/Src/Mytouch.c **** 	CT_IIC_Init();      	//初始化电容屏的I2C总线  
 971:Core/Src/Mytouch.c **** 	OTT_RST(0);				//复位
 972:Core/Src/Mytouch.c **** 	HAL_Delay(100);
 973:Core/Src/Mytouch.c ****  	OTT_RST(1);				//释放复位		    
 974:Core/Src/Mytouch.c **** 	HAL_Delay(100); 
 975:Core/Src/Mytouch.c **** 	OTT2001A_SensorControl(1);	//打开传感器 
 976:Core/Src/Mytouch.c **** 	OTT2001A_RD_Reg(OTT_CTRL_REG,&regval,1);//读取传感器运行寄存器的值来判断I2C通信
 977:Core/Src/Mytouch.c **** 	printf("CTP ID:%x\r\n",regval);
 978:Core/Src/Mytouch.c ****     if(regval==0x80)return 0;
 979:Core/Src/Mytouch.c **** 	return 1;
 980:Core/Src/Mytouch.c **** }
 981:Core/Src/Mytouch.c **** 
 982:Core/Src/Mytouch.c **** const u16 OTT_TPX_TBL[5]={OTT_TP1_REG,OTT_TP2_REG,OTT_TP3_REG,OTT_TP4_REG,OTT_TP5_REG};
 983:Core/Src/Mytouch.c **** //扫描触摸屏(采用查询方式)
 984:Core/Src/Mytouch.c **** //mode:0,正常扫描.
 985:Core/Src/Mytouch.c **** //返回值:当前触屏状态.
 986:Core/Src/Mytouch.c **** //0,触屏无触摸;1,触屏有触摸
 987:Core/Src/Mytouch.c **** u8 OTT2001A_Scan(u8 mode)
 988:Core/Src/Mytouch.c **** {
 3225              		.loc 1 988 1 is_stmt 1 view -0
 3226              		.cfi_startproc
 3227              		@ args = 0, pretend = 0, frame = 16
 3228              		@ frame_needed = 0, uses_anonymous_args = 0
 3229              		.loc 1 988 1 is_stmt 0 view .LVU837
 3230 0000 30B5     		push	{r4, r5, lr}
 3231              	.LCFI42:
 3232              		.cfi_def_cfa_offset 12
 3233              		.cfi_offset 4, -12
 3234              		.cfi_offset 5, -8
 3235              		.cfi_offset 14, -4
 3236 0002 85B0     		sub	sp, sp, #20
 3237              	.LCFI43:
 3238              		.cfi_def_cfa_offset 32
 3239 0004 8DF80700 		strb	r0, [sp, #7]
 989:Core/Src/Mytouch.c **** 	u8 buf[4];
 3240              		.loc 1 989 2 is_stmt 1 view .LVU838
 990:Core/Src/Mytouch.c **** 	u8 i=0;
 3241              		.loc 1 990 2 view .LVU839
 3242              	.LVL308:
 991:Core/Src/Mytouch.c **** 	u8 res=0;
 3243              		.loc 1 991 2 view .LVU840
 992:Core/Src/Mytouch.c **** 	static u8 t=0;//控制查询间隔,从而降低CPU占用率   
 3244              		.loc 1 992 2 view .LVU841
 993:Core/Src/Mytouch.c **** 	t++;
 3245              		.loc 1 993 2 view .LVU842
 3246              		.loc 1 993 3 is_stmt 0 view .LVU843
ARM GAS  /tmp/cckdBZRC.s 			page 80


 3247 0008 6D4B     		ldr	r3, .L199+24
 3248 000a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3249 000c 0132     		adds	r2, r2, #1
 3250 000e D2B2     		uxtb	r2, r2
 3251 0010 1A70     		strb	r2, [r3]
 994:Core/Src/Mytouch.c **** 	if((t%10)==0||t<10)//空闲时,每进入10次CTP_Scan函数才检测1次,从而节省CPU使用率
 3252              		.loc 1 994 2 is_stmt 1 view .LVU844
 3253              		.loc 1 994 11 is_stmt 0 view .LVU845
 3254 0012 6C4B     		ldr	r3, .L199+28
 3255 0014 A3FB0213 		umull	r1, r3, r3, r2
 3256 0018 DB08     		lsrs	r3, r3, #3
 3257 001a 03EB8303 		add	r3, r3, r3, lsl #2
 3258 001e A2EB4303 		sub	r3, r2, r3, lsl #1
 3259              		.loc 1 994 4 view .LVU846
 3260 0022 13F0FF0F 		tst	r3, #255
 3261 0026 02D0     		beq	.L185
 3262              		.loc 1 994 14 discriminator 1 view .LVU847
 3263 0028 092A     		cmp	r2, #9
 3264 002a 00F29780 		bhi	.L195
 3265              	.L185:
 995:Core/Src/Mytouch.c **** 	{
 996:Core/Src/Mytouch.c **** 		OTT2001A_RD_Reg(OTT_GSTID_REG,&mode,1);//读取触摸点的状态  
 3266              		.loc 1 996 3 is_stmt 1 view .LVU848
 3267 002e 0122     		movs	r2, #1
 3268 0030 0DF10701 		add	r1, sp, #7
 3269 0034 0020     		movs	r0, #0
 3270              	.LVL309:
 3271              		.loc 1 996 3 is_stmt 0 view .LVU849
 3272 0036 FFF7FEFF 		bl	OTT2001A_RD_Reg
 3273              	.LVL310:
 997:Core/Src/Mytouch.c **** 		if(mode&0X1F)
 3274              		.loc 1 997 3 is_stmt 1 view .LVU850
 3275              		.loc 1 997 10 is_stmt 0 view .LVU851
 3276 003a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3277              		.loc 1 997 5 view .LVU852
 3278 003e 13F01F00 		ands	r0, r3, #31
 3279 0042 00F08C80 		beq	.L186
 998:Core/Src/Mytouch.c **** 		{
 999:Core/Src/Mytouch.c **** 			tp_dev.sta=(mode&0X1F)|TP_PRES_DOWN|TP_CATH_PRES;
 3280              		.loc 1 999 4 is_stmt 1 view .LVU853
 3281              		.loc 1 999 39 is_stmt 0 view .LVU854
 3282 0046 40F0C003 		orr	r3, r0, #192
 3283              		.loc 1 999 14 view .LVU855
 3284 004a 5F4A     		ldr	r2, .L199+32
 3285 004c 82F82030 		strb	r3, [r2, #32]
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3286              		.loc 1 1000 4 is_stmt 1 view .LVU856
 3287              		.loc 1 1000 9 is_stmt 0 view .LVU857
 3288 0050 0024     		movs	r4, #0
 3289              		.loc 1 1000 4 view .LVU858
 3290 0052 2EE0     		b	.L187
 3291              	.LVL311:
 3292              	.L189:
1001:Core/Src/Mytouch.c **** 			{
1002:Core/Src/Mytouch.c **** 				if(tp_dev.sta&(1<<i))	//触摸有效?
1003:Core/Src/Mytouch.c **** 				{
1004:Core/Src/Mytouch.c **** 					OTT2001A_RD_Reg(OTT_TPX_TBL[i],buf,4);	//读取XY坐标值
ARM GAS  /tmp/cckdBZRC.s 			page 81


1005:Core/Src/Mytouch.c **** 					if(tp_dev.touchtype&0X01)//横屏
1006:Core/Src/Mytouch.c **** 					{
1007:Core/Src/Mytouch.c **** 						tp_dev.y[i]=(((u16)buf[2]<<8)+buf[3])*OTT_SCAL_Y;
1008:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
1009:Core/Src/Mytouch.c **** 					}else
1010:Core/Src/Mytouch.c **** 					{
1011:Core/Src/Mytouch.c **** 						tp_dev.x[i]=(((u16)buf[2]<<8)+buf[3])*OTT_SCAL_Y;
 3293              		.loc 1 1011 7 is_stmt 1 view .LVU859
 3294              		.loc 1 1011 29 is_stmt 0 view .LVU860
 3295 0054 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 3296              		.loc 1 1011 40 view .LVU861
 3297 0058 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 3298              		.loc 1 1011 36 view .LVU862
 3299 005c 03EB0223 		add	r3, r3, r2, lsl #8
 3300 0060 07EE103A 		vmov	s14, r3	@ int
 3301              		.loc 1 1011 44 view .LVU863
 3302 0064 B8EEC77B 		vcvt.f64.s32	d7, s14
 3303 0068 9FED4F6B 		vldr.64	d6, .L199
 3304 006c 27EE067B 		vmul.f64	d7, d7, d6
 3305              		.loc 1 1011 18 view .LVU864
 3306 0070 554A     		ldr	r2, .L199+32
 3307 0072 231D     		adds	r3, r4, #4
 3308 0074 02EB4303 		add	r3, r2, r3, lsl #1
 3309 0078 BCEEC77B 		vcvt.u32.f64	s14, d7
 3310 007c 17EE101A 		vmov	r1, s14	@ int
 3311 0080 9980     		strh	r1, [r3, #4]	@ movhi
1012:Core/Src/Mytouch.c **** 						tp_dev.y[i]=(((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X;
 3312              		.loc 1 1012 7 is_stmt 1 view .LVU865
 3313              		.loc 1 1012 29 is_stmt 0 view .LVU866
 3314 0082 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 3315              		.loc 1 1012 40 view .LVU867
 3316 0086 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 3317              		.loc 1 1012 36 view .LVU868
 3318 008a 03EB0123 		add	r3, r3, r1, lsl #8
 3319 008e 07EE103A 		vmov	s14, r3	@ int
 3320              		.loc 1 1012 44 view .LVU869
 3321 0092 B8EEC77B 		vcvt.f64.s32	d7, s14
 3322 0096 9FED466B 		vldr.64	d6, .L199+8
 3323 009a 27EE067B 		vmul.f64	d7, d7, d6
 3324              		.loc 1 1012 18 view .LVU870
 3325 009e 0835     		adds	r5, r5, #8
 3326 00a0 02EB4505 		add	r5, r2, r5, lsl #1
 3327 00a4 BCEEC77B 		vcvt.u32.f64	s14, d7
 3328 00a8 17EE103A 		vmov	r3, s14	@ int
 3329 00ac EB80     		strh	r3, [r5, #6]	@ movhi
 3330              	.L188:
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3331              		.loc 1 1000 16 is_stmt 1 discriminator 2 view .LVU871
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3332              		.loc 1 1000 17 is_stmt 0 discriminator 2 view .LVU872
 3333 00ae 0134     		adds	r4, r4, #1
 3334              	.LVL312:
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3335              		.loc 1 1000 17 discriminator 2 view .LVU873
 3336 00b0 E4B2     		uxtb	r4, r4
 3337              	.LVL313:
 3338              	.L187:
ARM GAS  /tmp/cckdBZRC.s 			page 82


1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3339              		.loc 1 1000 12 is_stmt 1 discriminator 1 view .LVU874
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3340              		.loc 1 1000 4 is_stmt 0 discriminator 1 view .LVU875
 3341 00b2 042C     		cmp	r4, #4
 3342 00b4 45D8     		bhi	.L197
1002:Core/Src/Mytouch.c **** 				{
 3343              		.loc 1 1002 5 is_stmt 1 view .LVU876
1002:Core/Src/Mytouch.c **** 				{
 3344              		.loc 1 1002 14 is_stmt 0 view .LVU877
 3345 00b6 444B     		ldr	r3, .L199+32
 3346 00b8 93F82030 		ldrb	r3, [r3, #32]	@ zero_extendqisi2
1002:Core/Src/Mytouch.c **** 				{
 3347              		.loc 1 1002 8 view .LVU878
 3348 00bc 2546     		mov	r5, r4
 3349 00be 2341     		asrs	r3, r3, r4
1002:Core/Src/Mytouch.c **** 				{
 3350              		.loc 1 1002 7 view .LVU879
 3351 00c0 13F0010F 		tst	r3, #1
 3352 00c4 F3D0     		beq	.L188
1004:Core/Src/Mytouch.c **** 					if(tp_dev.touchtype&0X01)//横屏
 3353              		.loc 1 1004 6 is_stmt 1 view .LVU880
 3354 00c6 0422     		movs	r2, #4
 3355 00c8 03A9     		add	r1, sp, #12
 3356 00ca 404B     		ldr	r3, .L199+36
 3357 00cc 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 3358 00d0 FFF7FEFF 		bl	OTT2001A_RD_Reg
 3359              	.LVL314:
1005:Core/Src/Mytouch.c **** 					{
 3360              		.loc 1 1005 6 view .LVU881
1005:Core/Src/Mytouch.c **** 					{
 3361              		.loc 1 1005 15 is_stmt 0 view .LVU882
 3362 00d4 3C4B     		ldr	r3, .L199+32
 3363 00d6 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
1005:Core/Src/Mytouch.c **** 					{
 3364              		.loc 1 1005 8 view .LVU883
 3365 00da 13F0010F 		tst	r3, #1
 3366 00de B9D0     		beq	.L189
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3367              		.loc 1 1007 7 is_stmt 1 view .LVU884
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3368              		.loc 1 1007 29 is_stmt 0 view .LVU885
 3369 00e0 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3370              		.loc 1 1007 40 view .LVU886
 3371 00e4 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3372              		.loc 1 1007 36 view .LVU887
 3373 00e8 03EB0223 		add	r3, r3, r2, lsl #8
 3374 00ec 07EE103A 		vmov	s14, r3	@ int
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3375              		.loc 1 1007 44 view .LVU888
 3376 00f0 B8EEC77B 		vcvt.f64.s32	d7, s14
 3377 00f4 9FED2C6B 		vldr.64	d6, .L199
 3378 00f8 27EE067B 		vmul.f64	d7, d7, d6
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3379              		.loc 1 1007 18 view .LVU889
ARM GAS  /tmp/cckdBZRC.s 			page 83


 3380 00fc 324A     		ldr	r2, .L199+32
 3381 00fe 04F10803 		add	r3, r4, #8
 3382 0102 02EB4303 		add	r3, r2, r3, lsl #1
 3383 0106 BCEEC77B 		vcvt.u32.f64	s14, d7
 3384 010a 17EE101A 		vmov	r1, s14	@ int
 3385 010e D980     		strh	r1, [r3, #6]	@ movhi
1008:Core/Src/Mytouch.c **** 					}else
 3386              		.loc 1 1008 7 is_stmt 1 view .LVU890
1008:Core/Src/Mytouch.c **** 					}else
 3387              		.loc 1 1008 34 is_stmt 0 view .LVU891
 3388 0110 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
1008:Core/Src/Mytouch.c **** 					}else
 3389              		.loc 1 1008 45 view .LVU892
 3390 0114 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
1008:Core/Src/Mytouch.c **** 					}else
 3391              		.loc 1 1008 41 view .LVU893
 3392 0118 03EB0123 		add	r3, r3, r1, lsl #8
1008:Core/Src/Mytouch.c **** 					}else
 3393              		.loc 1 1008 49 view .LVU894
 3394 011c 07EE903A 		vmov	s15, r3	@ int
 3395 0120 B8EEE76B 		vcvt.f64.s32	d6, s15
1008:Core/Src/Mytouch.c **** 					}else
 3396              		.loc 1 1008 22 view .LVU895
 3397 0124 9FED225B 		vldr.64	d5, .L199+8
 3398 0128 9FED237B 		vldr.64	d7, .L199+16
 3399 012c 06EE457B 		vmls.f64	d7, d6, d5
1008:Core/Src/Mytouch.c **** 					}else
 3400              		.loc 1 1008 18 view .LVU896
 3401 0130 0435     		adds	r5, r5, #4
 3402 0132 02EB4502 		add	r2, r2, r5, lsl #1
 3403 0136 BCEEC77B 		vcvt.u32.f64	s14, d7
 3404 013a 17EE103A 		vmov	r3, s14	@ int
 3405 013e 9380     		strh	r3, [r2, #4]	@ movhi
 3406 0140 B5E7     		b	.L188
 3407              	.L197:
1013:Core/Src/Mytouch.c **** 					}  
1014:Core/Src/Mytouch.c **** 					//printf("x[%d]:%d,y[%d]:%d\r\n",i,tp_dev.x[i],i,tp_dev.y[i]);
1015:Core/Src/Mytouch.c **** 				}			
1016:Core/Src/Mytouch.c **** 			} 
1017:Core/Src/Mytouch.c **** 			res=1;
 3408              		.loc 1 1017 4 is_stmt 1 view .LVU897
 3409              	.LVL315:
1018:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]==0 && tp_dev.y[0]==0)mode=0;	//读到的数据都是0,则忽略此次数据
 3410              		.loc 1 1018 4 view .LVU898
 3411              		.loc 1 1018 15 is_stmt 0 view .LVU899
 3412 0142 214B     		ldr	r3, .L199+32
 3413 0144 9B89     		ldrh	r3, [r3, #12]
 3414              		.loc 1 1018 6 view .LVU900
 3415 0146 23B9     		cbnz	r3, .L191
 3416              		.loc 1 1018 33 discriminator 1 view .LVU901
 3417 0148 1F4B     		ldr	r3, .L199+32
 3418 014a DB8A     		ldrh	r3, [r3, #22]
 3419              		.loc 1 1018 22 discriminator 1 view .LVU902
 3420 014c 0BB9     		cbnz	r3, .L191
 3421              		.loc 1 1018 40 is_stmt 1 discriminator 2 view .LVU903
 3422              		.loc 1 1018 44 is_stmt 0 discriminator 2 view .LVU904
 3423 014e 8DF80730 		strb	r3, [sp, #7]
ARM GAS  /tmp/cckdBZRC.s 			page 84


 3424              	.L191:
1019:Core/Src/Mytouch.c **** 			t=0;		//触发一次,则会最少连续监测10次,从而提高命中率
 3425              		.loc 1 1019 4 is_stmt 1 view .LVU905
 3426              		.loc 1 1019 5 is_stmt 0 view .LVU906
 3427 0152 1B4B     		ldr	r3, .L199+24
 3428 0154 0022     		movs	r2, #0
 3429 0156 1A70     		strb	r2, [r3]
1017:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]==0 && tp_dev.y[0]==0)mode=0;	//读到的数据都是0,则忽略此次数据
 3430              		.loc 1 1017 7 view .LVU907
 3431 0158 0120     		movs	r0, #1
 3432 015a 00E0     		b	.L186
 3433              	.LVL316:
 3434              	.L195:
 991:Core/Src/Mytouch.c **** 	static u8 t=0;//控制查询间隔,从而降低CPU占用率   
 3435              		.loc 1 991 5 view .LVU908
 3436 015c 0020     		movs	r0, #0
 3437              	.LVL317:
 3438              	.L186:
1020:Core/Src/Mytouch.c **** 		}
1021:Core/Src/Mytouch.c **** 	}
1022:Core/Src/Mytouch.c **** 	if((mode&0X1F)==0)//无触摸点按下
 3439              		.loc 1 1022 2 is_stmt 1 view .LVU909
 3440              		.loc 1 1022 10 is_stmt 0 view .LVU910
 3441 015e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3442              		.loc 1 1022 4 view .LVU911
 3443 0162 13F01F0F 		tst	r3, #31
 3444 0166 0FD1     		bne	.L192
1023:Core/Src/Mytouch.c **** 	{ 
1024:Core/Src/Mytouch.c **** 		if(tp_dev.sta&TP_PRES_DOWN)	//之前是被按下的
 3445              		.loc 1 1024 3 is_stmt 1 view .LVU912
 3446              		.loc 1 1024 12 is_stmt 0 view .LVU913
 3447 0168 174A     		ldr	r2, .L199+32
 3448 016a 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
 3449              		.loc 1 1024 6 view .LVU914
 3450 016e 92F92020 		ldrsb	r2, [r2, #32]
 3451              		.loc 1 1024 5 view .LVU915
 3452 0172 002A     		cmp	r2, #0
 3453 0174 11DB     		blt	.L198
1025:Core/Src/Mytouch.c **** 		{
1026:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<7);	//标记按键松开
1027:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
1028:Core/Src/Mytouch.c **** 		{ 
1029:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 3454              		.loc 1 1029 4 is_stmt 1 view .LVU916
 3455              		.loc 1 1029 15 is_stmt 0 view .LVU917
 3456 0176 144A     		ldr	r2, .L199+32
 3457 0178 4FF6FF71 		movw	r1, #65535
 3458 017c 9181     		strh	r1, [r2, #12]	@ movhi
1030:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 3459              		.loc 1 1030 4 is_stmt 1 view .LVU918
 3460              		.loc 1 1030 15 is_stmt 0 view .LVU919
 3461 017e D182     		strh	r1, [r2, #22]	@ movhi
1031:Core/Src/Mytouch.c **** 			tp_dev.sta&=0XE0;	//清除点有效标记	
 3462              		.loc 1 1031 4 is_stmt 1 view .LVU920
 3463              		.loc 1 1031 14 is_stmt 0 view .LVU921
 3464 0180 23F01F03 		bic	r3, r3, #31
 3465 0184 82F82030 		strb	r3, [r2, #32]
ARM GAS  /tmp/cckdBZRC.s 			page 85


 3466              	.L192:
1032:Core/Src/Mytouch.c **** 		}	 
1033:Core/Src/Mytouch.c **** 	} 	
1034:Core/Src/Mytouch.c **** 	if(t>240)t=10;//重新从10开始计数
 3467              		.loc 1 1034 2 is_stmt 1 view .LVU922
 3468              		.loc 1 1034 6 is_stmt 0 view .LVU923
 3469 0188 0D4B     		ldr	r3, .L199+24
 3470 018a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3471              		.loc 1 1034 4 view .LVU924
 3472 018c F02B     		cmp	r3, #240
 3473 018e 02D9     		bls	.L194
 3474              		.loc 1 1034 11 is_stmt 1 discriminator 1 view .LVU925
 3475              		.loc 1 1034 12 is_stmt 0 discriminator 1 view .LVU926
 3476 0190 0B4B     		ldr	r3, .L199+24
 3477 0192 0A22     		movs	r2, #10
 3478 0194 1A70     		strb	r2, [r3]
 3479              	.L194:
1035:Core/Src/Mytouch.c **** 	return res;
 3480              		.loc 1 1035 2 is_stmt 1 view .LVU927
1036:Core/Src/Mytouch.c **** }
 3481              		.loc 1 1036 1 is_stmt 0 view .LVU928
 3482 0196 05B0     		add	sp, sp, #20
 3483              	.LCFI44:
 3484              		.cfi_remember_state
 3485              		.cfi_def_cfa_offset 12
 3486              		@ sp needed
 3487 0198 30BD     		pop	{r4, r5, pc}
 3488              	.L198:
 3489              	.LCFI45:
 3490              		.cfi_restore_state
1026:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 3491              		.loc 1 1026 4 is_stmt 1 view .LVU929
1026:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 3492              		.loc 1 1026 14 is_stmt 0 view .LVU930
 3493 019a 03F07F03 		and	r3, r3, #127
 3494 019e 0A4A     		ldr	r2, .L199+32
 3495 01a0 82F82030 		strb	r3, [r2, #32]
 3496 01a4 F0E7     		b	.L192
 3497              	.L200:
 3498 01a6 00BF     		.align	3
 3499              	.L199:
 3500 01a8 7B14AE47 		.word	1202590843
 3501 01ac E17AD43F 		.word	1070889697
 3502 01b0 D8817346 		.word	1181975000
 3503 01b4 94F6D23F 		.word	1070790292
 3504 01b8 00000000 		.word	0
 3505 01bc 00008940 		.word	1082720256
 3506 01c0 00000000 		.word	.LANCHOR6
 3507 01c4 CDCCCCCC 		.word	-858993459
 3508 01c8 00000000 		.word	.LANCHOR2
 3509 01cc 00000000 		.word	.LANCHOR7
 3510              		.cfi_endproc
 3511              	.LFE178:
 3513              		.section	.text.OTT2001A_SensorControl,"ax",%progbits
 3514              		.align	1
 3515              		.global	OTT2001A_SensorControl
 3516              		.syntax unified
ARM GAS  /tmp/cckdBZRC.s 			page 86


 3517              		.thumb
 3518              		.thumb_func
 3520              	OTT2001A_SensorControl:
 3521              	.LVL318:
 3522              	.LFB176:
 943:Core/Src/Mytouch.c **** 	u8 regval=0X00;
 3523              		.loc 1 943 1 is_stmt 1 view -0
 3524              		.cfi_startproc
 3525              		@ args = 0, pretend = 0, frame = 8
 3526              		@ frame_needed = 0, uses_anonymous_args = 0
 943:Core/Src/Mytouch.c **** 	u8 regval=0X00;
 3527              		.loc 1 943 1 is_stmt 0 view .LVU932
 3528 0000 00B5     		push	{lr}
 3529              	.LCFI46:
 3530              		.cfi_def_cfa_offset 4
 3531              		.cfi_offset 14, -4
 3532 0002 83B0     		sub	sp, sp, #12
 3533              	.LCFI47:
 3534              		.cfi_def_cfa_offset 16
 944:Core/Src/Mytouch.c **** 	if(cmd)regval=0X80;
 3535              		.loc 1 944 2 is_stmt 1 view .LVU933
 944:Core/Src/Mytouch.c **** 	if(cmd)regval=0X80;
 3536              		.loc 1 944 5 is_stmt 0 view .LVU934
 3537 0004 0023     		movs	r3, #0
 3538 0006 8DF80730 		strb	r3, [sp, #7]
 945:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
 3539              		.loc 1 945 2 is_stmt 1 view .LVU935
 945:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
 3540              		.loc 1 945 4 is_stmt 0 view .LVU936
 3541 000a 10B1     		cbz	r0, .L202
 945:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
 3542              		.loc 1 945 9 is_stmt 1 discriminator 1 view .LVU937
 945:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
 3543              		.loc 1 945 15 is_stmt 0 discriminator 1 view .LVU938
 3544 000c 8023     		movs	r3, #128
 3545 000e 8DF80730 		strb	r3, [sp, #7]
 3546              	.L202:
 946:Core/Src/Mytouch.c **** } 
 3547              		.loc 1 946 2 is_stmt 1 view .LVU939
 3548 0012 0122     		movs	r2, #1
 3549 0014 0DF10701 		add	r1, sp, #7
 3550 0018 4FF45060 		mov	r0, #3328
 3551              	.LVL319:
 946:Core/Src/Mytouch.c **** } 
 3552              		.loc 1 946 2 is_stmt 0 view .LVU940
 3553 001c FFF7FEFF 		bl	OTT2001A_WR_Reg
 3554              	.LVL320:
 947:Core/Src/Mytouch.c **** //初始化触摸屏
 3555              		.loc 1 947 1 view .LVU941
 3556 0020 03B0     		add	sp, sp, #12
 3557              	.LCFI48:
 3558              		.cfi_def_cfa_offset 4
 3559              		@ sp needed
 3560 0022 5DF804FB 		ldr	pc, [sp], #4
 3561              		.cfi_endproc
 3562              	.LFE176:
 3564              		.section	.rodata.OTT2001A_Init.str1.4,"aMS",%progbits,1
ARM GAS  /tmp/cckdBZRC.s 			page 87


 3565              		.align	2
 3566              	.LC12:
 3567 0000 43545020 		.ascii	"CTP ID:%x\015\012\000"
 3567      49443A25 
 3567      780D0A00 
 3568              		.section	.text.OTT2001A_Init,"ax",%progbits
 3569              		.align	1
 3570              		.global	OTT2001A_Init
 3571              		.syntax unified
 3572              		.thumb
 3573              		.thumb_func
 3575              	OTT2001A_Init:
 3576              	.LFB177:
 951:Core/Src/Mytouch.c ****  	u8 regval=0; 
 3577              		.loc 1 951 1 is_stmt 1 view -0
 3578              		.cfi_startproc
 3579              		@ args = 0, pretend = 0, frame = 32
 3580              		@ frame_needed = 0, uses_anonymous_args = 0
 3581 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3582              	.LCFI49:
 3583              		.cfi_def_cfa_offset 20
 3584              		.cfi_offset 4, -20
 3585              		.cfi_offset 5, -16
 3586              		.cfi_offset 6, -12
 3587              		.cfi_offset 7, -8
 3588              		.cfi_offset 14, -4
 3589 0002 89B0     		sub	sp, sp, #36
 3590              	.LCFI50:
 3591              		.cfi_def_cfa_offset 56
 952:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 3592              		.loc 1 952 3 view .LVU943
 952:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 3593              		.loc 1 952 6 is_stmt 0 view .LVU944
 3594 0004 0027     		movs	r7, #0
 3595 0006 8DF81F70 		strb	r7, [sp, #31]
 953:Core/Src/Mytouch.c ****  
 3596              		.loc 1 953 5 is_stmt 1 view .LVU945
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3597              		.loc 1 955 5 view .LVU946
 3598              	.LBB6:
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3599              		.loc 1 955 5 view .LVU947
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3600              		.loc 1 955 5 view .LVU948
 3601 000a 2B4B     		ldr	r3, .L208
 3602 000c D3F8E020 		ldr	r2, [r3, #224]
 3603 0010 42F08002 		orr	r2, r2, #128
 3604 0014 C3F8E020 		str	r2, [r3, #224]
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3605              		.loc 1 955 5 view .LVU949
 3606 0018 D3F8E020 		ldr	r2, [r3, #224]
 3607 001c 02F08002 		and	r2, r2, #128
 3608 0020 0092     		str	r2, [sp]
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3609              		.loc 1 955 5 view .LVU950
 3610 0022 009A     		ldr	r2, [sp]
 3611              	.LBE6:
ARM GAS  /tmp/cckdBZRC.s 			page 88


 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3612              		.loc 1 955 5 view .LVU951
 956:Core/Src/Mytouch.c ****                 
 3613              		.loc 1 956 5 view .LVU952
 3614              	.LBB7:
 956:Core/Src/Mytouch.c ****                 
 3615              		.loc 1 956 5 view .LVU953
 956:Core/Src/Mytouch.c ****                 
 3616              		.loc 1 956 5 view .LVU954
 3617 0024 D3F8E020 		ldr	r2, [r3, #224]
 3618 0028 42F48072 		orr	r2, r2, #256
 3619 002c C3F8E020 		str	r2, [r3, #224]
 956:Core/Src/Mytouch.c ****                 
 3620              		.loc 1 956 5 view .LVU955
 3621 0030 D3F8E030 		ldr	r3, [r3, #224]
 3622 0034 03F48073 		and	r3, r3, #256
 3623 0038 0193     		str	r3, [sp, #4]
 956:Core/Src/Mytouch.c ****                 
 3624              		.loc 1 956 5 view .LVU956
 3625 003a 019B     		ldr	r3, [sp, #4]
 3626              	.LBE7:
 956:Core/Src/Mytouch.c ****                 
 3627              		.loc 1 956 5 view .LVU957
 959:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 3628              		.loc 1 959 5 view .LVU958
 959:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 3629              		.loc 1 959 21 is_stmt 0 view .LVU959
 3630 003c 8023     		movs	r3, #128
 3631 003e 0293     		str	r3, [sp, #8]
 960:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 3632              		.loc 1 960 5 is_stmt 1 view .LVU960
 960:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 3633              		.loc 1 960 22 is_stmt 0 view .LVU961
 3634 0040 0397     		str	r7, [sp, #12]
 961:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 3635              		.loc 1 961 5 is_stmt 1 view .LVU962
 961:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 3636              		.loc 1 961 22 is_stmt 0 view .LVU963
 3637 0042 0124     		movs	r4, #1
 3638 0044 0494     		str	r4, [sp, #16]
 962:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 3639              		.loc 1 962 5 is_stmt 1 view .LVU964
 962:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 3640              		.loc 1 962 23 is_stmt 0 view .LVU965
 3641 0046 0323     		movs	r3, #3
 3642 0048 0593     		str	r3, [sp, #20]
 963:Core/Src/Mytouch.c ****             
 3643              		.loc 1 963 5 is_stmt 1 view .LVU966
 3644 004a 02A9     		add	r1, sp, #8
 3645 004c 1B48     		ldr	r0, .L208+4
 3646 004e FFF7FEFF 		bl	HAL_GPIO_Init
 3647              	.LVL321:
 966:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 3648              		.loc 1 966 5 view .LVU967
 966:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 3649              		.loc 1 966 21 is_stmt 0 view .LVU968
 3650 0052 4FF48076 		mov	r6, #256
ARM GAS  /tmp/cckdBZRC.s 			page 89


 3651 0056 0296     		str	r6, [sp, #8]
 967:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 3652              		.loc 1 967 5 is_stmt 1 view .LVU969
 967:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 3653              		.loc 1 967 22 is_stmt 0 view .LVU970
 3654 0058 0394     		str	r4, [sp, #12]
 968:Core/Src/Mytouch.c ****     
 3655              		.loc 1 968 5 is_stmt 1 view .LVU971
 3656 005a 194D     		ldr	r5, .L208+8
 3657 005c 02A9     		add	r1, sp, #8
 3658 005e 2846     		mov	r0, r5
 3659 0060 FFF7FEFF 		bl	HAL_GPIO_Init
 3660              	.LVL322:
 970:Core/Src/Mytouch.c **** 	OTT_RST(0);				//复位
 3661              		.loc 1 970 2 view .LVU972
 3662 0064 FFF7FEFF 		bl	CT_IIC_Init
 3663              	.LVL323:
 971:Core/Src/Mytouch.c **** 	HAL_Delay(100);
 3664              		.loc 1 971 2 view .LVU973
 3665 0068 3A46     		mov	r2, r7
 3666 006a 3146     		mov	r1, r6
 3667 006c 2846     		mov	r0, r5
 3668 006e FFF7FEFF 		bl	HAL_GPIO_WritePin
 3669              	.LVL324:
 972:Core/Src/Mytouch.c ****  	OTT_RST(1);				//释放复位		    
 3670              		.loc 1 972 2 view .LVU974
 3671 0072 6420     		movs	r0, #100
 3672 0074 FFF7FEFF 		bl	HAL_Delay
 3673              	.LVL325:
 973:Core/Src/Mytouch.c **** 	HAL_Delay(100); 
 3674              		.loc 1 973 3 view .LVU975
 3675 0078 2246     		mov	r2, r4
 3676 007a 3146     		mov	r1, r6
 3677 007c 2846     		mov	r0, r5
 3678 007e FFF7FEFF 		bl	HAL_GPIO_WritePin
 3679              	.LVL326:
 974:Core/Src/Mytouch.c **** 	OTT2001A_SensorControl(1);	//打开传感器 
 3680              		.loc 1 974 2 view .LVU976
 3681 0082 6420     		movs	r0, #100
 3682 0084 FFF7FEFF 		bl	HAL_Delay
 3683              	.LVL327:
 975:Core/Src/Mytouch.c **** 	OTT2001A_RD_Reg(OTT_CTRL_REG,&regval,1);//读取传感器运行寄存器的值来判断I2C通信
 3684              		.loc 1 975 2 view .LVU977
 3685 0088 2046     		mov	r0, r4
 3686 008a FFF7FEFF 		bl	OTT2001A_SensorControl
 3687              	.LVL328:
 976:Core/Src/Mytouch.c **** 	printf("CTP ID:%x\r\n",regval);
 3688              		.loc 1 976 2 view .LVU978
 3689 008e 2246     		mov	r2, r4
 3690 0090 0DF11F01 		add	r1, sp, #31
 3691 0094 4FF45060 		mov	r0, #3328
 3692 0098 FFF7FEFF 		bl	OTT2001A_RD_Reg
 3693              	.LVL329:
 977:Core/Src/Mytouch.c ****     if(regval==0x80)return 0;
 3694              		.loc 1 977 2 view .LVU979
 3695 009c 9DF81F10 		ldrb	r1, [sp, #31]	@ zero_extendqisi2
 3696 00a0 0848     		ldr	r0, .L208+12
ARM GAS  /tmp/cckdBZRC.s 			page 90


 3697 00a2 FFF7FEFF 		bl	printf
 3698              	.LVL330:
 978:Core/Src/Mytouch.c **** 	return 1;
 3699              		.loc 1 978 5 view .LVU980
 978:Core/Src/Mytouch.c **** 	return 1;
 3700              		.loc 1 978 14 is_stmt 0 view .LVU981
 3701 00a6 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 978:Core/Src/Mytouch.c **** 	return 1;
 3702              		.loc 1 978 7 view .LVU982
 3703 00aa 802B     		cmp	r3, #128
 3704 00ac 02D0     		beq	.L206
 979:Core/Src/Mytouch.c **** }
 3705              		.loc 1 979 9 view .LVU983
 3706 00ae 2046     		mov	r0, r4
 3707              	.L205:
 980:Core/Src/Mytouch.c **** 
 3708              		.loc 1 980 1 view .LVU984
 3709 00b0 09B0     		add	sp, sp, #36
 3710              	.LCFI51:
 3711              		.cfi_remember_state
 3712              		.cfi_def_cfa_offset 20
 3713              		@ sp needed
 3714 00b2 F0BD     		pop	{r4, r5, r6, r7, pc}
 3715              	.L206:
 3716              	.LCFI52:
 3717              		.cfi_restore_state
 978:Core/Src/Mytouch.c **** 	return 1;
 3718              		.loc 1 978 28 view .LVU985
 3719 00b4 0020     		movs	r0, #0
 3720 00b6 FBE7     		b	.L205
 3721              	.L209:
 3722              		.align	2
 3723              	.L208:
 3724 00b8 00440258 		.word	1476543488
 3725 00bc 001C0258 		.word	1476533248
 3726 00c0 00200258 		.word	1476534272
 3727 00c4 00000000 		.word	.LC12
 3728              		.cfi_endproc
 3729              	.LFE177:
 3731              		.section	.text.FT5206_WR_Reg,"ax",%progbits
 3732              		.align	1
 3733              		.global	FT5206_WR_Reg
 3734              		.syntax unified
 3735              		.thumb
 3736              		.thumb_func
 3738              	FT5206_WR_Reg:
 3739              	.LVL331:
 3740              	.LFB179:
1037:Core/Src/Mytouch.c ****  
1038:Core/Src/Mytouch.c **** 
1039:Core/Src/Mytouch.c ****  /* FT5260 */
1040:Core/Src/Mytouch.c **** 
1041:Core/Src/Mytouch.c ****  //向FT5206写入一次数据
1042:Core/Src/Mytouch.c **** //reg:起始寄存器地址
1043:Core/Src/Mytouch.c **** //buf:数据缓缓存区
1044:Core/Src/Mytouch.c **** //len:写数据长度
1045:Core/Src/Mytouch.c **** //返回值:0,成功;1,失败.
ARM GAS  /tmp/cckdBZRC.s 			page 91


1046:Core/Src/Mytouch.c **** u8 FT5206_WR_Reg(u16 reg,u8 *buf,u8 len)
1047:Core/Src/Mytouch.c **** {
 3741              		.loc 1 1047 1 is_stmt 1 view -0
 3742              		.cfi_startproc
 3743              		@ args = 0, pretend = 0, frame = 0
 3744              		@ frame_needed = 0, uses_anonymous_args = 0
 3745              		.loc 1 1047 1 is_stmt 0 view .LVU987
 3746 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3747              	.LCFI53:
 3748              		.cfi_def_cfa_offset 24
 3749              		.cfi_offset 3, -24
 3750              		.cfi_offset 4, -20
 3751              		.cfi_offset 5, -16
 3752              		.cfi_offset 6, -12
 3753              		.cfi_offset 7, -8
 3754              		.cfi_offset 14, -4
 3755 0002 0446     		mov	r4, r0
 3756 0004 0F46     		mov	r7, r1
 3757 0006 1546     		mov	r5, r2
1048:Core/Src/Mytouch.c **** 	u8 i;
 3758              		.loc 1 1048 2 is_stmt 1 view .LVU988
1049:Core/Src/Mytouch.c **** 	u8 ret=0;
 3759              		.loc 1 1049 2 view .LVU989
 3760              	.LVL332:
1050:Core/Src/Mytouch.c **** 	CT_IIC_Start();	 
 3761              		.loc 1 1050 2 view .LVU990
 3762 0008 FFF7FEFF 		bl	CT_IIC_Start
 3763              	.LVL333:
1051:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(FT_CMD_WR);	//发送写命令 	 
 3764              		.loc 1 1051 2 view .LVU991
 3765 000c 7020     		movs	r0, #112
 3766 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 3767              	.LVL334:
1052:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 3768              		.loc 1 1052 2 view .LVU992
 3769 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3770              	.LVL335:
1053:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 3771              		.loc 1 1053 2 view .LVU993
 3772 0016 E0B2     		uxtb	r0, r4
 3773 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3774              	.LVL336:
1054:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 3775              		.loc 1 1054 2 view .LVU994
 3776 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3777              	.LVL337:
1055:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3778              		.loc 1 1055 2 view .LVU995
1049:Core/Src/Mytouch.c **** 	CT_IIC_Start();	 
 3779              		.loc 1 1049 5 is_stmt 0 view .LVU996
 3780 0020 0026     		movs	r6, #0
 3781              		.loc 1 1055 7 view .LVU997
 3782 0022 3446     		mov	r4, r6
 3783              		.loc 1 1055 2 view .LVU998
 3784 0024 01E0     		b	.L211
 3785              	.LVL338:
 3786              	.L215:
ARM GAS  /tmp/cckdBZRC.s 			page 92


 3787              		.loc 1 1055 16 is_stmt 1 discriminator 2 view .LVU999
 3788              		.loc 1 1055 17 is_stmt 0 discriminator 2 view .LVU1000
 3789 0026 0134     		adds	r4, r4, #1
 3790              	.LVL339:
 3791              		.loc 1 1055 17 discriminator 2 view .LVU1001
 3792 0028 E4B2     		uxtb	r4, r4
 3793              	.LVL340:
 3794              	.L211:
 3795              		.loc 1 1055 10 is_stmt 1 discriminator 1 view .LVU1002
 3796              		.loc 1 1055 2 is_stmt 0 discriminator 1 view .LVU1003
 3797 002a AC42     		cmp	r4, r5
 3798 002c 07D2     		bcs	.L212
1056:Core/Src/Mytouch.c **** 	{	   
1057:Core/Src/Mytouch.c ****     	CT_IIC_Send_Byte(buf[i]);  	//发数据
 3799              		.loc 1 1057 6 is_stmt 1 view .LVU1004
 3800 002e 385D     		ldrb	r0, [r7, r4]	@ zero_extendqisi2
 3801 0030 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3802              	.LVL341:
1058:Core/Src/Mytouch.c **** 		ret=CT_IIC_Wait_Ack();
 3803              		.loc 1 1058 3 view .LVU1005
 3804              		.loc 1 1058 7 is_stmt 0 view .LVU1006
 3805 0034 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3806              	.LVL342:
1059:Core/Src/Mytouch.c **** 		if(ret)break;  
 3807              		.loc 1 1059 3 is_stmt 1 view .LVU1007
 3808              		.loc 1 1059 5 is_stmt 0 view .LVU1008
 3809 0038 0646     		mov	r6, r0
 3810 003a 0028     		cmp	r0, #0
 3811 003c F3D0     		beq	.L215
 3812              	.LVL343:
 3813              	.L212:
1060:Core/Src/Mytouch.c **** 	}
1061:Core/Src/Mytouch.c ****     CT_IIC_Stop();					//产生一个停止条件	    
 3814              		.loc 1 1061 5 is_stmt 1 view .LVU1009
 3815 003e FFF7FEFF 		bl	CT_IIC_Stop
 3816              	.LVL344:
1062:Core/Src/Mytouch.c **** 	return ret; 
 3817              		.loc 1 1062 2 view .LVU1010
1063:Core/Src/Mytouch.c **** }
 3818              		.loc 1 1063 1 is_stmt 0 view .LVU1011
 3819 0042 3046     		mov	r0, r6
 3820 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3821              		.loc 1 1063 1 view .LVU1012
 3822              		.cfi_endproc
 3823              	.LFE179:
 3825              		.section	.text.FT5206_RD_Reg,"ax",%progbits
 3826              		.align	1
 3827              		.global	FT5206_RD_Reg
 3828              		.syntax unified
 3829              		.thumb
 3830              		.thumb_func
 3832              	FT5206_RD_Reg:
 3833              	.LVL345:
 3834              	.LFB180:
1064:Core/Src/Mytouch.c **** //从FT5206读出一次数据
1065:Core/Src/Mytouch.c **** //reg:起始寄存器地址
1066:Core/Src/Mytouch.c **** //buf:数据缓缓存区
ARM GAS  /tmp/cckdBZRC.s 			page 93


1067:Core/Src/Mytouch.c **** //len:读数据长度			  
1068:Core/Src/Mytouch.c **** void FT5206_RD_Reg(u16 reg,u8 *buf,u8 len)
1069:Core/Src/Mytouch.c **** {
 3835              		.loc 1 1069 1 is_stmt 1 view -0
 3836              		.cfi_startproc
 3837              		@ args = 0, pretend = 0, frame = 0
 3838              		@ frame_needed = 0, uses_anonymous_args = 0
 3839              		.loc 1 1069 1 is_stmt 0 view .LVU1014
 3840 0000 70B5     		push	{r4, r5, r6, lr}
 3841              	.LCFI54:
 3842              		.cfi_def_cfa_offset 16
 3843              		.cfi_offset 4, -16
 3844              		.cfi_offset 5, -12
 3845              		.cfi_offset 6, -8
 3846              		.cfi_offset 14, -4
 3847 0002 0446     		mov	r4, r0
 3848 0004 0E46     		mov	r6, r1
 3849 0006 1546     		mov	r5, r2
1070:Core/Src/Mytouch.c **** 	u8 i; 
 3850              		.loc 1 1070 2 is_stmt 1 view .LVU1015
1071:Core/Src/Mytouch.c ****  	CT_IIC_Start();	
 3851              		.loc 1 1071 3 view .LVU1016
 3852 0008 FFF7FEFF 		bl	CT_IIC_Start
 3853              	.LVL346:
1072:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(FT_CMD_WR);   	//发送写命令 	 
 3854              		.loc 1 1072 3 view .LVU1017
 3855 000c 7020     		movs	r0, #112
 3856 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 3857              	.LVL347:
1073:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 3858              		.loc 1 1073 2 view .LVU1018
 3859 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3860              	.LVL348:
1074:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 3861              		.loc 1 1074 3 view .LVU1019
 3862 0016 E0B2     		uxtb	r0, r4
 3863 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3864              	.LVL349:
1075:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 3865              		.loc 1 1075 2 view .LVU1020
 3866 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3867              	.LVL350:
1076:Core/Src/Mytouch.c ****  	CT_IIC_Start();  	 	   
 3868              		.loc 1 1076 3 view .LVU1021
 3869 0020 FFF7FEFF 		bl	CT_IIC_Start
 3870              	.LVL351:
1077:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(FT_CMD_RD);   	//发送读命令		   
 3871              		.loc 1 1077 2 view .LVU1022
 3872 0024 7120     		movs	r0, #113
 3873 0026 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3874              	.LVL352:
1078:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();	   
 3875              		.loc 1 1078 2 view .LVU1023
 3876 002a FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3877              	.LVL353:
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3878              		.loc 1 1079 2 view .LVU1024
ARM GAS  /tmp/cckdBZRC.s 			page 94


 3879              		.loc 1 1079 7 is_stmt 0 view .LVU1025
 3880 002e 0024     		movs	r4, #0
 3881              		.loc 1 1079 2 view .LVU1026
 3882 0030 08E0     		b	.L217
 3883              	.LVL354:
 3884              	.L218:
1080:Core/Src/Mytouch.c **** 	{	   
1081:Core/Src/Mytouch.c ****     	buf[i]=CT_IIC_Read_Byte(i==(len-1)?0:1); //发数据	  
 3885              		.loc 1 1081 6 is_stmt 1 discriminator 3 view .LVU1027
 3886              		.loc 1 1081 37 is_stmt 0 discriminator 3 view .LVU1028
 3887 0032 681E     		subs	r0, r5, #1
 3888              		.loc 1 1081 13 discriminator 3 view .LVU1029
 3889 0034 201A     		subs	r0, r4, r0
 3890 0036 18BF     		it	ne
 3891 0038 0120     		movne	r0, #1
 3892 003a FFF7FEFF 		bl	CT_IIC_Read_Byte
 3893              	.LVL355:
 3894              		.loc 1 1081 12 discriminator 3 view .LVU1030
 3895 003e 3055     		strb	r0, [r6, r4]
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3896              		.loc 1 1079 16 is_stmt 1 discriminator 3 view .LVU1031
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3897              		.loc 1 1079 17 is_stmt 0 discriminator 3 view .LVU1032
 3898 0040 0134     		adds	r4, r4, #1
 3899              	.LVL356:
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3900              		.loc 1 1079 17 discriminator 3 view .LVU1033
 3901 0042 E4B2     		uxtb	r4, r4
 3902              	.LVL357:
 3903              	.L217:
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3904              		.loc 1 1079 10 is_stmt 1 discriminator 1 view .LVU1034
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3905              		.loc 1 1079 2 is_stmt 0 discriminator 1 view .LVU1035
 3906 0044 AC42     		cmp	r4, r5
 3907 0046 F4D3     		bcc	.L218
1082:Core/Src/Mytouch.c **** 	} 
1083:Core/Src/Mytouch.c ****     CT_IIC_Stop();//产生一个停止条件     
 3908              		.loc 1 1083 5 is_stmt 1 view .LVU1036
 3909 0048 FFF7FEFF 		bl	CT_IIC_Stop
 3910              	.LVL358:
1084:Core/Src/Mytouch.c **** } 
 3911              		.loc 1 1084 1 is_stmt 0 view .LVU1037
 3912 004c 70BD     		pop	{r4, r5, r6, pc}
 3913              		.loc 1 1084 1 view .LVU1038
 3914              		.cfi_endproc
 3915              	.LFE180:
 3917              		.section	.rodata.FT5206_Scan.str1.4,"aMS",%progbits,1
 3918              		.align	2
 3919              	.LC13:
 3920 0000 39313100 		.ascii	"911\000"
 3921              		.section	.text.FT5206_Scan,"ax",%progbits
 3922              		.align	1
 3923              		.global	FT5206_Scan
 3924              		.syntax unified
 3925              		.thumb
 3926              		.thumb_func
ARM GAS  /tmp/cckdBZRC.s 			page 95


 3928              	FT5206_Scan:
 3929              	.LVL359:
 3930              	.LFB182:
1085:Core/Src/Mytouch.c **** u8 CIP[5]; //用来存放触摸IC-GT911
1086:Core/Src/Mytouch.c **** //初始化FT5206触摸屏
1087:Core/Src/Mytouch.c **** //返回值:0,初始化成功;1,初始化失败 
1088:Core/Src/Mytouch.c **** u8 FT5206_Init(void)
1089:Core/Src/Mytouch.c **** {
1090:Core/Src/Mytouch.c ****     u8 temp[5];
1091:Core/Src/Mytouch.c ****     u8 res=1;
1092:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
1093:Core/Src/Mytouch.c ****  
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
1095:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
1096:Core/Src/Mytouch.c ****                 
1097:Core/Src/Mytouch.c ****     //PH7
1098:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
1099:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
1100:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
1101:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
1102:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
1103:Core/Src/Mytouch.c ****             
1104:Core/Src/Mytouch.c ****     //PI8
1105:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_8;            //PI8
1106:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
1107:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
1108:Core/Src/Mytouch.c ****         
1109:Core/Src/Mytouch.c **** 	CT_IIC_Init();      	//初始化电容屏的I2C总线  
1110:Core/Src/Mytouch.c **** 	FT_RST(0);				//复位
1111:Core/Src/Mytouch.c **** 	HAL_Delay(20);
1112:Core/Src/Mytouch.c ****  	FT_RST(1);				//释放复位		    
1113:Core/Src/Mytouch.c **** 	HAL_Delay(50);  	
1114:Core/Src/Mytouch.c **** 	temp[0]=0;
1115:Core/Src/Mytouch.c **** 	//读取版本号，参考值：0x3003
1116:Core/Src/Mytouch.c **** 	FT5206_RD_Reg(FT_ID_G_LIB_VERSION,&temp[0],2);  
1117:Core/Src/Mytouch.c **** 	if((temp[0]==0X30&&temp[1]==0X03)||temp[1]==0X01||temp[1]==0X02)//版本:0X3003/0X0001/0X0002
1118:Core/Src/Mytouch.c **** 	{
1119:Core/Src/Mytouch.c **** 		printf("CTP ID:%x\r\n",((u16)temp[0]<<8)+temp[1]);
1120:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_DEVIDE_MODE,temp,1);	//进入正常操作模式 
1121:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_MODE,temp,1);		//查询模式 
1122:Core/Src/Mytouch.c ****         temp[0]=22;								//触摸有效值，22，越小越灵敏	
1123:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_THGROUP,temp,1);	//设置触摸有效值
1124:Core/Src/Mytouch.c ****         temp[0]=12;								//激活周期，不能小于12，最大14
1125:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_PERIODACTIVE,temp,1); 
1126:Core/Src/Mytouch.c **** 		res = 0;
1127:Core/Src/Mytouch.c **** 	} 
1128:Core/Src/Mytouch.c ****     else
1129:Core/Src/Mytouch.c ****     {
1130:Core/Src/Mytouch.c ****         GT9147_RD_Reg(GT_PID_REG,temp,4); //读取产品ID
1131:Core/Src/Mytouch.c ****         temp[4]=0;
1132:Core/Src/Mytouch.c ****         printf("CTP ID:%s\r\n", temp);  //打印ID
1133:Core/Src/Mytouch.c ****         memcpy(CIP,temp, sizeof(u8)*4);
1134:Core/Src/Mytouch.c ****         temp[0]=0X02;
1135:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1);  //软复位GT9XXX 
1136:Core/Src/Mytouch.c ****         GT9147_RD_Reg(GT_CFGS_REG,temp,1);  //读取GT_CFGS_REG寄存器
1137:Core/Src/Mytouch.c ****         HAL_Delay(10);
1138:Core/Src/Mytouch.c ****         temp[0]=0X00;
ARM GAS  /tmp/cckdBZRC.s 			page 96


1139:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1); //结束复位, 进入读坐标状态
1140:Core/Src/Mytouch.c ****         res = 0;
1141:Core/Src/Mytouch.c ****     }
1142:Core/Src/Mytouch.c **** 	return res;
1143:Core/Src/Mytouch.c **** }
1144:Core/Src/Mytouch.c **** const u16 FT5206_TPX_TBL[5]={FT_TP1_REG,FT_TP2_REG,FT_TP3_REG,FT_TP4_REG,FT_TP5_REG};
1145:Core/Src/Mytouch.c **** //GT911属于GT9xx系列，所以直接调用gt9147的相关宏定义和调用相关函数
1146:Core/Src/Mytouch.c **** const u16 GT911_TPX_TBL[5]={GT_TP1_REG,GT_TP2_REG,GT_TP3_REG,GT_TP4_REG,GT_TP5_REG};
1147:Core/Src/Mytouch.c **** u8 g_gt_tnum=5;      //默认支持的触摸屏点数(5点触摸)
1148:Core/Src/Mytouch.c **** //扫描触摸屏(采用查询方式)
1149:Core/Src/Mytouch.c **** //mode:0,正常扫描.
1150:Core/Src/Mytouch.c **** //返回值:当前触屏状态.
1151:Core/Src/Mytouch.c **** //0,触屏无触摸;1,触屏有触摸
1152:Core/Src/Mytouch.c **** u8 FT5206_Scan(u8 mode)
1153:Core/Src/Mytouch.c **** {
 3931              		.loc 1 1153 1 is_stmt 1 view -0
 3932              		.cfi_startproc
 3933              		@ args = 0, pretend = 0, frame = 16
 3934              		@ frame_needed = 0, uses_anonymous_args = 0
 3935              		.loc 1 1153 1 is_stmt 0 view .LVU1040
 3936 0000 30B5     		push	{r4, r5, lr}
 3937              	.LCFI55:
 3938              		.cfi_def_cfa_offset 12
 3939              		.cfi_offset 4, -12
 3940              		.cfi_offset 5, -8
 3941              		.cfi_offset 14, -4
 3942 0002 85B0     		sub	sp, sp, #20
 3943              	.LCFI56:
 3944              		.cfi_def_cfa_offset 32
 3945 0004 8DF80700 		strb	r0, [sp, #7]
1154:Core/Src/Mytouch.c **** 	u8 buf[4];
 3946              		.loc 1 1154 2 is_stmt 1 view .LVU1041
1155:Core/Src/Mytouch.c **** 	u8 i=0;
 3947              		.loc 1 1155 2 view .LVU1042
 3948              		.loc 1 1155 5 is_stmt 0 view .LVU1043
 3949 0008 0023     		movs	r3, #0
 3950 000a 8DF80B30 		strb	r3, [sp, #11]
1156:Core/Src/Mytouch.c **** 	u8 res=0;
 3951              		.loc 1 1156 2 is_stmt 1 view .LVU1044
 3952              	.LVL360:
1157:Core/Src/Mytouch.c **** 	u8 temp;
 3953              		.loc 1 1157 2 view .LVU1045
1158:Core/Src/Mytouch.c ****     u16 tempsta;
 3954              		.loc 1 1158 5 view .LVU1046
1159:Core/Src/Mytouch.c **** 	static u8 t=0;//控制查询间隔,从而降低CPU占用率   
 3955              		.loc 1 1159 2 view .LVU1047
1160:Core/Src/Mytouch.c **** 	t++;
 3956              		.loc 1 1160 2 view .LVU1048
 3957              		.loc 1 1160 3 is_stmt 0 view .LVU1049
 3958 000e B54B     		ldr	r3, .L246
 3959 0010 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3960 0012 0132     		adds	r2, r2, #1
 3961 0014 D2B2     		uxtb	r2, r2
 3962 0016 1A70     		strb	r2, [r3]
1161:Core/Src/Mytouch.c **** 	if((t%10)==0||t<10)//空闲时,每进入10次CTP_Scan函数才检测1次,从而节省CPU使用率
 3963              		.loc 1 1161 2 is_stmt 1 view .LVU1050
 3964              		.loc 1 1161 11 is_stmt 0 view .LVU1051
ARM GAS  /tmp/cckdBZRC.s 			page 97


 3965 0018 B34B     		ldr	r3, .L246+4
 3966 001a A3FB0213 		umull	r1, r3, r3, r2
 3967 001e DB08     		lsrs	r3, r3, #3
 3968 0020 03EB8303 		add	r3, r3, r3, lsl #2
 3969 0024 A2EB4303 		sub	r3, r2, r3, lsl #1
 3970              		.loc 1 1161 4 view .LVU1052
 3971 0028 13F0FF0F 		tst	r3, #255
 3972 002c 02D0     		beq	.L221
 3973              		.loc 1 1161 14 discriminator 1 view .LVU1053
 3974 002e 092A     		cmp	r2, #9
 3975 0030 00F22881 		bhi	.L239
 3976              	.L221:
1162:Core/Src/Mytouch.c **** 	{
1163:Core/Src/Mytouch.c ****         if(strcmp((char *)CIP,"911")==0) //触摸IC 911
 3977              		.loc 1 1163 9 is_stmt 1 view .LVU1054
 3978              		.loc 1 1163 12 is_stmt 0 view .LVU1055
 3979 0034 AD49     		ldr	r1, .L246+8
 3980 0036 AE48     		ldr	r0, .L246+12
 3981              	.LVL361:
 3982              		.loc 1 1163 12 view .LVU1056
 3983 0038 FFF7FEFF 		bl	strcmp
 3984              	.LVL362:
 3985              		.loc 1 1163 11 view .LVU1057
 3986 003c E8B9     		cbnz	r0, .L223
1164:Core/Src/Mytouch.c ****         {
1165:Core/Src/Mytouch.c ****             GT9147_RD_Reg(GT_GSTID_REG,&mode,1); //读取触摸点状态
 3987              		.loc 1 1165 13 is_stmt 1 view .LVU1058
 3988 003e 0122     		movs	r2, #1
 3989 0040 0DF10701 		add	r1, sp, #7
 3990 0044 48F24E10 		movw	r0, #33102
 3991 0048 FFF7FEFF 		bl	GT9147_RD_Reg
 3992              	.LVL363:
1166:Core/Src/Mytouch.c ****             if((mode&0X80)&&((mode&0XF)<=g_gt_tnum))
 3993              		.loc 1 1166 13 view .LVU1059
 3994              		.loc 1 1166 16 is_stmt 0 view .LVU1060
 3995 004c 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3996 0050 9DF90720 		ldrsb	r2, [sp, #7]
 3997              		.loc 1 1166 15 view .LVU1061
 3998 0054 002A     		cmp	r2, #0
 3999 0056 16DA     		bge	.L224
 4000              		.loc 1 1166 40 discriminator 1 view .LVU1062
 4001 0058 A64A     		ldr	r2, .L246+16
 4002 005a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4003              		.loc 1 1166 27 discriminator 1 view .LVU1063
 4004 005c 03F00F03 		and	r3, r3, #15
 4005 0060 9A42     		cmp	r2, r3
 4006 0062 10D3     		bcc	.L224
1167:Core/Src/Mytouch.c ****             {
1168:Core/Src/Mytouch.c ****                 i=0;
 4007              		.loc 1 1168 17 is_stmt 1 view .LVU1064
 4008              		.loc 1 1168 18 is_stmt 0 view .LVU1065
 4009 0064 0023     		movs	r3, #0
 4010 0066 8DF80B30 		strb	r3, [sp, #11]
1169:Core/Src/Mytouch.c ****                 GT9147_WR_Reg(GT_GSTID_REG,&i,1); //清标志
 4011              		.loc 1 1169 17 is_stmt 1 view .LVU1066
 4012 006a 0122     		movs	r2, #1
 4013 006c 0DF10B01 		add	r1, sp, #11
ARM GAS  /tmp/cckdBZRC.s 			page 98


 4014 0070 48F24E10 		movw	r0, #33102
 4015 0074 FFF7FEFF 		bl	GT9147_WR_Reg
 4016              	.LVL364:
 4017 0078 05E0     		b	.L224
 4018              	.L223:
1170:Core/Src/Mytouch.c ****             }
1171:Core/Src/Mytouch.c ****         }
1172:Core/Src/Mytouch.c ****         else
1173:Core/Src/Mytouch.c ****         {
1174:Core/Src/Mytouch.c ****             FT5206_RD_Reg(FT_REG_NUM_FINGER,&mode,1);//读取触摸点的状态  
 4019              		.loc 1 1174 13 view .LVU1067
 4020 007a 0122     		movs	r2, #1
 4021 007c 0DF10701 		add	r1, sp, #7
 4022 0080 0220     		movs	r0, #2
 4023 0082 FFF7FEFF 		bl	FT5206_RD_Reg
 4024              	.LVL365:
 4025              	.L224:
1175:Core/Src/Mytouch.c ****         }
1176:Core/Src/Mytouch.c **** 		if((mode&0XF)&&((mode&0XF)<=g_gt_tnum))
 4026              		.loc 1 1176 3 view .LVU1068
 4027              		.loc 1 1176 11 is_stmt 0 view .LVU1069
 4028 0086 9DF80740 		ldrb	r4, [sp, #7]	@ zero_extendqisi2
 4029 008a 04F00F04 		and	r4, r4, #15
 4030              		.loc 1 1176 5 view .LVU1070
 4031 008e 002C     		cmp	r4, #0
 4032 0090 00F0F980 		beq	.L222
 4033              		.loc 1 1176 29 discriminator 1 view .LVU1071
 4034 0094 974A     		ldr	r2, .L246+16
 4035 0096 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4036              		.loc 1 1176 16 discriminator 1 view .LVU1072
 4037 0098 9442     		cmp	r4, r2
 4038 009a 00F20A81 		bhi	.L240
1177:Core/Src/Mytouch.c **** 		{
1178:Core/Src/Mytouch.c **** 			temp=0XFF<<(mode&0XF);//将点的个数转换为1的位数,匹配tp_dev.sta定义 
 4039              		.loc 1 1178 4 is_stmt 1 view .LVU1073
 4040              		.loc 1 1178 13 is_stmt 0 view .LVU1074
 4041 009e FF21     		movs	r1, #255
 4042 00a0 A140     		lsls	r1, r1, r4
 4043              	.LVL366:
1179:Core/Src/Mytouch.c ****             tempsta=tp_dev.sta;    //保存当前的tp_dev.sta值
 4044              		.loc 1 1179 13 is_stmt 1 view .LVU1075
 4045              		.loc 1 1179 27 is_stmt 0 view .LVU1076
 4046 00a2 954B     		ldr	r3, .L246+20
 4047 00a4 93F82050 		ldrb	r5, [r3, #32]	@ zero_extendqisi2
 4048              	.LVL367:
1180:Core/Src/Mytouch.c ****             tp_dev.sta=(~temp)|TP_PRES_DOWN|TP_CATH_PRES;
 4049              		.loc 1 1180 13 is_stmt 1 view .LVU1077
 4050              		.loc 1 1180 44 is_stmt 0 view .LVU1078
 4051 00a8 C943     		mvns	r1, r1
 4052              	.LVL368:
 4053              		.loc 1 1180 44 view .LVU1079
 4054 00aa 61F03F01 		orn	r1, r1, #63
 4055              	.LVL369:
 4056              		.loc 1 1180 23 view .LVU1080
 4057 00ae 83F82010 		strb	r1, [r3, #32]
1181:Core/Src/Mytouch.c ****             tp_dev.x[g_gt_tnum-1]=tp_dev.x[0];//保存触点0的数据,保存在最后一个上
 4058              		.loc 1 1181 13 is_stmt 1 view .LVU1081
ARM GAS  /tmp/cckdBZRC.s 			page 99


 4059              		.loc 1 1181 43 is_stmt 0 view .LVU1082
 4060 00b2 9889     		ldrh	r0, [r3, #12]
 4061              		.loc 1 1181 34 view .LVU1083
 4062 00b4 D11C     		adds	r1, r2, #3
 4063 00b6 03EB4101 		add	r1, r3, r1, lsl #1
 4064 00ba 8880     		strh	r0, [r1, #4]	@ movhi
1182:Core/Src/Mytouch.c ****             tp_dev.y[g_gt_tnum-1]=tp_dev.y[0];
 4065              		.loc 1 1182 13 is_stmt 1 view .LVU1084
 4066              		.loc 1 1182 43 is_stmt 0 view .LVU1085
 4067 00bc D98A     		ldrh	r1, [r3, #22]
 4068              		.loc 1 1182 34 view .LVU1086
 4069 00be 0732     		adds	r2, r2, #7
 4070 00c0 03EB4203 		add	r3, r3, r2, lsl #1
 4071 00c4 D980     		strh	r1, [r3, #6]	@ movhi
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4072              		.loc 1 1183 4 is_stmt 1 view .LVU1087
 4073              		.loc 1 1183 9 is_stmt 0 view .LVU1088
 4074 00c6 0023     		movs	r3, #0
 4075 00c8 8DF80B30 		strb	r3, [sp, #11]
 4076              		.loc 1 1183 4 view .LVU1089
 4077 00cc 1FE0     		b	.L225
 4078              	.LVL370:
 4079              	.L228:
1184:Core/Src/Mytouch.c **** 			{
1185:Core/Src/Mytouch.c **** 				if(tp_dev.sta&(1<<i))		//触摸有效?
1186:Core/Src/Mytouch.c **** 				{
1187:Core/Src/Mytouch.c ****                     if(strcmp((char *)CIP,"911")==0) //触摸IC 911
1188:Core/Src/Mytouch.c ****                     {
1189:Core/Src/Mytouch.c ****                         GT9147_RD_Reg(GT911_TPX_TBL[i],buf,4);   //读取XY坐标值
1190:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01) //横屏
1191:Core/Src/Mytouch.c ****                         {
1192:Core/Src/Mytouch.c ****                             tp_dev.y[i]=lcddev.height-(((u16)buf[3]<<8)+buf[2]);
1193:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
1194:Core/Src/Mytouch.c ****                         }
1195:Core/Src/Mytouch.c ****                         else
1196:Core/Src/Mytouch.c ****                         {
1197:Core/Src/Mytouch.c ****                             tp_dev.x[i]=((u16)buf[3]<<8)+buf[2];
 4080              		.loc 1 1197 29 is_stmt 1 view .LVU1090
 4081              		.loc 1 1197 50 is_stmt 0 view .LVU1091
 4082 00ce 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 4083              		.loc 1 1197 61 view .LVU1092
 4084 00d2 9DF80E00 		ldrb	r0, [sp, #14]	@ zero_extendqisi2
 4085              		.loc 1 1197 37 view .LVU1093
 4086 00d6 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
 4087              		.loc 1 1197 57 view .LVU1094
 4088 00da 00EB0320 		add	r0, r0, r3, lsl #8
 4089              		.loc 1 1197 40 view .LVU1095
 4090 00de 864A     		ldr	r2, .L246+20
 4091 00e0 0B1D     		adds	r3, r1, #4
 4092 00e2 02EB4303 		add	r3, r2, r3, lsl #1
 4093 00e6 9880     		strh	r0, [r3, #4]	@ movhi
1198:Core/Src/Mytouch.c ****                             tp_dev.y[i]=lcddev.height-(((u16)buf[1]<<8)+buf[0]);
 4094              		.loc 1 1198 29 is_stmt 1 view .LVU1096
 4095              		.loc 1 1198 47 is_stmt 0 view .LVU1097
 4096 00e8 844B     		ldr	r3, .L246+24
 4097 00ea 5888     		ldrh	r0, [r3, #2]
 4098              		.loc 1 1198 65 view .LVU1098
ARM GAS  /tmp/cckdBZRC.s 			page 100


 4099 00ec 9DF80D40 		ldrb	r4, [sp, #13]	@ zero_extendqisi2
 4100              		.loc 1 1198 76 view .LVU1099
 4101 00f0 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 4102              		.loc 1 1198 72 view .LVU1100
 4103 00f4 03EB0423 		add	r3, r3, r4, lsl #8
 4104 00f8 9BB2     		uxth	r3, r3
 4105              		.loc 1 1198 54 view .LVU1101
 4106 00fa C31A     		subs	r3, r0, r3
 4107              		.loc 1 1198 40 view .LVU1102
 4108 00fc 0831     		adds	r1, r1, #8
 4109 00fe 02EB4102 		add	r2, r2, r1, lsl #1
 4110 0102 D380     		strh	r3, [r2, #6]	@ movhi
 4111              	.L226:
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4112              		.loc 1 1183 24 is_stmt 1 discriminator 2 view .LVU1103
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4113              		.loc 1 1183 25 is_stmt 0 discriminator 2 view .LVU1104
 4114 0104 9DF80B30 		ldrb	r3, [sp, #11]	@ zero_extendqisi2
 4115 0108 0133     		adds	r3, r3, #1
 4116 010a 8DF80B30 		strb	r3, [sp, #11]
 4117              	.L225:
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4118              		.loc 1 1183 12 is_stmt 1 discriminator 1 view .LVU1105
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4119              		.loc 1 1183 13 is_stmt 0 discriminator 1 view .LVU1106
 4120 010e 9DF80B40 		ldrb	r4, [sp, #11]	@ zero_extendqisi2
 4121 0112 784B     		ldr	r3, .L246+16
 4122 0114 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4123              		.loc 1 1183 4 discriminator 1 view .LVU1107
 4124 0116 9C42     		cmp	r4, r3
 4125 0118 80F08280 		bcs	.L242
1185:Core/Src/Mytouch.c **** 				{
 4126              		.loc 1 1185 5 is_stmt 1 view .LVU1108
1185:Core/Src/Mytouch.c **** 				{
 4127              		.loc 1 1185 14 is_stmt 0 view .LVU1109
 4128 011c 764B     		ldr	r3, .L246+20
 4129 011e 93F82030 		ldrb	r3, [r3, #32]	@ zero_extendqisi2
1185:Core/Src/Mytouch.c **** 				{
 4130              		.loc 1 1185 8 view .LVU1110
 4131 0122 2341     		asrs	r3, r3, r4
1185:Core/Src/Mytouch.c **** 				{
 4132              		.loc 1 1185 7 view .LVU1111
 4133 0124 13F0010F 		tst	r3, #1
 4134 0128 ECD0     		beq	.L226
1187:Core/Src/Mytouch.c ****                     {
 4135              		.loc 1 1187 21 is_stmt 1 view .LVU1112
1187:Core/Src/Mytouch.c ****                     {
 4136              		.loc 1 1187 24 is_stmt 0 view .LVU1113
 4137 012a 7049     		ldr	r1, .L246+8
 4138 012c 7048     		ldr	r0, .L246+12
 4139 012e FFF7FEFF 		bl	strcmp
 4140              	.LVL371:
1187:Core/Src/Mytouch.c ****                     {
 4141              		.loc 1 1187 23 view .LVU1114
 4142 0132 60BB     		cbnz	r0, .L227
1189:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01) //横屏
ARM GAS  /tmp/cckdBZRC.s 			page 101


 4143              		.loc 1 1189 25 is_stmt 1 view .LVU1115
 4144 0134 0422     		movs	r2, #4
 4145 0136 03A9     		add	r1, sp, #12
 4146 0138 714B     		ldr	r3, .L246+28
 4147 013a 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 4148 013e FFF7FEFF 		bl	GT9147_RD_Reg
 4149              	.LVL372:
1190:Core/Src/Mytouch.c ****                         {
 4150              		.loc 1 1190 25 view .LVU1116
1190:Core/Src/Mytouch.c ****                         {
 4151              		.loc 1 1190 34 is_stmt 0 view .LVU1117
 4152 0142 6D4B     		ldr	r3, .L246+20
 4153 0144 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
1190:Core/Src/Mytouch.c ****                         {
 4154              		.loc 1 1190 27 view .LVU1118
 4155 0148 13F0010F 		tst	r3, #1
 4156 014c BFD0     		beq	.L228
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4157              		.loc 1 1192 29 is_stmt 1 view .LVU1119
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4158              		.loc 1 1192 47 is_stmt 0 view .LVU1120
 4159 014e 6B4C     		ldr	r4, .L246+24
 4160 0150 6288     		ldrh	r2, [r4, #2]
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4161              		.loc 1 1192 65 view .LVU1121
 4162 0152 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4163              		.loc 1 1192 76 view .LVU1122
 4164 0156 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4165              		.loc 1 1192 72 view .LVU1123
 4166 015a 03EB0123 		add	r3, r3, r1, lsl #8
 4167 015e 9BB2     		uxth	r3, r3
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4168              		.loc 1 1192 37 view .LVU1124
 4169 0160 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4170              		.loc 1 1192 54 view .LVU1125
 4171 0164 D31A     		subs	r3, r2, r3
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4172              		.loc 1 1192 40 view .LVU1126
 4173 0166 644A     		ldr	r2, .L246+20
 4174 0168 01F10800 		add	r0, r1, #8
 4175 016c 02EB4000 		add	r0, r2, r0, lsl #1
 4176 0170 C380     		strh	r3, [r0, #6]	@ movhi
1193:Core/Src/Mytouch.c ****                         }
 4177              		.loc 1 1193 29 is_stmt 1 view .LVU1127
1193:Core/Src/Mytouch.c ****                         }
 4178              		.loc 1 1193 47 is_stmt 0 view .LVU1128
 4179 0172 2088     		ldrh	r0, [r4]
1193:Core/Src/Mytouch.c ****                         }
 4180              		.loc 1 1193 64 view .LVU1129
 4181 0174 9DF80D40 		ldrb	r4, [sp, #13]	@ zero_extendqisi2
1193:Core/Src/Mytouch.c ****                         }
 4182              		.loc 1 1193 75 view .LVU1130
 4183 0178 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
1193:Core/Src/Mytouch.c ****                         }
ARM GAS  /tmp/cckdBZRC.s 			page 102


 4184              		.loc 1 1193 71 view .LVU1131
 4185 017c 03EB0423 		add	r3, r3, r4, lsl #8
 4186 0180 9BB2     		uxth	r3, r3
1193:Core/Src/Mytouch.c ****                         }
 4187              		.loc 1 1193 53 view .LVU1132
 4188 0182 C31A     		subs	r3, r0, r3
1193:Core/Src/Mytouch.c ****                         }
 4189              		.loc 1 1193 40 view .LVU1133
 4190 0184 0431     		adds	r1, r1, #4
 4191 0186 02EB4102 		add	r2, r2, r1, lsl #1
 4192 018a 9380     		strh	r3, [r2, #4]	@ movhi
 4193 018c BAE7     		b	.L226
 4194              	.L227:
1199:Core/Src/Mytouch.c ****                         }
1200:Core/Src/Mytouch.c ****                     }
1201:Core/Src/Mytouch.c ****                     else
1202:Core/Src/Mytouch.c ****                     {
1203:Core/Src/Mytouch.c ****                         FT5206_RD_Reg(FT5206_TPX_TBL[i],buf,4);	//读取XY坐标值 
 4195              		.loc 1 1203 25 is_stmt 1 view .LVU1134
 4196 018e 0422     		movs	r2, #4
 4197 0190 03A9     		add	r1, sp, #12
 4198 0192 5C4B     		ldr	r3, .L246+32
 4199 0194 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 4200 0198 FFF7FEFF 		bl	FT5206_RD_Reg
 4201              	.LVL373:
1204:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01)//横屏
 4202              		.loc 1 1204 25 view .LVU1135
 4203              		.loc 1 1204 34 is_stmt 0 view .LVU1136
 4204 019c 564B     		ldr	r3, .L246+20
 4205 019e 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 4206              		.loc 1 1204 27 view .LVU1137
 4207 01a2 13F0010F 		tst	r3, #1
 4208 01a6 1CD0     		beq	.L229
1205:Core/Src/Mytouch.c ****                         {
1206:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)(buf[0]&0X0F)<<8)+buf[1];
 4209              		.loc 1 1206 29 is_stmt 1 view .LVU1138
 4210              		.loc 1 1206 51 is_stmt 0 view .LVU1139
 4211 01a8 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 4212              		.loc 1 1206 60 view .LVU1140
 4213 01ac 1B02     		lsls	r3, r3, #8
 4214 01ae 03F47063 		and	r3, r3, #3840
 4215              		.loc 1 1206 68 view .LVU1141
 4216 01b2 9DF80D20 		ldrb	r2, [sp, #13]	@ zero_extendqisi2
 4217              		.loc 1 1206 37 view .LVU1142
 4218 01b6 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
 4219              		.loc 1 1206 64 view .LVU1143
 4220 01ba 1344     		add	r3, r3, r2
 4221              		.loc 1 1206 40 view .LVU1144
 4222 01bc 4E4A     		ldr	r2, .L246+20
 4223 01be 01F10800 		add	r0, r1, #8
 4224 01c2 02EB4000 		add	r0, r2, r0, lsl #1
 4225 01c6 C380     		strh	r3, [r0, #6]	@ movhi
1207:Core/Src/Mytouch.c ****                             tp_dev.x[i]=((u16)(buf[2]&0X0F)<<8)+buf[3];
 4226              		.loc 1 1207 29 is_stmt 1 view .LVU1145
 4227              		.loc 1 1207 51 is_stmt 0 view .LVU1146
 4228 01c8 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 4229              		.loc 1 1207 60 view .LVU1147
ARM GAS  /tmp/cckdBZRC.s 			page 103


 4230 01cc 1B02     		lsls	r3, r3, #8
 4231 01ce 03F47063 		and	r3, r3, #3840
 4232              		.loc 1 1207 68 view .LVU1148
 4233 01d2 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
 4234              		.loc 1 1207 64 view .LVU1149
 4235 01d6 0344     		add	r3, r3, r0
 4236              		.loc 1 1207 40 view .LVU1150
 4237 01d8 0431     		adds	r1, r1, #4
 4238 01da 02EB4102 		add	r2, r2, r1, lsl #1
 4239 01de 9380     		strh	r3, [r2, #4]	@ movhi
 4240 01e0 90E7     		b	.L226
 4241              	.L229:
1208:Core/Src/Mytouch.c ****                         }else
1209:Core/Src/Mytouch.c ****                         {
1210:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)(buf[0]&0X0F)<<8)+buf[1]);
 4242              		.loc 1 1210 29 is_stmt 1 view .LVU1151
 4243              		.loc 1 1210 47 is_stmt 0 view .LVU1152
 4244 01e2 464B     		ldr	r3, .L246+24
 4245 01e4 1A88     		ldrh	r2, [r3]
 4246              		.loc 1 1210 65 view .LVU1153
 4247 01e6 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 4248              		.loc 1 1210 74 view .LVU1154
 4249 01ea 1B02     		lsls	r3, r3, #8
 4250 01ec 03F47063 		and	r3, r3, #3840
 4251              		.loc 1 1210 82 view .LVU1155
 4252 01f0 9DF80D10 		ldrb	r1, [sp, #13]	@ zero_extendqisi2
 4253              		.loc 1 1210 78 view .LVU1156
 4254 01f4 0B44     		add	r3, r3, r1
 4255              		.loc 1 1210 37 view .LVU1157
 4256 01f6 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
 4257              		.loc 1 1210 53 view .LVU1158
 4258 01fa D31A     		subs	r3, r2, r3
 4259              		.loc 1 1210 40 view .LVU1159
 4260 01fc 3E4A     		ldr	r2, .L246+20
 4261 01fe 081D     		adds	r0, r1, #4
 4262 0200 02EB4000 		add	r0, r2, r0, lsl #1
 4263 0204 8380     		strh	r3, [r0, #4]	@ movhi
1211:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)(buf[2]&0X0F)<<8)+buf[3];
 4264              		.loc 1 1211 29 is_stmt 1 view .LVU1160
 4265              		.loc 1 1211 51 is_stmt 0 view .LVU1161
 4266 0206 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 4267              		.loc 1 1211 60 view .LVU1162
 4268 020a 1B02     		lsls	r3, r3, #8
 4269 020c 03F47063 		and	r3, r3, #3840
 4270              		.loc 1 1211 68 view .LVU1163
 4271 0210 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
 4272              		.loc 1 1211 64 view .LVU1164
 4273 0214 0344     		add	r3, r3, r0
 4274              		.loc 1 1211 40 view .LVU1165
 4275 0216 0831     		adds	r1, r1, #8
 4276 0218 02EB4102 		add	r2, r2, r1, lsl #1
 4277 021c D380     		strh	r3, [r2, #6]	@ movhi
 4278 021e 71E7     		b	.L226
 4279              	.L242:
1212:Core/Src/Mytouch.c ****                         }  
1213:Core/Src/Mytouch.c ****                     }
1214:Core/Src/Mytouch.c **** 					//printf("x[%d]:%d,y[%d]:%d\r\n",i,tp_dev.x[i],i,tp_dev.y[i]);
ARM GAS  /tmp/cckdBZRC.s 			page 104


1215:Core/Src/Mytouch.c **** 				}			
1216:Core/Src/Mytouch.c **** 			} 
1217:Core/Src/Mytouch.c **** 			res=1;
 4280              		.loc 1 1217 4 is_stmt 1 view .LVU1166
 4281              	.LVL374:
1218:Core/Src/Mytouch.c ****             if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)  //非法数据(坐标超出了
 4282              		.loc 1 1218 13 view .LVU1167
 4283              		.loc 1 1218 24 is_stmt 0 view .LVU1168
 4284 0220 354A     		ldr	r2, .L246+20
 4285 0222 9189     		ldrh	r1, [r2, #12]
 4286              		.loc 1 1218 34 view .LVU1169
 4287 0224 354A     		ldr	r2, .L246+24
 4288 0226 1288     		ldrh	r2, [r2]
 4289              		.loc 1 1218 15 view .LVU1170
 4290 0228 9142     		cmp	r1, r2
 4291 022a 05D8     		bhi	.L231
 4292              		.loc 1 1218 50 discriminator 1 view .LVU1171
 4293 022c 324A     		ldr	r2, .L246+20
 4294 022e D18A     		ldrh	r1, [r2, #22]
 4295              		.loc 1 1218 60 discriminator 1 view .LVU1172
 4296 0230 324A     		ldr	r2, .L246+24
 4297 0232 5288     		ldrh	r2, [r2, #2]
 4298              		.loc 1 1218 40 discriminator 1 view .LVU1173
 4299 0234 9142     		cmp	r1, r2
 4300 0236 20D9     		bls	.L232
 4301              	.L231:
1219:Core/Src/Mytouch.c ****             {
1220:Core/Src/Mytouch.c ****                 if((mode&0XF)>1)   // 有其他点有数据,则复第二个触点的数据到第一
 4302              		.loc 1 1220 17 is_stmt 1 view .LVU1174
 4303              		.loc 1 1220 30 is_stmt 0 view .LVU1175
 4304 0238 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 4305              		.loc 1 1220 19 view .LVU1176
 4306 023c 12F00E0F 		tst	r2, #14
 4307 0240 09D0     		beq	.L233
1221:Core/Src/Mytouch.c ****                 {
1222:Core/Src/Mytouch.c ****                     tp_dev.x[0]=tp_dev.x[1];
 4308              		.loc 1 1222 21 is_stmt 1 view .LVU1177
 4309              		.loc 1 1222 41 is_stmt 0 view .LVU1178
 4310 0242 2D4B     		ldr	r3, .L246+20
 4311 0244 DA89     		ldrh	r2, [r3, #14]
 4312              		.loc 1 1222 32 view .LVU1179
 4313 0246 9A81     		strh	r2, [r3, #12]	@ movhi
1223:Core/Src/Mytouch.c ****                     tp_dev.y[0]=tp_dev.y[1];
 4314              		.loc 1 1223 21 is_stmt 1 view .LVU1180
 4315              		.loc 1 1223 41 is_stmt 0 view .LVU1181
 4316 0248 1A8B     		ldrh	r2, [r3, #24]
 4317              		.loc 1 1223 32 view .LVU1182
 4318 024a DA82     		strh	r2, [r3, #22]	@ movhi
1224:Core/Src/Mytouch.c ****                     t=0;  // 触发一次,则会最少连续监测10次,从而提高命中率 
 4319              		.loc 1 1224 21 is_stmt 1 view .LVU1183
 4320              		.loc 1 1224 22 is_stmt 0 view .LVU1184
 4321 024c 254B     		ldr	r3, .L246
 4322 024e 0022     		movs	r2, #0
 4323 0250 1A70     		strb	r2, [r3]
1217:Core/Src/Mytouch.c ****             if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)  //非法数据(坐标超出了
 4324              		.loc 1 1217 7 view .LVU1185
 4325 0252 0124     		movs	r4, #1
ARM GAS  /tmp/cckdBZRC.s 			page 105


 4326 0254 17E0     		b	.L222
 4327              	.L233:
1225:Core/Src/Mytouch.c ****                 }
1226:Core/Src/Mytouch.c ****                 else        // 非法数据,则忽略此次数据(还原原来的) 
1227:Core/Src/Mytouch.c ****                 {
1228:Core/Src/Mytouch.c ****                     tp_dev.x[0]=tp_dev.x[g_gt_tnum-1];
 4328              		.loc 1 1228 21 is_stmt 1 view .LVU1186
 4329              		.loc 1 1228 41 is_stmt 0 view .LVU1187
 4330 0256 284A     		ldr	r2, .L246+20
 4331 0258 D91C     		adds	r1, r3, #3
 4332 025a 02EB4101 		add	r1, r2, r1, lsl #1
 4333 025e 8988     		ldrh	r1, [r1, #4]
 4334              		.loc 1 1228 32 view .LVU1188
 4335 0260 9181     		strh	r1, [r2, #12]	@ movhi
1229:Core/Src/Mytouch.c ****                     tp_dev.y[0]=tp_dev.y[g_gt_tnum-1];
 4336              		.loc 1 1229 21 is_stmt 1 view .LVU1189
 4337              		.loc 1 1229 41 is_stmt 0 view .LVU1190
 4338 0262 0733     		adds	r3, r3, #7
 4339 0264 02EB4303 		add	r3, r2, r3, lsl #1
 4340 0268 DB88     		ldrh	r3, [r3, #6]
 4341              		.loc 1 1229 32 view .LVU1191
 4342 026a D382     		strh	r3, [r2, #22]	@ movhi
1230:Core/Src/Mytouch.c ****                     mode=0X80;
 4343              		.loc 1 1230 21 is_stmt 1 view .LVU1192
 4344              		.loc 1 1230 25 is_stmt 0 view .LVU1193
 4345 026c 8023     		movs	r3, #128
 4346 026e 8DF80730 		strb	r3, [sp, #7]
1231:Core/Src/Mytouch.c ****                     tp_dev.sta=tempsta;   // 恢复tp_dev.sta 
 4347              		.loc 1 1231 21 is_stmt 1 view .LVU1194
 4348              		.loc 1 1231 31 is_stmt 0 view .LVU1195
 4349 0272 82F82050 		strb	r5, [r2, #32]
1217:Core/Src/Mytouch.c ****             if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)  //非法数据(坐标超出了
 4350              		.loc 1 1217 7 view .LVU1196
 4351 0276 0124     		movs	r4, #1
 4352 0278 05E0     		b	.L222
 4353              	.L232:
1232:Core/Src/Mytouch.c ****                 }
1233:Core/Src/Mytouch.c ****             }
1234:Core/Src/Mytouch.c ****             else t=0;      // 触发一次,则会最少连续监测10次,从而提高命中率 
 4354              		.loc 1 1234 18 is_stmt 1 view .LVU1197
 4355              		.loc 1 1234 19 is_stmt 0 view .LVU1198
 4356 027a 1A4B     		ldr	r3, .L246
 4357 027c 0022     		movs	r2, #0
 4358 027e 1A70     		strb	r2, [r3]
1217:Core/Src/Mytouch.c ****             if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)  //非法数据(坐标超出了
 4359              		.loc 1 1217 7 view .LVU1199
 4360 0280 0124     		movs	r4, #1
 4361 0282 00E0     		b	.L222
 4362              	.LVL375:
 4363              	.L239:
1156:Core/Src/Mytouch.c **** 	u8 temp;
 4364              		.loc 1 1156 5 view .LVU1200
 4365 0284 0024     		movs	r4, #0
 4366              	.LVL376:
 4367              	.L222:
1235:Core/Src/Mytouch.c **** 		}
1236:Core/Src/Mytouch.c **** 	}
ARM GAS  /tmp/cckdBZRC.s 			page 106


1237:Core/Src/Mytouch.c ****     
1238:Core/Src/Mytouch.c ****     if(strcmp((char *)CIP,"911")==0) //触摸IC 911
 4368              		.loc 1 1238 5 is_stmt 1 view .LVU1201
 4369              		.loc 1 1238 8 is_stmt 0 view .LVU1202
 4370 0286 1949     		ldr	r1, .L246+8
 4371 0288 1948     		ldr	r0, .L246+12
 4372 028a FFF7FEFF 		bl	strcmp
 4373              	.LVL377:
 4374              		.loc 1 1238 7 view .LVU1203
 4375 028e 0028     		cmp	r0, #0
 4376 0290 3AD1     		bne	.L234
1239:Core/Src/Mytouch.c ****     {
1240:Core/Src/Mytouch.c ****         if((mode&0X8F)==0X80)//无触摸点按下
 4377              		.loc 1 1240 9 is_stmt 1 view .LVU1204
 4378              		.loc 1 1240 17 is_stmt 0 view .LVU1205
 4379 0292 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4380              		.loc 1 1240 11 view .LVU1206
 4381 0296 03F08F03 		and	r3, r3, #143
 4382 029a 802B     		cmp	r3, #128
 4383 029c 0BD0     		beq	.L243
 4384              	.L235:
1241:Core/Src/Mytouch.c ****         { 
1242:Core/Src/Mytouch.c ****             if(tp_dev.sta&TP_PRES_DOWN)	//之前是被按下的
1243:Core/Src/Mytouch.c ****             {
1244:Core/Src/Mytouch.c ****                 tp_dev.sta&=~TP_PRES_DOWN;	//标记按键松开
1245:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
1246:Core/Src/Mytouch.c ****             { 
1247:Core/Src/Mytouch.c ****                 tp_dev.x[0]=0xffff;
1248:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
1249:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
1250:Core/Src/Mytouch.c ****             }	 
1251:Core/Src/Mytouch.c ****         } 	
1252:Core/Src/Mytouch.c ****     }
1253:Core/Src/Mytouch.c ****     else
1254:Core/Src/Mytouch.c ****     {
1255:Core/Src/Mytouch.c ****         if((mode&0X1F)==0)//无触摸点按下
1256:Core/Src/Mytouch.c ****         { 
1257:Core/Src/Mytouch.c ****             if(tp_dev.sta&TP_PRES_DOWN)	//之前是被按下的
1258:Core/Src/Mytouch.c ****             {
1259:Core/Src/Mytouch.c ****                 tp_dev.sta&=~TP_PRES_DOWN;	//标记按键松开
1260:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
1261:Core/Src/Mytouch.c ****             { 
1262:Core/Src/Mytouch.c ****                 tp_dev.x[0]=0xffff;
1263:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
1264:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
1265:Core/Src/Mytouch.c ****             }
1266:Core/Src/Mytouch.c ****         }
1267:Core/Src/Mytouch.c ****     }
1268:Core/Src/Mytouch.c ****     
1269:Core/Src/Mytouch.c **** 	if(t>240)t=10;//重新从10开始计数
 4385              		.loc 1 1269 2 is_stmt 1 view .LVU1207
 4386              		.loc 1 1269 6 is_stmt 0 view .LVU1208
 4387 029e 114B     		ldr	r3, .L246
 4388 02a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4389              		.loc 1 1269 4 view .LVU1209
 4390 02a2 F02B     		cmp	r3, #240
 4391 02a4 02D9     		bls	.L238
ARM GAS  /tmp/cckdBZRC.s 			page 107


 4392              		.loc 1 1269 11 is_stmt 1 discriminator 1 view .LVU1210
 4393              		.loc 1 1269 12 is_stmt 0 discriminator 1 view .LVU1211
 4394 02a6 0F4B     		ldr	r3, .L246
 4395 02a8 0A22     		movs	r2, #10
 4396 02aa 1A70     		strb	r2, [r3]
 4397              	.L238:
1270:Core/Src/Mytouch.c **** 	return res;
 4398              		.loc 1 1270 2 is_stmt 1 view .LVU1212
1271:Core/Src/Mytouch.c **** }
 4399              		.loc 1 1271 1 is_stmt 0 view .LVU1213
 4400 02ac 2046     		mov	r0, r4
 4401 02ae 05B0     		add	sp, sp, #20
 4402              	.LCFI57:
 4403              		.cfi_remember_state
 4404              		.cfi_def_cfa_offset 12
 4405              		@ sp needed
 4406 02b0 30BD     		pop	{r4, r5, pc}
 4407              	.LVL378:
 4408              	.L240:
 4409              	.LCFI58:
 4410              		.cfi_restore_state
1156:Core/Src/Mytouch.c **** 	u8 temp;
 4411              		.loc 1 1156 5 view .LVU1214
 4412 02b2 0024     		movs	r4, #0
 4413 02b4 E7E7     		b	.L222
 4414              	.LVL379:
 4415              	.L243:
1242:Core/Src/Mytouch.c ****             {
 4416              		.loc 1 1242 13 is_stmt 1 view .LVU1215
1242:Core/Src/Mytouch.c ****             {
 4417              		.loc 1 1242 22 is_stmt 0 view .LVU1216
 4418 02b6 104A     		ldr	r2, .L246+20
 4419 02b8 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
1242:Core/Src/Mytouch.c ****             {
 4420              		.loc 1 1242 16 view .LVU1217
 4421 02bc 92F92020 		ldrsb	r2, [r2, #32]
1242:Core/Src/Mytouch.c ****             {
 4422              		.loc 1 1242 15 view .LVU1218
 4423 02c0 002A     		cmp	r2, #0
 4424 02c2 09DB     		blt	.L244
1247:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
 4425              		.loc 1 1247 17 is_stmt 1 view .LVU1219
1247:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
 4426              		.loc 1 1247 28 is_stmt 0 view .LVU1220
 4427 02c4 0C4A     		ldr	r2, .L246+20
 4428 02c6 4FF6FF71 		movw	r1, #65535
 4429 02ca 9181     		strh	r1, [r2, #12]	@ movhi
1248:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
 4430              		.loc 1 1248 17 is_stmt 1 view .LVU1221
1248:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
 4431              		.loc 1 1248 28 is_stmt 0 view .LVU1222
 4432 02cc D182     		strh	r1, [r2, #22]	@ movhi
1249:Core/Src/Mytouch.c ****             }	 
 4433              		.loc 1 1249 17 is_stmt 1 view .LVU1223
1249:Core/Src/Mytouch.c ****             }	 
 4434              		.loc 1 1249 27 is_stmt 0 view .LVU1224
 4435 02ce 23F01F03 		bic	r3, r3, #31
ARM GAS  /tmp/cckdBZRC.s 			page 108


 4436 02d2 82F82030 		strb	r3, [r2, #32]
 4437 02d6 E2E7     		b	.L235
 4438              	.L244:
1244:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
 4439              		.loc 1 1244 17 is_stmt 1 view .LVU1225
1244:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
 4440              		.loc 1 1244 27 is_stmt 0 view .LVU1226
 4441 02d8 03F07F03 		and	r3, r3, #127
 4442 02dc 064A     		ldr	r2, .L246+20
 4443 02de 82F82030 		strb	r3, [r2, #32]
 4444 02e2 DCE7     		b	.L235
 4445              	.L247:
 4446              		.align	2
 4447              	.L246:
 4448 02e4 00000000 		.word	.LANCHOR8
 4449 02e8 CDCCCCCC 		.word	-858993459
 4450 02ec 00000000 		.word	.LC13
 4451 02f0 00000000 		.word	.LANCHOR9
 4452 02f4 00000000 		.word	.LANCHOR10
 4453 02f8 00000000 		.word	.LANCHOR2
 4454 02fc 00000000 		.word	lcddev
 4455 0300 00000000 		.word	.LANCHOR11
 4456 0304 00000000 		.word	.LANCHOR12
 4457              	.L234:
1255:Core/Src/Mytouch.c ****         { 
 4458              		.loc 1 1255 9 is_stmt 1 view .LVU1227
1255:Core/Src/Mytouch.c ****         { 
 4459              		.loc 1 1255 17 is_stmt 0 view .LVU1228
 4460 0308 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
1255:Core/Src/Mytouch.c ****         { 
 4461              		.loc 1 1255 11 view .LVU1229
 4462 030c 13F01F0F 		tst	r3, #31
 4463 0310 C5D1     		bne	.L235
1257:Core/Src/Mytouch.c ****             {
 4464              		.loc 1 1257 13 is_stmt 1 view .LVU1230
1257:Core/Src/Mytouch.c ****             {
 4465              		.loc 1 1257 22 is_stmt 0 view .LVU1231
 4466 0312 0B4A     		ldr	r2, .L248
 4467 0314 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
1257:Core/Src/Mytouch.c ****             {
 4468              		.loc 1 1257 16 view .LVU1232
 4469 0318 92F92020 		ldrsb	r2, [r2, #32]
1257:Core/Src/Mytouch.c ****             {
 4470              		.loc 1 1257 15 view .LVU1233
 4471 031c 002A     		cmp	r2, #0
 4472 031e 09DB     		blt	.L245
1262:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
 4473              		.loc 1 1262 17 is_stmt 1 view .LVU1234
1262:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
 4474              		.loc 1 1262 28 is_stmt 0 view .LVU1235
 4475 0320 074A     		ldr	r2, .L248
 4476 0322 4FF6FF71 		movw	r1, #65535
 4477 0326 9181     		strh	r1, [r2, #12]	@ movhi
1263:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
 4478              		.loc 1 1263 17 is_stmt 1 view .LVU1236
1263:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
 4479              		.loc 1 1263 28 is_stmt 0 view .LVU1237
ARM GAS  /tmp/cckdBZRC.s 			page 109


 4480 0328 D182     		strh	r1, [r2, #22]	@ movhi
1264:Core/Src/Mytouch.c ****             }
 4481              		.loc 1 1264 17 is_stmt 1 view .LVU1238
1264:Core/Src/Mytouch.c ****             }
 4482              		.loc 1 1264 27 is_stmt 0 view .LVU1239
 4483 032a 23F01F03 		bic	r3, r3, #31
 4484 032e 82F82030 		strb	r3, [r2, #32]
 4485 0332 B4E7     		b	.L235
 4486              	.L245:
1259:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
 4487              		.loc 1 1259 17 is_stmt 1 view .LVU1240
1259:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
 4488              		.loc 1 1259 27 is_stmt 0 view .LVU1241
 4489 0334 03F07F03 		and	r3, r3, #127
 4490 0338 014A     		ldr	r2, .L248
 4491 033a 82F82030 		strb	r3, [r2, #32]
 4492 033e AEE7     		b	.L235
 4493              	.L249:
 4494              		.align	2
 4495              	.L248:
 4496 0340 00000000 		.word	.LANCHOR2
 4497              		.cfi_endproc
 4498              	.LFE182:
 4500              		.section	.text.FT5206_Init,"ax",%progbits
 4501              		.align	1
 4502              		.global	FT5206_Init
 4503              		.syntax unified
 4504              		.thumb
 4505              		.thumb_func
 4507              	FT5206_Init:
 4508              	.LFB181:
1089:Core/Src/Mytouch.c ****     u8 temp[5];
 4509              		.loc 1 1089 1 is_stmt 1 view -0
 4510              		.cfi_startproc
 4511              		@ args = 0, pretend = 0, frame = 40
 4512              		@ frame_needed = 0, uses_anonymous_args = 0
 4513 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 4514              	.LCFI59:
 4515              		.cfi_def_cfa_offset 20
 4516              		.cfi_offset 4, -20
 4517              		.cfi_offset 5, -16
 4518              		.cfi_offset 6, -12
 4519              		.cfi_offset 7, -8
 4520              		.cfi_offset 14, -4
 4521 0002 8BB0     		sub	sp, sp, #44
 4522              	.LCFI60:
 4523              		.cfi_def_cfa_offset 64
1090:Core/Src/Mytouch.c ****     u8 res=1;
 4524              		.loc 1 1090 5 view .LVU1243
1091:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 4525              		.loc 1 1091 5 view .LVU1244
 4526              	.LVL380:
1092:Core/Src/Mytouch.c ****  
 4527              		.loc 1 1092 5 view .LVU1245
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4528              		.loc 1 1094 5 view .LVU1246
 4529              	.LBB8:
ARM GAS  /tmp/cckdBZRC.s 			page 110


1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4530              		.loc 1 1094 5 view .LVU1247
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4531              		.loc 1 1094 5 view .LVU1248
 4532 0004 524B     		ldr	r3, .L257
 4533 0006 D3F8E020 		ldr	r2, [r3, #224]
 4534 000a 42F08002 		orr	r2, r2, #128
 4535 000e C3F8E020 		str	r2, [r3, #224]
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4536              		.loc 1 1094 5 view .LVU1249
 4537 0012 D3F8E020 		ldr	r2, [r3, #224]
 4538 0016 02F08002 		and	r2, r2, #128
 4539 001a 0192     		str	r2, [sp, #4]
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4540              		.loc 1 1094 5 view .LVU1250
 4541 001c 019A     		ldr	r2, [sp, #4]
 4542              	.LBE8:
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4543              		.loc 1 1094 5 view .LVU1251
1095:Core/Src/Mytouch.c ****                 
 4544              		.loc 1 1095 5 view .LVU1252
 4545              	.LBB9:
1095:Core/Src/Mytouch.c ****                 
 4546              		.loc 1 1095 5 view .LVU1253
1095:Core/Src/Mytouch.c ****                 
 4547              		.loc 1 1095 5 view .LVU1254
 4548 001e D3F8E020 		ldr	r2, [r3, #224]
 4549 0022 42F48072 		orr	r2, r2, #256
 4550 0026 C3F8E020 		str	r2, [r3, #224]
1095:Core/Src/Mytouch.c ****                 
 4551              		.loc 1 1095 5 view .LVU1255
 4552 002a D3F8E030 		ldr	r3, [r3, #224]
 4553 002e 03F48073 		and	r3, r3, #256
 4554 0032 0293     		str	r3, [sp, #8]
1095:Core/Src/Mytouch.c ****                 
 4555              		.loc 1 1095 5 view .LVU1256
 4556 0034 029B     		ldr	r3, [sp, #8]
 4557              	.LBE9:
1095:Core/Src/Mytouch.c ****                 
 4558              		.loc 1 1095 5 view .LVU1257
1098:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 4559              		.loc 1 1098 5 view .LVU1258
1098:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 4560              		.loc 1 1098 21 is_stmt 0 view .LVU1259
 4561 0036 8023     		movs	r3, #128
 4562 0038 0393     		str	r3, [sp, #12]
1099:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 4563              		.loc 1 1099 5 is_stmt 1 view .LVU1260
1099:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 4564              		.loc 1 1099 22 is_stmt 0 view .LVU1261
 4565 003a 0024     		movs	r4, #0
 4566 003c 0494     		str	r4, [sp, #16]
1100:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 4567              		.loc 1 1100 5 is_stmt 1 view .LVU1262
1100:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 4568              		.loc 1 1100 22 is_stmt 0 view .LVU1263
 4569 003e 0127     		movs	r7, #1
ARM GAS  /tmp/cckdBZRC.s 			page 111


 4570 0040 0597     		str	r7, [sp, #20]
1101:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 4571              		.loc 1 1101 5 is_stmt 1 view .LVU1264
1101:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 4572              		.loc 1 1101 23 is_stmt 0 view .LVU1265
 4573 0042 0323     		movs	r3, #3
 4574 0044 0693     		str	r3, [sp, #24]
1102:Core/Src/Mytouch.c ****             
 4575              		.loc 1 1102 5 is_stmt 1 view .LVU1266
 4576 0046 03A9     		add	r1, sp, #12
 4577 0048 4248     		ldr	r0, .L257+4
 4578 004a FFF7FEFF 		bl	HAL_GPIO_Init
 4579              	.LVL381:
1105:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 4580              		.loc 1 1105 5 view .LVU1267
1105:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 4581              		.loc 1 1105 21 is_stmt 0 view .LVU1268
 4582 004e 4FF48076 		mov	r6, #256
 4583 0052 0396     		str	r6, [sp, #12]
1106:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 4584              		.loc 1 1106 5 is_stmt 1 view .LVU1269
1106:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 4585              		.loc 1 1106 22 is_stmt 0 view .LVU1270
 4586 0054 0497     		str	r7, [sp, #16]
1107:Core/Src/Mytouch.c ****         
 4587              		.loc 1 1107 5 is_stmt 1 view .LVU1271
 4588 0056 404D     		ldr	r5, .L257+8
 4589 0058 03A9     		add	r1, sp, #12
 4590 005a 2846     		mov	r0, r5
 4591 005c FFF7FEFF 		bl	HAL_GPIO_Init
 4592              	.LVL382:
1109:Core/Src/Mytouch.c **** 	FT_RST(0);				//复位
 4593              		.loc 1 1109 2 view .LVU1272
 4594 0060 FFF7FEFF 		bl	CT_IIC_Init
 4595              	.LVL383:
1110:Core/Src/Mytouch.c **** 	HAL_Delay(20);
 4596              		.loc 1 1110 2 view .LVU1273
 4597 0064 2246     		mov	r2, r4
 4598 0066 3146     		mov	r1, r6
 4599 0068 2846     		mov	r0, r5
 4600 006a FFF7FEFF 		bl	HAL_GPIO_WritePin
 4601              	.LVL384:
1111:Core/Src/Mytouch.c ****  	FT_RST(1);				//释放复位		    
 4602              		.loc 1 1111 2 view .LVU1274
 4603 006e 1420     		movs	r0, #20
 4604 0070 FFF7FEFF 		bl	HAL_Delay
 4605              	.LVL385:
1112:Core/Src/Mytouch.c **** 	HAL_Delay(50);  	
 4606              		.loc 1 1112 3 view .LVU1275
 4607 0074 3A46     		mov	r2, r7
 4608 0076 3146     		mov	r1, r6
 4609 0078 2846     		mov	r0, r5
 4610 007a FFF7FEFF 		bl	HAL_GPIO_WritePin
 4611              	.LVL386:
1113:Core/Src/Mytouch.c **** 	temp[0]=0;
 4612              		.loc 1 1113 2 view .LVU1276
 4613 007e 3220     		movs	r0, #50
ARM GAS  /tmp/cckdBZRC.s 			page 112


 4614 0080 FFF7FEFF 		bl	HAL_Delay
 4615              	.LVL387:
1114:Core/Src/Mytouch.c **** 	//读取版本号，参考值：0x3003
 4616              		.loc 1 1114 2 view .LVU1277
1114:Core/Src/Mytouch.c **** 	//读取版本号，参考值：0x3003
 4617              		.loc 1 1114 9 is_stmt 0 view .LVU1278
 4618 0084 8DF82040 		strb	r4, [sp, #32]
1116:Core/Src/Mytouch.c **** 	if((temp[0]==0X30&&temp[1]==0X03)||temp[1]==0X01||temp[1]==0X02)//版本:0X3003/0X0001/0X0002
 4619              		.loc 1 1116 2 is_stmt 1 view .LVU1279
 4620 0088 0222     		movs	r2, #2
 4621 008a 08A9     		add	r1, sp, #32
 4622 008c A120     		movs	r0, #161
 4623 008e FFF7FEFF 		bl	FT5206_RD_Reg
 4624              	.LVL388:
1117:Core/Src/Mytouch.c **** 	{
 4625              		.loc 1 1117 2 view .LVU1280
1117:Core/Src/Mytouch.c **** 	{
 4626              		.loc 1 1117 10 is_stmt 0 view .LVU1281
 4627 0092 9DF82030 		ldrb	r3, [sp, #32]	@ zero_extendqisi2
1117:Core/Src/Mytouch.c **** 	{
 4628              		.loc 1 1117 4 view .LVU1282
 4629 0096 302B     		cmp	r3, #48
 4630 0098 29D0     		beq	.L256
 4631              	.L251:
1117:Core/Src/Mytouch.c **** 	{
 4632              		.loc 1 1117 41 discriminator 3 view .LVU1283
 4633 009a 9DF82120 		ldrb	r2, [sp, #33]	@ zero_extendqisi2
1117:Core/Src/Mytouch.c **** 	{
 4634              		.loc 1 1117 35 discriminator 3 view .LVU1284
 4635 009e 012A     		cmp	r2, #1
 4636 00a0 01D0     		beq	.L252
1117:Core/Src/Mytouch.c **** 	{
 4637              		.loc 1 1117 50 discriminator 4 view .LVU1285
 4638 00a2 022A     		cmp	r2, #2
 4639 00a4 28D1     		bne	.L253
 4640              	.L252:
1119:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_DEVIDE_MODE,temp,1);	//进入正常操作模式 
 4641              		.loc 1 1119 3 is_stmt 1 view .LVU1286
1119:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_DEVIDE_MODE,temp,1);	//进入正常操作模式 
 4642              		.loc 1 1119 48 is_stmt 0 view .LVU1287
 4643 00a6 9DF82110 		ldrb	r1, [sp, #33]	@ zero_extendqisi2
1119:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_DEVIDE_MODE,temp,1);	//进入正常操作模式 
 4644              		.loc 1 1119 3 view .LVU1288
 4645 00aa 01EB0321 		add	r1, r1, r3, lsl #8
 4646 00ae 2B48     		ldr	r0, .L257+12
 4647 00b0 FFF7FEFF 		bl	printf
 4648              	.LVL389:
1120:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_MODE,temp,1);		//查询模式 
 4649              		.loc 1 1120 9 is_stmt 1 view .LVU1289
 4650 00b4 0122     		movs	r2, #1
 4651 00b6 08A9     		add	r1, sp, #32
 4652 00b8 0020     		movs	r0, #0
 4653 00ba FFF7FEFF 		bl	FT5206_WR_Reg
 4654              	.LVL390:
1121:Core/Src/Mytouch.c ****         temp[0]=22;								//触摸有效值，22，越小越灵敏	
 4655              		.loc 1 1121 9 view .LVU1290
 4656 00be 0122     		movs	r2, #1
ARM GAS  /tmp/cckdBZRC.s 			page 113


 4657 00c0 08A9     		add	r1, sp, #32
 4658 00c2 A420     		movs	r0, #164
 4659 00c4 FFF7FEFF 		bl	FT5206_WR_Reg
 4660              	.LVL391:
1122:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_THGROUP,temp,1);	//设置触摸有效值
 4661              		.loc 1 1122 9 view .LVU1291
1122:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_THGROUP,temp,1);	//设置触摸有效值
 4662              		.loc 1 1122 16 is_stmt 0 view .LVU1292
 4663 00c8 1623     		movs	r3, #22
 4664 00ca 8DF82030 		strb	r3, [sp, #32]
1123:Core/Src/Mytouch.c ****         temp[0]=12;								//激活周期，不能小于12，最大14
 4665              		.loc 1 1123 9 is_stmt 1 view .LVU1293
 4666 00ce 0122     		movs	r2, #1
 4667 00d0 08A9     		add	r1, sp, #32
 4668 00d2 8020     		movs	r0, #128
 4669 00d4 FFF7FEFF 		bl	FT5206_WR_Reg
 4670              	.LVL392:
1124:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_PERIODACTIVE,temp,1); 
 4671              		.loc 1 1124 9 view .LVU1294
1124:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_PERIODACTIVE,temp,1); 
 4672              		.loc 1 1124 16 is_stmt 0 view .LVU1295
 4673 00d8 0C23     		movs	r3, #12
 4674 00da 8DF82030 		strb	r3, [sp, #32]
1125:Core/Src/Mytouch.c **** 		res = 0;
 4675              		.loc 1 1125 9 is_stmt 1 view .LVU1296
 4676 00de 0122     		movs	r2, #1
 4677 00e0 08A9     		add	r1, sp, #32
 4678 00e2 8820     		movs	r0, #136
 4679 00e4 FFF7FEFF 		bl	FT5206_WR_Reg
 4680              	.LVL393:
1126:Core/Src/Mytouch.c **** 	} 
 4681              		.loc 1 1126 3 view .LVU1297
 4682              	.L254:
1142:Core/Src/Mytouch.c **** }
 4683              		.loc 1 1142 2 view .LVU1298
1143:Core/Src/Mytouch.c **** const u16 FT5206_TPX_TBL[5]={FT_TP1_REG,FT_TP2_REG,FT_TP3_REG,FT_TP4_REG,FT_TP5_REG};
 4684              		.loc 1 1143 1 is_stmt 0 view .LVU1299
 4685 00e8 0020     		movs	r0, #0
 4686 00ea 0BB0     		add	sp, sp, #44
 4687              	.LCFI61:
 4688              		.cfi_remember_state
 4689              		.cfi_def_cfa_offset 20
 4690              		@ sp needed
 4691 00ec F0BD     		pop	{r4, r5, r6, r7, pc}
 4692              	.LVL394:
 4693              	.L256:
 4694              	.LCFI62:
 4695              		.cfi_restore_state
1117:Core/Src/Mytouch.c **** 	{
 4696              		.loc 1 1117 25 discriminator 1 view .LVU1300
 4697 00ee 9DF82120 		ldrb	r2, [sp, #33]	@ zero_extendqisi2
1117:Core/Src/Mytouch.c **** 	{
 4698              		.loc 1 1117 19 discriminator 1 view .LVU1301
 4699 00f2 032A     		cmp	r2, #3
 4700 00f4 D1D1     		bne	.L251
 4701 00f6 D6E7     		b	.L252
 4702              	.L253:
ARM GAS  /tmp/cckdBZRC.s 			page 114


1130:Core/Src/Mytouch.c ****         temp[4]=0;
 4703              		.loc 1 1130 9 is_stmt 1 view .LVU1302
 4704 00f8 0422     		movs	r2, #4
 4705 00fa 08A9     		add	r1, sp, #32
 4706 00fc 48F24010 		movw	r0, #33088
 4707 0100 FFF7FEFF 		bl	GT9147_RD_Reg
 4708              	.LVL395:
1131:Core/Src/Mytouch.c ****         printf("CTP ID:%s\r\n", temp);  //打印ID
 4709              		.loc 1 1131 9 view .LVU1303
1131:Core/Src/Mytouch.c ****         printf("CTP ID:%s\r\n", temp);  //打印ID
 4710              		.loc 1 1131 16 is_stmt 0 view .LVU1304
 4711 0104 0024     		movs	r4, #0
 4712 0106 8DF82440 		strb	r4, [sp, #36]
1132:Core/Src/Mytouch.c ****         memcpy(CIP,temp, sizeof(u8)*4);
 4713              		.loc 1 1132 9 is_stmt 1 view .LVU1305
 4714 010a 08A9     		add	r1, sp, #32
 4715 010c 1448     		ldr	r0, .L257+16
 4716 010e FFF7FEFF 		bl	printf
 4717              	.LVL396:
1133:Core/Src/Mytouch.c ****         temp[0]=0X02;
 4718              		.loc 1 1133 9 view .LVU1306
 4719 0112 144B     		ldr	r3, .L257+20
 4720 0114 089A     		ldr	r2, [sp, #32]
 4721 0116 1A60     		str	r2, [r3]
1134:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1);  //软复位GT9XXX 
 4722              		.loc 1 1134 9 view .LVU1307
1134:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1);  //软复位GT9XXX 
 4723              		.loc 1 1134 16 is_stmt 0 view .LVU1308
 4724 0118 0223     		movs	r3, #2
 4725 011a 8DF82030 		strb	r3, [sp, #32]
1135:Core/Src/Mytouch.c ****         GT9147_RD_Reg(GT_CFGS_REG,temp,1);  //读取GT_CFGS_REG寄存器
 4726              		.loc 1 1135 9 is_stmt 1 view .LVU1309
 4727 011e 0122     		movs	r2, #1
 4728 0120 08A9     		add	r1, sp, #32
 4729 0122 48F24000 		movw	r0, #32832
 4730 0126 FFF7FEFF 		bl	GT9147_WR_Reg
 4731              	.LVL397:
1136:Core/Src/Mytouch.c ****         HAL_Delay(10);
 4732              		.loc 1 1136 9 view .LVU1310
 4733 012a 0122     		movs	r2, #1
 4734 012c 08A9     		add	r1, sp, #32
 4735 012e 48F24700 		movw	r0, #32839
 4736 0132 FFF7FEFF 		bl	GT9147_RD_Reg
 4737              	.LVL398:
1137:Core/Src/Mytouch.c ****         temp[0]=0X00;
 4738              		.loc 1 1137 9 view .LVU1311
 4739 0136 0A20     		movs	r0, #10
 4740 0138 FFF7FEFF 		bl	HAL_Delay
 4741              	.LVL399:
1138:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1); //结束复位, 进入读坐标状态
 4742              		.loc 1 1138 9 view .LVU1312
1138:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1); //结束复位, 进入读坐标状态
 4743              		.loc 1 1138 16 is_stmt 0 view .LVU1313
 4744 013c 8DF82040 		strb	r4, [sp, #32]
1139:Core/Src/Mytouch.c ****         res = 0;
 4745              		.loc 1 1139 9 is_stmt 1 view .LVU1314
 4746 0140 0122     		movs	r2, #1
ARM GAS  /tmp/cckdBZRC.s 			page 115


 4747 0142 08A9     		add	r1, sp, #32
 4748 0144 48F24000 		movw	r0, #32832
 4749 0148 FFF7FEFF 		bl	GT9147_WR_Reg
 4750              	.LVL400:
1140:Core/Src/Mytouch.c ****     }
 4751              		.loc 1 1140 9 view .LVU1315
1140:Core/Src/Mytouch.c ****     }
 4752              		.loc 1 1140 9 is_stmt 0 view .LVU1316
 4753 014c CCE7     		b	.L254
 4754              	.L258:
 4755 014e 00BF     		.align	2
 4756              	.L257:
 4757 0150 00440258 		.word	1476543488
 4758 0154 001C0258 		.word	1476533248
 4759 0158 00200258 		.word	1476534272
 4760 015c 00000000 		.word	.LC12
 4761 0160 00000000 		.word	.LC9
 4762 0164 00000000 		.word	.LANCHOR9
 4763              		.cfi_endproc
 4764              	.LFE181:
 4766              		.section	.text.IIC_Init,"ax",%progbits
 4767              		.align	1
 4768              		.global	IIC_Init
 4769              		.syntax unified
 4770              		.thumb
 4771              		.thumb_func
 4773              	IIC_Init:
 4774              	.LFB191:
1272:Core/Src/Mytouch.c ****  
1273:Core/Src/Mytouch.c **** 
1274:Core/Src/Mytouch.c ****  /* 24xx */
1275:Core/Src/Mytouch.c **** 
1276:Core/Src/Mytouch.c **** 
1277:Core/Src/Mytouch.c ****  //初始化IIC接口
1278:Core/Src/Mytouch.c **** void AT24CXX_Init(void)
1279:Core/Src/Mytouch.c **** {
1280:Core/Src/Mytouch.c **** 	IIC_Init();//IIC初始化
1281:Core/Src/Mytouch.c **** }
1282:Core/Src/Mytouch.c **** //在AT24CXX指定地址读出一个数据
1283:Core/Src/Mytouch.c **** //ReadAddr:开始读数的地址  
1284:Core/Src/Mytouch.c **** //返回值  :读到的数据
1285:Core/Src/Mytouch.c **** u8 AT24CXX_ReadOneByte(u16 ReadAddr)
1286:Core/Src/Mytouch.c **** {				  
1287:Core/Src/Mytouch.c **** 	u8 temp=0;		  	    																 
1288:Core/Src/Mytouch.c ****     IIC_Start();  
1289:Core/Src/Mytouch.c **** 	if(EE_TYPE>AT24C16)
1290:Core/Src/Mytouch.c **** 	{
1291:Core/Src/Mytouch.c **** 		IIC_Send_Byte(0XA0);	   //发送写命令
1292:Core/Src/Mytouch.c **** 		IIC_Wait_Ack();
1293:Core/Src/Mytouch.c **** 		IIC_Send_Byte(ReadAddr>>8);//发送高地址	    
1294:Core/Src/Mytouch.c **** 	}else IIC_Send_Byte(0XA0+((ReadAddr/256)<<1));   //发送器件地址0XA0,写数据 	   
1295:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 
1296:Core/Src/Mytouch.c ****     IIC_Send_Byte(ReadAddr%256);   //发送低地址
1297:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	    
1298:Core/Src/Mytouch.c **** 	IIC_Start();  	 	   
1299:Core/Src/Mytouch.c **** 	IIC_Send_Byte(0XA1);           //进入接收模式			   
1300:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	 
ARM GAS  /tmp/cckdBZRC.s 			page 116


1301:Core/Src/Mytouch.c ****     temp=IIC_Read_Byte(0);		   
1302:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件	    
1303:Core/Src/Mytouch.c **** 	return temp;
1304:Core/Src/Mytouch.c **** }
1305:Core/Src/Mytouch.c **** //在AT24CXX指定地址写入一个数据
1306:Core/Src/Mytouch.c **** //WriteAddr  :写入数据的目的地址    
1307:Core/Src/Mytouch.c **** //DataToWrite:要写入的数据
1308:Core/Src/Mytouch.c **** void AT24CXX_WriteOneByte(u16 WriteAddr,u8 DataToWrite)
1309:Core/Src/Mytouch.c **** {				   	  	    																 
1310:Core/Src/Mytouch.c ****     IIC_Start();  
1311:Core/Src/Mytouch.c **** 	if(EE_TYPE>AT24C16)
1312:Core/Src/Mytouch.c **** 	{
1313:Core/Src/Mytouch.c **** 		IIC_Send_Byte(0XA0);	    //发送写命令
1314:Core/Src/Mytouch.c **** 		IIC_Wait_Ack();
1315:Core/Src/Mytouch.c **** 		IIC_Send_Byte(WriteAddr>>8);//发送高地址	  
1316:Core/Src/Mytouch.c **** 	}else IIC_Send_Byte(0XA0+((WriteAddr/256)<<1));   //发送器件地址0XA0,写数据 	 
1317:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	   
1318:Core/Src/Mytouch.c ****     IIC_Send_Byte(WriteAddr%256);   //发送低地址
1319:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 	 										  		   
1320:Core/Src/Mytouch.c **** 	IIC_Send_Byte(DataToWrite);     //发送字节							   
1321:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();  		    	   
1322:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件 
1323:Core/Src/Mytouch.c **** 	HAL_Delay(10);	 
1324:Core/Src/Mytouch.c **** }
1325:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入长度为Len的数据
1326:Core/Src/Mytouch.c **** //该函数用于写入16bit或者32bit的数据.
1327:Core/Src/Mytouch.c **** //WriteAddr  :开始写入的地址  
1328:Core/Src/Mytouch.c **** //DataToWrite:数据数组首地址
1329:Core/Src/Mytouch.c **** //Len        :要写入数据的长度2,4
1330:Core/Src/Mytouch.c **** void AT24CXX_WriteLenByte(u16 WriteAddr,u32 DataToWrite,u8 Len)
1331:Core/Src/Mytouch.c **** {  	
1332:Core/Src/Mytouch.c **** 	u8 t;
1333:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
1334:Core/Src/Mytouch.c **** 	{
1335:Core/Src/Mytouch.c **** 		AT24CXX_WriteOneByte(WriteAddr+t,(DataToWrite>>(8*t))&0xff);
1336:Core/Src/Mytouch.c **** 	}												    
1337:Core/Src/Mytouch.c **** }
1338:Core/Src/Mytouch.c **** 
1339:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始读出长度为Len的数据
1340:Core/Src/Mytouch.c **** //该函数用于读出16bit或者32bit的数据.
1341:Core/Src/Mytouch.c **** //ReadAddr   :开始读出的地址 
1342:Core/Src/Mytouch.c **** //返回值     :数据
1343:Core/Src/Mytouch.c **** //Len        :要读出数据的长度2,4
1344:Core/Src/Mytouch.c **** u32 AT24CXX_ReadLenByte(u16 ReadAddr,u8 Len)
1345:Core/Src/Mytouch.c **** {  	
1346:Core/Src/Mytouch.c **** 	u8 t;
1347:Core/Src/Mytouch.c **** 	u32 temp=0;
1348:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
1349:Core/Src/Mytouch.c **** 	{
1350:Core/Src/Mytouch.c **** 		temp<<=8;
1351:Core/Src/Mytouch.c **** 		temp+=AT24CXX_ReadOneByte(ReadAddr+Len-t-1); 	 				   
1352:Core/Src/Mytouch.c **** 	}
1353:Core/Src/Mytouch.c **** 	return temp;												    
1354:Core/Src/Mytouch.c **** }
1355:Core/Src/Mytouch.c **** //检查AT24CXX是否正常
1356:Core/Src/Mytouch.c **** //这里用了24XX的最后一个地址(255)来存储标志字.
1357:Core/Src/Mytouch.c **** //如果用其他24C系列,这个地址要修改
ARM GAS  /tmp/cckdBZRC.s 			page 117


1358:Core/Src/Mytouch.c **** //返回1:检测失败
1359:Core/Src/Mytouch.c **** //返回0:检测成功
1360:Core/Src/Mytouch.c **** u8 AT24CXX_Check(void)
1361:Core/Src/Mytouch.c **** {
1362:Core/Src/Mytouch.c **** 	u8 temp;
1363:Core/Src/Mytouch.c **** 	temp=AT24CXX_ReadOneByte(255);//避免每次开机都写AT24CXX			   
1364:Core/Src/Mytouch.c **** 	if(temp==0X55)return 0;		   
1365:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
1366:Core/Src/Mytouch.c **** 	{
1367:Core/Src/Mytouch.c **** 		AT24CXX_WriteOneByte(255,0X55);
1368:Core/Src/Mytouch.c **** 	    temp=AT24CXX_ReadOneByte(255);	  
1369:Core/Src/Mytouch.c **** 		if(temp==0X55)return 0;
1370:Core/Src/Mytouch.c **** 	}
1371:Core/Src/Mytouch.c **** 	return 1;											  
1372:Core/Src/Mytouch.c **** }
1373:Core/Src/Mytouch.c **** 
1374:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始读出指定个数的数据
1375:Core/Src/Mytouch.c **** //ReadAddr :开始读出的地址 对24c02为0~255
1376:Core/Src/Mytouch.c **** //pBuffer  :数据数组首地址
1377:Core/Src/Mytouch.c **** //NumToRead:要读出数据的个数
1378:Core/Src/Mytouch.c **** void AT24CXX_Read(u16 ReadAddr,u8 *pBuffer,u16 NumToRead)
1379:Core/Src/Mytouch.c **** {
1380:Core/Src/Mytouch.c **** 	while(NumToRead)
1381:Core/Src/Mytouch.c **** 	{
1382:Core/Src/Mytouch.c **** 		*pBuffer++=AT24CXX_ReadOneByte(ReadAddr++);	
1383:Core/Src/Mytouch.c **** 		NumToRead--;
1384:Core/Src/Mytouch.c **** 	}
1385:Core/Src/Mytouch.c **** }  
1386:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入指定个数的数据
1387:Core/Src/Mytouch.c **** //WriteAddr :开始写入的地址 对24c02为0~255
1388:Core/Src/Mytouch.c **** //pBuffer   :数据数组首地址
1389:Core/Src/Mytouch.c **** //NumToWrite:要写入数据的个数
1390:Core/Src/Mytouch.c **** void AT24CXX_Write(u16 WriteAddr,u8 *pBuffer,u16 NumToWrite)
1391:Core/Src/Mytouch.c **** {
1392:Core/Src/Mytouch.c **** 	while(NumToWrite--)
1393:Core/Src/Mytouch.c **** 	{
1394:Core/Src/Mytouch.c **** 		AT24CXX_WriteOneByte(WriteAddr,*pBuffer);
1395:Core/Src/Mytouch.c **** 		WriteAddr++;
1396:Core/Src/Mytouch.c **** 		pBuffer++;
1397:Core/Src/Mytouch.c **** 	}
1398:Core/Src/Mytouch.c **** }
1399:Core/Src/Mytouch.c **** 
1400:Core/Src/Mytouch.c **** 
1401:Core/Src/Mytouch.c **** /* MyIIC */
1402:Core/Src/Mytouch.c **** 
1403:Core/Src/Mytouch.c **** 
1404:Core/Src/Mytouch.c **** //IIC初始化
1405:Core/Src/Mytouch.c **** void IIC_Init(void)
1406:Core/Src/Mytouch.c **** {
 4775              		.loc 1 1406 1 is_stmt 1 view -0
 4776              		.cfi_startproc
 4777              		@ args = 0, pretend = 0, frame = 24
 4778              		@ frame_needed = 0, uses_anonymous_args = 0
 4779 0000 30B5     		push	{r4, r5, lr}
 4780              	.LCFI63:
 4781              		.cfi_def_cfa_offset 12
 4782              		.cfi_offset 4, -12
ARM GAS  /tmp/cckdBZRC.s 			page 118


 4783              		.cfi_offset 5, -8
 4784              		.cfi_offset 14, -4
 4785 0002 87B0     		sub	sp, sp, #28
 4786              	.LCFI64:
 4787              		.cfi_def_cfa_offset 40
1407:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 4788              		.loc 1 1407 5 view .LVU1318
1408:Core/Src/Mytouch.c ****     
1409:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();   //使能GPIOH时钟
 4789              		.loc 1 1409 5 view .LVU1319
 4790              	.LBB10:
 4791              		.loc 1 1409 5 view .LVU1320
 4792              		.loc 1 1409 5 view .LVU1321
 4793 0004 124B     		ldr	r3, .L261
 4794 0006 D3F8E020 		ldr	r2, [r3, #224]
 4795 000a 42F08002 		orr	r2, r2, #128
 4796 000e C3F8E020 		str	r2, [r3, #224]
 4797              		.loc 1 1409 5 view .LVU1322
 4798 0012 D3F8E030 		ldr	r3, [r3, #224]
 4799 0016 03F08003 		and	r3, r3, #128
 4800 001a 0093     		str	r3, [sp]
 4801              		.loc 1 1409 5 view .LVU1323
 4802 001c 009B     		ldr	r3, [sp]
 4803              	.LBE10:
 4804              		.loc 1 1409 5 view .LVU1324
1410:Core/Src/Mytouch.c ****     
1411:Core/Src/Mytouch.c ****     //PH4,5初始化设置
1412:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_4|GPIO_PIN_5;
 4805              		.loc 1 1412 5 view .LVU1325
 4806              		.loc 1 1412 21 is_stmt 0 view .LVU1326
 4807 001e 3023     		movs	r3, #48
 4808 0020 0193     		str	r3, [sp, #4]
1413:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 4809              		.loc 1 1413 5 is_stmt 1 view .LVU1327
 4810              		.loc 1 1413 22 is_stmt 0 view .LVU1328
 4811 0022 0124     		movs	r4, #1
 4812 0024 0294     		str	r4, [sp, #8]
1414:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 4813              		.loc 1 1414 5 is_stmt 1 view .LVU1329
 4814              		.loc 1 1414 22 is_stmt 0 view .LVU1330
 4815 0026 0394     		str	r4, [sp, #12]
1415:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;    //快速
 4816              		.loc 1 1415 5 is_stmt 1 view .LVU1331
 4817              		.loc 1 1415 23 is_stmt 0 view .LVU1332
 4818 0028 0323     		movs	r3, #3
 4819 002a 0493     		str	r3, [sp, #16]
1416:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);
 4820              		.loc 1 1416 5 is_stmt 1 view .LVU1333
 4821 002c 094D     		ldr	r5, .L261+4
 4822 002e 01A9     		add	r1, sp, #4
 4823 0030 2846     		mov	r0, r5
 4824 0032 FFF7FEFF 		bl	HAL_GPIO_Init
 4825              	.LVL401:
1417:Core/Src/Mytouch.c ****     
1418:Core/Src/Mytouch.c ****     IIC_SDA(1);
 4826              		.loc 1 1418 5 view .LVU1334
 4827 0036 2246     		mov	r2, r4
ARM GAS  /tmp/cckdBZRC.s 			page 119


 4828 0038 2021     		movs	r1, #32
 4829 003a 2846     		mov	r0, r5
 4830 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 4831              	.LVL402:
1419:Core/Src/Mytouch.c ****     IIC_SCL(1);  
 4832              		.loc 1 1419 5 view .LVU1335
 4833 0040 2246     		mov	r2, r4
 4834 0042 1021     		movs	r1, #16
 4835 0044 2846     		mov	r0, r5
 4836 0046 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4837              	.LVL403:
1420:Core/Src/Mytouch.c **** }
 4838              		.loc 1 1420 1 is_stmt 0 view .LVU1336
 4839 004a 07B0     		add	sp, sp, #28
 4840              	.LCFI65:
 4841              		.cfi_def_cfa_offset 12
 4842              		@ sp needed
 4843 004c 30BD     		pop	{r4, r5, pc}
 4844              	.L262:
 4845 004e 00BF     		.align	2
 4846              	.L261:
 4847 0050 00440258 		.word	1476543488
 4848 0054 001C0258 		.word	1476533248
 4849              		.cfi_endproc
 4850              	.LFE191:
 4852              		.section	.text.AT24CXX_Init,"ax",%progbits
 4853              		.align	1
 4854              		.global	AT24CXX_Init
 4855              		.syntax unified
 4856              		.thumb
 4857              		.thumb_func
 4859              	AT24CXX_Init:
 4860              	.LFB183:
1279:Core/Src/Mytouch.c **** 	IIC_Init();//IIC初始化
 4861              		.loc 1 1279 1 is_stmt 1 view -0
 4862              		.cfi_startproc
 4863              		@ args = 0, pretend = 0, frame = 0
 4864              		@ frame_needed = 0, uses_anonymous_args = 0
 4865 0000 08B5     		push	{r3, lr}
 4866              	.LCFI66:
 4867              		.cfi_def_cfa_offset 8
 4868              		.cfi_offset 3, -8
 4869              		.cfi_offset 14, -4
1280:Core/Src/Mytouch.c **** }
 4870              		.loc 1 1280 2 view .LVU1338
 4871 0002 FFF7FEFF 		bl	IIC_Init
 4872              	.LVL404:
1281:Core/Src/Mytouch.c **** //在AT24CXX指定地址读出一个数据
 4873              		.loc 1 1281 1 is_stmt 0 view .LVU1339
 4874 0006 08BD     		pop	{r3, pc}
 4875              		.cfi_endproc
 4876              	.LFE183:
 4878              		.section	.text.IIC_Start,"ax",%progbits
 4879              		.align	1
 4880              		.global	IIC_Start
 4881              		.syntax unified
 4882              		.thumb
ARM GAS  /tmp/cckdBZRC.s 			page 120


 4883              		.thumb_func
 4885              	IIC_Start:
 4886              	.LFB192:
1421:Core/Src/Mytouch.c **** 
1422:Core/Src/Mytouch.c **** //产生IIC起始信号
1423:Core/Src/Mytouch.c **** void IIC_Start(void)
1424:Core/Src/Mytouch.c **** {
 4887              		.loc 1 1424 1 is_stmt 1 view -0
 4888              		.cfi_startproc
 4889              		@ args = 0, pretend = 0, frame = 0
 4890              		@ frame_needed = 0, uses_anonymous_args = 0
 4891 0000 10B5     		push	{r4, lr}
 4892              	.LCFI67:
 4893              		.cfi_def_cfa_offset 8
 4894              		.cfi_offset 4, -8
 4895              		.cfi_offset 14, -4
1425:Core/Src/Mytouch.c **** 	SDA_OUT();     //sda线输出
 4896              		.loc 1 1425 2 view .LVU1341
 4897 0002 124C     		ldr	r4, .L267
 4898 0004 2368     		ldr	r3, [r4]
 4899 0006 23F44063 		bic	r3, r3, #3072
 4900 000a 2360     		str	r3, [r4]
 4901              		.loc 1 1425 2 view .LVU1342
 4902 000c 2368     		ldr	r3, [r4]
 4903 000e 43F48063 		orr	r3, r3, #1024
 4904 0012 2360     		str	r3, [r4]
 4905              		.loc 1 1425 11 view .LVU1343
1426:Core/Src/Mytouch.c **** 	IIC_SDA(1);	  	  
 4906              		.loc 1 1426 2 view .LVU1344
 4907 0014 0122     		movs	r2, #1
 4908 0016 2021     		movs	r1, #32
 4909 0018 2046     		mov	r0, r4
 4910 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 4911              	.LVL405:
1427:Core/Src/Mytouch.c **** 	IIC_SCL(1);
 4912              		.loc 1 1427 2 view .LVU1345
 4913 001e 0122     		movs	r2, #1
 4914 0020 1021     		movs	r1, #16
 4915 0022 2046     		mov	r0, r4
 4916 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4917              	.LVL406:
1428:Core/Src/Mytouch.c **** 	delay_us(4);
 4918              		.loc 1 1428 2 view .LVU1346
 4919 0028 0420     		movs	r0, #4
 4920 002a FFF7FEFF 		bl	delay_us
 4921              	.LVL407:
1429:Core/Src/Mytouch.c ****  	IIC_SDA(0);//START:when CLK is high,DATA change form high to low 
 4922              		.loc 1 1429 3 view .LVU1347
 4923 002e 0022     		movs	r2, #0
 4924 0030 2021     		movs	r1, #32
 4925 0032 2046     		mov	r0, r4
 4926 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4927              	.LVL408:
1430:Core/Src/Mytouch.c **** 	delay_us(4);
 4928              		.loc 1 1430 2 view .LVU1348
 4929 0038 0420     		movs	r0, #4
 4930 003a FFF7FEFF 		bl	delay_us
ARM GAS  /tmp/cckdBZRC.s 			page 121


 4931              	.LVL409:
1431:Core/Src/Mytouch.c **** 	IIC_SCL(0);//钳住I2C总线，准备发送或接收数据 
 4932              		.loc 1 1431 2 view .LVU1349
 4933 003e 0022     		movs	r2, #0
 4934 0040 1021     		movs	r1, #16
 4935 0042 2046     		mov	r0, r4
 4936 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4937              	.LVL410:
1432:Core/Src/Mytouch.c **** }	  
 4938              		.loc 1 1432 1 is_stmt 0 view .LVU1350
 4939 0048 10BD     		pop	{r4, pc}
 4940              	.L268:
 4941 004a 00BF     		.align	2
 4942              	.L267:
 4943 004c 001C0258 		.word	1476533248
 4944              		.cfi_endproc
 4945              	.LFE192:
 4947              		.section	.text.IIC_Stop,"ax",%progbits
 4948              		.align	1
 4949              		.global	IIC_Stop
 4950              		.syntax unified
 4951              		.thumb
 4952              		.thumb_func
 4954              	IIC_Stop:
 4955              	.LFB193:
1433:Core/Src/Mytouch.c **** //产生IIC停止信号
1434:Core/Src/Mytouch.c **** void IIC_Stop(void)
1435:Core/Src/Mytouch.c **** {
 4956              		.loc 1 1435 1 is_stmt 1 view -0
 4957              		.cfi_startproc
 4958              		@ args = 0, pretend = 0, frame = 0
 4959              		@ frame_needed = 0, uses_anonymous_args = 0
 4960 0000 10B5     		push	{r4, lr}
 4961              	.LCFI68:
 4962              		.cfi_def_cfa_offset 8
 4963              		.cfi_offset 4, -8
 4964              		.cfi_offset 14, -4
1436:Core/Src/Mytouch.c **** 	SDA_OUT();//sda线输出
 4965              		.loc 1 1436 2 view .LVU1352
 4966 0002 124C     		ldr	r4, .L271
 4967 0004 2368     		ldr	r3, [r4]
 4968 0006 23F44063 		bic	r3, r3, #3072
 4969 000a 2360     		str	r3, [r4]
 4970              		.loc 1 1436 2 view .LVU1353
 4971 000c 2368     		ldr	r3, [r4]
 4972 000e 43F48063 		orr	r3, r3, #1024
 4973 0012 2360     		str	r3, [r4]
 4974              		.loc 1 1436 11 view .LVU1354
1437:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 4975              		.loc 1 1437 2 view .LVU1355
 4976 0014 0022     		movs	r2, #0
 4977 0016 1021     		movs	r1, #16
 4978 0018 2046     		mov	r0, r4
 4979 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 4980              	.LVL411:
1438:Core/Src/Mytouch.c **** 	IIC_SDA(0);//STOP:when CLK is high DATA change form low to high
 4981              		.loc 1 1438 2 view .LVU1356
ARM GAS  /tmp/cckdBZRC.s 			page 122


 4982 001e 0022     		movs	r2, #0
 4983 0020 2021     		movs	r1, #32
 4984 0022 2046     		mov	r0, r4
 4985 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4986              	.LVL412:
1439:Core/Src/Mytouch.c ****  	delay_us(4);
 4987              		.loc 1 1439 3 view .LVU1357
 4988 0028 0420     		movs	r0, #4
 4989 002a FFF7FEFF 		bl	delay_us
 4990              	.LVL413:
1440:Core/Src/Mytouch.c **** 	IIC_SCL(1); 
 4991              		.loc 1 1440 2 view .LVU1358
 4992 002e 0122     		movs	r2, #1
 4993 0030 1021     		movs	r1, #16
 4994 0032 2046     		mov	r0, r4
 4995 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4996              	.LVL414:
1441:Core/Src/Mytouch.c **** 	IIC_SDA(1);//发送I2C总线结束信号
 4997              		.loc 1 1441 2 view .LVU1359
 4998 0038 0122     		movs	r2, #1
 4999 003a 2021     		movs	r1, #32
 5000 003c 2046     		mov	r0, r4
 5001 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5002              	.LVL415:
1442:Core/Src/Mytouch.c **** 	delay_us(4);							   	
 5003              		.loc 1 1442 2 view .LVU1360
 5004 0042 0420     		movs	r0, #4
 5005 0044 FFF7FEFF 		bl	delay_us
 5006              	.LVL416:
1443:Core/Src/Mytouch.c **** }
 5007              		.loc 1 1443 1 is_stmt 0 view .LVU1361
 5008 0048 10BD     		pop	{r4, pc}
 5009              	.L272:
 5010 004a 00BF     		.align	2
 5011              	.L271:
 5012 004c 001C0258 		.word	1476533248
 5013              		.cfi_endproc
 5014              	.LFE193:
 5016              		.section	.text.IIC_Wait_Ack,"ax",%progbits
 5017              		.align	1
 5018              		.global	IIC_Wait_Ack
 5019              		.syntax unified
 5020              		.thumb
 5021              		.thumb_func
 5023              	IIC_Wait_Ack:
 5024              	.LFB194:
1444:Core/Src/Mytouch.c **** //等待应答信号到来
1445:Core/Src/Mytouch.c **** //返回值：1，接收应答失败
1446:Core/Src/Mytouch.c **** //        0，接收应答成功
1447:Core/Src/Mytouch.c **** u8 IIC_Wait_Ack(void)
1448:Core/Src/Mytouch.c **** {
 5025              		.loc 1 1448 1 is_stmt 1 view -0
 5026              		.cfi_startproc
 5027              		@ args = 0, pretend = 0, frame = 0
 5028              		@ frame_needed = 0, uses_anonymous_args = 0
 5029 0000 38B5     		push	{r3, r4, r5, lr}
 5030              	.LCFI69:
ARM GAS  /tmp/cckdBZRC.s 			page 123


 5031              		.cfi_def_cfa_offset 16
 5032              		.cfi_offset 3, -16
 5033              		.cfi_offset 4, -12
 5034              		.cfi_offset 5, -8
 5035              		.cfi_offset 14, -4
1449:Core/Src/Mytouch.c **** 	u8 ucErrTime=0;
 5036              		.loc 1 1449 2 view .LVU1363
 5037              	.LVL417:
1450:Core/Src/Mytouch.c **** 	SDA_IN();      //SDA设置为输入  
 5038              		.loc 1 1450 2 view .LVU1364
 5039 0002 164C     		ldr	r4, .L279
 5040 0004 2368     		ldr	r3, [r4]
 5041 0006 23F44063 		bic	r3, r3, #3072
 5042 000a 2360     		str	r3, [r4]
 5043              		.loc 1 1450 2 view .LVU1365
 5044 000c 2368     		ldr	r3, [r4]
 5045 000e 2360     		str	r3, [r4]
 5046              		.loc 1 1450 10 view .LVU1366
1451:Core/Src/Mytouch.c **** 	IIC_SDA(1);delay_us(1);	   
 5047              		.loc 1 1451 2 view .LVU1367
 5048 0010 0122     		movs	r2, #1
 5049 0012 2021     		movs	r1, #32
 5050 0014 2046     		mov	r0, r4
 5051 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5052              	.LVL418:
 5053              		.loc 1 1451 13 view .LVU1368
 5054 001a 0120     		movs	r0, #1
 5055 001c FFF7FEFF 		bl	delay_us
 5056              	.LVL419:
1452:Core/Src/Mytouch.c **** 	IIC_SCL(1);delay_us(1);	 
 5057              		.loc 1 1452 2 view .LVU1369
 5058 0020 0122     		movs	r2, #1
 5059 0022 1021     		movs	r1, #16
 5060 0024 2046     		mov	r0, r4
 5061 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5062              	.LVL420:
 5063              		.loc 1 1452 13 view .LVU1370
 5064 002a 0120     		movs	r0, #1
 5065 002c FFF7FEFF 		bl	delay_us
 5066              	.LVL421:
1453:Core/Src/Mytouch.c **** 	while(READ_SDA)
 5067              		.loc 1 1453 2 view .LVU1371
1449:Core/Src/Mytouch.c **** 	SDA_IN();      //SDA设置为输入  
 5068              		.loc 1 1449 5 is_stmt 0 view .LVU1372
 5069 0030 0024     		movs	r4, #0
 5070              	.LVL422:
 5071              	.L274:
 5072              		.loc 1 1453 7 is_stmt 1 view .LVU1373
 5073              		.loc 1 1453 8 is_stmt 0 view .LVU1374
 5074 0032 2021     		movs	r1, #32
 5075 0034 0948     		ldr	r0, .L279
 5076 0036 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 5077              	.LVL423:
 5078              		.loc 1 1453 7 view .LVU1375
 5079 003a 0546     		mov	r5, r0
 5080 003c 38B1     		cbz	r0, .L278
1454:Core/Src/Mytouch.c **** 	{
ARM GAS  /tmp/cckdBZRC.s 			page 124


1455:Core/Src/Mytouch.c **** 		ucErrTime++;
 5081              		.loc 1 1455 3 is_stmt 1 view .LVU1376
 5082              		.loc 1 1455 12 is_stmt 0 view .LVU1377
 5083 003e 0134     		adds	r4, r4, #1
 5084              	.LVL424:
 5085              		.loc 1 1455 12 view .LVU1378
 5086 0040 E4B2     		uxtb	r4, r4
 5087              	.LVL425:
1456:Core/Src/Mytouch.c **** 		if(ucErrTime>250)
 5088              		.loc 1 1456 3 is_stmt 1 view .LVU1379
 5089              		.loc 1 1456 5 is_stmt 0 view .LVU1380
 5090 0042 FA2C     		cmp	r4, #250
 5091 0044 F5D9     		bls	.L274
1457:Core/Src/Mytouch.c **** 		{
1458:Core/Src/Mytouch.c **** 			IIC_Stop();
 5092              		.loc 1 1458 4 is_stmt 1 view .LVU1381
 5093 0046 FFF7FEFF 		bl	IIC_Stop
 5094              	.LVL426:
1459:Core/Src/Mytouch.c **** 			return 1;
 5095              		.loc 1 1459 4 view .LVU1382
 5096              		.loc 1 1459 11 is_stmt 0 view .LVU1383
 5097 004a 0125     		movs	r5, #1
 5098 004c 04E0     		b	.L275
 5099              	.L278:
1460:Core/Src/Mytouch.c **** 		}
1461:Core/Src/Mytouch.c **** 	}
1462:Core/Src/Mytouch.c **** 	IIC_SCL(0);//时钟输出0 	   
 5100              		.loc 1 1462 2 is_stmt 1 view .LVU1384
 5101 004e 0022     		movs	r2, #0
 5102 0050 1021     		movs	r1, #16
 5103 0052 0248     		ldr	r0, .L279
 5104 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5105              	.LVL427:
1463:Core/Src/Mytouch.c **** 	return 0;  
 5106              		.loc 1 1463 2 view .LVU1385
 5107              	.L275:
1464:Core/Src/Mytouch.c **** } 
 5108              		.loc 1 1464 1 is_stmt 0 view .LVU1386
 5109 0058 2846     		mov	r0, r5
 5110 005a 38BD     		pop	{r3, r4, r5, pc}
 5111              	.LVL428:
 5112              	.L280:
 5113              		.loc 1 1464 1 view .LVU1387
 5114              		.align	2
 5115              	.L279:
 5116 005c 001C0258 		.word	1476533248
 5117              		.cfi_endproc
 5118              	.LFE194:
 5120              		.section	.text.IIC_Ack,"ax",%progbits
 5121              		.align	1
 5122              		.global	IIC_Ack
 5123              		.syntax unified
 5124              		.thumb
 5125              		.thumb_func
 5127              	IIC_Ack:
 5128              	.LFB195:
1465:Core/Src/Mytouch.c **** //产生ACK应答
ARM GAS  /tmp/cckdBZRC.s 			page 125


1466:Core/Src/Mytouch.c **** void IIC_Ack(void)
1467:Core/Src/Mytouch.c **** {
 5129              		.loc 1 1467 1 is_stmt 1 view -0
 5130              		.cfi_startproc
 5131              		@ args = 0, pretend = 0, frame = 0
 5132              		@ frame_needed = 0, uses_anonymous_args = 0
 5133 0000 10B5     		push	{r4, lr}
 5134              	.LCFI70:
 5135              		.cfi_def_cfa_offset 8
 5136              		.cfi_offset 4, -8
 5137              		.cfi_offset 14, -4
1468:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 5138              		.loc 1 1468 2 view .LVU1389
 5139 0002 124C     		ldr	r4, .L283
 5140 0004 0022     		movs	r2, #0
 5141 0006 1021     		movs	r1, #16
 5142 0008 2046     		mov	r0, r4
 5143 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 5144              	.LVL429:
1469:Core/Src/Mytouch.c **** 	SDA_OUT();
 5145              		.loc 1 1469 2 view .LVU1390
 5146 000e 2368     		ldr	r3, [r4]
 5147 0010 23F44063 		bic	r3, r3, #3072
 5148 0014 2360     		str	r3, [r4]
 5149              		.loc 1 1469 2 view .LVU1391
 5150 0016 2368     		ldr	r3, [r4]
 5151 0018 43F48063 		orr	r3, r3, #1024
 5152 001c 2360     		str	r3, [r4]
 5153              		.loc 1 1469 11 view .LVU1392
1470:Core/Src/Mytouch.c **** 	IIC_SDA(0);
 5154              		.loc 1 1470 2 view .LVU1393
 5155 001e 0022     		movs	r2, #0
 5156 0020 2021     		movs	r1, #32
 5157 0022 2046     		mov	r0, r4
 5158 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5159              	.LVL430:
1471:Core/Src/Mytouch.c **** 	delay_us(2);
 5160              		.loc 1 1471 2 view .LVU1394
 5161 0028 0220     		movs	r0, #2
 5162 002a FFF7FEFF 		bl	delay_us
 5163              	.LVL431:
1472:Core/Src/Mytouch.c **** 	IIC_SCL(1);
 5164              		.loc 1 1472 2 view .LVU1395
 5165 002e 0122     		movs	r2, #1
 5166 0030 1021     		movs	r1, #16
 5167 0032 2046     		mov	r0, r4
 5168 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5169              	.LVL432:
1473:Core/Src/Mytouch.c **** 	delay_us(2);
 5170              		.loc 1 1473 2 view .LVU1396
 5171 0038 0220     		movs	r0, #2
 5172 003a FFF7FEFF 		bl	delay_us
 5173              	.LVL433:
1474:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 5174              		.loc 1 1474 2 view .LVU1397
 5175 003e 0022     		movs	r2, #0
 5176 0040 1021     		movs	r1, #16
ARM GAS  /tmp/cckdBZRC.s 			page 126


 5177 0042 2046     		mov	r0, r4
 5178 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5179              	.LVL434:
1475:Core/Src/Mytouch.c **** }
 5180              		.loc 1 1475 1 is_stmt 0 view .LVU1398
 5181 0048 10BD     		pop	{r4, pc}
 5182              	.L284:
 5183 004a 00BF     		.align	2
 5184              	.L283:
 5185 004c 001C0258 		.word	1476533248
 5186              		.cfi_endproc
 5187              	.LFE195:
 5189              		.section	.text.IIC_NAck,"ax",%progbits
 5190              		.align	1
 5191              		.global	IIC_NAck
 5192              		.syntax unified
 5193              		.thumb
 5194              		.thumb_func
 5196              	IIC_NAck:
 5197              	.LFB196:
1476:Core/Src/Mytouch.c **** //不产生ACK应答		    
1477:Core/Src/Mytouch.c **** void IIC_NAck(void)
1478:Core/Src/Mytouch.c **** {
 5198              		.loc 1 1478 1 is_stmt 1 view -0
 5199              		.cfi_startproc
 5200              		@ args = 0, pretend = 0, frame = 0
 5201              		@ frame_needed = 0, uses_anonymous_args = 0
 5202 0000 10B5     		push	{r4, lr}
 5203              	.LCFI71:
 5204              		.cfi_def_cfa_offset 8
 5205              		.cfi_offset 4, -8
 5206              		.cfi_offset 14, -4
1479:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 5207              		.loc 1 1479 2 view .LVU1400
 5208 0002 124C     		ldr	r4, .L287
 5209 0004 0022     		movs	r2, #0
 5210 0006 1021     		movs	r1, #16
 5211 0008 2046     		mov	r0, r4
 5212 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 5213              	.LVL435:
1480:Core/Src/Mytouch.c **** 	SDA_OUT();
 5214              		.loc 1 1480 2 view .LVU1401
 5215 000e 2368     		ldr	r3, [r4]
 5216 0010 23F44063 		bic	r3, r3, #3072
 5217 0014 2360     		str	r3, [r4]
 5218              		.loc 1 1480 2 view .LVU1402
 5219 0016 2368     		ldr	r3, [r4]
 5220 0018 43F48063 		orr	r3, r3, #1024
 5221 001c 2360     		str	r3, [r4]
 5222              		.loc 1 1480 11 view .LVU1403
1481:Core/Src/Mytouch.c **** 	IIC_SDA(1);
 5223              		.loc 1 1481 2 view .LVU1404
 5224 001e 0122     		movs	r2, #1
 5225 0020 2021     		movs	r1, #32
 5226 0022 2046     		mov	r0, r4
 5227 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5228              	.LVL436:
ARM GAS  /tmp/cckdBZRC.s 			page 127


1482:Core/Src/Mytouch.c **** 	delay_us(2);
 5229              		.loc 1 1482 2 view .LVU1405
 5230 0028 0220     		movs	r0, #2
 5231 002a FFF7FEFF 		bl	delay_us
 5232              	.LVL437:
1483:Core/Src/Mytouch.c **** 	IIC_SCL(1);
 5233              		.loc 1 1483 2 view .LVU1406
 5234 002e 0122     		movs	r2, #1
 5235 0030 1021     		movs	r1, #16
 5236 0032 2046     		mov	r0, r4
 5237 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5238              	.LVL438:
1484:Core/Src/Mytouch.c **** 	delay_us(2);
 5239              		.loc 1 1484 2 view .LVU1407
 5240 0038 0220     		movs	r0, #2
 5241 003a FFF7FEFF 		bl	delay_us
 5242              	.LVL439:
1485:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 5243              		.loc 1 1485 2 view .LVU1408
 5244 003e 0022     		movs	r2, #0
 5245 0040 1021     		movs	r1, #16
 5246 0042 2046     		mov	r0, r4
 5247 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5248              	.LVL440:
1486:Core/Src/Mytouch.c **** }					 				     
 5249              		.loc 1 1486 1 is_stmt 0 view .LVU1409
 5250 0048 10BD     		pop	{r4, pc}
 5251              	.L288:
 5252 004a 00BF     		.align	2
 5253              	.L287:
 5254 004c 001C0258 		.word	1476533248
 5255              		.cfi_endproc
 5256              	.LFE196:
 5258              		.section	.text.IIC_Send_Byte,"ax",%progbits
 5259              		.align	1
 5260              		.global	IIC_Send_Byte
 5261              		.syntax unified
 5262              		.thumb
 5263              		.thumb_func
 5265              	IIC_Send_Byte:
 5266              	.LVL441:
 5267              	.LFB197:
1487:Core/Src/Mytouch.c **** //IIC发送一个字节
1488:Core/Src/Mytouch.c **** //返回从机有无应答
1489:Core/Src/Mytouch.c **** //1，有应答
1490:Core/Src/Mytouch.c **** //0，无应答			  
1491:Core/Src/Mytouch.c **** void IIC_Send_Byte(u8 txd)
1492:Core/Src/Mytouch.c **** {                        
 5268              		.loc 1 1492 1 is_stmt 1 view -0
 5269              		.cfi_startproc
 5270              		@ args = 0, pretend = 0, frame = 0
 5271              		@ frame_needed = 0, uses_anonymous_args = 0
 5272              		.loc 1 1492 1 is_stmt 0 view .LVU1411
 5273 0000 70B5     		push	{r4, r5, r6, lr}
 5274              	.LCFI72:
 5275              		.cfi_def_cfa_offset 16
 5276              		.cfi_offset 4, -16
ARM GAS  /tmp/cckdBZRC.s 			page 128


 5277              		.cfi_offset 5, -12
 5278              		.cfi_offset 6, -8
 5279              		.cfi_offset 14, -4
 5280 0002 0446     		mov	r4, r0
1493:Core/Src/Mytouch.c ****     u8 t;   
 5281              		.loc 1 1493 5 is_stmt 1 view .LVU1412
1494:Core/Src/Mytouch.c **** 	SDA_OUT(); 	    
 5282              		.loc 1 1494 2 view .LVU1413
 5283 0004 1B48     		ldr	r0, .L296
 5284              	.LVL442:
 5285              		.loc 1 1494 2 is_stmt 0 view .LVU1414
 5286 0006 0368     		ldr	r3, [r0]
 5287 0008 23F44063 		bic	r3, r3, #3072
 5288 000c 0360     		str	r3, [r0]
 5289              		.loc 1 1494 2 is_stmt 1 view .LVU1415
 5290 000e 0368     		ldr	r3, [r0]
 5291 0010 43F48063 		orr	r3, r3, #1024
 5292 0014 0360     		str	r3, [r0]
 5293              		.loc 1 1494 11 view .LVU1416
1495:Core/Src/Mytouch.c ****     IIC_SCL(0);//拉低时钟开始数据传输
 5294              		.loc 1 1495 5 view .LVU1417
 5295 0016 0022     		movs	r2, #0
 5296 0018 1021     		movs	r1, #16
 5297 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 5298              	.LVL443:
1496:Core/Src/Mytouch.c ****     for(t=0;t<8;t++)
 5299              		.loc 1 1496 5 view .LVU1418
 5300              		.loc 1 1496 10 is_stmt 0 view .LVU1419
 5301 001e 0025     		movs	r5, #0
 5302              		.loc 1 1496 5 view .LVU1420
 5303 0020 1CE0     		b	.L290
 5304              	.LVL444:
 5305              	.L291:
1497:Core/Src/Mytouch.c ****     {              
1498:Core/Src/Mytouch.c ****         IIC_SDA((txd&0x80)>>7);
 5306              		.loc 1 1498 9 discriminator 2 view .LVU1421
 5307 0022 0022     		movs	r2, #0
 5308 0024 2021     		movs	r1, #32
 5309 0026 1348     		ldr	r0, .L296
 5310 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5311              	.LVL445:
 5312              	.L292:
1499:Core/Src/Mytouch.c ****         txd<<=1; 	  
 5313              		.loc 1 1499 9 is_stmt 1 discriminator 2 view .LVU1422
 5314              		.loc 1 1499 12 is_stmt 0 discriminator 2 view .LVU1423
 5315 002c 6400     		lsls	r4, r4, #1
 5316              	.LVL446:
 5317              		.loc 1 1499 12 discriminator 2 view .LVU1424
 5318 002e E4B2     		uxtb	r4, r4
 5319              	.LVL447:
1500:Core/Src/Mytouch.c **** 		delay_us(2);   //对TEA5767这三个延时都是必须的
 5320              		.loc 1 1500 3 is_stmt 1 discriminator 2 view .LVU1425
 5321 0030 0220     		movs	r0, #2
 5322 0032 FFF7FEFF 		bl	delay_us
 5323              	.LVL448:
1501:Core/Src/Mytouch.c **** 		IIC_SCL(1);
 5324              		.loc 1 1501 3 discriminator 2 view .LVU1426
ARM GAS  /tmp/cckdBZRC.s 			page 129


 5325 0036 0F4E     		ldr	r6, .L296
 5326 0038 0122     		movs	r2, #1
 5327 003a 1021     		movs	r1, #16
 5328 003c 3046     		mov	r0, r6
 5329 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5330              	.LVL449:
1502:Core/Src/Mytouch.c **** 		delay_us(2); 
 5331              		.loc 1 1502 3 discriminator 2 view .LVU1427
 5332 0042 0220     		movs	r0, #2
 5333 0044 FFF7FEFF 		bl	delay_us
 5334              	.LVL450:
1503:Core/Src/Mytouch.c **** 		IIC_SCL(0);	
 5335              		.loc 1 1503 3 discriminator 2 view .LVU1428
 5336 0048 0022     		movs	r2, #0
 5337 004a 1021     		movs	r1, #16
 5338 004c 3046     		mov	r0, r6
 5339 004e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5340              	.LVL451:
1504:Core/Src/Mytouch.c **** 		delay_us(2);
 5341              		.loc 1 1504 3 discriminator 2 view .LVU1429
 5342 0052 0220     		movs	r0, #2
 5343 0054 FFF7FEFF 		bl	delay_us
 5344              	.LVL452:
1496:Core/Src/Mytouch.c ****     {              
 5345              		.loc 1 1496 17 discriminator 2 view .LVU1430
1496:Core/Src/Mytouch.c ****     {              
 5346              		.loc 1 1496 18 is_stmt 0 discriminator 2 view .LVU1431
 5347 0058 0135     		adds	r5, r5, #1
 5348              	.LVL453:
1496:Core/Src/Mytouch.c ****     {              
 5349              		.loc 1 1496 18 discriminator 2 view .LVU1432
 5350 005a EDB2     		uxtb	r5, r5
 5351              	.LVL454:
 5352              	.L290:
1496:Core/Src/Mytouch.c ****     {              
 5353              		.loc 1 1496 13 is_stmt 1 discriminator 1 view .LVU1433
1496:Core/Src/Mytouch.c ****     {              
 5354              		.loc 1 1496 5 is_stmt 0 discriminator 1 view .LVU1434
 5355 005c 072D     		cmp	r5, #7
 5356 005e 08D8     		bhi	.L295
1498:Core/Src/Mytouch.c ****         txd<<=1; 	  
 5357              		.loc 1 1498 9 is_stmt 1 view .LVU1435
 5358 0060 14F0800F 		tst	r4, #128
 5359 0064 DDD0     		beq	.L291
1498:Core/Src/Mytouch.c ****         txd<<=1; 	  
 5360              		.loc 1 1498 9 is_stmt 0 discriminator 1 view .LVU1436
 5361 0066 0122     		movs	r2, #1
 5362 0068 2021     		movs	r1, #32
 5363 006a 0248     		ldr	r0, .L296
 5364 006c FFF7FEFF 		bl	HAL_GPIO_WritePin
 5365              	.LVL455:
 5366 0070 DCE7     		b	.L292
 5367              	.L295:
1505:Core/Src/Mytouch.c ****     }	 
1506:Core/Src/Mytouch.c **** } 	    
 5368              		.loc 1 1506 1 view .LVU1437
 5369 0072 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  /tmp/cckdBZRC.s 			page 130


 5370              	.LVL456:
 5371              	.L297:
 5372              		.loc 1 1506 1 view .LVU1438
 5373              		.align	2
 5374              	.L296:
 5375 0074 001C0258 		.word	1476533248
 5376              		.cfi_endproc
 5377              	.LFE197:
 5379              		.section	.text.AT24CXX_WriteOneByte,"ax",%progbits
 5380              		.align	1
 5381              		.global	AT24CXX_WriteOneByte
 5382              		.syntax unified
 5383              		.thumb
 5384              		.thumb_func
 5386              	AT24CXX_WriteOneByte:
 5387              	.LVL457:
 5388              	.LFB185:
1309:Core/Src/Mytouch.c ****     IIC_Start();  
 5389              		.loc 1 1309 1 is_stmt 1 view -0
 5390              		.cfi_startproc
 5391              		@ args = 0, pretend = 0, frame = 0
 5392              		@ frame_needed = 0, uses_anonymous_args = 0
1309:Core/Src/Mytouch.c ****     IIC_Start();  
 5393              		.loc 1 1309 1 is_stmt 0 view .LVU1440
 5394 0000 38B5     		push	{r3, r4, r5, lr}
 5395              	.LCFI73:
 5396              		.cfi_def_cfa_offset 16
 5397              		.cfi_offset 3, -16
 5398              		.cfi_offset 4, -12
 5399              		.cfi_offset 5, -8
 5400              		.cfi_offset 14, -4
 5401 0002 0446     		mov	r4, r0
 5402 0004 0D46     		mov	r5, r1
1310:Core/Src/Mytouch.c **** 	if(EE_TYPE>AT24C16)
 5403              		.loc 1 1310 5 is_stmt 1 view .LVU1441
 5404 0006 FFF7FEFF 		bl	IIC_Start
 5405              	.LVL458:
1311:Core/Src/Mytouch.c **** 	{
 5406              		.loc 1 1311 2 view .LVU1442
1316:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	   
 5407              		.loc 1 1316 8 view .LVU1443
1316:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	   
 5408              		.loc 1 1316 43 is_stmt 0 view .LVU1444
 5409 000a 230A     		lsrs	r3, r4, #8
 5410 000c 5B00     		lsls	r3, r3, #1
 5411 000e DBB2     		uxtb	r3, r3
1316:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	   
 5412              		.loc 1 1316 8 view .LVU1445
 5413 0010 603B     		subs	r3, r3, #96
 5414 0012 03F0FE00 		and	r0, r3, #254
 5415 0016 FFF7FEFF 		bl	IIC_Send_Byte
 5416              	.LVL459:
1317:Core/Src/Mytouch.c ****     IIC_Send_Byte(WriteAddr%256);   //发送低地址
 5417              		.loc 1 1317 2 is_stmt 1 view .LVU1446
 5418 001a FFF7FEFF 		bl	IIC_Wait_Ack
 5419              	.LVL460:
1318:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 	 										  		   
ARM GAS  /tmp/cckdBZRC.s 			page 131


 5420              		.loc 1 1318 5 view .LVU1447
 5421 001e E0B2     		uxtb	r0, r4
 5422 0020 FFF7FEFF 		bl	IIC_Send_Byte
 5423              	.LVL461:
1319:Core/Src/Mytouch.c **** 	IIC_Send_Byte(DataToWrite);     //发送字节							   
 5424              		.loc 1 1319 2 view .LVU1448
 5425 0024 FFF7FEFF 		bl	IIC_Wait_Ack
 5426              	.LVL462:
1320:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();  		    	   
 5427              		.loc 1 1320 2 view .LVU1449
 5428 0028 2846     		mov	r0, r5
 5429 002a FFF7FEFF 		bl	IIC_Send_Byte
 5430              	.LVL463:
1321:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件 
 5431              		.loc 1 1321 2 view .LVU1450
 5432 002e FFF7FEFF 		bl	IIC_Wait_Ack
 5433              	.LVL464:
1322:Core/Src/Mytouch.c **** 	HAL_Delay(10);	 
 5434              		.loc 1 1322 5 view .LVU1451
 5435 0032 FFF7FEFF 		bl	IIC_Stop
 5436              	.LVL465:
1323:Core/Src/Mytouch.c **** }
 5437              		.loc 1 1323 2 view .LVU1452
 5438 0036 0A20     		movs	r0, #10
 5439 0038 FFF7FEFF 		bl	HAL_Delay
 5440              	.LVL466:
1324:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入长度为Len的数据
 5441              		.loc 1 1324 1 is_stmt 0 view .LVU1453
 5442 003c 38BD     		pop	{r3, r4, r5, pc}
 5443              		.cfi_endproc
 5444              	.LFE185:
 5446              		.section	.text.AT24CXX_WriteLenByte,"ax",%progbits
 5447              		.align	1
 5448              		.global	AT24CXX_WriteLenByte
 5449              		.syntax unified
 5450              		.thumb
 5451              		.thumb_func
 5453              	AT24CXX_WriteLenByte:
 5454              	.LVL467:
 5455              	.LFB186:
1331:Core/Src/Mytouch.c **** 	u8 t;
 5456              		.loc 1 1331 1 is_stmt 1 view -0
 5457              		.cfi_startproc
 5458              		@ args = 0, pretend = 0, frame = 0
 5459              		@ frame_needed = 0, uses_anonymous_args = 0
1331:Core/Src/Mytouch.c **** 	u8 t;
 5460              		.loc 1 1331 1 is_stmt 0 view .LVU1455
 5461 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 5462              	.LCFI74:
 5463              		.cfi_def_cfa_offset 24
 5464              		.cfi_offset 3, -24
 5465              		.cfi_offset 4, -20
 5466              		.cfi_offset 5, -16
 5467              		.cfi_offset 6, -12
 5468              		.cfi_offset 7, -8
 5469              		.cfi_offset 14, -4
 5470 0002 0746     		mov	r7, r0
ARM GAS  /tmp/cckdBZRC.s 			page 132


 5471 0004 0E46     		mov	r6, r1
 5472 0006 1546     		mov	r5, r2
1332:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
 5473              		.loc 1 1332 2 is_stmt 1 view .LVU1456
1333:Core/Src/Mytouch.c **** 	{
 5474              		.loc 1 1333 2 view .LVU1457
 5475              	.LVL468:
1333:Core/Src/Mytouch.c **** 	{
 5476              		.loc 1 1333 7 is_stmt 0 view .LVU1458
 5477 0008 0024     		movs	r4, #0
1333:Core/Src/Mytouch.c **** 	{
 5478              		.loc 1 1333 2 view .LVU1459
 5479 000a 09E0     		b	.L301
 5480              	.LVL469:
 5481              	.L302:
1335:Core/Src/Mytouch.c **** 	}												    
 5482              		.loc 1 1335 3 is_stmt 1 discriminator 3 view .LVU1460
1335:Core/Src/Mytouch.c **** 	}												    
 5483              		.loc 1 1335 52 is_stmt 0 discriminator 3 view .LVU1461
 5484 000c E100     		lsls	r1, r4, #3
1335:Core/Src/Mytouch.c **** 	}												    
 5485              		.loc 1 1335 48 discriminator 3 view .LVU1462
 5486 000e 26FA01F1 		lsr	r1, r6, r1
1335:Core/Src/Mytouch.c **** 	}												    
 5487              		.loc 1 1335 3 discriminator 3 view .LVU1463
 5488 0012 3819     		adds	r0, r7, r4
 5489 0014 C9B2     		uxtb	r1, r1
 5490 0016 80B2     		uxth	r0, r0
 5491 0018 FFF7FEFF 		bl	AT24CXX_WriteOneByte
 5492              	.LVL470:
1333:Core/Src/Mytouch.c **** 	{
 5493              		.loc 1 1333 16 is_stmt 1 discriminator 3 view .LVU1464
1333:Core/Src/Mytouch.c **** 	{
 5494              		.loc 1 1333 17 is_stmt 0 discriminator 3 view .LVU1465
 5495 001c 0134     		adds	r4, r4, #1
 5496              	.LVL471:
1333:Core/Src/Mytouch.c **** 	{
 5497              		.loc 1 1333 17 discriminator 3 view .LVU1466
 5498 001e E4B2     		uxtb	r4, r4
 5499              	.LVL472:
 5500              	.L301:
1333:Core/Src/Mytouch.c **** 	{
 5501              		.loc 1 1333 10 is_stmt 1 discriminator 1 view .LVU1467
1333:Core/Src/Mytouch.c **** 	{
 5502              		.loc 1 1333 2 is_stmt 0 discriminator 1 view .LVU1468
 5503 0020 AC42     		cmp	r4, r5
 5504 0022 F3D3     		bcc	.L302
1337:Core/Src/Mytouch.c **** 
 5505              		.loc 1 1337 1 view .LVU1469
 5506 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
1337:Core/Src/Mytouch.c **** 
 5507              		.loc 1 1337 1 view .LVU1470
 5508              		.cfi_endproc
 5509              	.LFE186:
 5511              		.section	.text.TP_Save_Adjdata,"ax",%progbits
 5512              		.align	1
 5513              		.global	TP_Save_Adjdata
ARM GAS  /tmp/cckdBZRC.s 			page 133


 5514              		.syntax unified
 5515              		.thumb
 5516              		.thumb_func
 5518              	TP_Save_Adjdata:
 5519              	.LFB155:
 210:Core/Src/Mytouch.c **** 	int temp;			 
 5520              		.loc 1 210 1 is_stmt 1 view -0
 5521              		.cfi_startproc
 5522              		@ args = 0, pretend = 0, frame = 0
 5523              		@ frame_needed = 0, uses_anonymous_args = 0
 5524 0000 10B5     		push	{r4, lr}
 5525              	.LCFI75:
 5526              		.cfi_def_cfa_offset 8
 5527              		.cfi_offset 4, -8
 5528              		.cfi_offset 14, -4
 5529 0002 2DED028B 		vpush.64	{d8}
 5530              	.LCFI76:
 5531              		.cfi_def_cfa_offset 16
 5532              		.cfi_offset 80, -16
 5533              		.cfi_offset 81, -12
 211:Core/Src/Mytouch.c **** 	//保存校正结果!		   							  
 5534              		.loc 1 211 2 view .LVU1472
 213:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE,temp,4);   
 5535              		.loc 1 213 2 view .LVU1473
 213:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE,temp,4);   
 5536              		.loc 1 213 13 is_stmt 0 view .LVU1474
 5537 0006 194C     		ldr	r4, .L306
 5538 0008 D4ED097A 		vldr.32	s15, [r4, #36]
 213:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE,temp,4);   
 5539              		.loc 1 213 18 view .LVU1475
 5540 000c 9FED188A 		vldr.32	s16, .L306+4
 5541 0010 67EE887A 		vmul.f32	s15, s15, s16
 5542              	.LVL473:
 214:Core/Src/Mytouch.c **** 	temp=tp_dev.yfac*100000000;//保存y校正因素    
 5543              		.loc 1 214 5 is_stmt 1 view .LVU1476
 5544 0014 0422     		movs	r2, #4
 5545 0016 FDEEE77A 		vcvt.s32.f32	s15, s15
 5546              	.LVL474:
 214:Core/Src/Mytouch.c **** 	temp=tp_dev.yfac*100000000;//保存y校正因素    
 5547              		.loc 1 214 5 is_stmt 0 view .LVU1477
 5548 001a 17EE901A 		vmov	r1, s15	@ int
 5549 001e 2820     		movs	r0, #40
 5550 0020 FFF7FEFF 		bl	AT24CXX_WriteLenByte
 5551              	.LVL475:
 215:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+4,temp,4);
 5552              		.loc 1 215 2 is_stmt 1 view .LVU1478
 215:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+4,temp,4);
 5553              		.loc 1 215 13 is_stmt 0 view .LVU1479
 5554 0024 D4ED0A7A 		vldr.32	s15, [r4, #40]
 215:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+4,temp,4);
 5555              		.loc 1 215 18 view .LVU1480
 5556 0028 67EE887A 		vmul.f32	s15, s15, s16
 5557              	.LVL476:
 216:Core/Src/Mytouch.c **** 	//保存x偏移量
 5558              		.loc 1 216 5 is_stmt 1 view .LVU1481
 5559 002c 0422     		movs	r2, #4
 5560 002e FDEEE77A 		vcvt.s32.f32	s15, s15
ARM GAS  /tmp/cckdBZRC.s 			page 134


 5561              	.LVL477:
 216:Core/Src/Mytouch.c **** 	//保存x偏移量
 5562              		.loc 1 216 5 is_stmt 0 view .LVU1482
 5563 0032 17EE901A 		vmov	r1, s15	@ int
 5564 0036 2C20     		movs	r0, #44
 5565 0038 FFF7FEFF 		bl	AT24CXX_WriteLenByte
 5566              	.LVL478:
 218:Core/Src/Mytouch.c **** 	//保存y偏移量
 5567              		.loc 1 218 5 is_stmt 1 view .LVU1483
 5568 003c 0222     		movs	r2, #2
 5569 003e B4F92C10 		ldrsh	r1, [r4, #44]
 5570 0042 3020     		movs	r0, #48
 5571 0044 FFF7FEFF 		bl	AT24CXX_WriteLenByte
 5572              	.LVL479:
 220:Core/Src/Mytouch.c **** 	//保存触屏类型
 5573              		.loc 1 220 2 view .LVU1484
 5574 0048 0222     		movs	r2, #2
 5575 004a B4F92E10 		ldrsh	r1, [r4, #46]
 5576 004e 3220     		movs	r0, #50
 5577 0050 FFF7FEFF 		bl	AT24CXX_WriteLenByte
 5578              	.LVL480:
 222:Core/Src/Mytouch.c **** 	temp=0X0A;//标记校准过了
 5579              		.loc 1 222 2 view .LVU1485
 5580 0054 94F83010 		ldrb	r1, [r4, #48]	@ zero_extendqisi2
 5581 0058 3420     		movs	r0, #52
 5582 005a FFF7FEFF 		bl	AT24CXX_WriteOneByte
 5583              	.LVL481:
 223:Core/Src/Mytouch.c **** 	AT24CXX_WriteOneByte(SAVE_ADDR_BASE+13,temp); 
 5584              		.loc 1 223 2 view .LVU1486
 224:Core/Src/Mytouch.c **** }
 5585              		.loc 1 224 2 view .LVU1487
 5586 005e 0A21     		movs	r1, #10
 5587 0060 3520     		movs	r0, #53
 5588 0062 FFF7FEFF 		bl	AT24CXX_WriteOneByte
 5589              	.LVL482:
 225:Core/Src/Mytouch.c **** //得到保存在EEPROM里面的校准值
 5590              		.loc 1 225 1 is_stmt 0 view .LVU1488
 5591 0066 BDEC028B 		vldm	sp!, {d8}
 5592              	.LCFI77:
 5593              		.cfi_restore 80
 5594              		.cfi_restore 81
 5595              		.cfi_def_cfa_offset 8
 5596 006a 10BD     		pop	{r4, pc}
 5597              	.L307:
 5598              		.align	2
 5599              	.L306:
 5600 006c 00000000 		.word	.LANCHOR2
 5601 0070 20BCBE4C 		.word	1287568416
 5602              		.cfi_endproc
 5603              	.LFE155:
 5605              		.section	.text.AT24CXX_Write,"ax",%progbits
 5606              		.align	1
 5607              		.global	AT24CXX_Write
 5608              		.syntax unified
 5609              		.thumb
 5610              		.thumb_func
 5612              	AT24CXX_Write:
ARM GAS  /tmp/cckdBZRC.s 			page 135


 5613              	.LVL483:
 5614              	.LFB190:
1391:Core/Src/Mytouch.c **** 	while(NumToWrite--)
 5615              		.loc 1 1391 1 is_stmt 1 view -0
 5616              		.cfi_startproc
 5617              		@ args = 0, pretend = 0, frame = 0
 5618              		@ frame_needed = 0, uses_anonymous_args = 0
1391:Core/Src/Mytouch.c **** 	while(NumToWrite--)
 5619              		.loc 1 1391 1 is_stmt 0 view .LVU1490
 5620 0000 70B5     		push	{r4, r5, r6, lr}
 5621              	.LCFI78:
 5622              		.cfi_def_cfa_offset 16
 5623              		.cfi_offset 4, -16
 5624              		.cfi_offset 5, -12
 5625              		.cfi_offset 6, -8
 5626              		.cfi_offset 14, -4
 5627 0002 0446     		mov	r4, r0
 5628 0004 0E46     		mov	r6, r1
1392:Core/Src/Mytouch.c **** 	{
 5629              		.loc 1 1392 2 is_stmt 1 view .LVU1491
1392:Core/Src/Mytouch.c **** 	{
 5630              		.loc 1 1392 7 is_stmt 0 view .LVU1492
 5631 0006 07E0     		b	.L309
 5632              	.LVL484:
 5633              	.L310:
1394:Core/Src/Mytouch.c **** 		WriteAddr++;
 5634              		.loc 1 1394 3 is_stmt 1 view .LVU1493
 5635 0008 16F8011B 		ldrb	r1, [r6], #1	@ zero_extendqisi2
 5636              	.LVL485:
1394:Core/Src/Mytouch.c **** 		WriteAddr++;
 5637              		.loc 1 1394 3 is_stmt 0 view .LVU1494
 5638 000c 2046     		mov	r0, r4
 5639 000e FFF7FEFF 		bl	AT24CXX_WriteOneByte
 5640              	.LVL486:
1395:Core/Src/Mytouch.c **** 		pBuffer++;
 5641              		.loc 1 1395 3 is_stmt 1 view .LVU1495
1395:Core/Src/Mytouch.c **** 		pBuffer++;
 5642              		.loc 1 1395 12 is_stmt 0 view .LVU1496
 5643 0012 0134     		adds	r4, r4, #1
 5644              	.LVL487:
1395:Core/Src/Mytouch.c **** 		pBuffer++;
 5645              		.loc 1 1395 12 view .LVU1497
 5646 0014 A4B2     		uxth	r4, r4
 5647              	.LVL488:
1396:Core/Src/Mytouch.c **** 	}
 5648              		.loc 1 1396 3 is_stmt 1 view .LVU1498
1392:Core/Src/Mytouch.c **** 	{
 5649              		.loc 1 1392 18 is_stmt 0 view .LVU1499
 5650 0016 2A46     		mov	r2, r5
 5651              	.LVL489:
 5652              	.L309:
1392:Core/Src/Mytouch.c **** 	{
 5653              		.loc 1 1392 7 is_stmt 1 view .LVU1500
1392:Core/Src/Mytouch.c **** 	{
 5654              		.loc 1 1392 18 is_stmt 0 view .LVU1501
 5655 0018 531E     		subs	r3, r2, #1
 5656 001a 9DB2     		uxth	r5, r3
ARM GAS  /tmp/cckdBZRC.s 			page 136


 5657              	.LVL490:
1392:Core/Src/Mytouch.c **** 	{
 5658              		.loc 1 1392 7 view .LVU1502
 5659 001c 002A     		cmp	r2, #0
 5660 001e F3D1     		bne	.L310
1398:Core/Src/Mytouch.c **** 
 5661              		.loc 1 1398 1 view .LVU1503
 5662 0020 70BD     		pop	{r4, r5, r6, pc}
1398:Core/Src/Mytouch.c **** 
 5663              		.loc 1 1398 1 view .LVU1504
 5664              		.cfi_endproc
 5665              	.LFE190:
 5667              		.section	.text.IIC_Read_Byte,"ax",%progbits
 5668              		.align	1
 5669              		.global	IIC_Read_Byte
 5670              		.syntax unified
 5671              		.thumb
 5672              		.thumb_func
 5674              	IIC_Read_Byte:
 5675              	.LVL491:
 5676              	.LFB198:
1507:Core/Src/Mytouch.c **** //读1个字节，ack=1时，发送ACK，ack=0，发送nACK   
1508:Core/Src/Mytouch.c **** u8 IIC_Read_Byte(unsigned char ack)
1509:Core/Src/Mytouch.c **** {
 5677              		.loc 1 1509 1 is_stmt 1 view -0
 5678              		.cfi_startproc
 5679              		@ args = 0, pretend = 0, frame = 0
 5680              		@ frame_needed = 0, uses_anonymous_args = 0
 5681              		.loc 1 1509 1 is_stmt 0 view .LVU1506
 5682 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 5683              	.LCFI79:
 5684              		.cfi_def_cfa_offset 24
 5685              		.cfi_offset 3, -24
 5686              		.cfi_offset 4, -20
 5687              		.cfi_offset 5, -16
 5688              		.cfi_offset 6, -12
 5689              		.cfi_offset 7, -8
 5690              		.cfi_offset 14, -4
 5691 0002 0746     		mov	r7, r0
1510:Core/Src/Mytouch.c **** 	unsigned char i,receive=0;
 5692              		.loc 1 1510 2 is_stmt 1 view .LVU1507
 5693              	.LVL492:
1511:Core/Src/Mytouch.c **** 	SDA_IN();//SDA设置为输入
 5694              		.loc 1 1511 2 view .LVU1508
 5695 0004 184B     		ldr	r3, .L320
 5696 0006 1A68     		ldr	r2, [r3]
 5697 0008 22F44062 		bic	r2, r2, #3072
 5698 000c 1A60     		str	r2, [r3]
 5699              		.loc 1 1511 2 view .LVU1509
 5700 000e 1A68     		ldr	r2, [r3]
 5701 0010 1A60     		str	r2, [r3]
 5702              		.loc 1 1511 10 view .LVU1510
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5703              		.loc 1 1512 5 view .LVU1511
 5704              	.LVL493:
1510:Core/Src/Mytouch.c **** 	unsigned char i,receive=0;
 5705              		.loc 1 1510 18 is_stmt 0 view .LVU1512
ARM GAS  /tmp/cckdBZRC.s 			page 137


 5706 0012 0024     		movs	r4, #0
 5707              		.loc 1 1512 10 view .LVU1513
 5708 0014 2546     		mov	r5, r4
 5709              		.loc 1 1512 5 view .LVU1514
 5710 0016 04E0     		b	.L313
 5711              	.LVL494:
 5712              	.L314:
1513:Core/Src/Mytouch.c **** 	{
1514:Core/Src/Mytouch.c ****         IIC_SCL(0); 
1515:Core/Src/Mytouch.c ****         delay_us(2);
1516:Core/Src/Mytouch.c **** 		IIC_SCL(1);
1517:Core/Src/Mytouch.c ****         receive<<=1;
1518:Core/Src/Mytouch.c ****         if(READ_SDA)receive++;   
1519:Core/Src/Mytouch.c **** 		delay_us(1); 
 5713              		.loc 1 1519 3 is_stmt 1 discriminator 2 view .LVU1515
 5714 0018 0120     		movs	r0, #1
 5715 001a FFF7FEFF 		bl	delay_us
 5716              	.LVL495:
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5717              		.loc 1 1512 17 discriminator 2 view .LVU1516
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5718              		.loc 1 1512 18 is_stmt 0 discriminator 2 view .LVU1517
 5719 001e 0135     		adds	r5, r5, #1
 5720              	.LVL496:
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5721              		.loc 1 1512 18 discriminator 2 view .LVU1518
 5722 0020 EDB2     		uxtb	r5, r5
 5723              	.LVL497:
 5724              	.L313:
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5725              		.loc 1 1512 13 is_stmt 1 discriminator 1 view .LVU1519
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5726              		.loc 1 1512 5 is_stmt 0 discriminator 1 view .LVU1520
 5727 0022 072D     		cmp	r5, #7
 5728 0024 18D8     		bhi	.L319
1514:Core/Src/Mytouch.c ****         delay_us(2);
 5729              		.loc 1 1514 9 is_stmt 1 view .LVU1521
 5730 0026 104E     		ldr	r6, .L320
 5731 0028 0022     		movs	r2, #0
 5732 002a 1021     		movs	r1, #16
 5733 002c 3046     		mov	r0, r6
 5734 002e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5735              	.LVL498:
1515:Core/Src/Mytouch.c **** 		IIC_SCL(1);
 5736              		.loc 1 1515 9 view .LVU1522
 5737 0032 0220     		movs	r0, #2
 5738 0034 FFF7FEFF 		bl	delay_us
 5739              	.LVL499:
1516:Core/Src/Mytouch.c ****         receive<<=1;
 5740              		.loc 1 1516 3 view .LVU1523
 5741 0038 0122     		movs	r2, #1
 5742 003a 1021     		movs	r1, #16
 5743 003c 3046     		mov	r0, r6
 5744 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5745              	.LVL500:
1517:Core/Src/Mytouch.c ****         if(READ_SDA)receive++;   
 5746              		.loc 1 1517 9 view .LVU1524
ARM GAS  /tmp/cckdBZRC.s 			page 138


1517:Core/Src/Mytouch.c ****         if(READ_SDA)receive++;   
 5747              		.loc 1 1517 16 is_stmt 0 view .LVU1525
 5748 0042 6400     		lsls	r4, r4, #1
 5749              	.LVL501:
1517:Core/Src/Mytouch.c ****         if(READ_SDA)receive++;   
 5750              		.loc 1 1517 16 view .LVU1526
 5751 0044 E4B2     		uxtb	r4, r4
 5752              	.LVL502:
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5753              		.loc 1 1518 9 is_stmt 1 view .LVU1527
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5754              		.loc 1 1518 12 is_stmt 0 view .LVU1528
 5755 0046 2021     		movs	r1, #32
 5756 0048 3046     		mov	r0, r6
 5757 004a FFF7FEFF 		bl	HAL_GPIO_ReadPin
 5758              	.LVL503:
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5759              		.loc 1 1518 11 view .LVU1529
 5760 004e 0028     		cmp	r0, #0
 5761 0050 E2D0     		beq	.L314
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5762              		.loc 1 1518 21 is_stmt 1 discriminator 1 view .LVU1530
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5763              		.loc 1 1518 28 is_stmt 0 discriminator 1 view .LVU1531
 5764 0052 0134     		adds	r4, r4, #1
 5765              	.LVL504:
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5766              		.loc 1 1518 28 discriminator 1 view .LVU1532
 5767 0054 E4B2     		uxtb	r4, r4
 5768              	.LVL505:
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5769              		.loc 1 1518 28 discriminator 1 view .LVU1533
 5770 0056 DFE7     		b	.L314
 5771              	.L319:
1520:Core/Src/Mytouch.c ****     }					 
1521:Core/Src/Mytouch.c ****     if (!ack)
 5772              		.loc 1 1521 5 is_stmt 1 view .LVU1534
 5773              		.loc 1 1521 8 is_stmt 0 view .LVU1535
 5774 0058 1FB9     		cbnz	r7, .L316
1522:Core/Src/Mytouch.c ****         IIC_NAck();//发送nACK
 5775              		.loc 1 1522 9 is_stmt 1 view .LVU1536
 5776 005a FFF7FEFF 		bl	IIC_NAck
 5777              	.LVL506:
 5778              	.L317:
1523:Core/Src/Mytouch.c ****     else
1524:Core/Src/Mytouch.c ****         IIC_Ack(); //发送ACK   
1525:Core/Src/Mytouch.c ****     return receive;
 5779              		.loc 1 1525 5 view .LVU1537
1526:Core/Src/Mytouch.c **** }
 5780              		.loc 1 1526 1 is_stmt 0 view .LVU1538
 5781 005e 2046     		mov	r0, r4
 5782 0060 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 5783              	.LVL507:
 5784              	.L316:
1524:Core/Src/Mytouch.c ****     return receive;
 5785              		.loc 1 1524 9 is_stmt 1 view .LVU1539
 5786 0062 FFF7FEFF 		bl	IIC_Ack
ARM GAS  /tmp/cckdBZRC.s 			page 139


 5787              	.LVL508:
 5788 0066 FAE7     		b	.L317
 5789              	.L321:
 5790              		.align	2
 5791              	.L320:
 5792 0068 001C0258 		.word	1476533248
 5793              		.cfi_endproc
 5794              	.LFE198:
 5796              		.section	.text.AT24CXX_ReadOneByte,"ax",%progbits
 5797              		.align	1
 5798              		.global	AT24CXX_ReadOneByte
 5799              		.syntax unified
 5800              		.thumb
 5801              		.thumb_func
 5803              	AT24CXX_ReadOneByte:
 5804              	.LVL509:
 5805              	.LFB184:
1286:Core/Src/Mytouch.c **** 	u8 temp=0;		  	    																 
 5806              		.loc 1 1286 1 view -0
 5807              		.cfi_startproc
 5808              		@ args = 0, pretend = 0, frame = 0
 5809              		@ frame_needed = 0, uses_anonymous_args = 0
1286:Core/Src/Mytouch.c **** 	u8 temp=0;		  	    																 
 5810              		.loc 1 1286 1 is_stmt 0 view .LVU1541
 5811 0000 10B5     		push	{r4, lr}
 5812              	.LCFI80:
 5813              		.cfi_def_cfa_offset 8
 5814              		.cfi_offset 4, -8
 5815              		.cfi_offset 14, -4
 5816 0002 0446     		mov	r4, r0
1287:Core/Src/Mytouch.c ****     IIC_Start();  
 5817              		.loc 1 1287 2 is_stmt 1 view .LVU1542
 5818              	.LVL510:
1288:Core/Src/Mytouch.c **** 	if(EE_TYPE>AT24C16)
 5819              		.loc 1 1288 5 view .LVU1543
 5820 0004 FFF7FEFF 		bl	IIC_Start
 5821              	.LVL511:
1289:Core/Src/Mytouch.c **** 	{
 5822              		.loc 1 1289 2 view .LVU1544
1294:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 
 5823              		.loc 1 1294 8 view .LVU1545
1294:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 
 5824              		.loc 1 1294 42 is_stmt 0 view .LVU1546
 5825 0008 230A     		lsrs	r3, r4, #8
 5826 000a 5B00     		lsls	r3, r3, #1
 5827 000c DBB2     		uxtb	r3, r3
1294:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 
 5828              		.loc 1 1294 8 view .LVU1547
 5829 000e 603B     		subs	r3, r3, #96
 5830 0010 03F0FE00 		and	r0, r3, #254
 5831 0014 FFF7FEFF 		bl	IIC_Send_Byte
 5832              	.LVL512:
1295:Core/Src/Mytouch.c ****     IIC_Send_Byte(ReadAddr%256);   //发送低地址
 5833              		.loc 1 1295 2 is_stmt 1 view .LVU1548
 5834 0018 FFF7FEFF 		bl	IIC_Wait_Ack
 5835              	.LVL513:
1296:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	    
ARM GAS  /tmp/cckdBZRC.s 			page 140


 5836              		.loc 1 1296 5 view .LVU1549
 5837 001c E0B2     		uxtb	r0, r4
 5838 001e FFF7FEFF 		bl	IIC_Send_Byte
 5839              	.LVL514:
1297:Core/Src/Mytouch.c **** 	IIC_Start();  	 	   
 5840              		.loc 1 1297 2 view .LVU1550
 5841 0022 FFF7FEFF 		bl	IIC_Wait_Ack
 5842              	.LVL515:
1298:Core/Src/Mytouch.c **** 	IIC_Send_Byte(0XA1);           //进入接收模式			   
 5843              		.loc 1 1298 2 view .LVU1551
 5844 0026 FFF7FEFF 		bl	IIC_Start
 5845              	.LVL516:
1299:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	 
 5846              		.loc 1 1299 2 view .LVU1552
 5847 002a A120     		movs	r0, #161
 5848 002c FFF7FEFF 		bl	IIC_Send_Byte
 5849              	.LVL517:
1300:Core/Src/Mytouch.c ****     temp=IIC_Read_Byte(0);		   
 5850              		.loc 1 1300 2 view .LVU1553
 5851 0030 FFF7FEFF 		bl	IIC_Wait_Ack
 5852              	.LVL518:
1301:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件	    
 5853              		.loc 1 1301 5 view .LVU1554
1301:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件	    
 5854              		.loc 1 1301 10 is_stmt 0 view .LVU1555
 5855 0034 0020     		movs	r0, #0
 5856 0036 FFF7FEFF 		bl	IIC_Read_Byte
 5857              	.LVL519:
 5858 003a 0446     		mov	r4, r0
 5859              	.LVL520:
1302:Core/Src/Mytouch.c **** 	return temp;
 5860              		.loc 1 1302 5 is_stmt 1 view .LVU1556
 5861 003c FFF7FEFF 		bl	IIC_Stop
 5862              	.LVL521:
1303:Core/Src/Mytouch.c **** }
 5863              		.loc 1 1303 2 view .LVU1557
1304:Core/Src/Mytouch.c **** //在AT24CXX指定地址写入一个数据
 5864              		.loc 1 1304 1 is_stmt 0 view .LVU1558
 5865 0040 2046     		mov	r0, r4
 5866 0042 10BD     		pop	{r4, pc}
1304:Core/Src/Mytouch.c **** //在AT24CXX指定地址写入一个数据
 5867              		.loc 1 1304 1 view .LVU1559
 5868              		.cfi_endproc
 5869              	.LFE184:
 5871              		.section	.text.AT24CXX_ReadLenByte,"ax",%progbits
 5872              		.align	1
 5873              		.global	AT24CXX_ReadLenByte
 5874              		.syntax unified
 5875              		.thumb
 5876              		.thumb_func
 5878              	AT24CXX_ReadLenByte:
 5879              	.LVL522:
 5880              	.LFB187:
1345:Core/Src/Mytouch.c **** 	u8 t;
 5881              		.loc 1 1345 1 is_stmt 1 view -0
 5882              		.cfi_startproc
 5883              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cckdBZRC.s 			page 141


 5884              		@ frame_needed = 0, uses_anonymous_args = 0
1345:Core/Src/Mytouch.c **** 	u8 t;
 5885              		.loc 1 1345 1 is_stmt 0 view .LVU1561
 5886 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 5887              	.LCFI81:
 5888              		.cfi_def_cfa_offset 24
 5889              		.cfi_offset 3, -24
 5890              		.cfi_offset 4, -20
 5891              		.cfi_offset 5, -16
 5892              		.cfi_offset 6, -12
 5893              		.cfi_offset 7, -8
 5894              		.cfi_offset 14, -4
 5895 0002 0746     		mov	r7, r0
 5896 0004 0E46     		mov	r6, r1
1346:Core/Src/Mytouch.c **** 	u32 temp=0;
 5897              		.loc 1 1346 2 is_stmt 1 view .LVU1562
1347:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
 5898              		.loc 1 1347 2 view .LVU1563
 5899              	.LVL523:
1348:Core/Src/Mytouch.c **** 	{
 5900              		.loc 1 1348 2 view .LVU1564
1347:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
 5901              		.loc 1 1347 6 is_stmt 0 view .LVU1565
 5902 0006 0020     		movs	r0, #0
 5903              	.LVL524:
1348:Core/Src/Mytouch.c **** 	{
 5904              		.loc 1 1348 7 view .LVU1566
 5905 0008 0446     		mov	r4, r0
1348:Core/Src/Mytouch.c **** 	{
 5906              		.loc 1 1348 2 view .LVU1567
 5907 000a 0BE0     		b	.L325
 5908              	.LVL525:
 5909              	.L326:
1350:Core/Src/Mytouch.c **** 		temp+=AT24CXX_ReadOneByte(ReadAddr+Len-t-1); 	 				   
 5910              		.loc 1 1350 3 is_stmt 1 discriminator 3 view .LVU1568
1350:Core/Src/Mytouch.c **** 		temp+=AT24CXX_ReadOneByte(ReadAddr+Len-t-1); 	 				   
 5911              		.loc 1 1350 7 is_stmt 0 discriminator 3 view .LVU1569
 5912 000c 0502     		lsls	r5, r0, #8
 5913              	.LVL526:
1351:Core/Src/Mytouch.c **** 	}
 5914              		.loc 1 1351 3 is_stmt 1 discriminator 3 view .LVU1570
1351:Core/Src/Mytouch.c **** 	}
 5915              		.loc 1 1351 37 is_stmt 0 discriminator 3 view .LVU1571
 5916 000e B819     		adds	r0, r7, r6
 5917 0010 80B2     		uxth	r0, r0
1351:Core/Src/Mytouch.c **** 	}
 5918              		.loc 1 1351 41 discriminator 3 view .LVU1572
 5919 0012 001B     		subs	r0, r0, r4
 5920 0014 80B2     		uxth	r0, r0
1351:Core/Src/Mytouch.c **** 	}
 5921              		.loc 1 1351 9 discriminator 3 view .LVU1573
 5922 0016 0138     		subs	r0, r0, #1
 5923 0018 80B2     		uxth	r0, r0
 5924 001a FFF7FEFF 		bl	AT24CXX_ReadOneByte
 5925              	.LVL527:
1351:Core/Src/Mytouch.c **** 	}
 5926              		.loc 1 1351 7 discriminator 3 view .LVU1574
ARM GAS  /tmp/cckdBZRC.s 			page 142


 5927 001e 2844     		add	r0, r0, r5
 5928              	.LVL528:
1348:Core/Src/Mytouch.c **** 	{
 5929              		.loc 1 1348 16 is_stmt 1 discriminator 3 view .LVU1575
1348:Core/Src/Mytouch.c **** 	{
 5930              		.loc 1 1348 17 is_stmt 0 discriminator 3 view .LVU1576
 5931 0020 0134     		adds	r4, r4, #1
 5932              	.LVL529:
1348:Core/Src/Mytouch.c **** 	{
 5933              		.loc 1 1348 17 discriminator 3 view .LVU1577
 5934 0022 E4B2     		uxtb	r4, r4
 5935              	.LVL530:
 5936              	.L325:
1348:Core/Src/Mytouch.c **** 	{
 5937              		.loc 1 1348 10 is_stmt 1 discriminator 1 view .LVU1578
1348:Core/Src/Mytouch.c **** 	{
 5938              		.loc 1 1348 2 is_stmt 0 discriminator 1 view .LVU1579
 5939 0024 B442     		cmp	r4, r6
 5940 0026 F1D3     		bcc	.L326
1353:Core/Src/Mytouch.c **** }
 5941              		.loc 1 1353 2 is_stmt 1 view .LVU1580
1354:Core/Src/Mytouch.c **** //检查AT24CXX是否正常
 5942              		.loc 1 1354 1 is_stmt 0 view .LVU1581
 5943 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
1354:Core/Src/Mytouch.c **** //检查AT24CXX是否正常
 5944              		.loc 1 1354 1 view .LVU1582
 5945              		.cfi_endproc
 5946              	.LFE187:
 5948              		.section	.text.TP_Get_Adjdata,"ax",%progbits
 5949              		.align	1
 5950              		.global	TP_Get_Adjdata
 5951              		.syntax unified
 5952              		.thumb
 5953              		.thumb_func
 5955              	TP_Get_Adjdata:
 5956              	.LFB156:
 230:Core/Src/Mytouch.c **** 	int tempfac;
 5957              		.loc 1 230 1 is_stmt 1 view -0
 5958              		.cfi_startproc
 5959              		@ args = 0, pretend = 0, frame = 0
 5960              		@ frame_needed = 0, uses_anonymous_args = 0
 5961 0000 10B5     		push	{r4, lr}
 5962              	.LCFI82:
 5963              		.cfi_def_cfa_offset 8
 5964              		.cfi_offset 4, -8
 5965              		.cfi_offset 14, -4
 5966 0002 2DED028B 		vpush.64	{d8}
 5967              	.LCFI83:
 5968              		.cfi_def_cfa_offset 16
 5969              		.cfi_offset 80, -16
 5970              		.cfi_offset 81, -12
 231:Core/Src/Mytouch.c **** 	tempfac=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+13);//读取标记字,看是否校准过！ 		 
 5971              		.loc 1 231 2 view .LVU1584
 232:Core/Src/Mytouch.c **** 	if(tempfac==0X0A)//触摸屏已经校准过了			   
 5972              		.loc 1 232 2 view .LVU1585
 232:Core/Src/Mytouch.c **** 	if(tempfac==0X0A)//触摸屏已经校准过了			   
 5973              		.loc 1 232 10 is_stmt 0 view .LVU1586
ARM GAS  /tmp/cckdBZRC.s 			page 143


 5974 0006 3520     		movs	r0, #53
 5975 0008 FFF7FEFF 		bl	AT24CXX_ReadOneByte
 5976              	.LVL531:
 233:Core/Src/Mytouch.c **** 	{    												 
 5977              		.loc 1 233 2 is_stmt 1 view .LVU1587
 233:Core/Src/Mytouch.c **** 	{    												 
 5978              		.loc 1 233 4 is_stmt 0 view .LVU1588
 5979 000c 0A28     		cmp	r0, #10
 5980 000e 03D0     		beq	.L334
 255:Core/Src/Mytouch.c **** }	 
 5981              		.loc 1 255 9 view .LVU1589
 5982 0010 0020     		movs	r0, #0
 5983              	.LVL532:
 5984              	.L329:
 256:Core/Src/Mytouch.c **** //提示字符串
 5985              		.loc 1 256 1 view .LVU1590
 5986 0012 BDEC028B 		vldm	sp!, {d8}
 5987              	.LCFI84:
 5988              		.cfi_remember_state
 5989              		.cfi_restore 80
 5990              		.cfi_restore 81
 5991              		.cfi_def_cfa_offset 8
 5992 0016 10BD     		pop	{r4, pc}
 5993              	.LVL533:
 5994              	.L334:
 5995              	.LCFI85:
 5996              		.cfi_restore_state
 235:Core/Src/Mytouch.c **** 		tp_dev.xfac=(float)tempfac/100000000;//得到x校准参数
 5997              		.loc 1 235 3 is_stmt 1 view .LVU1591
 235:Core/Src/Mytouch.c **** 		tp_dev.xfac=(float)tempfac/100000000;//得到x校准参数
 5998              		.loc 1 235 11 is_stmt 0 view .LVU1592
 5999 0018 0421     		movs	r1, #4
 6000 001a 2820     		movs	r0, #40
 6001              	.LVL534:
 235:Core/Src/Mytouch.c **** 		tp_dev.xfac=(float)tempfac/100000000;//得到x校准参数
 6002              		.loc 1 235 11 view .LVU1593
 6003 001c FFF7FEFF 		bl	AT24CXX_ReadLenByte
 6004              	.LVL535:
 6005 0020 07EE900A 		vmov	s15, r0	@ int
 6006              	.LVL536:
 236:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 6007              		.loc 1 236 3 is_stmt 1 view .LVU1594
 236:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 6008              		.loc 1 236 15 is_stmt 0 view .LVU1595
 6009 0024 F8EEE77A 		vcvt.f32.s32	s15, s15
 236:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 6010              		.loc 1 236 29 view .LVU1596
 6011 0028 9FED188A 		vldr.32	s16, .L335
 6012 002c 87EE887A 		vdiv.f32	s14, s15, s16
 236:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 6013              		.loc 1 236 14 view .LVU1597
 6014 0030 174C     		ldr	r4, .L335+4
 6015 0032 84ED097A 		vstr.32	s14, [r4, #36]
 237:Core/Src/Mytouch.c **** 		tp_dev.yfac=(float)tempfac/100000000;//得到y校准参数
 6016              		.loc 1 237 3 is_stmt 1 view .LVU1598
 237:Core/Src/Mytouch.c **** 		tp_dev.yfac=(float)tempfac/100000000;//得到y校准参数
 6017              		.loc 1 237 11 is_stmt 0 view .LVU1599
ARM GAS  /tmp/cckdBZRC.s 			page 144


 6018 0036 0421     		movs	r1, #4
 6019 0038 2C20     		movs	r0, #44
 6020              	.LVL537:
 237:Core/Src/Mytouch.c **** 		tp_dev.yfac=(float)tempfac/100000000;//得到y校准参数
 6021              		.loc 1 237 11 view .LVU1600
 6022 003a FFF7FEFF 		bl	AT24CXX_ReadLenByte
 6023              	.LVL538:
 6024 003e 07EE900A 		vmov	s15, r0	@ int
 6025              	.LVL539:
 238:Core/Src/Mytouch.c **** 	    //得到x偏移量
 6026              		.loc 1 238 3 is_stmt 1 view .LVU1601
 238:Core/Src/Mytouch.c **** 	    //得到x偏移量
 6027              		.loc 1 238 15 is_stmt 0 view .LVU1602
 6028 0042 F8EEE77A 		vcvt.f32.s32	s15, s15
 238:Core/Src/Mytouch.c **** 	    //得到x偏移量
 6029              		.loc 1 238 29 view .LVU1603
 6030 0046 87EE887A 		vdiv.f32	s14, s15, s16
 238:Core/Src/Mytouch.c **** 	    //得到x偏移量
 6031              		.loc 1 238 14 view .LVU1604
 6032 004a 84ED0A7A 		vstr.32	s14, [r4, #40]
 240:Core/Src/Mytouch.c ****  	    //得到y偏移量
 6033              		.loc 1 240 3 is_stmt 1 view .LVU1605
 240:Core/Src/Mytouch.c ****  	    //得到y偏移量
 6034              		.loc 1 240 15 is_stmt 0 view .LVU1606
 6035 004e 0221     		movs	r1, #2
 6036 0050 3020     		movs	r0, #48
 6037              	.LVL540:
 240:Core/Src/Mytouch.c ****  	    //得到y偏移量
 6038              		.loc 1 240 15 view .LVU1607
 6039 0052 FFF7FEFF 		bl	AT24CXX_ReadLenByte
 6040              	.LVL541:
 240:Core/Src/Mytouch.c ****  	    //得到y偏移量
 6041              		.loc 1 240 14 view .LVU1608
 6042 0056 A085     		strh	r0, [r4, #44]	@ movhi
 242:Core/Src/Mytouch.c ****  		tp_dev.touchtype=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+12);//读取触屏类型标记
 6043              		.loc 1 242 3 is_stmt 1 view .LVU1609
 242:Core/Src/Mytouch.c ****  		tp_dev.touchtype=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+12);//读取触屏类型标记
 6044              		.loc 1 242 15 is_stmt 0 view .LVU1610
 6045 0058 0221     		movs	r1, #2
 6046 005a 3220     		movs	r0, #50
 6047 005c FFF7FEFF 		bl	AT24CXX_ReadLenByte
 6048              	.LVL542:
 242:Core/Src/Mytouch.c ****  		tp_dev.touchtype=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+12);//读取触屏类型标记
 6049              		.loc 1 242 14 view .LVU1611
 6050 0060 E085     		strh	r0, [r4, #46]	@ movhi
 243:Core/Src/Mytouch.c **** 		if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6051              		.loc 1 243 4 is_stmt 1 view .LVU1612
 243:Core/Src/Mytouch.c **** 		if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6052              		.loc 1 243 21 is_stmt 0 view .LVU1613
 6053 0062 3420     		movs	r0, #52
 6054 0064 FFF7FEFF 		bl	AT24CXX_ReadOneByte
 6055              	.LVL543:
 243:Core/Src/Mytouch.c **** 		if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6056              		.loc 1 243 20 view .LVU1614
 6057 0068 84F83000 		strb	r0, [r4, #48]
 244:Core/Src/Mytouch.c **** 		{
 6058              		.loc 1 244 3 is_stmt 1 view .LVU1615
ARM GAS  /tmp/cckdBZRC.s 			page 145


 244:Core/Src/Mytouch.c **** 		{
 6059              		.loc 1 244 5 is_stmt 0 view .LVU1616
 6060 006c 38B1     		cbz	r0, .L330
 246:Core/Src/Mytouch.c **** 			CMD_RDY=0XD0;	 
 6061              		.loc 1 246 4 is_stmt 1 view .LVU1617
 246:Core/Src/Mytouch.c **** 			CMD_RDY=0XD0;	 
 6062              		.loc 1 246 11 is_stmt 0 view .LVU1618
 6063 006e 094B     		ldr	r3, .L335+8
 6064 0070 9022     		movs	r2, #144
 6065 0072 1A70     		strb	r2, [r3]
 247:Core/Src/Mytouch.c **** 		}else				   //X,Y方向与屏幕相同
 6066              		.loc 1 247 4 is_stmt 1 view .LVU1619
 247:Core/Src/Mytouch.c **** 		}else				   //X,Y方向与屏幕相同
 6067              		.loc 1 247 11 is_stmt 0 view .LVU1620
 6068 0074 084B     		ldr	r3, .L335+12
 6069 0076 D022     		movs	r2, #208
 6070 0078 1A70     		strb	r2, [r3]
 6071              	.L331:
 253:Core/Src/Mytouch.c **** 	}
 6072              		.loc 1 253 3 is_stmt 1 view .LVU1621
 253:Core/Src/Mytouch.c **** 	}
 6073              		.loc 1 253 10 is_stmt 0 view .LVU1622
 6074 007a 0120     		movs	r0, #1
 6075 007c C9E7     		b	.L329
 6076              	.L330:
 250:Core/Src/Mytouch.c **** 			CMD_RDY=0X90;	 
 6077              		.loc 1 250 4 is_stmt 1 view .LVU1623
 250:Core/Src/Mytouch.c **** 			CMD_RDY=0X90;	 
 6078              		.loc 1 250 11 is_stmt 0 view .LVU1624
 6079 007e 054B     		ldr	r3, .L335+8
 6080 0080 D022     		movs	r2, #208
 6081 0082 1A70     		strb	r2, [r3]
 251:Core/Src/Mytouch.c **** 		}		 
 6082              		.loc 1 251 4 is_stmt 1 view .LVU1625
 251:Core/Src/Mytouch.c **** 		}		 
 6083              		.loc 1 251 11 is_stmt 0 view .LVU1626
 6084 0084 044B     		ldr	r3, .L335+12
 6085 0086 9022     		movs	r2, #144
 6086 0088 1A70     		strb	r2, [r3]
 6087 008a F6E7     		b	.L331
 6088              	.L336:
 6089              		.align	2
 6090              	.L335:
 6091 008c 20BCBE4C 		.word	1287568416
 6092 0090 00000000 		.word	.LANCHOR2
 6093 0094 00000000 		.word	.LANCHOR0
 6094 0098 00000000 		.word	.LANCHOR1
 6095              		.cfi_endproc
 6096              	.LFE156:
 6098              		.section	.rodata.TP_Adjust.str1.4,"aMS",%progbits,1
 6099              		.align	2
 6100              	.LC14:
 6101 0000 506C6561 		.ascii	"Please use the stylus click the cross on the screen"
 6101      73652075 
 6101      73652074 
 6101      68652073 
 6101      74796C75 
ARM GAS  /tmp/cckdBZRC.s 			page 146


 6102 0033 2E546865 		.ascii	".The cross will always move until the screen adjust"
 6102      2063726F 
 6102      73732077 
 6102      696C6C20 
 6102      616C7761 
 6103 0066 6D656E74 		.ascii	"ment is completed.\000"
 6103      20697320 
 6103      636F6D70 
 6103      6C657465 
 6103      642E00
 6104 0079 000000   		.align	2
 6105              	.LC15:
 6106 007c 5450204E 		.ascii	"TP Need readjust!\000"
 6106      65656420 
 6106      72656164 
 6106      6A757374 
 6106      2100
 6107 008e 0000     		.align	2
 6108              	.LC16:
 6109 0090 546F7563 		.ascii	"Touch Screen Adjust OK!\000"
 6109      68205363 
 6109      7265656E 
 6109      2041646A 
 6109      75737420 
 6110              		.section	.text.TP_Adjust,"ax",%progbits
 6111              		.align	1
 6112              		.global	TP_Adjust
 6113              		.syntax unified
 6114              		.thumb
 6115              		.thumb_func
 6117              	TP_Adjust:
 6118              	.LFB158:
 288:Core/Src/Mytouch.c **** 	u16 pos_temp[4][2];//坐标缓存值
 6119              		.loc 1 288 1 is_stmt 1 view -0
 6120              		.cfi_startproc
 6121              		@ args = 0, pretend = 0, frame = 16
 6122              		@ frame_needed = 0, uses_anonymous_args = 0
 6123 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6124              	.LCFI86:
 6125              		.cfi_def_cfa_offset 36
 6126              		.cfi_offset 4, -36
 6127              		.cfi_offset 5, -32
 6128              		.cfi_offset 6, -28
 6129              		.cfi_offset 7, -24
 6130              		.cfi_offset 8, -20
 6131              		.cfi_offset 9, -16
 6132              		.cfi_offset 10, -12
 6133              		.cfi_offset 11, -8
 6134              		.cfi_offset 14, -4
 6135 0004 2DED048B 		vpush.64	{d8, d9}
 6136              	.LCFI87:
 6137              		.cfi_def_cfa_offset 52
 6138              		.cfi_offset 80, -52
 6139              		.cfi_offset 81, -48
 6140              		.cfi_offset 82, -44
 6141              		.cfi_offset 83, -40
 6142 0008 8BB0     		sub	sp, sp, #44
ARM GAS  /tmp/cckdBZRC.s 			page 147


 6143              	.LCFI88:
 6144              		.cfi_def_cfa_offset 96
 289:Core/Src/Mytouch.c **** 	u8  cnt=0;	
 6145              		.loc 1 289 2 view .LVU1628
 290:Core/Src/Mytouch.c **** 	u16 d1,d2;
 6146              		.loc 1 290 2 view .LVU1629
 6147              	.LVL544:
 291:Core/Src/Mytouch.c **** 	u32 tem1,tem2;
 6148              		.loc 1 291 2 view .LVU1630
 292:Core/Src/Mytouch.c **** 	double fac; 	
 6149              		.loc 1 292 2 view .LVU1631
 293:Core/Src/Mytouch.c **** 	u16 outtime=0;
 6150              		.loc 1 293 2 view .LVU1632
 294:Core/Src/Mytouch.c ****  	cnt=0;				
 6151              		.loc 1 294 2 view .LVU1633
 295:Core/Src/Mytouch.c **** 	POINT_COLOR=BLUE;
 6152              		.loc 1 295 3 view .LVU1634
 296:Core/Src/Mytouch.c **** 	BACK_COLOR =WHITE;
 6153              		.loc 1 296 2 view .LVU1635
 296:Core/Src/Mytouch.c **** 	BACK_COLOR =WHITE;
 6154              		.loc 1 296 13 is_stmt 0 view .LVU1636
 6155 000a D14C     		ldr	r4, .L365+24
 6156 000c 1F23     		movs	r3, #31
 6157 000e 2360     		str	r3, [r4]
 297:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏   
 6158              		.loc 1 297 2 is_stmt 1 view .LVU1637
 297:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏   
 6159              		.loc 1 297 13 is_stmt 0 view .LVU1638
 6160 0010 4FF6FF75 		movw	r5, #65535
 6161 0014 CF4B     		ldr	r3, .L365+28
 6162 0016 1D60     		str	r5, [r3]
 298:Core/Src/Mytouch.c **** 	POINT_COLOR=RED;//红色 
 6163              		.loc 1 298 2 is_stmt 1 view .LVU1639
 6164 0018 2846     		mov	r0, r5
 6165 001a FFF7FEFF 		bl	LCD_Clear
 6166              	.LVL545:
 299:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏 	   
 6167              		.loc 1 299 2 view .LVU1640
 299:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏 	   
 6168              		.loc 1 299 13 is_stmt 0 view .LVU1641
 6169 001e 4FF47846 		mov	r6, #63488
 6170 0022 2660     		str	r6, [r4]
 300:Core/Src/Mytouch.c **** 	POINT_COLOR=BLACK;
 6171              		.loc 1 300 2 is_stmt 1 view .LVU1642
 6172 0024 2846     		mov	r0, r5
 6173 0026 FFF7FEFF 		bl	LCD_Clear
 6174              	.LVL546:
 301:Core/Src/Mytouch.c **** 	LCD_ShowString(40,40,160,100,16,(u8*)TP_REMIND_MSG_TBL);//显示提示信息
 6175              		.loc 1 301 2 view .LVU1643
 301:Core/Src/Mytouch.c **** 	LCD_ShowString(40,40,160,100,16,(u8*)TP_REMIND_MSG_TBL);//显示提示信息
 6176              		.loc 1 301 13 is_stmt 0 view .LVU1644
 6177 002a 0025     		movs	r5, #0
 6178 002c 2560     		str	r5, [r4]
 302:Core/Src/Mytouch.c **** 	TP_Drow_Touch_Point(20,20,RED);//画点1 
 6179              		.loc 1 302 2 is_stmt 1 view .LVU1645
 6180 002e CA4B     		ldr	r3, .L365+32
 6181 0030 0193     		str	r3, [sp, #4]
ARM GAS  /tmp/cckdBZRC.s 			page 148


 6182 0032 1023     		movs	r3, #16
 6183 0034 0093     		str	r3, [sp]
 6184 0036 6423     		movs	r3, #100
 6185 0038 A022     		movs	r2, #160
 6186 003a 2821     		movs	r1, #40
 6187 003c 0846     		mov	r0, r1
 6188 003e FFF7FEFF 		bl	LCD_ShowString
 6189              	.LVL547:
 303:Core/Src/Mytouch.c **** 	tp_dev.sta=0;//消除触发信号 
 6190              		.loc 1 303 2 view .LVU1646
 6191 0042 3246     		mov	r2, r6
 6192 0044 1421     		movs	r1, #20
 6193 0046 0846     		mov	r0, r1
 6194 0048 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6195              	.LVL548:
 304:Core/Src/Mytouch.c **** 	tp_dev.xfac=0;//xfac用来标记是否校准过,所以校准之前必须清掉!以免错误	 
 6196              		.loc 1 304 2 view .LVU1647
 304:Core/Src/Mytouch.c **** 	tp_dev.xfac=0;//xfac用来标记是否校准过,所以校准之前必须清掉!以免错误	 
 6197              		.loc 1 304 12 is_stmt 0 view .LVU1648
 6198 004c C34B     		ldr	r3, .L365+36
 6199 004e 83F82050 		strb	r5, [r3, #32]
 305:Core/Src/Mytouch.c **** 	while(1)//如果连续10秒钟没有按下,则自动退出
 6200              		.loc 1 305 2 is_stmt 1 view .LVU1649
 305:Core/Src/Mytouch.c **** 	while(1)//如果连续10秒钟没有按下,则自动退出
 6201              		.loc 1 305 13 is_stmt 0 view .LVU1650
 6202 0052 0022     		movs	r2, #0
 6203 0054 5A62     		str	r2, [r3, #36]	@ float
 294:Core/Src/Mytouch.c ****  	cnt=0;				
 6204              		.loc 1 294 6 view .LVU1651
 6205 0056 2C46     		mov	r4, r5
 6206 0058 18E0     		b	.L338
 6207              	.LVL549:
 6208              	.L344:
 6209              	.LBB11:
 320:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(lcddev.width-20,20,RED);	//画点2
 6210              		.loc 1 320 6 is_stmt 1 view .LVU1652
 6211 005a 4FF6FF72 		movw	r2, #65535
 6212 005e 1421     		movs	r1, #20
 6213 0060 0846     		mov	r0, r1
 6214 0062 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6215              	.LVL550:
 321:Core/Src/Mytouch.c **** 					break;
 6216              		.loc 1 321 6 view .LVU1653
 321:Core/Src/Mytouch.c **** 					break;
 6217              		.loc 1 321 32 is_stmt 0 view .LVU1654
 6218 0066 BE4B     		ldr	r3, .L365+40
 6219 0068 1888     		ldrh	r0, [r3]
 321:Core/Src/Mytouch.c **** 					break;
 6220              		.loc 1 321 6 view .LVU1655
 6221 006a 1438     		subs	r0, r0, #20
 6222 006c 4FF47842 		mov	r2, #63488
 6223 0070 1421     		movs	r1, #20
 6224 0072 80B2     		uxth	r0, r0
 6225 0074 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6226              	.LVL551:
 322:Core/Src/Mytouch.c **** 				case 2:
 6227              		.loc 1 322 6 is_stmt 1 view .LVU1656
ARM GAS  /tmp/cckdBZRC.s 			page 149


 6228              	.LBE11:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6229              		.loc 1 311 11 is_stmt 0 view .LVU1657
 6230 0078 0024     		movs	r4, #0
 6231              	.LVL552:
 6232              	.L339:
 428:Core/Src/Mytouch.c **** 		outtime++;
 6233              		.loc 1 428 3 is_stmt 1 view .LVU1658
 6234 007a 0A20     		movs	r0, #10
 6235 007c FFF7FEFF 		bl	HAL_Delay
 6236              	.LVL553:
 429:Core/Src/Mytouch.c **** 		if(outtime>1000)
 6237              		.loc 1 429 3 view .LVU1659
 429:Core/Src/Mytouch.c **** 		if(outtime>1000)
 6238              		.loc 1 429 10 is_stmt 0 view .LVU1660
 6239 0080 0134     		adds	r4, r4, #1
 6240              	.LVL554:
 429:Core/Src/Mytouch.c **** 		if(outtime>1000)
 6241              		.loc 1 429 10 view .LVU1661
 6242 0082 A4B2     		uxth	r4, r4
 6243              	.LVL555:
 430:Core/Src/Mytouch.c **** 		{
 6244              		.loc 1 430 3 is_stmt 1 view .LVU1662
 430:Core/Src/Mytouch.c **** 		{
 6245              		.loc 1 430 5 is_stmt 0 view .LVU1663
 6246 0084 B4F57A7F 		cmp	r4, #1000
 6247 0088 00F29182 		bhi	.L364
 6248              	.LVL556:
 6249              	.L338:
 306:Core/Src/Mytouch.c **** 	{
 6250              		.loc 1 306 2 is_stmt 1 view .LVU1664
 308:Core/Src/Mytouch.c **** 		if((tp_dev.sta&0xc0)==TP_CATH_PRES)//按键按下了一次(此时按键松开了.)
 6251              		.loc 1 308 3 view .LVU1665
 308:Core/Src/Mytouch.c **** 		if((tp_dev.sta&0xc0)==TP_CATH_PRES)//按键按下了一次(此时按键松开了.)
 6252              		.loc 1 308 9 is_stmt 0 view .LVU1666
 6253 008c B34E     		ldr	r6, .L365+36
 6254 008e 7368     		ldr	r3, [r6, #4]
 308:Core/Src/Mytouch.c **** 		if((tp_dev.sta&0xc0)==TP_CATH_PRES)//按键按下了一次(此时按键松开了.)
 6255              		.loc 1 308 3 view .LVU1667
 6256 0090 0120     		movs	r0, #1
 6257 0092 9847     		blx	r3
 6258              	.LVL557:
 309:Core/Src/Mytouch.c **** 		{	
 6259              		.loc 1 309 3 is_stmt 1 view .LVU1668
 309:Core/Src/Mytouch.c **** 		{	
 6260              		.loc 1 309 13 is_stmt 0 view .LVU1669
 6261 0094 96F82030 		ldrb	r3, [r6, #32]	@ zero_extendqisi2
 309:Core/Src/Mytouch.c **** 		{	
 6262              		.loc 1 309 5 view .LVU1670
 6263 0098 03F0C002 		and	r2, r3, #192
 6264 009c 402A     		cmp	r2, #64
 6265 009e ECD1     		bne	.L339
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6266              		.loc 1 311 4 is_stmt 1 view .LVU1671
 6267              	.LVL558:
 312:Core/Src/Mytouch.c **** 						   			   
 6268              		.loc 1 312 4 view .LVU1672
ARM GAS  /tmp/cckdBZRC.s 			page 150


 312:Core/Src/Mytouch.c **** 						   			   
 6269              		.loc 1 312 14 is_stmt 0 view .LVU1673
 6270 00a0 23F04003 		bic	r3, r3, #64
 6271 00a4 86F82030 		strb	r3, [r6, #32]
 314:Core/Src/Mytouch.c **** 			pos_temp[cnt][1]=tp_dev.y[0];
 6272              		.loc 1 314 4 is_stmt 1 view .LVU1674
 314:Core/Src/Mytouch.c **** 			pos_temp[cnt][1]=tp_dev.y[0];
 6273              		.loc 1 314 29 is_stmt 0 view .LVU1675
 6274 00a8 B189     		ldrh	r1, [r6, #12]
 314:Core/Src/Mytouch.c **** 			pos_temp[cnt][1]=tp_dev.y[0];
 6275              		.loc 1 314 20 view .LVU1676
 6276 00aa 0AAB     		add	r3, sp, #40
 6277 00ac 03EB8503 		add	r3, r3, r5, lsl #2
 6278 00b0 23F8101C 		strh	r1, [r3, #-16]	@ movhi
 315:Core/Src/Mytouch.c **** 			cnt++;	  
 6279              		.loc 1 315 4 is_stmt 1 view .LVU1677
 315:Core/Src/Mytouch.c **** 			cnt++;	  
 6280              		.loc 1 315 29 is_stmt 0 view .LVU1678
 6281 00b4 F28A     		ldrh	r2, [r6, #22]
 315:Core/Src/Mytouch.c **** 			cnt++;	  
 6282              		.loc 1 315 20 view .LVU1679
 6283 00b6 23F80E2C 		strh	r2, [r3, #-14]	@ movhi
 316:Core/Src/Mytouch.c **** 			switch(cnt)
 6284              		.loc 1 316 4 is_stmt 1 view .LVU1680
 316:Core/Src/Mytouch.c **** 			switch(cnt)
 6285              		.loc 1 316 7 is_stmt 0 view .LVU1681
 6286 00ba 0135     		adds	r5, r5, #1
 6287              	.LVL559:
 316:Core/Src/Mytouch.c **** 			switch(cnt)
 6288              		.loc 1 316 7 view .LVU1682
 6289 00bc EDB2     		uxtb	r5, r5
 6290              	.LVL560:
 317:Core/Src/Mytouch.c **** 			{			   
 6291              		.loc 1 317 4 is_stmt 1 view .LVU1683
 6292 00be 6B1E     		subs	r3, r5, #1
 6293 00c0 032B     		cmp	r3, #3
 6294 00c2 00F27282 		bhi	.L360
 6295 00c6 01A2     		adr	r2, .L341
 6296 00c8 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 6297              		.p2align 2
 6298              	.L341:
 6299 00cc 5B000000 		.word	.L344+1
 6300 00d0 DD000000 		.word	.L343+1
 6301 00d4 03010000 		.word	.L342+1
 6302 00d8 2D010000 		.word	.L340+1
 6303              		.p2align 1
 6304              	.L343:
 6305              	.LBB12:
 324:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,lcddev.height-20,RED);	//画点3
 6306              		.loc 1 324 7 view .LVU1684
 324:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,lcddev.height-20,RED);	//画点3
 6307              		.loc 1 324 33 is_stmt 0 view .LVU1685
 6308 00dc A04C     		ldr	r4, .L365+40
 6309 00de 2088     		ldrh	r0, [r4]
 324:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,lcddev.height-20,RED);	//画点3
 6310              		.loc 1 324 7 view .LVU1686
 6311 00e0 1438     		subs	r0, r0, #20
ARM GAS  /tmp/cckdBZRC.s 			page 151


 6312 00e2 4FF6FF72 		movw	r2, #65535
 6313 00e6 1421     		movs	r1, #20
 6314 00e8 80B2     		uxth	r0, r0
 6315 00ea FFF7FEFF 		bl	TP_Drow_Touch_Point
 6316              	.LVL561:
 325:Core/Src/Mytouch.c **** 					break;
 6317              		.loc 1 325 6 is_stmt 1 view .LVU1687
 325:Core/Src/Mytouch.c **** 					break;
 6318              		.loc 1 325 35 is_stmt 0 view .LVU1688
 6319 00ee 6188     		ldrh	r1, [r4, #2]
 325:Core/Src/Mytouch.c **** 					break;
 6320              		.loc 1 325 6 view .LVU1689
 6321 00f0 1439     		subs	r1, r1, #20
 6322 00f2 4FF47842 		mov	r2, #63488
 6323 00f6 89B2     		uxth	r1, r1
 6324 00f8 1420     		movs	r0, #20
 6325 00fa FFF7FEFF 		bl	TP_Drow_Touch_Point
 6326              	.LVL562:
 326:Core/Src/Mytouch.c **** 				case 3:
 6327              		.loc 1 326 6 is_stmt 1 view .LVU1690
 6328              	.LBE12:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6329              		.loc 1 311 11 is_stmt 0 view .LVU1691
 6330 00fe 0024     		movs	r4, #0
 6331              	.LBB13:
 326:Core/Src/Mytouch.c **** 				case 3:
 6332              		.loc 1 326 6 view .LVU1692
 6333 0100 BBE7     		b	.L339
 6334              	.L342:
 328:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,RED);	//画点4
 6335              		.loc 1 328 7 is_stmt 1 view .LVU1693
 328:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,RED);	//画点4
 6336              		.loc 1 328 36 is_stmt 0 view .LVU1694
 6337 0102 974C     		ldr	r4, .L365+40
 6338 0104 6188     		ldrh	r1, [r4, #2]
 328:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,RED);	//画点4
 6339              		.loc 1 328 7 view .LVU1695
 6340 0106 1439     		subs	r1, r1, #20
 6341 0108 4FF6FF72 		movw	r2, #65535
 6342 010c 89B2     		uxth	r1, r1
 6343 010e 1420     		movs	r0, #20
 6344 0110 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6345              	.LVL563:
 329:Core/Src/Mytouch.c **** 					break;
 6346              		.loc 1 329 7 is_stmt 1 view .LVU1696
 329:Core/Src/Mytouch.c **** 					break;
 6347              		.loc 1 329 33 is_stmt 0 view .LVU1697
 6348 0114 2088     		ldrh	r0, [r4]
 329:Core/Src/Mytouch.c **** 					break;
 6349              		.loc 1 329 49 view .LVU1698
 6350 0116 6188     		ldrh	r1, [r4, #2]
 329:Core/Src/Mytouch.c **** 					break;
 6351              		.loc 1 329 7 view .LVU1699
 6352 0118 1439     		subs	r1, r1, #20
 6353 011a 1438     		subs	r0, r0, #20
 6354 011c 4FF47842 		mov	r2, #63488
 6355 0120 89B2     		uxth	r1, r1
ARM GAS  /tmp/cckdBZRC.s 			page 152


 6356 0122 80B2     		uxth	r0, r0
 6357 0124 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6358              	.LVL564:
 330:Core/Src/Mytouch.c **** 				case 4:	 //全部四个点已经得到
 6359              		.loc 1 330 6 is_stmt 1 view .LVU1700
 6360              	.LBE13:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6361              		.loc 1 311 11 is_stmt 0 view .LVU1701
 6362 0128 0024     		movs	r4, #0
 6363              	.LBB14:
 330:Core/Src/Mytouch.c **** 				case 4:	 //全部四个点已经得到
 6364              		.loc 1 330 6 view .LVU1702
 6365 012a A6E7     		b	.L339
 6366              	.L340:
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6367              		.loc 1 333 6 is_stmt 1 view .LVU1703
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6368              		.loc 1 333 26 is_stmt 0 view .LVU1704
 6369 012c BDF81850 		ldrh	r5, [sp, #24]
 6370              	.LVL565:
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6371              		.loc 1 333 41 view .LVU1705
 6372 0130 BDF81C70 		ldrh	r7, [sp, #28]
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6373              		.loc 1 333 29 view .LVU1706
 6374 0134 EB1B     		subs	r3, r5, r7
 6375              	.LVL566:
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6376              		.loc 1 333 11 view .LVU1707
 6377 0136 002B     		cmp	r3, #0
 6378 0138 B8BF     		it	lt
 6379 013a 5B42     		rsblt	r3, r3, #0
 6380              	.LVL567:
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6381              		.loc 1 334 6 is_stmt 1 view .LVU1708
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6382              		.loc 1 334 26 is_stmt 0 view .LVU1709
 6383 013c BDF81A40 		ldrh	r4, [sp, #26]
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6384              		.loc 1 334 41 view .LVU1710
 6385 0140 BDF81E80 		ldrh	r8, [sp, #30]
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6386              		.loc 1 334 29 view .LVU1711
 6387 0144 A4EB0802 		sub	r2, r4, r8
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6388              		.loc 1 334 11 view .LVU1712
 6389 0148 002A     		cmp	r2, #0
 6390 014a B8BF     		it	lt
 6391 014c 5242     		rsblt	r2, r2, #0
 6392              	.LVL568:
 335:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6393              		.loc 1 335 6 is_stmt 1 view .LVU1713
 336:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,2的距离
 6394              		.loc 1 336 6 view .LVU1714
 336:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,2的距离
 6395              		.loc 1 336 10 is_stmt 0 view .LVU1715
 6396 014e 02FB02F2 		mul	r2, r2, r2
ARM GAS  /tmp/cckdBZRC.s 			page 153


 6397              	.LVL569:
 337:Core/Src/Mytouch.c **** 					
 6398              		.loc 1 337 6 is_stmt 1 view .LVU1716
 337:Core/Src/Mytouch.c **** 					
 6399              		.loc 1 337 18 is_stmt 0 view .LVU1717
 6400 0152 03FB0323 		mla	r3, r3, r3, r2
 6401              	.LVL570:
 337:Core/Src/Mytouch.c **** 					
 6402              		.loc 1 337 18 view .LVU1718
 6403 0156 00EE103A 		vmov	s0, r3	@ int
 337:Core/Src/Mytouch.c **** 					
 6404              		.loc 1 337 9 view .LVU1719
 6405 015a B8EE400B 		vcvt.f64.u32	d0, s0
 6406 015e FFF7FEFF 		bl	sqrt
 6407              	.LVL571:
 337:Core/Src/Mytouch.c **** 					
 6408              		.loc 1 337 8 view .LVU1720
 6409 0162 BCEEC00B 		vcvt.u32.f64	s0, d0
 6410 0166 10EE103A 		vmov	r3, s0	@ int
 6411 016a 9BB2     		uxth	r3, r3
 6412 016c 09EE103A 		vmov	s18, r3	@ int
 6413              	.LVL572:
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6414              		.loc 1 339 6 is_stmt 1 view .LVU1721
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6415              		.loc 1 339 26 is_stmt 0 view .LVU1722
 6416 0170 BDF82090 		ldrh	r9, [sp, #32]
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6417              		.loc 1 339 41 view .LVU1723
 6418 0174 BDF824A0 		ldrh	r10, [sp, #36]
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6419              		.loc 1 339 29 view .LVU1724
 6420 0178 A9EB0A03 		sub	r3, r9, r10
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6421              		.loc 1 339 11 view .LVU1725
 6422 017c 002B     		cmp	r3, #0
 6423 017e B8BF     		it	lt
 6424 0180 5B42     		rsblt	r3, r3, #0
 6425              	.LVL573:
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6426              		.loc 1 340 6 is_stmt 1 view .LVU1726
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6427              		.loc 1 340 26 is_stmt 0 view .LVU1727
 6428 0182 BDF82260 		ldrh	r6, [sp, #34]
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6429              		.loc 1 340 41 view .LVU1728
 6430 0186 BDF826B0 		ldrh	fp, [sp, #38]
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6431              		.loc 1 340 29 view .LVU1729
 6432 018a A6EB0B02 		sub	r2, r6, fp
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6433              		.loc 1 340 11 view .LVU1730
 6434 018e 002A     		cmp	r2, #0
 6435 0190 B8BF     		it	lt
 6436 0192 5242     		rsblt	r2, r2, #0
 6437              	.LVL574:
 341:Core/Src/Mytouch.c **** 					tem2*=tem2;
ARM GAS  /tmp/cckdBZRC.s 			page 154


 6438              		.loc 1 341 6 is_stmt 1 view .LVU1731
 342:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到3,4的距离
 6439              		.loc 1 342 6 view .LVU1732
 342:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到3,4的距离
 6440              		.loc 1 342 10 is_stmt 0 view .LVU1733
 6441 0194 02FB02F2 		mul	r2, r2, r2
 6442              	.LVL575:
 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6443              		.loc 1 343 6 is_stmt 1 view .LVU1734
 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6444              		.loc 1 343 18 is_stmt 0 view .LVU1735
 6445 0198 03FB0323 		mla	r3, r3, r3, r2
 6446              	.LVL576:
 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6447              		.loc 1 343 18 view .LVU1736
 6448 019c 00EE103A 		vmov	s0, r3	@ int
 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6449              		.loc 1 343 9 view .LVU1737
 6450 01a0 B8EE400B 		vcvt.f64.u32	d0, s0
 6451 01a4 FFF7FEFF 		bl	sqrt
 6452              	.LVL577:
 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6453              		.loc 1 343 8 view .LVU1738
 6454 01a8 BCEEC00B 		vcvt.u32.f64	s0, d0
 6455 01ac 10EE103A 		vmov	r3, s0	@ int
 6456 01b0 9BB2     		uxth	r3, r3
 6457              	.LVL578:
 344:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 6458              		.loc 1 344 6 is_stmt 1 view .LVU1739
 344:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 6459              		.loc 1 344 10 is_stmt 0 view .LVU1740
 6460 01b2 B8EE497A 		vcvt.f32.u32	s14, s18
 344:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 6461              		.loc 1 344 19 view .LVU1741
 6462 01b6 07EE903A 		vmov	s15, r3	@ int
 6463 01ba F8EEE77A 		vcvt.f32.s32	s15, s15
 6464 01be 87EE278A 		vdiv.f32	s16, s14, s15
 344:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 6465              		.loc 1 344 9 view .LVU1742
 6466 01c2 B7EEC88A 		vcvt.f64.f32	d8, s16
 6467              	.LVL579:
 345:Core/Src/Mytouch.c **** 					{
 6468              		.loc 1 345 6 is_stmt 1 view .LVU1743
 345:Core/Src/Mytouch.c **** 					{
 6469              		.loc 1 345 8 is_stmt 0 view .LVU1744
 6470 01c6 9FED5C7B 		vldr.64	d7, .L365
 6471 01ca B4EEC78B 		vcmpe.f64	d8, d7
 6472 01ce F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6473 01d2 00F18680 		bmi	.L345
 345:Core/Src/Mytouch.c **** 					{
 6474              		.loc 1 345 17 discriminator 1 view .LVU1745
 6475 01d6 9FED5A7B 		vldr.64	d7, .L365+8
 6476 01da B4EEC78B 		vcmpe.f64	d8, d7
 6477 01de F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6478 01e2 7EDC     		bgt	.L345
 345:Core/Src/Mytouch.c **** 					{
 6479              		.loc 1 345 38 discriminator 2 view .LVU1746
ARM GAS  /tmp/cckdBZRC.s 			page 155


 6480 01e4 B3FA83F3 		clz	r3, r3
 6481              	.LVL580:
 345:Core/Src/Mytouch.c **** 					{
 6482              		.loc 1 345 38 discriminator 2 view .LVU1747
 6483 01e8 5B09     		lsrs	r3, r3, #5
 345:Core/Src/Mytouch.c **** 					{
 6484              		.loc 1 345 34 discriminator 2 view .LVU1748
 6485 01ea 19EE102A 		vmov	r2, s18	@ int
 6486 01ee 002A     		cmp	r2, #0
 6487 01f0 77D0     		beq	.L345
 6488 01f2 002B     		cmp	r3, #0
 6489 01f4 75D1     		bne	.L345
 353:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[2][1]);//y1-y3
 6490              		.loc 1 353 6 is_stmt 1 view .LVU1749
 353:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[2][1]);//y1-y3
 6491              		.loc 1 353 29 is_stmt 0 view .LVU1750
 6492 01f6 A5EB0903 		sub	r3, r5, r9
 353:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[2][1]);//y1-y3
 6493              		.loc 1 353 11 view .LVU1751
 6494 01fa 002B     		cmp	r3, #0
 6495 01fc B8BF     		it	lt
 6496 01fe 5B42     		rsblt	r3, r3, #0
 6497              	.LVL581:
 354:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6498              		.loc 1 354 6 is_stmt 1 view .LVU1752
 354:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6499              		.loc 1 354 29 is_stmt 0 view .LVU1753
 6500 0200 A21B     		subs	r2, r4, r6
 354:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6501              		.loc 1 354 11 view .LVU1754
 6502 0202 002A     		cmp	r2, #0
 6503 0204 B8BF     		it	lt
 6504 0206 5242     		rsblt	r2, r2, #0
 6505              	.LVL582:
 355:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6506              		.loc 1 355 6 is_stmt 1 view .LVU1755
 356:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,3的距离
 6507              		.loc 1 356 6 view .LVU1756
 356:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,3的距离
 6508              		.loc 1 356 10 is_stmt 0 view .LVU1757
 6509 0208 02FB02F2 		mul	r2, r2, r2
 6510              	.LVL583:
 357:Core/Src/Mytouch.c **** 					
 6511              		.loc 1 357 6 is_stmt 1 view .LVU1758
 357:Core/Src/Mytouch.c **** 					
 6512              		.loc 1 357 18 is_stmt 0 view .LVU1759
 6513 020c 03FB0323 		mla	r3, r3, r3, r2
 6514              	.LVL584:
 357:Core/Src/Mytouch.c **** 					
 6515              		.loc 1 357 18 view .LVU1760
 6516 0210 00EE103A 		vmov	s0, r3	@ int
 6517              	.LVL585:
 357:Core/Src/Mytouch.c **** 					
 6518              		.loc 1 357 9 view .LVU1761
 6519 0214 B8EE400B 		vcvt.f64.u32	d0, s0
 6520 0218 FFF7FEFF 		bl	sqrt
 6521              	.LVL586:
ARM GAS  /tmp/cckdBZRC.s 			page 156


 357:Core/Src/Mytouch.c **** 					
 6522              		.loc 1 357 8 view .LVU1762
 6523 021c BCEEC00B 		vcvt.u32.f64	s0, d0
 6524 0220 10EE103A 		vmov	r3, s0	@ int
 6525 0224 9BB2     		uxth	r3, r3
 6526 0226 08EE103A 		vmov	s16, r3	@ int
 6527              	.LVL587:
 359:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[3][1]);//y2-y4
 6528              		.loc 1 359 6 is_stmt 1 view .LVU1763
 359:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[3][1]);//y2-y4
 6529              		.loc 1 359 29 is_stmt 0 view .LVU1764
 6530 022a A7EB0A03 		sub	r3, r7, r10
 359:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[3][1]);//y2-y4
 6531              		.loc 1 359 11 view .LVU1765
 6532 022e 002B     		cmp	r3, #0
 6533 0230 B8BF     		it	lt
 6534 0232 5B42     		rsblt	r3, r3, #0
 6535              	.LVL588:
 360:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6536              		.loc 1 360 6 is_stmt 1 view .LVU1766
 360:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6537              		.loc 1 360 29 is_stmt 0 view .LVU1767
 6538 0234 A8EB0B02 		sub	r2, r8, fp
 360:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6539              		.loc 1 360 11 view .LVU1768
 6540 0238 002A     		cmp	r2, #0
 6541 023a B8BF     		it	lt
 6542 023c 5242     		rsblt	r2, r2, #0
 6543              	.LVL589:
 361:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6544              		.loc 1 361 6 is_stmt 1 view .LVU1769
 362:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,4的距离
 6545              		.loc 1 362 6 view .LVU1770
 362:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,4的距离
 6546              		.loc 1 362 10 is_stmt 0 view .LVU1771
 6547 023e 02FB02F2 		mul	r2, r2, r2
 6548              	.LVL590:
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6549              		.loc 1 363 6 is_stmt 1 view .LVU1772
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6550              		.loc 1 363 18 is_stmt 0 view .LVU1773
 6551 0242 03FB0323 		mla	r3, r3, r3, r2
 6552              	.LVL591:
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6553              		.loc 1 363 18 view .LVU1774
 6554 0246 00EE103A 		vmov	s0, r3	@ int
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6555              		.loc 1 363 9 view .LVU1775
 6556 024a B8EE400B 		vcvt.f64.u32	d0, s0
 6557 024e FFF7FEFF 		bl	sqrt
 6558              	.LVL592:
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6559              		.loc 1 363 8 view .LVU1776
 6560 0252 BCEEC00B 		vcvt.u32.f64	s0, d0
 6561 0256 10EE103A 		vmov	r3, s0	@ int
 6562 025a 9BB2     		uxth	r3, r3
 6563 025c 00EE103A 		vmov	s0, r3	@ int
ARM GAS  /tmp/cckdBZRC.s 			page 157


 6564              	.LVL593:
 364:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6565              		.loc 1 364 6 is_stmt 1 view .LVU1777
 364:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6566              		.loc 1 364 10 is_stmt 0 view .LVU1778
 6567 0260 B8EE487A 		vcvt.f32.u32	s14, s16
 364:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6568              		.loc 1 364 19 view .LVU1779
 6569 0264 F8EEC07A 		vcvt.f32.s32	s15, s0
 6570 0268 87EE278A 		vdiv.f32	s16, s14, s15
 6571              	.LVL594:
 364:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6572              		.loc 1 364 9 view .LVU1780
 6573 026c B7EEC88A 		vcvt.f64.f32	d8, s16
 6574              	.LVL595:
 365:Core/Src/Mytouch.c **** 					{
 6575              		.loc 1 365 6 is_stmt 1 view .LVU1781
 365:Core/Src/Mytouch.c **** 					{
 6576              		.loc 1 365 8 is_stmt 0 view .LVU1782
 6577 0270 9FED317B 		vldr.64	d7, .L365
 6578 0274 B4EEC78B 		vcmpe.f64	d8, d7
 6579 0278 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6580 027c 06D4     		bmi	.L349
 365:Core/Src/Mytouch.c **** 					{
 6581              		.loc 1 365 17 discriminator 1 view .LVU1783
 6582 027e 9FED307B 		vldr.64	d7, .L365+8
 6583 0282 B4EEC78B 		vcmpe.f64	d8, d7
 6584 0286 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6585 028a 6BDD     		ble	.L361
 6586              	.L349:
 367:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6587              		.loc 1 367 7 is_stmt 1 view .LVU1784
 6588              	.LVL596:
 368:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6589              		.loc 1 368 11 view .LVU1785
 368:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6590              		.loc 1 368 37 is_stmt 0 view .LVU1786
 6591 028c 344B     		ldr	r3, .L365+40
 6592 028e 1888     		ldrh	r0, [r3]
 368:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6593              		.loc 1 368 53 view .LVU1787
 6594 0290 5988     		ldrh	r1, [r3, #2]
 368:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6595              		.loc 1 368 11 view .LVU1788
 6596 0292 1439     		subs	r1, r1, #20
 6597 0294 1438     		subs	r0, r0, #20
 6598 0296 4FF6FF72 		movw	r2, #65535
 6599 029a 89B2     		uxth	r1, r1
 6600 029c 80B2     		uxth	r0, r0
 6601 029e FFF7FEFF 		bl	TP_Drow_Touch_Point
 6602              	.LVL597:
 369:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 6603              		.loc 1 369 11 is_stmt 1 view .LVU1789
 6604 02a2 4FF47842 		mov	r2, #63488
 6605 02a6 1421     		movs	r1, #20
 6606 02a8 0846     		mov	r0, r1
 6607 02aa FFF7FEFF 		bl	TP_Drow_Touch_Point
ARM GAS  /tmp/cckdBZRC.s 			page 158


 6608              	.LVL598:
 370:Core/Src/Mytouch.c **** 						continue;
 6609              		.loc 1 370 8 view .LVU1790
 370:Core/Src/Mytouch.c **** 						continue;
 6610              		.loc 1 370 148 is_stmt 0 view .LVU1791
 6611 02ae 9FED267B 		vldr.64	d7, .L365+16
 6612 02b2 28EE078B 		vmul.f64	d8, d8, d7
 6613              	.LVL599:
 370:Core/Src/Mytouch.c **** 						continue;
 6614              		.loc 1 370 8 view .LVU1792
 6615 02b6 BCEEC88B 		vcvt.u32.f64	s16, d8
 6616 02ba 18EE103A 		vmov	r3, s16	@ int
 6617 02be 9BB2     		uxth	r3, r3
 6618 02c0 0493     		str	r3, [sp, #16]
 6619 02c2 CDF80CB0 		str	fp, [sp, #12]
 6620 02c6 CDF808A0 		str	r10, [sp, #8]
 6621 02ca 0196     		str	r6, [sp, #4]
 6622 02cc CDF80090 		str	r9, [sp]
 6623 02d0 4346     		mov	r3, r8
 6624 02d2 3A46     		mov	r2, r7
 6625 02d4 2146     		mov	r1, r4
 6626 02d6 2846     		mov	r0, r5
 6627 02d8 FFF7FEFF 		bl	TP_Adj_Info_Show
 6628              	.LVL600:
 371:Core/Src/Mytouch.c **** 					}//正确了
 6629              		.loc 1 371 7 is_stmt 1 view .LVU1793
 6630              	.LBE14:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6631              		.loc 1 311 11 is_stmt 0 view .LVU1794
 6632 02dc 0024     		movs	r4, #0
 6633              	.LBB15:
 367:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6634              		.loc 1 367 10 view .LVU1795
 6635 02de 2546     		mov	r5, r4
 371:Core/Src/Mytouch.c **** 					}//正确了
 6636              		.loc 1 371 7 view .LVU1796
 6637 02e0 D4E6     		b	.L338
 6638              	.LVL601:
 6639              	.L345:
 347:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6640              		.loc 1 347 7 is_stmt 1 view .LVU1797
 348:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6641              		.loc 1 348 11 view .LVU1798
 348:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6642              		.loc 1 348 37 is_stmt 0 view .LVU1799
 6643 02e2 1F4B     		ldr	r3, .L365+40
 6644 02e4 1888     		ldrh	r0, [r3]
 348:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6645              		.loc 1 348 53 view .LVU1800
 6646 02e6 5988     		ldrh	r1, [r3, #2]
 348:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6647              		.loc 1 348 11 view .LVU1801
 6648 02e8 1439     		subs	r1, r1, #20
 6649 02ea 1438     		subs	r0, r0, #20
 6650 02ec 4FF6FF72 		movw	r2, #65535
 6651 02f0 89B2     		uxth	r1, r1
 6652 02f2 80B2     		uxth	r0, r0
ARM GAS  /tmp/cckdBZRC.s 			page 159


 6653 02f4 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6654              	.LVL602:
 349:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 6655              		.loc 1 349 11 is_stmt 1 view .LVU1802
 6656 02f8 4FF47842 		mov	r2, #63488
 6657 02fc 1421     		movs	r1, #20
 6658 02fe 0846     		mov	r0, r1
 6659 0300 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6660              	.LVL603:
 350:Core/Src/Mytouch.c ****  						continue;
 6661              		.loc 1 350 8 view .LVU1803
 350:Core/Src/Mytouch.c ****  						continue;
 6662              		.loc 1 350 148 is_stmt 0 view .LVU1804
 6663 0304 9FED107B 		vldr.64	d7, .L365+16
 6664 0308 28EE078B 		vmul.f64	d8, d8, d7
 6665              	.LVL604:
 350:Core/Src/Mytouch.c ****  						continue;
 6666              		.loc 1 350 8 view .LVU1805
 6667 030c BCEEC88B 		vcvt.u32.f64	s16, d8
 6668 0310 18EE103A 		vmov	r3, s16	@ int
 6669 0314 9BB2     		uxth	r3, r3
 6670 0316 0493     		str	r3, [sp, #16]
 6671 0318 CDF80CB0 		str	fp, [sp, #12]
 6672 031c CDF808A0 		str	r10, [sp, #8]
 6673 0320 0196     		str	r6, [sp, #4]
 6674 0322 CDF80090 		str	r9, [sp]
 6675 0326 4346     		mov	r3, r8
 6676 0328 3A46     		mov	r2, r7
 6677 032a 2146     		mov	r1, r4
 6678 032c 2846     		mov	r0, r5
 6679 032e FFF7FEFF 		bl	TP_Adj_Info_Show
 6680              	.LVL605:
 351:Core/Src/Mytouch.c **** 					}
 6681              		.loc 1 351 8 is_stmt 1 view .LVU1806
 6682              	.LBE15:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6683              		.loc 1 311 11 is_stmt 0 view .LVU1807
 6684 0332 0024     		movs	r4, #0
 6685              	.LBB16:
 347:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6686              		.loc 1 347 10 view .LVU1808
 6687 0334 2546     		mov	r5, r4
 351:Core/Src/Mytouch.c **** 					}
 6688              		.loc 1 351 8 view .LVU1809
 6689 0336 A9E6     		b	.L338
 6690              	.L366:
 6691              		.align	3
 6692              	.L365:
 6693 0338 66666666 		.word	1717986918
 6694 033c 6666EE3F 		.word	1072588390
 6695 0340 CDCCCCCC 		.word	-858993459
 6696 0344 CCCCF03F 		.word	1072745676
 6697 0348 00000000 		.word	0
 6698 034c 00005940 		.word	1079574528
 6699 0350 00000000 		.word	POINT_COLOR
 6700 0354 00000000 		.word	BACK_COLOR
 6701 0358 00000000 		.word	.LC14
ARM GAS  /tmp/cckdBZRC.s 			page 160


 6702 035c 00000000 		.word	.LANCHOR2
 6703 0360 00000000 		.word	lcddev
 6704              	.LVL606:
 6705              	.L361:
 375:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[2][1]);//y1-y3
 6706              		.loc 1 375 6 is_stmt 1 view .LVU1810
 375:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[2][1]);//y1-y3
 6707              		.loc 1 375 29 is_stmt 0 view .LVU1811
 6708 0364 A7EB0903 		sub	r3, r7, r9
 375:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[2][1]);//y1-y3
 6709              		.loc 1 375 11 view .LVU1812
 6710 0368 002B     		cmp	r3, #0
 6711 036a B8BF     		it	lt
 6712 036c 5B42     		rsblt	r3, r3, #0
 6713              	.LVL607:
 376:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6714              		.loc 1 376 6 is_stmt 1 view .LVU1813
 376:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6715              		.loc 1 376 29 is_stmt 0 view .LVU1814
 6716 036e A8EB0602 		sub	r2, r8, r6
 376:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6717              		.loc 1 376 11 view .LVU1815
 6718 0372 002A     		cmp	r2, #0
 6719 0374 B8BF     		it	lt
 6720 0376 5242     		rsblt	r2, r2, #0
 6721              	.LVL608:
 377:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6722              		.loc 1 377 6 is_stmt 1 view .LVU1816
 378:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,4的距离
 6723              		.loc 1 378 6 view .LVU1817
 378:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,4的距离
 6724              		.loc 1 378 10 is_stmt 0 view .LVU1818
 6725 0378 02FB02F2 		mul	r2, r2, r2
 6726              	.LVL609:
 379:Core/Src/Mytouch.c **** 	
 6727              		.loc 1 379 6 is_stmt 1 view .LVU1819
 379:Core/Src/Mytouch.c **** 	
 6728              		.loc 1 379 18 is_stmt 0 view .LVU1820
 6729 037c 03FB0323 		mla	r3, r3, r3, r2
 6730              	.LVL610:
 379:Core/Src/Mytouch.c **** 	
 6731              		.loc 1 379 18 view .LVU1821
 6732 0380 00EE103A 		vmov	s0, r3	@ int
 6733              	.LVL611:
 379:Core/Src/Mytouch.c **** 	
 6734              		.loc 1 379 9 view .LVU1822
 6735 0384 B8EE400B 		vcvt.f64.u32	d0, s0
 6736 0388 FFF7FEFF 		bl	sqrt
 6737              	.LVL612:
 379:Core/Src/Mytouch.c **** 	
 6738              		.loc 1 379 8 view .LVU1823
 6739 038c BCEEC00B 		vcvt.u32.f64	s0, d0
 6740 0390 10EE103A 		vmov	r3, s0	@ int
 6741 0394 9BB2     		uxth	r3, r3
 6742 0396 08EE103A 		vmov	s16, r3	@ int
 6743              	.LVL613:
 381:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[3][1]);//y2-y4
ARM GAS  /tmp/cckdBZRC.s 			page 161


 6744              		.loc 1 381 6 is_stmt 1 view .LVU1824
 381:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[3][1]);//y2-y4
 6745              		.loc 1 381 29 is_stmt 0 view .LVU1825
 6746 039a A5EB0A03 		sub	r3, r5, r10
 381:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[3][1]);//y2-y4
 6747              		.loc 1 381 11 view .LVU1826
 6748 039e 002B     		cmp	r3, #0
 6749 03a0 B8BF     		it	lt
 6750 03a2 5B42     		rsblt	r3, r3, #0
 6751              	.LVL614:
 382:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6752              		.loc 1 382 6 is_stmt 1 view .LVU1827
 382:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6753              		.loc 1 382 29 is_stmt 0 view .LVU1828
 6754 03a4 A4EB0B02 		sub	r2, r4, fp
 382:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6755              		.loc 1 382 11 view .LVU1829
 6756 03a8 002A     		cmp	r2, #0
 6757 03aa B8BF     		it	lt
 6758 03ac 5242     		rsblt	r2, r2, #0
 6759              	.LVL615:
 383:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6760              		.loc 1 383 6 is_stmt 1 view .LVU1830
 384:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,3的距离
 6761              		.loc 1 384 6 view .LVU1831
 384:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,3的距离
 6762              		.loc 1 384 10 is_stmt 0 view .LVU1832
 6763 03ae 02FB02F2 		mul	r2, r2, r2
 6764              	.LVL616:
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6765              		.loc 1 385 6 is_stmt 1 view .LVU1833
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6766              		.loc 1 385 18 is_stmt 0 view .LVU1834
 6767 03b2 03FB0323 		mla	r3, r3, r3, r2
 6768              	.LVL617:
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6769              		.loc 1 385 18 view .LVU1835
 6770 03b6 00EE103A 		vmov	s0, r3	@ int
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6771              		.loc 1 385 9 view .LVU1836
 6772 03ba B8EE400B 		vcvt.f64.u32	d0, s0
 6773 03be FFF7FEFF 		bl	sqrt
 6774              	.LVL618:
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6775              		.loc 1 385 8 view .LVU1837
 6776 03c2 BCEEC00B 		vcvt.u32.f64	s0, d0
 6777 03c6 10EE103A 		vmov	r3, s0	@ int
 6778 03ca 9BB2     		uxth	r3, r3
 6779 03cc 00EE103A 		vmov	s0, r3	@ int
 6780              	.LVL619:
 386:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6781              		.loc 1 386 6 is_stmt 1 view .LVU1838
 386:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6782              		.loc 1 386 10 is_stmt 0 view .LVU1839
 6783 03d0 B8EE488A 		vcvt.f32.u32	s16, s16
 6784              	.LVL620:
 386:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
ARM GAS  /tmp/cckdBZRC.s 			page 162


 6785              		.loc 1 386 19 view .LVU1840
 6786 03d4 F8EEC07A 		vcvt.f32.s32	s15, s0
 6787 03d8 88EE277A 		vdiv.f32	s14, s16, s15
 386:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6788              		.loc 1 386 9 view .LVU1841
 6789 03dc B7EEC78A 		vcvt.f64.f32	d8, s14
 6790              	.LVL621:
 387:Core/Src/Mytouch.c **** 					{
 6791              		.loc 1 387 6 is_stmt 1 view .LVU1842
 387:Core/Src/Mytouch.c **** 					{
 6792              		.loc 1 387 8 is_stmt 0 view .LVU1843
 6793 03e0 9FED777B 		vldr.64	d7, .L367
 6794 03e4 B4EEC78B 		vcmpe.f64	d8, d7
 6795 03e8 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6796 03ec 00F18E80 		bmi	.L352
 387:Core/Src/Mytouch.c **** 					{
 6797              		.loc 1 387 17 discriminator 1 view .LVU1844
 6798 03f0 9FED757B 		vldr.64	d7, .L367+8
 6799 03f4 B4EEC78B 		vcmpe.f64	d8, d7
 6800 03f8 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6801 03fc 00F38680 		bgt	.L352
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6802              		.loc 1 396 6 is_stmt 1 view .LVU1845
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6803              		.loc 1 396 32 is_stmt 0 view .LVU1846
 6804 0400 754A     		ldr	r2, .L367+24
 6805 0402 B2F80080 		ldrh	r8, [r2]
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6806              		.loc 1 396 38 view .LVU1847
 6807 0406 A8F12803 		sub	r3, r8, #40
 6808 040a 07EE103A 		vmov	s14, r3	@ int
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6809              		.loc 1 396 18 view .LVU1848
 6810 040e B8EEC77A 		vcvt.f32.s32	s14, s14
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6811              		.loc 1 396 58 view .LVU1849
 6812 0412 7B1B     		subs	r3, r7, r5
 6813 0414 07EE903A 		vmov	s15, r3	@ int
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6814              		.loc 1 396 42 view .LVU1850
 6815 0418 F8EEE77A 		vcvt.f32.s32	s15, s15
 6816 041c 87EE270A 		vdiv.f32	s0, s14, s15
 6817              	.LVL622:
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6818              		.loc 1 396 17 view .LVU1851
 6819 0420 6E4B     		ldr	r3, .L367+28
 6820 0422 83ED090A 		vstr.32	s0, [r3, #36]
 397:Core/Src/Mytouch.c **** 						  
 6821              		.loc 1 397 6 is_stmt 1 view .LVU1852
 397:Core/Src/Mytouch.c **** 						  
 6822              		.loc 1 397 59 is_stmt 0 view .LVU1853
 6823 0426 E919     		adds	r1, r5, r7
 6824 0428 07EE901A 		vmov	s15, r1	@ int
 397:Core/Src/Mytouch.c **** 						  
 6825              		.loc 1 397 43 view .LVU1854
 6826 042c F8EEE77A 		vcvt.f32.s32	s15, s15
 6827 0430 67EE807A 		vmul.f32	s15, s15, s0
ARM GAS  /tmp/cckdBZRC.s 			page 163


 397:Core/Src/Mytouch.c **** 						  
 6828              		.loc 1 397 31 view .LVU1855
 6829 0434 07EE108A 		vmov	s14, r8	@ int
 6830 0438 B8EEC77A 		vcvt.f32.s32	s14, s14
 6831 043c 77EE677A 		vsub.f32	s15, s14, s15
 397:Core/Src/Mytouch.c **** 						  
 6832              		.loc 1 397 76 view .LVU1856
 6833 0440 F6EE006A 		vmov.f32	s13, #5.0e-1
 6834 0444 67EEA67A 		vmul.f32	s15, s15, s13
 397:Core/Src/Mytouch.c **** 						  
 6835              		.loc 1 397 17 view .LVU1857
 6836 0448 FDEEE77A 		vcvt.s32.f32	s15, s15
 6837 044c 17EE901A 		vmov	r1, s15	@ int
 6838 0450 9985     		strh	r1, [r3, #44]	@ movhi
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6839              		.loc 1 399 6 is_stmt 1 view .LVU1858
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6840              		.loc 1 399 32 is_stmt 0 view .LVU1859
 6841 0452 5588     		ldrh	r5, [r2, #2]
 6842              	.LVL623:
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6843              		.loc 1 399 39 view .LVU1860
 6844 0454 A5F12802 		sub	r2, r5, #40
 6845 0458 07EE102A 		vmov	s14, r2	@ int
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6846              		.loc 1 399 18 view .LVU1861
 6847 045c B8EEC77A 		vcvt.f32.s32	s14, s14
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6848              		.loc 1 399 59 view .LVU1862
 6849 0460 321B     		subs	r2, r6, r4
 6850 0462 07EE902A 		vmov	s15, r2	@ int
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6851              		.loc 1 399 43 view .LVU1863
 6852 0466 F8EEE77A 		vcvt.f32.s32	s15, s15
 6853 046a 87EE278A 		vdiv.f32	s16, s14, s15
 6854              	.LVL624:
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6855              		.loc 1 399 17 view .LVU1864
 6856 046e 83ED0A8A 		vstr.32	s16, [r3, #40]
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6857              		.loc 1 400 6 is_stmt 1 view .LVU1865
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6858              		.loc 1 400 60 is_stmt 0 view .LVU1866
 6859 0472 A219     		adds	r2, r4, r6
 6860 0474 07EE902A 		vmov	s15, r2	@ int
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6861              		.loc 1 400 44 view .LVU1867
 6862 0478 F8EEE77A 		vcvt.f32.s32	s15, s15
 6863 047c 67EE887A 		vmul.f32	s15, s15, s16
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6864              		.loc 1 400 32 view .LVU1868
 6865 0480 07EE105A 		vmov	s14, r5	@ int
 6866 0484 B8EEC77A 		vcvt.f32.s32	s14, s14
 6867 0488 77EE677A 		vsub.f32	s15, s14, s15
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6868              		.loc 1 400 77 view .LVU1869
 6869 048c 67EEA67A 		vmul.f32	s15, s15, s13
ARM GAS  /tmp/cckdBZRC.s 			page 164


 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6870              		.loc 1 400 17 view .LVU1870
 6871 0490 FDEEE77A 		vcvt.s32.f32	s15, s15
 6872 0494 17EE902A 		vmov	r2, s15	@ int
 6873 0498 DA85     		strh	r2, [r3, #46]	@ movhi
 401:Core/Src/Mytouch.c **** 					{
 6874              		.loc 1 401 6 is_stmt 1 view .LVU1871
 401:Core/Src/Mytouch.c **** 					{
 6875              		.loc 1 401 9 is_stmt 0 view .LVU1872
 6876 049a B7EEC00A 		vcvt.f64.f32	d0, s0
 6877 049e FFF7FEFF 		bl	abs
 6878              	.LVL625:
 401:Core/Src/Mytouch.c **** 					{
 6879              		.loc 1 401 8 view .LVU1873
 6880 04a2 0228     		cmp	r0, #2
 6881 04a4 05DC     		bgt	.L355
 401:Core/Src/Mytouch.c **** 					{
 6882              		.loc 1 401 29 discriminator 1 view .LVU1874
 6883 04a6 B7EEC80A 		vcvt.f64.f32	d0, s16
 6884 04aa FFF7FEFF 		bl	abs
 6885              	.LVL626:
 401:Core/Src/Mytouch.c **** 					{
 6886              		.loc 1 401 27 discriminator 1 view .LVU1875
 6887 04ae 0228     		cmp	r0, #2
 6888 04b0 5EDD     		ble	.L356
 6889              	.L355:
 403:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6890              		.loc 1 403 7 is_stmt 1 view .LVU1876
 6891              	.LVL627:
 404:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6892              		.loc 1 404 11 view .LVU1877
 6893 04b2 A5F11401 		sub	r1, r5, #20
 6894 04b6 A8F11400 		sub	r0, r8, #20
 6895 04ba 4FF6FF72 		movw	r2, #65535
 6896 04be 89B2     		uxth	r1, r1
 6897 04c0 80B2     		uxth	r0, r0
 6898 04c2 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6899              	.LVL628:
 405:Core/Src/Mytouch.c **** 						LCD_ShowString(40,26,lcddev.width,lcddev.height,16,"TP Need readjust!");
 6900              		.loc 1 405 11 view .LVU1878
 6901 04c6 4FF47842 		mov	r2, #63488
 6902 04ca 1421     		movs	r1, #20
 6903 04cc 0846     		mov	r0, r1
 6904 04ce FFF7FEFF 		bl	TP_Drow_Touch_Point
 6905              	.LVL629:
 406:Core/Src/Mytouch.c **** 						tp_dev.touchtype=!tp_dev.touchtype;//修改触屏类型.
 6906              		.loc 1 406 7 view .LVU1879
 6907 04d2 414A     		ldr	r2, .L367+24
 6908 04d4 424B     		ldr	r3, .L367+32
 6909 04d6 0193     		str	r3, [sp, #4]
 6910 04d8 1023     		movs	r3, #16
 6911 04da 0093     		str	r3, [sp]
 6912 04dc 5388     		ldrh	r3, [r2, #2]
 6913 04de 1288     		ldrh	r2, [r2]
 6914 04e0 1A21     		movs	r1, #26
 6915 04e2 2820     		movs	r0, #40
 6916 04e4 FFF7FEFF 		bl	LCD_ShowString
ARM GAS  /tmp/cckdBZRC.s 			page 165


 6917              	.LVL630:
 407:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6918              		.loc 1 407 7 view .LVU1880
 407:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6919              		.loc 1 407 31 is_stmt 0 view .LVU1881
 6920 04e8 3C4A     		ldr	r2, .L367+28
 6921 04ea 92F83030 		ldrb	r3, [r2, #48]	@ zero_extendqisi2
 407:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6922              		.loc 1 407 24 view .LVU1882
 6923 04ee B3FA83F3 		clz	r3, r3
 6924 04f2 5B09     		lsrs	r3, r3, #5
 407:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6925              		.loc 1 407 23 view .LVU1883
 6926 04f4 82F83030 		strb	r3, [r2, #48]
 408:Core/Src/Mytouch.c **** 						{
 6927              		.loc 1 408 7 is_stmt 1 view .LVU1884
 408:Core/Src/Mytouch.c **** 						{
 6928              		.loc 1 408 9 is_stmt 0 view .LVU1885
 6929 04f8 9BB3     		cbz	r3, .L357
 410:Core/Src/Mytouch.c **** 							CMD_RDY=0XD0;	 
 6930              		.loc 1 410 8 is_stmt 1 view .LVU1886
 410:Core/Src/Mytouch.c **** 							CMD_RDY=0XD0;	 
 6931              		.loc 1 410 15 is_stmt 0 view .LVU1887
 6932 04fa 3A4B     		ldr	r3, .L367+36
 6933 04fc 9022     		movs	r2, #144
 6934 04fe 1A70     		strb	r2, [r3]
 411:Core/Src/Mytouch.c **** 						}else				   //X,Y方向与屏幕相同
 6935              		.loc 1 411 8 is_stmt 1 view .LVU1888
 411:Core/Src/Mytouch.c **** 						}else				   //X,Y方向与屏幕相同
 6936              		.loc 1 411 15 is_stmt 0 view .LVU1889
 6937 0500 394B     		ldr	r3, .L367+40
 6938 0502 D022     		movs	r2, #208
 6939 0504 1A70     		strb	r2, [r3]
 6940              	.L358:
 417:Core/Src/Mytouch.c **** 					}		
 6941              		.loc 1 417 7 is_stmt 1 view .LVU1890
 6942              	.LBE16:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6943              		.loc 1 311 11 is_stmt 0 view .LVU1891
 6944 0506 0024     		movs	r4, #0
 6945              	.LVL631:
 6946              	.LBB17:
 403:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6947              		.loc 1 403 10 view .LVU1892
 6948 0508 2546     		mov	r5, r4
 417:Core/Src/Mytouch.c **** 					}		
 6949              		.loc 1 417 7 view .LVU1893
 6950 050a BFE5     		b	.L338
 6951              	.LVL632:
 6952              	.L352:
 389:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6953              		.loc 1 389 7 is_stmt 1 view .LVU1894
 390:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6954              		.loc 1 390 11 view .LVU1895
 390:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6955              		.loc 1 390 37 is_stmt 0 view .LVU1896
 6956 050c 324B     		ldr	r3, .L367+24
ARM GAS  /tmp/cckdBZRC.s 			page 166


 6957 050e 1888     		ldrh	r0, [r3]
 390:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6958              		.loc 1 390 53 view .LVU1897
 6959 0510 5988     		ldrh	r1, [r3, #2]
 390:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6960              		.loc 1 390 11 view .LVU1898
 6961 0512 1439     		subs	r1, r1, #20
 6962 0514 1438     		subs	r0, r0, #20
 6963 0516 4FF6FF72 		movw	r2, #65535
 6964 051a 89B2     		uxth	r1, r1
 6965 051c 80B2     		uxth	r0, r0
 6966 051e FFF7FEFF 		bl	TP_Drow_Touch_Point
 6967              	.LVL633:
 391:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 6968              		.loc 1 391 11 is_stmt 1 view .LVU1899
 6969 0522 4FF47842 		mov	r2, #63488
 6970 0526 1421     		movs	r1, #20
 6971 0528 0846     		mov	r0, r1
 6972 052a FFF7FEFF 		bl	TP_Drow_Touch_Point
 6973              	.LVL634:
 392:Core/Src/Mytouch.c **** 						continue;
 6974              		.loc 1 392 8 view .LVU1900
 392:Core/Src/Mytouch.c **** 						continue;
 6975              		.loc 1 392 148 is_stmt 0 view .LVU1901
 6976 052e 9FED287B 		vldr.64	d7, .L367+16
 6977 0532 28EE078B 		vmul.f64	d8, d8, d7
 6978              	.LVL635:
 392:Core/Src/Mytouch.c **** 						continue;
 6979              		.loc 1 392 8 view .LVU1902
 6980 0536 BCEEC88B 		vcvt.u32.f64	s16, d8
 6981 053a 18EE103A 		vmov	r3, s16	@ int
 6982 053e 9BB2     		uxth	r3, r3
 6983 0540 0493     		str	r3, [sp, #16]
 6984 0542 CDF80CB0 		str	fp, [sp, #12]
 6985 0546 CDF808A0 		str	r10, [sp, #8]
 6986 054a 0196     		str	r6, [sp, #4]
 6987 054c CDF80090 		str	r9, [sp]
 6988 0550 4346     		mov	r3, r8
 6989 0552 3A46     		mov	r2, r7
 6990 0554 2146     		mov	r1, r4
 6991 0556 2846     		mov	r0, r5
 6992 0558 FFF7FEFF 		bl	TP_Adj_Info_Show
 6993              	.LVL636:
 393:Core/Src/Mytouch.c **** 					}//正确了
 6994              		.loc 1 393 7 is_stmt 1 view .LVU1903
 6995              	.LBE17:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6996              		.loc 1 311 11 is_stmt 0 view .LVU1904
 6997 055c 0024     		movs	r4, #0
 6998              	.LVL637:
 6999              	.LBB18:
 389:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 7000              		.loc 1 389 10 view .LVU1905
 7001 055e 2546     		mov	r5, r4
 7002              	.LVL638:
 393:Core/Src/Mytouch.c **** 					}//正确了
 7003              		.loc 1 393 7 view .LVU1906
ARM GAS  /tmp/cckdBZRC.s 			page 167


 7004 0560 94E5     		b	.L338
 7005              	.LVL639:
 7006              	.L357:
 414:Core/Src/Mytouch.c **** 							CMD_RDY=0X90;	 
 7007              		.loc 1 414 8 is_stmt 1 view .LVU1907
 414:Core/Src/Mytouch.c **** 							CMD_RDY=0X90;	 
 7008              		.loc 1 414 15 is_stmt 0 view .LVU1908
 7009 0562 204B     		ldr	r3, .L367+36
 7010 0564 D022     		movs	r2, #208
 7011 0566 1A70     		strb	r2, [r3]
 415:Core/Src/Mytouch.c **** 						}			    
 7012              		.loc 1 415 8 is_stmt 1 view .LVU1909
 415:Core/Src/Mytouch.c **** 						}			    
 7013              		.loc 1 415 15 is_stmt 0 view .LVU1910
 7014 0568 1F4B     		ldr	r3, .L367+40
 7015 056a 9022     		movs	r2, #144
 7016 056c 1A70     		strb	r2, [r3]
 7017 056e CAE7     		b	.L358
 7018              	.LVL640:
 7019              	.L356:
 419:Core/Src/Mytouch.c **** 					LCD_Clear(WHITE);//清屏
 7020              		.loc 1 419 6 is_stmt 1 view .LVU1911
 419:Core/Src/Mytouch.c **** 					LCD_Clear(WHITE);//清屏
 7021              		.loc 1 419 17 is_stmt 0 view .LVU1912
 7022 0570 1E4B     		ldr	r3, .L367+44
 7023 0572 1F22     		movs	r2, #31
 7024 0574 1A60     		str	r2, [r3]
 420:Core/Src/Mytouch.c **** 					LCD_ShowString(35,110,lcddev.width,lcddev.height,16,"Touch Screen Adjust OK!");//校正完成
 7025              		.loc 1 420 6 is_stmt 1 view .LVU1913
 7026 0576 4FF6FF70 		movw	r0, #65535
 7027 057a FFF7FEFF 		bl	LCD_Clear
 7028              	.LVL641:
 421:Core/Src/Mytouch.c **** 					HAL_Delay(1000);
 7029              		.loc 1 421 6 view .LVU1914
 7030 057e 164A     		ldr	r2, .L367+24
 7031 0580 1B4B     		ldr	r3, .L367+48
 7032 0582 0193     		str	r3, [sp, #4]
 7033 0584 1023     		movs	r3, #16
 7034 0586 0093     		str	r3, [sp]
 7035 0588 5388     		ldrh	r3, [r2, #2]
 7036 058a 1288     		ldrh	r2, [r2]
 7037 058c 6E21     		movs	r1, #110
 7038 058e 2320     		movs	r0, #35
 7039 0590 FFF7FEFF 		bl	LCD_ShowString
 7040              	.LVL642:
 422:Core/Src/Mytouch.c **** 					TP_Save_Adjdata();  
 7041              		.loc 1 422 6 view .LVU1915
 7042 0594 4FF47A70 		mov	r0, #1000
 7043 0598 FFF7FEFF 		bl	HAL_Delay
 7044              	.LVL643:
 423:Core/Src/Mytouch.c ****  					LCD_Clear(WHITE);//清屏   
 7045              		.loc 1 423 6 view .LVU1916
 7046 059c FFF7FEFF 		bl	TP_Save_Adjdata
 7047              	.LVL644:
 424:Core/Src/Mytouch.c **** 					return;//校正完成				 
 7048              		.loc 1 424 7 view .LVU1917
 7049 05a0 4FF6FF70 		movw	r0, #65535
ARM GAS  /tmp/cckdBZRC.s 			page 168


 7050 05a4 FFF7FEFF 		bl	LCD_Clear
 7051              	.LVL645:
 425:Core/Src/Mytouch.c **** 			}
 7052              		.loc 1 425 6 view .LVU1918
 7053 05a8 03E0     		b	.L337
 7054              	.LVL646:
 7055              	.L360:
 425:Core/Src/Mytouch.c **** 			}
 7056              		.loc 1 425 6 is_stmt 0 view .LVU1919
 7057              	.LBE18:
 317:Core/Src/Mytouch.c **** 			{			   
 7058              		.loc 1 317 4 view .LVU1920
 7059 05aa 0024     		movs	r4, #0
 7060 05ac 65E5     		b	.L339
 7061              	.LVL647:
 7062              	.L364:
 432:Core/Src/Mytouch.c **** 			break;
 7063              		.loc 1 432 4 is_stmt 1 view .LVU1921
 7064 05ae FFF7FEFF 		bl	TP_Get_Adjdata
 7065              	.LVL648:
 433:Core/Src/Mytouch.c **** 	 	} 
 7066              		.loc 1 433 4 view .LVU1922
 7067              	.L337:
 436:Core/Src/Mytouch.c **** //触摸屏初始化  		    
 7068              		.loc 1 436 1 is_stmt 0 view .LVU1923
 7069 05b2 0BB0     		add	sp, sp, #44
 7070              	.LCFI89:
 7071              		.cfi_def_cfa_offset 52
 7072              		@ sp needed
 7073 05b4 BDEC048B 		vldm	sp!, {d8-d9}
 7074              	.LCFI90:
 7075              		.cfi_restore 82
 7076              		.cfi_restore 83
 7077              		.cfi_restore 80
 7078              		.cfi_restore 81
 7079              		.cfi_def_cfa_offset 36
 7080 05b8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7081              	.L368:
 7082 05bc AFF30080 		.align	3
 7083              	.L367:
 7084 05c0 66666666 		.word	1717986918
 7085 05c4 6666EE3F 		.word	1072588390
 7086 05c8 CDCCCCCC 		.word	-858993459
 7087 05cc CCCCF03F 		.word	1072745676
 7088 05d0 00000000 		.word	0
 7089 05d4 00005940 		.word	1079574528
 7090 05d8 00000000 		.word	lcddev
 7091 05dc 00000000 		.word	.LANCHOR2
 7092 05e0 7C000000 		.word	.LC15
 7093 05e4 00000000 		.word	.LANCHOR0
 7094 05e8 00000000 		.word	.LANCHOR1
 7095 05ec 00000000 		.word	POINT_COLOR
 7096 05f0 90000000 		.word	.LC16
 7097              		.cfi_endproc
 7098              	.LFE158:
 7100              		.section	.text.TP_Init,"ax",%progbits
 7101              		.align	1
ARM GAS  /tmp/cckdBZRC.s 			page 169


 7102              		.global	TP_Init
 7103              		.syntax unified
 7104              		.thumb
 7105              		.thumb_func
 7107              	TP_Init:
 7108              	.LFB159:
 441:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 7109              		.loc 1 441 1 is_stmt 1 view -0
 7110              		.cfi_startproc
 7111              		@ args = 0, pretend = 0, frame = 32
 7112              		@ frame_needed = 0, uses_anonymous_args = 0
 7113 0000 10B5     		push	{r4, lr}
 7114              	.LCFI91:
 7115              		.cfi_def_cfa_offset 8
 7116              		.cfi_offset 4, -8
 7117              		.cfi_offset 14, -4
 7118 0002 88B0     		sub	sp, sp, #32
 7119              	.LCFI92:
 7120              		.cfi_def_cfa_offset 40
 442:Core/Src/Mytouch.c **** 	if(lcddev.id==0X5510||lcddev.id==0X4342||lcddev.id==0X4384) //4.3 800*40MCU电容触摸屏或者4.
 7121              		.loc 1 442 5 view .LVU1925
 443:Core/Src/Mytouch.c **** 	{
 7122              		.loc 1 443 2 view .LVU1926
 443:Core/Src/Mytouch.c **** 	{
 7123              		.loc 1 443 11 is_stmt 0 view .LVU1927
 7124 0004 564B     		ldr	r3, .L380
 7125 0006 9B88     		ldrh	r3, [r3, #4]
 443:Core/Src/Mytouch.c **** 	{
 7126              		.loc 1 443 4 view .LVU1928
 7127 0008 45F21051 		movw	r1, #21776
 7128 000c 44F24232 		movw	r2, #17218
 7129 0010 9342     		cmp	r3, r2
 7130 0012 18BF     		it	ne
 7131 0014 8B42     		cmpne	r3, r1
 7132 0016 63D0     		beq	.L370
 443:Core/Src/Mytouch.c **** 	{
 7133              		.loc 1 443 41 discriminator 1 view .LVU1929
 7134 0018 44F28432 		movw	r2, #17284
 7135 001c 9342     		cmp	r3, r2
 7136 001e 5FD0     		beq	.L370
 456:Core/Src/Mytouch.c **** 	{
 7137              		.loc 1 456 8 is_stmt 1 view .LVU1930
 456:Core/Src/Mytouch.c **** 	{
 7138              		.loc 1 456 10 is_stmt 0 view .LVU1931
 7139 0020 41F66311 		movw	r1, #6499
 7140 0024 47F28402 		movw	r2, #28804
 7141 0028 9342     		cmp	r3, r2
 7142 002a 18BF     		it	ne
 7143 002c 8B42     		cmpne	r3, r1
 7144 002e 75D0     		beq	.L375
 456:Core/Src/Mytouch.c **** 	{
 7145              		.loc 1 456 47 discriminator 1 view .LVU1932
 7146 0030 47F21602 		movw	r2, #28694
 7147 0034 9342     		cmp	r3, r2
 7148 0036 71D0     		beq	.L375
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7149              		.loc 1 466 3 is_stmt 1 view .LVU1933
ARM GAS  /tmp/cckdBZRC.s 			page 170


 7150              	.LBB19:
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7151              		.loc 1 466 3 view .LVU1934
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7152              		.loc 1 466 3 view .LVU1935
 7153 0038 4A4B     		ldr	r3, .L380+4
 7154 003a D3F8E020 		ldr	r2, [r3, #224]
 7155 003e 42F08002 		orr	r2, r2, #128
 7156 0042 C3F8E020 		str	r2, [r3, #224]
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7157              		.loc 1 466 3 view .LVU1936
 7158 0046 D3F8E020 		ldr	r2, [r3, #224]
 7159 004a 02F08002 		and	r2, r2, #128
 7160 004e 0092     		str	r2, [sp]
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7161              		.loc 1 466 3 view .LVU1937
 7162 0050 009A     		ldr	r2, [sp]
 7163              	.LBE19:
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7164              		.loc 1 466 3 view .LVU1938
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7165              		.loc 1 467 3 view .LVU1939
 7166              	.LBB20:
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7167              		.loc 1 467 3 view .LVU1940
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7168              		.loc 1 467 3 view .LVU1941
 7169 0052 D3F8E020 		ldr	r2, [r3, #224]
 7170 0056 42F48072 		orr	r2, r2, #256
 7171 005a C3F8E020 		str	r2, [r3, #224]
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7172              		.loc 1 467 3 view .LVU1942
 7173 005e D3F8E020 		ldr	r2, [r3, #224]
 7174 0062 02F48072 		and	r2, r2, #256
 7175 0066 0192     		str	r2, [sp, #4]
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7176              		.loc 1 467 3 view .LVU1943
 7177 0068 019A     		ldr	r2, [sp, #4]
 7178              	.LBE20:
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7179              		.loc 1 467 3 view .LVU1944
 468:Core/Src/Mytouch.c ****         
 7180              		.loc 1 468 3 view .LVU1945
 7181              	.LBB21:
 468:Core/Src/Mytouch.c ****         
 7182              		.loc 1 468 3 view .LVU1946
 468:Core/Src/Mytouch.c ****         
 7183              		.loc 1 468 3 view .LVU1947
 7184 006a D3F8E020 		ldr	r2, [r3, #224]
 7185 006e 42F04002 		orr	r2, r2, #64
 7186 0072 C3F8E020 		str	r2, [r3, #224]
 468:Core/Src/Mytouch.c ****         
 7187              		.loc 1 468 3 view .LVU1948
 7188 0076 D3F8E030 		ldr	r3, [r3, #224]
 7189 007a 03F04003 		and	r3, r3, #64
 7190 007e 0293     		str	r3, [sp, #8]
 468:Core/Src/Mytouch.c ****         
ARM GAS  /tmp/cckdBZRC.s 			page 171


 7191              		.loc 1 468 3 view .LVU1949
 7192 0080 029B     		ldr	r3, [sp, #8]
 7193              	.LBE21:
 468:Core/Src/Mytouch.c ****         
 7194              		.loc 1 468 3 view .LVU1950
 471:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 7195              		.loc 1 471 3 view .LVU1951
 471:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 7196              		.loc 1 471 19 is_stmt 0 view .LVU1952
 7197 0082 4023     		movs	r3, #64
 7198 0084 0393     		str	r3, [sp, #12]
 472:Core/Src/Mytouch.c **** 		GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 7199              		.loc 1 472 3 is_stmt 1 view .LVU1953
 472:Core/Src/Mytouch.c **** 		GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 7200              		.loc 1 472 20 is_stmt 0 view .LVU1954
 7201 0086 0123     		movs	r3, #1
 7202 0088 0493     		str	r3, [sp, #16]
 473:Core/Src/Mytouch.c **** 		GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 7203              		.loc 1 473 3 is_stmt 1 view .LVU1955
 473:Core/Src/Mytouch.c **** 		GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 7204              		.loc 1 473 20 is_stmt 0 view .LVU1956
 7205 008a 0593     		str	r3, [sp, #20]
 474:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 7206              		.loc 1 474 3 is_stmt 1 view .LVU1957
 474:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 7207              		.loc 1 474 21 is_stmt 0 view .LVU1958
 7208 008c 0323     		movs	r3, #3
 7209 008e 0693     		str	r3, [sp, #24]
 475:Core/Src/Mytouch.c ****         
 7210              		.loc 1 475 3 is_stmt 1 view .LVU1959
 7211 0090 354C     		ldr	r4, .L380+8
 7212 0092 03A9     		add	r1, sp, #12
 7213 0094 2046     		mov	r0, r4
 7214 0096 FFF7FEFF 		bl	HAL_GPIO_Init
 7215              	.LVL649:
 478:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 7216              		.loc 1 478 3 view .LVU1960
 478:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 7217              		.loc 1 478 19 is_stmt 0 view .LVU1961
 7218 009a 4FF48473 		mov	r3, #264
 7219 009e 0393     		str	r3, [sp, #12]
 479:Core/Src/Mytouch.c ****         
 7220              		.loc 1 479 3 is_stmt 1 view .LVU1962
 7221 00a0 03A9     		add	r1, sp, #12
 7222 00a2 3248     		ldr	r0, .L380+12
 7223 00a4 FFF7FEFF 		bl	HAL_GPIO_Init
 7224              	.LVL650:
 482:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 7225              		.loc 1 482 3 view .LVU1963
 482:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 7226              		.loc 1 482 19 is_stmt 0 view .LVU1964
 7227 00a8 8023     		movs	r3, #128
 7228 00aa 0393     		str	r3, [sp, #12]
 483:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 7229              		.loc 1 483 3 is_stmt 1 view .LVU1965
 483:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 7230              		.loc 1 483 20 is_stmt 0 view .LVU1966
ARM GAS  /tmp/cckdBZRC.s 			page 172


 7231 00ac 0023     		movs	r3, #0
 7232 00ae 0493     		str	r3, [sp, #16]
 484:Core/Src/Mytouch.c ****         
 7233              		.loc 1 484 3 is_stmt 1 view .LVU1967
 7234 00b0 03A9     		add	r1, sp, #12
 7235 00b2 2046     		mov	r0, r4
 7236 00b4 FFF7FEFF 		bl	HAL_GPIO_Init
 7237              	.LVL651:
 487:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOG,&GPIO_Initure);     //初始化
 7238              		.loc 1 487 3 view .LVU1968
 487:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOG,&GPIO_Initure);     //初始化
 7239              		.loc 1 487 19 is_stmt 0 view .LVU1969
 7240 00b8 0823     		movs	r3, #8
 7241 00ba 0393     		str	r3, [sp, #12]
 488:Core/Src/Mytouch.c ****         
 7242              		.loc 1 488 3 is_stmt 1 view .LVU1970
 7243 00bc 03A9     		add	r1, sp, #12
 7244 00be 2C48     		ldr	r0, .L380+16
 7245 00c0 FFF7FEFF 		bl	HAL_GPIO_Init
 7246              	.LVL652:
 490:Core/Src/Mytouch.c **** 		AT24CXX_Init();		//初始化24CXX
 7247              		.loc 1 490 3 view .LVU1971
 7248 00c4 2B48     		ldr	r0, .L380+20
 7249 00c6 00F11601 		add	r1, r0, #22
 7250 00ca 0C30     		adds	r0, r0, #12
 7251 00cc FFF7FEFF 		bl	TP_Read_XY
 7252              	.LVL653:
 491:Core/Src/Mytouch.c **** 		if(TP_Get_Adjdata())return 0;//已经校准
 7253              		.loc 1 491 3 view .LVU1972
 7254 00d0 FFF7FEFF 		bl	AT24CXX_Init
 7255              	.LVL654:
 492:Core/Src/Mytouch.c **** 		else			   //未校准?
 7256              		.loc 1 492 3 view .LVU1973
 492:Core/Src/Mytouch.c **** 		else			   //未校准?
 7257              		.loc 1 492 6 is_stmt 0 view .LVU1974
 7258 00d4 FFF7FEFF 		bl	TP_Get_Adjdata
 7259              	.LVL655:
 492:Core/Src/Mytouch.c **** 		else			   //未校准?
 7260              		.loc 1 492 5 view .LVU1975
 7261 00d8 0028     		cmp	r0, #0
 7262 00da 34D0     		beq	.L379
 492:Core/Src/Mytouch.c **** 		else			   //未校准?
 7263              		.loc 1 492 30 view .LVU1976
 7264 00dc 0020     		movs	r0, #0
 7265 00de 15E0     		b	.L374
 7266              	.L370:
 445:Core/Src/Mytouch.c **** 		{ 
 7267              		.loc 1 445 3 is_stmt 1 view .LVU1977
 445:Core/Src/Mytouch.c **** 		{ 
 7268              		.loc 1 445 6 is_stmt 0 view .LVU1978
 7269 00e0 FFF7FEFF 		bl	GT9147_Init
 7270              	.LVL656:
 445:Core/Src/Mytouch.c **** 		{ 
 7271              		.loc 1 445 5 view .LVU1979
 7272 00e4 A0B9     		cbnz	r0, .L372
 447:Core/Src/Mytouch.c **** 		}else
 7273              		.loc 1 447 4 is_stmt 1 view .LVU1980
ARM GAS  /tmp/cckdBZRC.s 			page 173


 447:Core/Src/Mytouch.c **** 		}else
 7274              		.loc 1 447 15 is_stmt 0 view .LVU1981
 7275 00e6 234B     		ldr	r3, .L380+20
 7276 00e8 234A     		ldr	r2, .L380+24
 7277 00ea 5A60     		str	r2, [r3, #4]
 7278              	.L373:
 453:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 7279              		.loc 1 453 3 is_stmt 1 view .LVU1982
 453:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 7280              		.loc 1 453 19 is_stmt 0 view .LVU1983
 7281 00ec 2149     		ldr	r1, .L380+20
 7282 00ee 91F83030 		ldrb	r3, [r1, #48]	@ zero_extendqisi2
 7283 00f2 43F08002 		orr	r2, r3, #128
 7284 00f6 81F83020 		strb	r2, [r1, #48]
 454:Core/Src/Mytouch.c **** 		return 0;
 7285              		.loc 1 454 3 is_stmt 1 view .LVU1984
 454:Core/Src/Mytouch.c **** 		return 0;
 7286              		.loc 1 454 27 is_stmt 0 view .LVU1985
 7287 00fa 194B     		ldr	r3, .L380
 7288 00fc 93F90630 		ldrsb	r3, [r3, #6]
 454:Core/Src/Mytouch.c **** 		return 0;
 7289              		.loc 1 454 31 view .LVU1986
 7290 0100 03F00103 		and	r3, r3, #1
 454:Core/Src/Mytouch.c **** 		return 0;
 7291              		.loc 1 454 19 view .LVU1987
 7292 0104 1343     		orrs	r3, r3, r2
 7293 0106 81F83030 		strb	r3, [r1, #48]
 455:Core/Src/Mytouch.c **** 	}else if(lcddev.id==0X1963||lcddev.id==0X7084||lcddev.id==0X7016)//SSD1963 7寸屏或者 7寸800*4
 7294              		.loc 1 455 3 is_stmt 1 view .LVU1988
 455:Core/Src/Mytouch.c **** 	}else if(lcddev.id==0X1963||lcddev.id==0X7084||lcddev.id==0X7016)//SSD1963 7寸屏或者 7寸800*4
 7295              		.loc 1 455 10 is_stmt 0 view .LVU1989
 7296 010a 0020     		movs	r0, #0
 7297              	.L374:
 502:Core/Src/Mytouch.c **** 
 7298              		.loc 1 502 1 view .LVU1990
 7299 010c 08B0     		add	sp, sp, #32
 7300              	.LCFI93:
 7301              		.cfi_remember_state
 7302              		.cfi_def_cfa_offset 8
 7303              		@ sp needed
 7304 010e 10BD     		pop	{r4, pc}
 7305              	.L372:
 7306              	.LCFI94:
 7307              		.cfi_restore_state
 450:Core/Src/Mytouch.c **** 			tp_dev.scan=OTT2001A_Scan;	//扫描函数指向OTT2001A触摸屏扫描
 7308              		.loc 1 450 4 is_stmt 1 view .LVU1991
 7309 0110 FFF7FEFF 		bl	OTT2001A_Init
 7310              	.LVL657:
 451:Core/Src/Mytouch.c **** 		}
 7311              		.loc 1 451 4 view .LVU1992
 451:Core/Src/Mytouch.c **** 		}
 7312              		.loc 1 451 15 is_stmt 0 view .LVU1993
 7313 0114 174B     		ldr	r3, .L380+20
 7314 0116 194A     		ldr	r2, .L380+28
 7315 0118 5A60     		str	r2, [r3, #4]
 7316 011a E7E7     		b	.L373
 7317              	.L375:
ARM GAS  /tmp/cckdBZRC.s 			page 174


 458:Core/Src/Mytouch.c **** 		tp_dev.scan=FT5206_Scan;		//扫描函数指向GT9147触摸屏扫描		
 7318              		.loc 1 458 3 is_stmt 1 view .LVU1994
 7319 011c FFF7FEFF 		bl	FT5206_Init
 7320              	.LVL658:
 459:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=0X80;			//电容屏 
 7321              		.loc 1 459 3 view .LVU1995
 459:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=0X80;			//电容屏 
 7322              		.loc 1 459 14 is_stmt 0 view .LVU1996
 7323 0120 144A     		ldr	r2, .L380+20
 7324 0122 174B     		ldr	r3, .L380+32
 7325 0124 5360     		str	r3, [r2, #4]
 460:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 7326              		.loc 1 460 3 is_stmt 1 view .LVU1997
 460:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 7327              		.loc 1 460 19 is_stmt 0 view .LVU1998
 7328 0126 92F83030 		ldrb	r3, [r2, #48]	@ zero_extendqisi2
 7329 012a 43F08001 		orr	r1, r3, #128
 7330 012e 82F83010 		strb	r1, [r2, #48]
 461:Core/Src/Mytouch.c **** 		return 0;
 7331              		.loc 1 461 3 is_stmt 1 view .LVU1999
 461:Core/Src/Mytouch.c **** 		return 0;
 7332              		.loc 1 461 27 is_stmt 0 view .LVU2000
 7333 0132 0B4B     		ldr	r3, .L380
 7334 0134 93F90630 		ldrsb	r3, [r3, #6]
 461:Core/Src/Mytouch.c **** 		return 0;
 7335              		.loc 1 461 31 view .LVU2001
 7336 0138 03F00103 		and	r3, r3, #1
 461:Core/Src/Mytouch.c **** 		return 0;
 7337              		.loc 1 461 19 view .LVU2002
 7338 013c 0B43     		orrs	r3, r3, r1
 7339 013e 82F83030 		strb	r3, [r2, #48]
 462:Core/Src/Mytouch.c **** 	}else
 7340              		.loc 1 462 3 is_stmt 1 view .LVU2003
 462:Core/Src/Mytouch.c **** 	}else
 7341              		.loc 1 462 10 is_stmt 0 view .LVU2004
 7342 0142 0020     		movs	r0, #0
 7343 0144 E2E7     		b	.L374
 7344              	.L379:
 495:Core/Src/Mytouch.c **** 			TP_Adjust();  	//屏幕校准 
 7345              		.loc 1 495 4 is_stmt 1 view .LVU2005
 7346 0146 4FF6FF70 		movw	r0, #65535
 7347 014a FFF7FEFF 		bl	LCD_Clear
 7348              	.LVL659:
 496:Core/Src/Mytouch.c **** 			TP_Save_Adjdata();	 
 7349              		.loc 1 496 4 view .LVU2006
 7350 014e FFF7FEFF 		bl	TP_Adjust
 7351              	.LVL660:
 497:Core/Src/Mytouch.c **** 		}			
 7352              		.loc 1 497 4 view .LVU2007
 7353 0152 FFF7FEFF 		bl	TP_Save_Adjdata
 7354              	.LVL661:
 499:Core/Src/Mytouch.c **** 	}
 7355              		.loc 1 499 3 view .LVU2008
 7356 0156 FFF7FEFF 		bl	TP_Get_Adjdata
 7357              	.LVL662:
 501:Core/Src/Mytouch.c **** }
 7358              		.loc 1 501 2 view .LVU2009
ARM GAS  /tmp/cckdBZRC.s 			page 175


 501:Core/Src/Mytouch.c **** }
 7359              		.loc 1 501 9 is_stmt 0 view .LVU2010
 7360 015a 0120     		movs	r0, #1
 7361 015c D6E7     		b	.L374
 7362              	.L381:
 7363 015e 00BF     		.align	2
 7364              	.L380:
 7365 0160 00000000 		.word	lcddev
 7366 0164 00440258 		.word	1476543488
 7367 0168 001C0258 		.word	1476533248
 7368 016c 00200258 		.word	1476534272
 7369 0170 00180258 		.word	1476532224
 7370 0174 00000000 		.word	.LANCHOR2
 7371 0178 00000000 		.word	GT9147_Scan
 7372 017c 00000000 		.word	OTT2001A_Scan
 7373 0180 00000000 		.word	FT5206_Scan
 7374              		.cfi_endproc
 7375              	.LFE159:
 7377              		.section	.text.AT24CXX_Check,"ax",%progbits
 7378              		.align	1
 7379              		.global	AT24CXX_Check
 7380              		.syntax unified
 7381              		.thumb
 7382              		.thumb_func
 7384              	AT24CXX_Check:
 7385              	.LFB188:
1361:Core/Src/Mytouch.c **** 	u8 temp;
 7386              		.loc 1 1361 1 is_stmt 1 view -0
 7387              		.cfi_startproc
 7388              		@ args = 0, pretend = 0, frame = 0
 7389              		@ frame_needed = 0, uses_anonymous_args = 0
 7390 0000 08B5     		push	{r3, lr}
 7391              	.LCFI95:
 7392              		.cfi_def_cfa_offset 8
 7393              		.cfi_offset 3, -8
 7394              		.cfi_offset 14, -4
1362:Core/Src/Mytouch.c **** 	temp=AT24CXX_ReadOneByte(255);//避免每次开机都写AT24CXX			   
 7395              		.loc 1 1362 2 view .LVU2012
1363:Core/Src/Mytouch.c **** 	if(temp==0X55)return 0;		   
 7396              		.loc 1 1363 2 view .LVU2013
1363:Core/Src/Mytouch.c **** 	if(temp==0X55)return 0;		   
 7397              		.loc 1 1363 7 is_stmt 0 view .LVU2014
 7398 0002 FF20     		movs	r0, #255
 7399 0004 FFF7FEFF 		bl	AT24CXX_ReadOneByte
 7400              	.LVL663:
1364:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
 7401              		.loc 1 1364 2 is_stmt 1 view .LVU2015
1364:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
 7402              		.loc 1 1364 4 is_stmt 0 view .LVU2016
 7403 0008 5528     		cmp	r0, #85
 7404 000a 0AD0     		beq	.L384
1367:Core/Src/Mytouch.c **** 	    temp=AT24CXX_ReadOneByte(255);	  
 7405              		.loc 1 1367 3 is_stmt 1 view .LVU2017
 7406 000c 5521     		movs	r1, #85
 7407 000e FF20     		movs	r0, #255
 7408              	.LVL664:
1367:Core/Src/Mytouch.c **** 	    temp=AT24CXX_ReadOneByte(255);	  
ARM GAS  /tmp/cckdBZRC.s 			page 176


 7409              		.loc 1 1367 3 is_stmt 0 view .LVU2018
 7410 0010 FFF7FEFF 		bl	AT24CXX_WriteOneByte
 7411              	.LVL665:
1368:Core/Src/Mytouch.c **** 		if(temp==0X55)return 0;
 7412              		.loc 1 1368 6 is_stmt 1 view .LVU2019
1368:Core/Src/Mytouch.c **** 		if(temp==0X55)return 0;
 7413              		.loc 1 1368 11 is_stmt 0 view .LVU2020
 7414 0014 FF20     		movs	r0, #255
 7415 0016 FFF7FEFF 		bl	AT24CXX_ReadOneByte
 7416              	.LVL666:
1369:Core/Src/Mytouch.c **** 	}
 7417              		.loc 1 1369 3 is_stmt 1 view .LVU2021
1369:Core/Src/Mytouch.c **** 	}
 7418              		.loc 1 1369 5 is_stmt 0 view .LVU2022
 7419 001a 5528     		cmp	r0, #85
 7420 001c 03D0     		beq	.L385
1371:Core/Src/Mytouch.c **** }
 7421              		.loc 1 1371 9 view .LVU2023
 7422 001e 0120     		movs	r0, #1
 7423              	.LVL667:
 7424              	.L383:
1372:Core/Src/Mytouch.c **** 
 7425              		.loc 1 1372 1 view .LVU2024
 7426 0020 08BD     		pop	{r3, pc}
 7427              	.LVL668:
 7428              	.L384:
1364:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
 7429              		.loc 1 1364 23 view .LVU2025
 7430 0022 0020     		movs	r0, #0
 7431              	.LVL669:
1364:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
 7432              		.loc 1 1364 23 view .LVU2026
 7433 0024 FCE7     		b	.L383
 7434              	.LVL670:
 7435              	.L385:
1369:Core/Src/Mytouch.c **** 	}
 7436              		.loc 1 1369 24 view .LVU2027
 7437 0026 0020     		movs	r0, #0
 7438              	.LVL671:
1369:Core/Src/Mytouch.c **** 	}
 7439              		.loc 1 1369 24 view .LVU2028
 7440 0028 FAE7     		b	.L383
 7441              		.cfi_endproc
 7442              	.LFE188:
 7444              		.section	.text.AT24CXX_Read,"ax",%progbits
 7445              		.align	1
 7446              		.global	AT24CXX_Read
 7447              		.syntax unified
 7448              		.thumb
 7449              		.thumb_func
 7451              	AT24CXX_Read:
 7452              	.LVL672:
 7453              	.LFB189:
1379:Core/Src/Mytouch.c **** 	while(NumToRead)
 7454              		.loc 1 1379 1 is_stmt 1 view -0
 7455              		.cfi_startproc
 7456              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cckdBZRC.s 			page 177


 7457              		@ frame_needed = 0, uses_anonymous_args = 0
1379:Core/Src/Mytouch.c **** 	while(NumToRead)
 7458              		.loc 1 1379 1 is_stmt 0 view .LVU2030
 7459 0000 70B5     		push	{r4, r5, r6, lr}
 7460              	.LCFI96:
 7461              		.cfi_def_cfa_offset 16
 7462              		.cfi_offset 4, -16
 7463              		.cfi_offset 5, -12
 7464              		.cfi_offset 6, -8
 7465              		.cfi_offset 14, -4
 7466 0002 0C46     		mov	r4, r1
 7467 0004 1546     		mov	r5, r2
1380:Core/Src/Mytouch.c **** 	{
 7468              		.loc 1 1380 2 is_stmt 1 view .LVU2031
1380:Core/Src/Mytouch.c **** 	{
 7469              		.loc 1 1380 7 is_stmt 0 view .LVU2032
 7470 0006 08E0     		b	.L388
 7471              	.LVL673:
 7472              	.L389:
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7473              		.loc 1 1382 3 is_stmt 1 view .LVU2033
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7474              		.loc 1 1382 14 is_stmt 0 view .LVU2034
 7475 0008 461C     		adds	r6, r0, #1
 7476 000a B6B2     		uxth	r6, r6
 7477              	.LVL674:
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7478              		.loc 1 1382 14 view .LVU2035
 7479 000c FFF7FEFF 		bl	AT24CXX_ReadOneByte
 7480              	.LVL675:
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7481              		.loc 1 1382 13 view .LVU2036
 7482 0010 04F8010B 		strb	r0, [r4], #1
 7483              	.LVL676:
1383:Core/Src/Mytouch.c **** 	}
 7484              		.loc 1 1383 3 is_stmt 1 view .LVU2037
1383:Core/Src/Mytouch.c **** 	}
 7485              		.loc 1 1383 12 is_stmt 0 view .LVU2038
 7486 0014 013D     		subs	r5, r5, #1
 7487              	.LVL677:
1383:Core/Src/Mytouch.c **** 	}
 7488              		.loc 1 1383 12 view .LVU2039
 7489 0016 ADB2     		uxth	r5, r5
 7490              	.LVL678:
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7491              		.loc 1 1382 14 view .LVU2040
 7492 0018 3046     		mov	r0, r6
 7493              	.LVL679:
 7494              	.L388:
1380:Core/Src/Mytouch.c **** 	{
 7495              		.loc 1 1380 7 is_stmt 1 view .LVU2041
 7496 001a 002D     		cmp	r5, #0
 7497 001c F4D1     		bne	.L389
1385:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入指定个数的数据
 7498              		.loc 1 1385 1 is_stmt 0 view .LVU2042
 7499 001e 70BD     		pop	{r4, r5, r6, pc}
1385:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入指定个数的数据
ARM GAS  /tmp/cckdBZRC.s 			page 178


 7500              		.loc 1 1385 1 view .LVU2043
 7501              		.cfi_endproc
 7502              	.LFE189:
 7504              		.global	g_gt_tnum
 7505              		.global	GT911_TPX_TBL
 7506              		.global	FT5206_TPX_TBL
 7507              		.global	CIP
 7508              		.global	OTT_TPX_TBL
 7509              		.global	GT9147_TPX_TBL
 7510              		.global	GT9147_CFG_TBL
 7511              		.global	TP_REMIND_MSG_TBL
 7512              		.global	CMD_RDY
 7513              		.global	CMD_RDX
 7514              		.global	tp_dev
 7515              		.section	.bss.CIP,"aw",%nobits
 7516              		.align	2
 7517              		.set	.LANCHOR9,. + 0
 7520              	CIP:
 7521 0000 00000000 		.space	5
 7521      00
 7522              		.section	.bss.t.0,"aw",%nobits
 7523              		.set	.LANCHOR8,. + 0
 7526              	t.0:
 7527 0000 00       		.space	1
 7528              		.section	.bss.t.1,"aw",%nobits
 7529              		.set	.LANCHOR6,. + 0
 7532              	t.1:
 7533 0000 00       		.space	1
 7534              		.section	.bss.t.2,"aw",%nobits
 7535              		.set	.LANCHOR4,. + 0
 7538              	t.2:
 7539 0000 00       		.space	1
 7540              		.section	.data.CMD_RDX,"aw"
 7541              		.set	.LANCHOR0,. + 0
 7544              	CMD_RDX:
 7545 0000 D0       		.byte	-48
 7546              		.section	.data.CMD_RDY,"aw"
 7547              		.set	.LANCHOR1,. + 0
 7550              	CMD_RDY:
 7551 0000 90       		.byte	-112
 7552              		.section	.data.g_gt_tnum,"aw"
 7553              		.set	.LANCHOR10,. + 0
 7556              	g_gt_tnum:
 7557 0000 05       		.byte	5
 7558              		.section	.data.tp_dev,"aw"
 7559              		.align	2
 7560              		.set	.LANCHOR2,. + 0
 7563              	tp_dev:
 7564 0000 00000000 		.word	TP_Init
 7565 0004 00000000 		.word	TP_Scan
 7566 0008 00000000 		.word	TP_Adjust
 7567 000c 0000     		.short	0
 7568 000e 0000     		.short	0
 7569 0010 0000     		.short	0
 7570 0012 0000     		.short	0
 7571 0014 0000     		.short	0
 7572 0016 0000     		.short	0
ARM GAS  /tmp/cckdBZRC.s 			page 179


 7573 0018 0000     		.short	0
 7574 001a 0000     		.short	0
 7575 001c 00000000 		.space	4
 7576 0020 00000000 		.space	20
 7576      00000000 
 7576      00000000 
 7576      00000000 
 7576      00000000 
 7577              		.section	.rodata.FT5206_TPX_TBL,"a"
 7578              		.align	2
 7579              		.set	.LANCHOR12,. + 0
 7582              	FT5206_TPX_TBL:
 7583 0000 0300     		.short	3
 7584 0002 0900     		.short	9
 7585 0004 0F00     		.short	15
 7586 0006 1500     		.short	21
 7587 0008 1B00     		.short	27
 7588              		.section	.rodata.GT911_TPX_TBL,"a"
 7589              		.align	2
 7590              		.set	.LANCHOR11,. + 0
 7593              	GT911_TPX_TBL:
 7594 0000 5081     		.short	-32432
 7595 0002 5881     		.short	-32424
 7596 0004 6081     		.short	-32416
 7597 0006 6881     		.short	-32408
 7598 0008 7081     		.short	-32400
 7599              		.section	.rodata.GT9147_CFG_TBL,"a"
 7600              		.align	2
 7601              		.set	.LANCHOR3,. + 0
 7604              	GT9147_CFG_TBL:
 7605 0000 60E00120 		.ascii	"`\340\001 \003\0055\000\002\010\036\010P<\017\005\000"
 7605      03053500 
 7605      02081E08 
 7605      503C0F05 
 7605      00
 7606 0011 00FF6750 		.ascii	"\000\377gP\000\000\030\032\036\024\211(\0120.\273\012"
 7606      0000181A 
 7606      1E148928 
 7606      0A302EBB 
 7606      0A
 7607 0022 03000002 		.ascii	"\003\000\000\0023\035\000\000\000\000\000\000\0002\000"
 7607      331D0000 
 7607      00000000 
 7607      003200
 7608 0031 002A1C5A 		.ascii	"\000*\034Z\224\305\002\007\000\000\000\265\037\000\220"
 7608      94C50207 
 7608      000000B5 
 7608      1F0090
 7609 0040 28007732 		.ascii	"(\000w2\000b?\000RP\000R\000\000\000\000\000\000\000"
 7609      00623F00 
 7609      52500052 
 7609      00000000 
 7609      000000
 7610 0053 00000000 		.ascii	"\000\000\000\000\000\000\000\000\000\000\000\000\000"
 7610      00000000 
 7610      00000000 
 7610      00
ARM GAS  /tmp/cckdBZRC.s 			page 180


 7611 0060 0000000F 		.ascii	"\000\000\000\017\017\003\006\020B\370\017\024\000\000"
 7611      0F030610 
 7611      42F80F14 
 7611      0000
 7612 006e 00001A18 		.ascii	"\000\000\032\030\026\024\022\020\016\014\012\010\000"
 7612      16141210 
 7612      0E0C0A08 
 7612      00
 7613 007b 00000000 		.ascii	"\000\000\000\000\000\000\000\000\000\000\000\000\000"
 7613      00000000 
 7613      00000000 
 7613      00
 7614 0088 00000000 		.ascii	"\000\000\000\000\000\000)($\" \037\036\035\016\014\012"
 7614      00002928 
 7614      2422201F 
 7614      1E1D0E0C 
 7614      0A
 7615 0099 08060504 		.ascii	"\010\006\005\004\002\000\377\000\000\000\000\000\000"
 7615      0200FF00 
 7615      00000000 
 7615      00
 7616 00a6 00000000 		.ascii	"\000\000\000\000\000\377\377\377\377\377\377\377\377"
 7616      00FFFFFF 
 7616      FFFFFFFF 
 7616      FF
 7617 00b3 FFFFFFFF 		.ascii	"\377\377\377\377\377"
 7617      FF
 7618              		.section	.rodata.GT9147_TPX_TBL,"a"
 7619              		.align	2
 7620              		.set	.LANCHOR5,. + 0
 7623              	GT9147_TPX_TBL:
 7624 0000 5081     		.short	-32432
 7625 0002 5881     		.short	-32424
 7626 0004 6081     		.short	-32416
 7627 0006 6881     		.short	-32408
 7628 0008 7081     		.short	-32400
 7629              		.section	.rodata.OTT_TPX_TBL,"a"
 7630              		.align	2
 7631              		.set	.LANCHOR7,. + 0
 7634              	OTT_TPX_TBL:
 7635 0000 0001     		.short	256
 7636 0002 0005     		.short	1280
 7637 0004 0010     		.short	4096
 7638 0006 0014     		.short	5120
 7639 0008 0018     		.short	6144
 7640              		.section	.rodata.TP_REMIND_MSG_TBL,"a"
 7641              		.align	2
 7644              	TP_REMIND_MSG_TBL:
 7645 0000 00000000 		.word	.LC14
 7646              		.text
 7647              	.Letext0:
 7648              		.file 2 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/machine/_default_types.h"
 7649              		.file 3 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/sys/_stdint.h"
 7650              		.file 4 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h743xx.h"
 7651              		.file 5 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_gpio.h"
 7652              		.file 6 "Core/Inc/main.h"
 7653              		.file 7 "Core/Inc/LCD.h"
ARM GAS  /tmp/cckdBZRC.s 			page 181


 7654              		.file 8 "Core/Inc/Mytouch.h"
 7655              		.file 9 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 7656              		.file 10 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/string.h"
 7657              		.file 11 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/stdio.h"
 7658              		.file 12 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/math.h"
 7659              		.file 13 "<built-in>"
ARM GAS  /tmp/cckdBZRC.s 			page 182


DEFINED SYMBOLS
                            *ABS*:0000000000000000 Mytouch.c
     /tmp/cckdBZRC.s:19     .text.TP_Write_Byte:0000000000000000 $t
     /tmp/cckdBZRC.s:25     .text.TP_Write_Byte:0000000000000000 TP_Write_Byte
     /tmp/cckdBZRC.s:113    .text.TP_Write_Byte:0000000000000050 $d
     /tmp/cckdBZRC.s:119    .text.TP_Read_AD:0000000000000000 $t
     /tmp/cckdBZRC.s:125    .text.TP_Read_AD:0000000000000000 TP_Read_AD
     /tmp/cckdBZRC.s:283    .text.TP_Read_AD:00000000000000b0 $d
     /tmp/cckdBZRC.s:290    .text.TP_Read_XOY:0000000000000000 $t
     /tmp/cckdBZRC.s:296    .text.TP_Read_XOY:0000000000000000 TP_Read_XOY
     /tmp/cckdBZRC.s:460    .text.TP_Read_XOY:0000000000000094 $d
     /tmp/cckdBZRC.s:465    .text.TP_Read_XY:0000000000000000 $t
     /tmp/cckdBZRC.s:471    .text.TP_Read_XY:0000000000000000 TP_Read_XY
     /tmp/cckdBZRC.s:523    .text.TP_Read_XY:0000000000000020 $d
     /tmp/cckdBZRC.s:529    .text.TP_Read_XY2:0000000000000000 $t
     /tmp/cckdBZRC.s:535    .text.TP_Read_XY2:0000000000000000 TP_Read_XY2
     /tmp/cckdBZRC.s:680    .text.TP_Scan:0000000000000000 $t
     /tmp/cckdBZRC.s:686    .text.TP_Scan:0000000000000000 TP_Scan
     /tmp/cckdBZRC.s:838    .text.TP_Scan:00000000000000dc $d
     /tmp/cckdBZRC.s:844    .text.TP_Drow_Touch_Point:0000000000000000 $t
     /tmp/cckdBZRC.s:850    .text.TP_Drow_Touch_Point:0000000000000000 TP_Drow_Touch_Point
     /tmp/cckdBZRC.s:933    .text.TP_Drow_Touch_Point:0000000000000074 $d
     /tmp/cckdBZRC.s:938    .text.TP_Draw_Big_Point:0000000000000000 $t
     /tmp/cckdBZRC.s:944    .text.TP_Draw_Big_Point:0000000000000000 TP_Draw_Big_Point
     /tmp/cckdBZRC.s:992    .text.TP_Draw_Big_Point:0000000000000030 $d
     /tmp/cckdBZRC.s:997    .rodata.TP_Adj_Info_Show.str1.4:0000000000000000 $d
     /tmp/cckdBZRC.s:1025   .text.TP_Adj_Info_Show:0000000000000000 $t
     /tmp/cckdBZRC.s:1031   .text.TP_Adj_Info_Show:0000000000000000 TP_Adj_Info_Show
     /tmp/cckdBZRC.s:1244   .text.TP_Adj_Info_Show:000000000000014c $d
     /tmp/cckdBZRC.s:1259   .text.CT_Delay:0000000000000000 $t
     /tmp/cckdBZRC.s:1265   .text.CT_Delay:0000000000000000 CT_Delay
     /tmp/cckdBZRC.s:1286   .text.CT_IIC_Init:0000000000000000 $t
     /tmp/cckdBZRC.s:1292   .text.CT_IIC_Init:0000000000000000 CT_IIC_Init
     /tmp/cckdBZRC.s:1376   .text.CT_IIC_Init:0000000000000060 $d
     /tmp/cckdBZRC.s:1383   .text.CT_IIC_Start:0000000000000000 $t
     /tmp/cckdBZRC.s:1389   .text.CT_IIC_Start:0000000000000000 CT_IIC_Start
     /tmp/cckdBZRC.s:1442   .text.CT_IIC_Start:000000000000003c $d
     /tmp/cckdBZRC.s:1448   .text.CT_IIC_Stop:0000000000000000 $t
     /tmp/cckdBZRC.s:1454   .text.CT_IIC_Stop:0000000000000000 CT_IIC_Stop
     /tmp/cckdBZRC.s:1495   .text.CT_IIC_Stop:000000000000002c $d
     /tmp/cckdBZRC.s:1501   .text.CT_IIC_Wait_Ack:0000000000000000 $t
     /tmp/cckdBZRC.s:1507   .text.CT_IIC_Wait_Ack:0000000000000000 CT_IIC_Wait_Ack
     /tmp/cckdBZRC.s:1593   .text.CT_IIC_Wait_Ack:000000000000004c $d
     /tmp/cckdBZRC.s:1599   .text.CT_IIC_Ack:0000000000000000 $t
     /tmp/cckdBZRC.s:1605   .text.CT_IIC_Ack:0000000000000000 CT_IIC_Ack
     /tmp/cckdBZRC.s:1661   .text.CT_IIC_Ack:0000000000000040 $d
     /tmp/cckdBZRC.s:1667   .text.CT_IIC_NAck:0000000000000000 $t
     /tmp/cckdBZRC.s:1673   .text.CT_IIC_NAck:0000000000000000 CT_IIC_NAck
     /tmp/cckdBZRC.s:1717   .text.CT_IIC_NAck:0000000000000030 $d
     /tmp/cckdBZRC.s:1723   .text.CT_IIC_Send_Byte:0000000000000000 $t
     /tmp/cckdBZRC.s:1729   .text.CT_IIC_Send_Byte:0000000000000000 CT_IIC_Send_Byte
     /tmp/cckdBZRC.s:1823   .text.CT_IIC_Send_Byte:000000000000005c $d
     /tmp/cckdBZRC.s:1829   .text.CT_IIC_Read_Byte:0000000000000000 $t
     /tmp/cckdBZRC.s:1835   .text.CT_IIC_Read_Byte:0000000000000000 CT_IIC_Read_Byte
     /tmp/cckdBZRC.s:1938   .text.CT_IIC_Read_Byte:0000000000000054 $d
     /tmp/cckdBZRC.s:1944   .text.GT9147_WR_Reg:0000000000000000 $t
     /tmp/cckdBZRC.s:1950   .text.GT9147_WR_Reg:0000000000000000 GT9147_WR_Reg
ARM GAS  /tmp/cckdBZRC.s 			page 183


     /tmp/cckdBZRC.s:2045   .text.GT9147_Send_Cfg:0000000000000000 $t
     /tmp/cckdBZRC.s:2051   .text.GT9147_Send_Cfg:0000000000000000 GT9147_Send_Cfg
     /tmp/cckdBZRC.s:2133   .text.GT9147_Send_Cfg:0000000000000050 $d
     /tmp/cckdBZRC.s:2138   .text.GT9147_RD_Reg:0000000000000000 $t
     /tmp/cckdBZRC.s:2144   .text.GT9147_RD_Reg:0000000000000000 GT9147_RD_Reg
     /tmp/cckdBZRC.s:2237   .text.GT9147_Scan:0000000000000000 $t
     /tmp/cckdBZRC.s:2243   .text.GT9147_Scan:0000000000000000 GT9147_Scan
     /tmp/cckdBZRC.s:2753   .text.GT9147_Scan:00000000000002dc $d
     /tmp/cckdBZRC.s:2762   .rodata.GT9147_Init.str1.4:0000000000000000 $d
     /tmp/cckdBZRC.s:2772   .text.GT9147_Init:0000000000000000 $t
     /tmp/cckdBZRC.s:2778   .text.GT9147_Init:0000000000000000 GT9147_Init
     /tmp/cckdBZRC.s:3005   .text.GT9147_Init:0000000000000130 $d
     /tmp/cckdBZRC.s:3016   .text.OTT2001A_WR_Reg:0000000000000000 $t
     /tmp/cckdBZRC.s:3022   .text.OTT2001A_WR_Reg:0000000000000000 OTT2001A_WR_Reg
     /tmp/cckdBZRC.s:3117   .text.OTT2001A_RD_Reg:0000000000000000 $t
     /tmp/cckdBZRC.s:3123   .text.OTT2001A_RD_Reg:0000000000000000 OTT2001A_RD_Reg
     /tmp/cckdBZRC.s:3216   .text.OTT2001A_Scan:0000000000000000 $t
     /tmp/cckdBZRC.s:3222   .text.OTT2001A_Scan:0000000000000000 OTT2001A_Scan
     /tmp/cckdBZRC.s:3500   .text.OTT2001A_Scan:00000000000001a8 $d
     /tmp/cckdBZRC.s:3514   .text.OTT2001A_SensorControl:0000000000000000 $t
     /tmp/cckdBZRC.s:3520   .text.OTT2001A_SensorControl:0000000000000000 OTT2001A_SensorControl
     /tmp/cckdBZRC.s:3565   .rodata.OTT2001A_Init.str1.4:0000000000000000 $d
     /tmp/cckdBZRC.s:3569   .text.OTT2001A_Init:0000000000000000 $t
     /tmp/cckdBZRC.s:3575   .text.OTT2001A_Init:0000000000000000 OTT2001A_Init
     /tmp/cckdBZRC.s:3724   .text.OTT2001A_Init:00000000000000b8 $d
     /tmp/cckdBZRC.s:3732   .text.FT5206_WR_Reg:0000000000000000 $t
     /tmp/cckdBZRC.s:3738   .text.FT5206_WR_Reg:0000000000000000 FT5206_WR_Reg
     /tmp/cckdBZRC.s:3826   .text.FT5206_RD_Reg:0000000000000000 $t
     /tmp/cckdBZRC.s:3832   .text.FT5206_RD_Reg:0000000000000000 FT5206_RD_Reg
     /tmp/cckdBZRC.s:3918   .rodata.FT5206_Scan.str1.4:0000000000000000 $d
     /tmp/cckdBZRC.s:3922   .text.FT5206_Scan:0000000000000000 $t
     /tmp/cckdBZRC.s:3928   .text.FT5206_Scan:0000000000000000 FT5206_Scan
     /tmp/cckdBZRC.s:4448   .text.FT5206_Scan:00000000000002e4 $d
     /tmp/cckdBZRC.s:4460   .text.FT5206_Scan:0000000000000308 $t
     /tmp/cckdBZRC.s:4496   .text.FT5206_Scan:0000000000000340 $d
     /tmp/cckdBZRC.s:4501   .text.FT5206_Init:0000000000000000 $t
     /tmp/cckdBZRC.s:4507   .text.FT5206_Init:0000000000000000 FT5206_Init
     /tmp/cckdBZRC.s:4757   .text.FT5206_Init:0000000000000150 $d
     /tmp/cckdBZRC.s:4767   .text.IIC_Init:0000000000000000 $t
     /tmp/cckdBZRC.s:4773   .text.IIC_Init:0000000000000000 IIC_Init
     /tmp/cckdBZRC.s:4847   .text.IIC_Init:0000000000000050 $d
     /tmp/cckdBZRC.s:4853   .text.AT24CXX_Init:0000000000000000 $t
     /tmp/cckdBZRC.s:4859   .text.AT24CXX_Init:0000000000000000 AT24CXX_Init
     /tmp/cckdBZRC.s:4879   .text.IIC_Start:0000000000000000 $t
     /tmp/cckdBZRC.s:4885   .text.IIC_Start:0000000000000000 IIC_Start
     /tmp/cckdBZRC.s:4943   .text.IIC_Start:000000000000004c $d
     /tmp/cckdBZRC.s:4948   .text.IIC_Stop:0000000000000000 $t
     /tmp/cckdBZRC.s:4954   .text.IIC_Stop:0000000000000000 IIC_Stop
     /tmp/cckdBZRC.s:5012   .text.IIC_Stop:000000000000004c $d
     /tmp/cckdBZRC.s:5017   .text.IIC_Wait_Ack:0000000000000000 $t
     /tmp/cckdBZRC.s:5023   .text.IIC_Wait_Ack:0000000000000000 IIC_Wait_Ack
     /tmp/cckdBZRC.s:5116   .text.IIC_Wait_Ack:000000000000005c $d
     /tmp/cckdBZRC.s:5121   .text.IIC_Ack:0000000000000000 $t
     /tmp/cckdBZRC.s:5127   .text.IIC_Ack:0000000000000000 IIC_Ack
     /tmp/cckdBZRC.s:5185   .text.IIC_Ack:000000000000004c $d
     /tmp/cckdBZRC.s:5190   .text.IIC_NAck:0000000000000000 $t
     /tmp/cckdBZRC.s:5196   .text.IIC_NAck:0000000000000000 IIC_NAck
ARM GAS  /tmp/cckdBZRC.s 			page 184


     /tmp/cckdBZRC.s:5254   .text.IIC_NAck:000000000000004c $d
     /tmp/cckdBZRC.s:5259   .text.IIC_Send_Byte:0000000000000000 $t
     /tmp/cckdBZRC.s:5265   .text.IIC_Send_Byte:0000000000000000 IIC_Send_Byte
     /tmp/cckdBZRC.s:5375   .text.IIC_Send_Byte:0000000000000074 $d
     /tmp/cckdBZRC.s:5380   .text.AT24CXX_WriteOneByte:0000000000000000 $t
     /tmp/cckdBZRC.s:5386   .text.AT24CXX_WriteOneByte:0000000000000000 AT24CXX_WriteOneByte
     /tmp/cckdBZRC.s:5447   .text.AT24CXX_WriteLenByte:0000000000000000 $t
     /tmp/cckdBZRC.s:5453   .text.AT24CXX_WriteLenByte:0000000000000000 AT24CXX_WriteLenByte
     /tmp/cckdBZRC.s:5512   .text.TP_Save_Adjdata:0000000000000000 $t
     /tmp/cckdBZRC.s:5518   .text.TP_Save_Adjdata:0000000000000000 TP_Save_Adjdata
     /tmp/cckdBZRC.s:5600   .text.TP_Save_Adjdata:000000000000006c $d
     /tmp/cckdBZRC.s:5606   .text.AT24CXX_Write:0000000000000000 $t
     /tmp/cckdBZRC.s:5612   .text.AT24CXX_Write:0000000000000000 AT24CXX_Write
     /tmp/cckdBZRC.s:5668   .text.IIC_Read_Byte:0000000000000000 $t
     /tmp/cckdBZRC.s:5674   .text.IIC_Read_Byte:0000000000000000 IIC_Read_Byte
     /tmp/cckdBZRC.s:5792   .text.IIC_Read_Byte:0000000000000068 $d
     /tmp/cckdBZRC.s:5797   .text.AT24CXX_ReadOneByte:0000000000000000 $t
     /tmp/cckdBZRC.s:5803   .text.AT24CXX_ReadOneByte:0000000000000000 AT24CXX_ReadOneByte
     /tmp/cckdBZRC.s:5872   .text.AT24CXX_ReadLenByte:0000000000000000 $t
     /tmp/cckdBZRC.s:5878   .text.AT24CXX_ReadLenByte:0000000000000000 AT24CXX_ReadLenByte
     /tmp/cckdBZRC.s:5949   .text.TP_Get_Adjdata:0000000000000000 $t
     /tmp/cckdBZRC.s:5955   .text.TP_Get_Adjdata:0000000000000000 TP_Get_Adjdata
     /tmp/cckdBZRC.s:6091   .text.TP_Get_Adjdata:000000000000008c $d
     /tmp/cckdBZRC.s:6099   .rodata.TP_Adjust.str1.4:0000000000000000 $d
     /tmp/cckdBZRC.s:6111   .text.TP_Adjust:0000000000000000 $t
     /tmp/cckdBZRC.s:6117   .text.TP_Adjust:0000000000000000 TP_Adjust
     /tmp/cckdBZRC.s:6299   .text.TP_Adjust:00000000000000cc $d
     /tmp/cckdBZRC.s:6303   .text.TP_Adjust:00000000000000dc $t
     /tmp/cckdBZRC.s:6693   .text.TP_Adjust:0000000000000338 $d
     /tmp/cckdBZRC.s:6708   .text.TP_Adjust:0000000000000364 $t
     /tmp/cckdBZRC.s:7084   .text.TP_Adjust:00000000000005c0 $d
     /tmp/cckdBZRC.s:7101   .text.TP_Init:0000000000000000 $t
     /tmp/cckdBZRC.s:7107   .text.TP_Init:0000000000000000 TP_Init
     /tmp/cckdBZRC.s:7365   .text.TP_Init:0000000000000160 $d
     /tmp/cckdBZRC.s:7378   .text.AT24CXX_Check:0000000000000000 $t
     /tmp/cckdBZRC.s:7384   .text.AT24CXX_Check:0000000000000000 AT24CXX_Check
     /tmp/cckdBZRC.s:7445   .text.AT24CXX_Read:0000000000000000 $t
     /tmp/cckdBZRC.s:7451   .text.AT24CXX_Read:0000000000000000 AT24CXX_Read
     /tmp/cckdBZRC.s:7556   .data.g_gt_tnum:0000000000000000 g_gt_tnum
     /tmp/cckdBZRC.s:7593   .rodata.GT911_TPX_TBL:0000000000000000 GT911_TPX_TBL
     /tmp/cckdBZRC.s:7582   .rodata.FT5206_TPX_TBL:0000000000000000 FT5206_TPX_TBL
     /tmp/cckdBZRC.s:7520   .bss.CIP:0000000000000000 CIP
     /tmp/cckdBZRC.s:7634   .rodata.OTT_TPX_TBL:0000000000000000 OTT_TPX_TBL
     /tmp/cckdBZRC.s:7623   .rodata.GT9147_TPX_TBL:0000000000000000 GT9147_TPX_TBL
     /tmp/cckdBZRC.s:7604   .rodata.GT9147_CFG_TBL:0000000000000000 GT9147_CFG_TBL
     /tmp/cckdBZRC.s:7644   .rodata.TP_REMIND_MSG_TBL:0000000000000000 TP_REMIND_MSG_TBL
     /tmp/cckdBZRC.s:7550   .data.CMD_RDY:0000000000000000 CMD_RDY
     /tmp/cckdBZRC.s:7544   .data.CMD_RDX:0000000000000000 CMD_RDX
     /tmp/cckdBZRC.s:7563   .data.tp_dev:0000000000000000 tp_dev
     /tmp/cckdBZRC.s:7516   .bss.CIP:0000000000000000 $d
     /tmp/cckdBZRC.s:7526   .bss.t.0:0000000000000000 t.0
     /tmp/cckdBZRC.s:7527   .bss.t.0:0000000000000000 $d
     /tmp/cckdBZRC.s:7532   .bss.t.1:0000000000000000 t.1
     /tmp/cckdBZRC.s:7533   .bss.t.1:0000000000000000 $d
     /tmp/cckdBZRC.s:7538   .bss.t.2:0000000000000000 t.2
     /tmp/cckdBZRC.s:7539   .bss.t.2:0000000000000000 $d
     /tmp/cckdBZRC.s:7559   .data.tp_dev:0000000000000000 $d
ARM GAS  /tmp/cckdBZRC.s 			page 185


     /tmp/cckdBZRC.s:7578   .rodata.FT5206_TPX_TBL:0000000000000000 $d
     /tmp/cckdBZRC.s:7589   .rodata.GT911_TPX_TBL:0000000000000000 $d
     /tmp/cckdBZRC.s:7600   .rodata.GT9147_CFG_TBL:0000000000000000 $d
     /tmp/cckdBZRC.s:7619   .rodata.GT9147_TPX_TBL:0000000000000000 $d
     /tmp/cckdBZRC.s:7630   .rodata.OTT_TPX_TBL:0000000000000000 $d
     /tmp/cckdBZRC.s:7641   .rodata.TP_REMIND_MSG_TBL:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
delay_us
HAL_GPIO_ReadPin
LCD_DrawLine
LCD_DrawPoint
LCD_Draw_Circle
POINT_COLOR
LCD_ShowString
LCD_ShowNum
lcddev
HAL_GPIO_Init
HAL_Delay
printf
strcmp
LCD_Clear
sqrt
BACK_COLOR
abs
