ARM GAS  /tmp/ccNZMix7.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"Mytouch.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.TP_Write_Byte,"ax",%progbits
  17              		.align	1
  18              		.global	TP_Write_Byte
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv5-d16
  25              	TP_Write_Byte:
  26              	.LVL0:
  27              	.LFB147:
  28              		.file 1 "Core/Src/Mytouch.c"
   1:Core/Src/Mytouch.c **** //
   2:Core/Src/Mytouch.c **** // Created by wbh on 2021/2/14.
   3:Core/Src/Mytouch.c **** // 移植自正点原子HAL库实例
   4:Core/Src/Mytouch.c **** //
   5:Core/Src/Mytouch.c **** 
   6:Core/Src/Mytouch.c **** #include "Mytouch.h"
   7:Core/Src/Mytouch.c **** #include <stdio.h>
   8:Core/Src/Mytouch.c **** 
   9:Core/Src/Mytouch.c **** _m_tp_dev tp_dev=
  10:Core/Src/Mytouch.c **** {
  11:Core/Src/Mytouch.c **** 	TP_Init,
  12:Core/Src/Mytouch.c **** 	TP_Scan,
  13:Core/Src/Mytouch.c **** 	TP_Adjust,
  14:Core/Src/Mytouch.c **** 	0,
  15:Core/Src/Mytouch.c **** 	0, 
  16:Core/Src/Mytouch.c **** 	0,
  17:Core/Src/Mytouch.c **** 	0,
  18:Core/Src/Mytouch.c **** 	0,
  19:Core/Src/Mytouch.c **** 	0,	  	 		
  20:Core/Src/Mytouch.c **** 	0,
  21:Core/Src/Mytouch.c **** 	0,	  	 		
  22:Core/Src/Mytouch.c **** };					
  23:Core/Src/Mytouch.c **** //默认为touchtype=0的数据.
  24:Core/Src/Mytouch.c **** u8 CMD_RDX=0XD0;
  25:Core/Src/Mytouch.c **** u8 CMD_RDY=0X90;
  26:Core/Src/Mytouch.c ****  	 			    					   
  27:Core/Src/Mytouch.c **** //SPI写数据
  28:Core/Src/Mytouch.c **** //向触摸屏IC写入1byte数据    
  29:Core/Src/Mytouch.c **** //num:要写入的数据
  30:Core/Src/Mytouch.c **** void TP_Write_Byte(u8 num)    
ARM GAS  /tmp/ccNZMix7.s 			page 2


  31:Core/Src/Mytouch.c **** {  
  29              		.loc 1 31 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 31 1 is_stmt 0 view .LVU1
  34 0000 70B5     		push	{r4, r5, r6, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 16
  37              		.cfi_offset 4, -16
  38              		.cfi_offset 5, -12
  39              		.cfi_offset 6, -8
  40              		.cfi_offset 14, -4
  41 0002 0446     		mov	r4, r0
  32:Core/Src/Mytouch.c **** 	u8 count=0;   
  42              		.loc 1 32 2 is_stmt 1 view .LVU2
  43              	.LVL1:
  33:Core/Src/Mytouch.c **** 	for(count=0;count<8;count++)  
  44              		.loc 1 33 2 view .LVU3
  45              		.loc 1 33 11 is_stmt 0 view .LVU4
  46 0004 0025     		movs	r5, #0
  47              		.loc 1 33 2 view .LVU5
  48 0006 16E0     		b	.L2
  49              	.LVL2:
  50              	.L3:
  34:Core/Src/Mytouch.c **** 	{ 	  
  35:Core/Src/Mytouch.c **** 		if(num&0x80)TDIN(1);  
  36:Core/Src/Mytouch.c **** 		else TDIN(0);   
  51              		.loc 1 36 8 is_stmt 1 view .LVU6
  52 0008 0022     		movs	r2, #0
  53 000a 0821     		movs	r1, #8
  54 000c 1048     		ldr	r0, .L8
  55 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
  56              	.LVL3:
  57              	.L4:
  37:Core/Src/Mytouch.c **** 		num<<=1;    
  58              		.loc 1 37 3 discriminator 2 view .LVU7
  59              		.loc 1 37 6 is_stmt 0 discriminator 2 view .LVU8
  60 0012 6400     		lsls	r4, r4, #1
  61              	.LVL4:
  62              		.loc 1 37 6 discriminator 2 view .LVU9
  63 0014 E4B2     		uxtb	r4, r4
  64              	.LVL5:
  38:Core/Src/Mytouch.c **** 		TCLK(0); 
  65              		.loc 1 38 3 is_stmt 1 discriminator 2 view .LVU10
  66 0016 0F4E     		ldr	r6, .L8+4
  67 0018 0022     		movs	r2, #0
  68 001a 4021     		movs	r1, #64
  69 001c 3046     		mov	r0, r6
  70 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
  71              	.LVL6:
  39:Core/Src/Mytouch.c **** 		delay_us(1);
  72              		.loc 1 39 3 discriminator 2 view .LVU11
  73 0022 0120     		movs	r0, #1
  74 0024 FFF7FEFF 		bl	delay_us
  75              	.LVL7:
  40:Core/Src/Mytouch.c **** 		TCLK(1);		//上升沿有效	        
ARM GAS  /tmp/ccNZMix7.s 			page 3


  76              		.loc 1 40 3 discriminator 2 view .LVU12
  77 0028 0122     		movs	r2, #1
  78 002a 4021     		movs	r1, #64
  79 002c 3046     		mov	r0, r6
  80 002e FFF7FEFF 		bl	HAL_GPIO_WritePin
  81              	.LVL8:
  33:Core/Src/Mytouch.c **** 	{ 	  
  82              		.loc 1 33 22 discriminator 2 view .LVU13
  33:Core/Src/Mytouch.c **** 	{ 	  
  83              		.loc 1 33 27 is_stmt 0 discriminator 2 view .LVU14
  84 0032 0135     		adds	r5, r5, #1
  85              	.LVL9:
  33:Core/Src/Mytouch.c **** 	{ 	  
  86              		.loc 1 33 27 discriminator 2 view .LVU15
  87 0034 EDB2     		uxtb	r5, r5
  88              	.LVL10:
  89              	.L2:
  33:Core/Src/Mytouch.c **** 	{ 	  
  90              		.loc 1 33 14 is_stmt 1 discriminator 1 view .LVU16
  33:Core/Src/Mytouch.c **** 	{ 	  
  91              		.loc 1 33 2 is_stmt 0 discriminator 1 view .LVU17
  92 0036 072D     		cmp	r5, #7
  93 0038 08D8     		bhi	.L7
  35:Core/Src/Mytouch.c **** 		else TDIN(0);   
  94              		.loc 1 35 3 is_stmt 1 view .LVU18
  35:Core/Src/Mytouch.c **** 		else TDIN(0);   
  95              		.loc 1 35 5 is_stmt 0 view .LVU19
  96 003a 14F0800F 		tst	r4, #128
  97 003e E3D0     		beq	.L3
  35:Core/Src/Mytouch.c **** 		else TDIN(0);   
  98              		.loc 1 35 15 is_stmt 1 discriminator 1 view .LVU20
  99 0040 0122     		movs	r2, #1
 100 0042 0821     		movs	r1, #8
 101 0044 0248     		ldr	r0, .L8
 102 0046 FFF7FEFF 		bl	HAL_GPIO_WritePin
 103              	.LVL11:
 104 004a E2E7     		b	.L4
 105              	.L7:
  41:Core/Src/Mytouch.c **** 	}		 			    
  42:Core/Src/Mytouch.c **** } 		 
 106              		.loc 1 42 1 is_stmt 0 view .LVU21
 107 004c 70BD     		pop	{r4, r5, r6, pc}
 108              	.LVL12:
 109              	.L9:
 110              		.loc 1 42 1 view .LVU22
 111 004e 00BF     		.align	2
 112              	.L8:
 113 0050 00200258 		.word	1476534272
 114 0054 001C0258 		.word	1476533248
 115              		.cfi_endproc
 116              	.LFE147:
 118              		.section	.text.TP_Read_AD,"ax",%progbits
 119              		.align	1
 120              		.global	TP_Read_AD
 121              		.syntax unified
 122              		.thumb
 123              		.thumb_func
ARM GAS  /tmp/ccNZMix7.s 			page 4


 124              		.fpu fpv5-d16
 126              	TP_Read_AD:
 127              	.LVL13:
 128              	.LFB148:
  43:Core/Src/Mytouch.c **** //SPI读数据 
  44:Core/Src/Mytouch.c **** //从触摸屏IC读取adc值
  45:Core/Src/Mytouch.c **** //CMD:指令
  46:Core/Src/Mytouch.c **** //返回值:读到的数据	   
  47:Core/Src/Mytouch.c **** u16 TP_Read_AD(u8 CMD)	  
  48:Core/Src/Mytouch.c **** { 	 
 129              		.loc 1 48 1 is_stmt 1 view -0
 130              		.cfi_startproc
 131              		@ args = 0, pretend = 0, frame = 0
 132              		@ frame_needed = 0, uses_anonymous_args = 0
 133              		.loc 1 48 1 is_stmt 0 view .LVU24
 134 0000 70B5     		push	{r4, r5, r6, lr}
 135              	.LCFI1:
 136              		.cfi_def_cfa_offset 16
 137              		.cfi_offset 4, -16
 138              		.cfi_offset 5, -12
 139              		.cfi_offset 6, -8
 140              		.cfi_offset 14, -4
 141 0002 0546     		mov	r5, r0
  49:Core/Src/Mytouch.c **** 	u8 count=0; 	  
 142              		.loc 1 49 2 is_stmt 1 view .LVU25
 143              	.LVL14:
  50:Core/Src/Mytouch.c **** 	u16 Num=0; 
 144              		.loc 1 50 2 view .LVU26
  51:Core/Src/Mytouch.c **** 	TCLK(0);		//先拉低时钟 	 
 145              		.loc 1 51 2 view .LVU27
 146 0004 2A4C     		ldr	r4, .L16
 147 0006 0022     		movs	r2, #0
 148 0008 4021     		movs	r1, #64
 149 000a 2046     		mov	r0, r4
 150              	.LVL15:
 151              		.loc 1 51 2 is_stmt 0 view .LVU28
 152 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 153              	.LVL16:
  52:Core/Src/Mytouch.c **** 	TDIN(0); 	//拉低数据线
 154              		.loc 1 52 2 is_stmt 1 view .LVU29
 155 0010 284E     		ldr	r6, .L16+4
 156 0012 0022     		movs	r2, #0
 157 0014 0821     		movs	r1, #8
 158 0016 3046     		mov	r0, r6
 159 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 160              	.LVL17:
  53:Core/Src/Mytouch.c **** 	TCS(0); 		//选中触摸屏IC
 161              		.loc 1 53 2 view .LVU30
 162 001c 0022     		movs	r2, #0
 163 001e 4FF48071 		mov	r1, #256
 164 0022 3046     		mov	r0, r6
 165 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 166              	.LVL18:
  54:Core/Src/Mytouch.c **** 	TP_Write_Byte(CMD);//发送命令字
 167              		.loc 1 54 2 view .LVU31
 168 0028 2846     		mov	r0, r5
 169 002a FFF7FEFF 		bl	TP_Write_Byte
ARM GAS  /tmp/ccNZMix7.s 			page 5


 170              	.LVL19:
  55:Core/Src/Mytouch.c **** 	delay_us(6);//ADS7846的转换时间最长为6us
 171              		.loc 1 55 2 view .LVU32
 172 002e 0620     		movs	r0, #6
 173 0030 FFF7FEFF 		bl	delay_us
 174              	.LVL20:
  56:Core/Src/Mytouch.c **** 	TCLK(0); 	     	    
 175              		.loc 1 56 2 view .LVU33
 176 0034 0022     		movs	r2, #0
 177 0036 4021     		movs	r1, #64
 178 0038 2046     		mov	r0, r4
 179 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 180              	.LVL21:
  57:Core/Src/Mytouch.c **** 	delay_us(1);    	   
 181              		.loc 1 57 2 view .LVU34
 182 003e 0120     		movs	r0, #1
 183 0040 FFF7FEFF 		bl	delay_us
 184              	.LVL22:
  58:Core/Src/Mytouch.c **** 	TCLK(1);		//给1个时钟，清除BUSY
 185              		.loc 1 58 2 view .LVU35
 186 0044 0122     		movs	r2, #1
 187 0046 4021     		movs	r1, #64
 188 0048 2046     		mov	r0, r4
 189 004a FFF7FEFF 		bl	HAL_GPIO_WritePin
 190              	.LVL23:
  59:Core/Src/Mytouch.c **** 	delay_us(1);    
 191              		.loc 1 59 2 view .LVU36
 192 004e 0120     		movs	r0, #1
 193 0050 FFF7FEFF 		bl	delay_us
 194              	.LVL24:
  60:Core/Src/Mytouch.c **** 	TCLK(0); 	     	    
 195              		.loc 1 60 2 view .LVU37
 196 0054 0022     		movs	r2, #0
 197 0056 4021     		movs	r1, #64
 198 0058 2046     		mov	r0, r4
 199 005a FFF7FEFF 		bl	HAL_GPIO_WritePin
 200              	.LVL25:
  61:Core/Src/Mytouch.c **** 	for(count=0;count<16;count++)//读出16位数据,只有高12位有效 
 201              		.loc 1 61 2 view .LVU38
  50:Core/Src/Mytouch.c **** 	TCLK(0);		//先拉低时钟 	 
 202              		.loc 1 50 6 is_stmt 0 view .LVU39
 203 005e 0024     		movs	r4, #0
 204              		.loc 1 61 11 view .LVU40
 205 0060 2546     		mov	r5, r4
 206              		.loc 1 61 2 view .LVU41
 207 0062 01E0     		b	.L11
 208              	.LVL26:
 209              	.L12:
 210              		.loc 1 61 23 is_stmt 1 discriminator 2 view .LVU42
 211              		.loc 1 61 28 is_stmt 0 discriminator 2 view .LVU43
 212 0064 0135     		adds	r5, r5, #1
 213              	.LVL27:
 214              		.loc 1 61 28 discriminator 2 view .LVU44
 215 0066 EDB2     		uxtb	r5, r5
 216              	.LVL28:
 217              	.L11:
 218              		.loc 1 61 14 is_stmt 1 discriminator 1 view .LVU45
ARM GAS  /tmp/ccNZMix7.s 			page 6


 219              		.loc 1 61 2 is_stmt 0 discriminator 1 view .LVU46
 220 0068 0F2D     		cmp	r5, #15
 221 006a 18D8     		bhi	.L15
  62:Core/Src/Mytouch.c **** 	{ 				  
  63:Core/Src/Mytouch.c **** 		Num<<=1; 	 
 222              		.loc 1 63 3 is_stmt 1 view .LVU47
 223              		.loc 1 63 6 is_stmt 0 view .LVU48
 224 006c 6400     		lsls	r4, r4, #1
 225              	.LVL29:
 226              		.loc 1 63 6 view .LVU49
 227 006e A4B2     		uxth	r4, r4
 228              	.LVL30:
  64:Core/Src/Mytouch.c **** 		TCLK(0);	//下降沿有效  	    	   
 229              		.loc 1 64 3 is_stmt 1 view .LVU50
 230 0070 0F4E     		ldr	r6, .L16
 231 0072 0022     		movs	r2, #0
 232 0074 4021     		movs	r1, #64
 233 0076 3046     		mov	r0, r6
 234 0078 FFF7FEFF 		bl	HAL_GPIO_WritePin
 235              	.LVL31:
  65:Core/Src/Mytouch.c **** 		delay_us(1);    
 236              		.loc 1 65 3 view .LVU51
 237 007c 0120     		movs	r0, #1
 238 007e FFF7FEFF 		bl	delay_us
 239              	.LVL32:
  66:Core/Src/Mytouch.c ****  		TCLK(1);
 240              		.loc 1 66 4 view .LVU52
 241 0082 0122     		movs	r2, #1
 242 0084 4021     		movs	r1, #64
 243 0086 3046     		mov	r0, r6
 244 0088 FFF7FEFF 		bl	HAL_GPIO_WritePin
 245              	.LVL33:
  67:Core/Src/Mytouch.c ****  		if(DOUT)Num++; 		 
 246              		.loc 1 67 4 view .LVU53
 247              		.loc 1 67 7 is_stmt 0 view .LVU54
 248 008c 0821     		movs	r1, #8
 249 008e 0A48     		ldr	r0, .L16+8
 250 0090 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 251              	.LVL34:
 252              		.loc 1 67 6 view .LVU55
 253 0094 0028     		cmp	r0, #0
 254 0096 E5D0     		beq	.L12
 255              		.loc 1 67 12 is_stmt 1 discriminator 1 view .LVU56
 256              		.loc 1 67 15 is_stmt 0 discriminator 1 view .LVU57
 257 0098 0134     		adds	r4, r4, #1
 258              	.LVL35:
 259              		.loc 1 67 15 discriminator 1 view .LVU58
 260 009a A4B2     		uxth	r4, r4
 261              	.LVL36:
 262              		.loc 1 67 15 discriminator 1 view .LVU59
 263 009c E2E7     		b	.L12
 264              	.L15:
  68:Core/Src/Mytouch.c **** 	}  	
  69:Core/Src/Mytouch.c **** 	Num>>=4;   	//只有高12位有效.
 265              		.loc 1 69 2 is_stmt 1 view .LVU60
 266              		.loc 1 69 5 is_stmt 0 view .LVU61
 267 009e 2409     		lsrs	r4, r4, #4
ARM GAS  /tmp/ccNZMix7.s 			page 7


 268              	.LVL37:
  70:Core/Src/Mytouch.c **** 	TCS(1);		//释放片选	 
 269              		.loc 1 70 2 is_stmt 1 view .LVU62
 270 00a0 0122     		movs	r2, #1
 271 00a2 4FF48071 		mov	r1, #256
 272 00a6 0348     		ldr	r0, .L16+4
 273 00a8 FFF7FEFF 		bl	HAL_GPIO_WritePin
 274              	.LVL38:
  71:Core/Src/Mytouch.c **** 	return(Num);   
 275              		.loc 1 71 2 view .LVU63
  72:Core/Src/Mytouch.c **** }
 276              		.loc 1 72 1 is_stmt 0 view .LVU64
 277 00ac 2046     		mov	r0, r4
 278 00ae 70BD     		pop	{r4, r5, r6, pc}
 279              	.LVL39:
 280              	.L17:
 281              		.loc 1 72 1 view .LVU65
 282              		.align	2
 283              	.L16:
 284 00b0 001C0258 		.word	1476533248
 285 00b4 00200258 		.word	1476534272
 286 00b8 00180258 		.word	1476532224
 287              		.cfi_endproc
 288              	.LFE148:
 290              		.section	.text.TP_Read_XOY,"ax",%progbits
 291              		.align	1
 292              		.global	TP_Read_XOY
 293              		.syntax unified
 294              		.thumb
 295              		.thumb_func
 296              		.fpu fpv5-d16
 298              	TP_Read_XOY:
 299              	.LVL40:
 300              	.LFB149:
  73:Core/Src/Mytouch.c **** //读取一个坐标值(x或者y)
  74:Core/Src/Mytouch.c **** //连续读取READ_TIMES次数据,对这些数据升序排列,
  75:Core/Src/Mytouch.c **** //然后去掉最低和最高LOST_VAL个数,取平均值 
  76:Core/Src/Mytouch.c **** //xy:指令（CMD_RDX/CMD_RDY）
  77:Core/Src/Mytouch.c **** //返回值:读到的数据
  78:Core/Src/Mytouch.c **** #define READ_TIMES 5 	//读取次数
  79:Core/Src/Mytouch.c **** #define LOST_VAL 1	  	//丢弃值
  80:Core/Src/Mytouch.c **** u16 TP_Read_XOY(u8 xy)
  81:Core/Src/Mytouch.c **** {
 301              		.loc 1 81 1 is_stmt 1 view -0
 302              		.cfi_startproc
 303              		@ args = 0, pretend = 0, frame = 16
 304              		@ frame_needed = 0, uses_anonymous_args = 0
 305              		.loc 1 81 1 is_stmt 0 view .LVU67
 306 0000 30B5     		push	{r4, r5, lr}
 307              	.LCFI2:
 308              		.cfi_def_cfa_offset 12
 309              		.cfi_offset 4, -12
 310              		.cfi_offset 5, -8
 311              		.cfi_offset 14, -4
 312 0002 85B0     		sub	sp, sp, #20
 313              	.LCFI3:
 314              		.cfi_def_cfa_offset 32
ARM GAS  /tmp/ccNZMix7.s 			page 8


 315 0004 0546     		mov	r5, r0
  82:Core/Src/Mytouch.c **** 	u16 i, j;
 316              		.loc 1 82 2 is_stmt 1 view .LVU68
  83:Core/Src/Mytouch.c **** 	u16 buf[READ_TIMES];
 317              		.loc 1 83 2 view .LVU69
  84:Core/Src/Mytouch.c **** 	u16 sum=0;
 318              		.loc 1 84 2 view .LVU70
 319              	.LVL41:
  85:Core/Src/Mytouch.c **** 	u16 temp;
 320              		.loc 1 85 2 view .LVU71
  86:Core/Src/Mytouch.c **** 	for(i=0;i<READ_TIMES;i++)buf[i]=TP_Read_AD(xy);		 		    
 321              		.loc 1 86 2 view .LVU72
 322              		.loc 1 86 7 is_stmt 0 view .LVU73
 323 0006 0024     		movs	r4, #0
 324              		.loc 1 86 2 view .LVU74
 325 0008 09E0     		b	.L19
 326              	.LVL42:
 327              	.L20:
 328              		.loc 1 86 27 is_stmt 1 discriminator 3 view .LVU75
 329              		.loc 1 86 34 is_stmt 0 discriminator 3 view .LVU76
 330 000a 2846     		mov	r0, r5
 331 000c FFF7FEFF 		bl	TP_Read_AD
 332              	.LVL43:
 333              		.loc 1 86 33 discriminator 3 view .LVU77
 334 0010 04AB     		add	r3, sp, #16
 335 0012 03EB4403 		add	r3, r3, r4, lsl #1
 336 0016 23F80C0C 		strh	r0, [r3, #-12]	@ movhi
 337              		.loc 1 86 23 is_stmt 1 discriminator 3 view .LVU78
 338              		.loc 1 86 24 is_stmt 0 discriminator 3 view .LVU79
 339 001a 0134     		adds	r4, r4, #1
 340              	.LVL44:
 341              		.loc 1 86 24 discriminator 3 view .LVU80
 342 001c A4B2     		uxth	r4, r4
 343              	.LVL45:
 344              	.L19:
 345              		.loc 1 86 10 is_stmt 1 discriminator 1 view .LVU81
 346              		.loc 1 86 2 is_stmt 0 discriminator 1 view .LVU82
 347 001e 042C     		cmp	r4, #4
 348 0020 F3D9     		bls	.L20
  87:Core/Src/Mytouch.c **** 	for(i=0;i<READ_TIMES-1; i++)//排序
 349              		.loc 1 87 7 view .LVU83
 350 0022 0020     		movs	r0, #0
 351 0024 1AE0     		b	.L21
 352              	.LVL46:
 353              	.L23:
  88:Core/Src/Mytouch.c **** 	{
  89:Core/Src/Mytouch.c **** 		for(j=i+1;j<READ_TIMES;j++)
 354              		.loc 1 89 26 is_stmt 1 discriminator 2 view .LVU84
 355              		.loc 1 89 27 is_stmt 0 discriminator 2 view .LVU85
 356 0026 0133     		adds	r3, r3, #1
 357              	.LVL47:
 358              		.loc 1 89 27 discriminator 2 view .LVU86
 359 0028 9BB2     		uxth	r3, r3
 360              	.LVL48:
 361              	.L22:
 362              		.loc 1 89 13 is_stmt 1 discriminator 1 view .LVU87
 363              		.loc 1 89 3 is_stmt 0 discriminator 1 view .LVU88
ARM GAS  /tmp/ccNZMix7.s 			page 9


 364 002a 042B     		cmp	r3, #4
 365 002c 15D8     		bhi	.L29
  90:Core/Src/Mytouch.c **** 		{
  91:Core/Src/Mytouch.c **** 			if(buf[i]>buf[j])//升序排列
 366              		.loc 1 91 4 is_stmt 1 view .LVU89
 367              		.loc 1 91 10 is_stmt 0 view .LVU90
 368 002e 04AA     		add	r2, sp, #16
 369 0030 02EB4002 		add	r2, r2, r0, lsl #1
 370 0034 32F80C2C 		ldrh	r2, [r2, #-12]
 371              		.loc 1 91 17 view .LVU91
 372 0038 04A9     		add	r1, sp, #16
 373 003a 01EB4301 		add	r1, r1, r3, lsl #1
 374 003e 31F80C1C 		ldrh	r1, [r1, #-12]
 375              		.loc 1 91 6 view .LVU92
 376 0042 8A42     		cmp	r2, r1
 377 0044 EFD9     		bls	.L23
  92:Core/Src/Mytouch.c **** 			{
  93:Core/Src/Mytouch.c **** 				temp=buf[i];
 378              		.loc 1 93 5 is_stmt 1 view .LVU93
 379              	.LVL49:
  94:Core/Src/Mytouch.c **** 				buf[i]=buf[j];
 380              		.loc 1 94 5 view .LVU94
 381              		.loc 1 94 11 is_stmt 0 view .LVU95
 382 0046 04AD     		add	r5, sp, #16
 383 0048 05EB400C 		add	ip, r5, r0, lsl #1
 384 004c 2CF80C1C 		strh	r1, [ip, #-12]	@ movhi
  95:Core/Src/Mytouch.c **** 				buf[j]=temp;
 385              		.loc 1 95 5 is_stmt 1 view .LVU96
 386              		.loc 1 95 11 is_stmt 0 view .LVU97
 387 0050 05EB4301 		add	r1, r5, r3, lsl #1
 388 0054 21F80C2C 		strh	r2, [r1, #-12]	@ movhi
 389 0058 E5E7     		b	.L23
 390              	.LVL50:
 391              	.L29:
  87:Core/Src/Mytouch.c **** 	{
 392              		.loc 1 87 27 view .LVU98
 393 005a 2046     		mov	r0, r4
 394              	.LVL51:
 395              	.L21:
  87:Core/Src/Mytouch.c **** 	{
 396              		.loc 1 87 10 is_stmt 1 discriminator 1 view .LVU99
  87:Core/Src/Mytouch.c **** 	{
 397              		.loc 1 87 2 is_stmt 0 discriminator 1 view .LVU100
 398 005c 0328     		cmp	r0, #3
 399 005e 03D8     		bhi	.L30
  89:Core/Src/Mytouch.c **** 		{
 400              		.loc 1 89 3 is_stmt 1 view .LVU101
  89:Core/Src/Mytouch.c **** 		{
 401              		.loc 1 89 8 is_stmt 0 view .LVU102
 402 0060 441C     		adds	r4, r0, #1
 403 0062 A4B2     		uxth	r4, r4
 404              	.LVL52:
  89:Core/Src/Mytouch.c **** 		{
 405              		.loc 1 89 8 view .LVU103
 406 0064 2346     		mov	r3, r4
  89:Core/Src/Mytouch.c **** 		{
 407              		.loc 1 89 3 view .LVU104
ARM GAS  /tmp/ccNZMix7.s 			page 10


 408 0066 E0E7     		b	.L22
 409              	.LVL53:
 410              	.L30:
  96:Core/Src/Mytouch.c **** 			}
  97:Core/Src/Mytouch.c **** 		}
  98:Core/Src/Mytouch.c **** 	}	  
  99:Core/Src/Mytouch.c **** 	sum=0;
 411              		.loc 1 99 5 view .LVU105
 412 0068 0020     		movs	r0, #0
 413              	.LVL54:
 100:Core/Src/Mytouch.c **** 	for(i=LOST_VAL;i<READ_TIMES-LOST_VAL;i++)sum+=buf[i];
 414              		.loc 1 100 7 view .LVU106
 415 006a 0123     		movs	r3, #1
 416 006c 08E0     		b	.L26
 417              	.LVL55:
 418              	.L27:
 419              		.loc 1 100 43 is_stmt 1 discriminator 3 view .LVU107
 420              		.loc 1 100 51 is_stmt 0 discriminator 3 view .LVU108
 421 006e 04AA     		add	r2, sp, #16
 422 0070 02EB4302 		add	r2, r2, r3, lsl #1
 423 0074 32F80C2C 		ldrh	r2, [r2, #-12]
 424              		.loc 1 100 46 discriminator 3 view .LVU109
 425 0078 1044     		add	r0, r0, r2
 426              	.LVL56:
 427              		.loc 1 100 46 discriminator 3 view .LVU110
 428 007a 80B2     		uxth	r0, r0
 429              	.LVL57:
 430              		.loc 1 100 39 is_stmt 1 discriminator 3 view .LVU111
 431              		.loc 1 100 40 is_stmt 0 discriminator 3 view .LVU112
 432 007c 0133     		adds	r3, r3, #1
 433              	.LVL58:
 434              		.loc 1 100 40 discriminator 3 view .LVU113
 435 007e 9BB2     		uxth	r3, r3
 436              	.LVL59:
 437              	.L26:
 438              		.loc 1 100 17 is_stmt 1 discriminator 1 view .LVU114
 439              		.loc 1 100 2 is_stmt 0 discriminator 1 view .LVU115
 440 0080 032B     		cmp	r3, #3
 441 0082 F4D9     		bls	.L27
 101:Core/Src/Mytouch.c **** 	temp=sum/(READ_TIMES-2*LOST_VAL);
 442              		.loc 1 101 2 is_stmt 1 view .LVU116
 443              		.loc 1 101 6 is_stmt 0 view .LVU117
 444 0084 034B     		ldr	r3, .L31
 445              	.LVL60:
 446              		.loc 1 101 6 view .LVU118
 447 0086 A3FB0030 		umull	r3, r0, r3, r0
 448              	.LVL61:
 102:Core/Src/Mytouch.c **** 	return temp;   
 449              		.loc 1 102 2 is_stmt 1 view .LVU119
 103:Core/Src/Mytouch.c **** } 
 450              		.loc 1 103 1 is_stmt 0 view .LVU120
 451 008a C0F34F00 		ubfx	r0, r0, #1, #16
 452              	.LVL62:
 453              		.loc 1 103 1 view .LVU121
 454 008e 05B0     		add	sp, sp, #20
 455              	.LCFI4:
 456              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccNZMix7.s 			page 11


 457              		@ sp needed
 458 0090 30BD     		pop	{r4, r5, pc}
 459              	.L32:
 460 0092 00BF     		.align	2
 461              	.L31:
 462 0094 ABAAAAAA 		.word	-1431655765
 463              		.cfi_endproc
 464              	.LFE149:
 466              		.section	.text.TP_Read_XY,"ax",%progbits
 467              		.align	1
 468              		.global	TP_Read_XY
 469              		.syntax unified
 470              		.thumb
 471              		.thumb_func
 472              		.fpu fpv5-d16
 474              	TP_Read_XY:
 475              	.LVL63:
 476              	.LFB150:
 104:Core/Src/Mytouch.c **** //读取x,y坐标
 105:Core/Src/Mytouch.c **** //最小值不能少于100.
 106:Core/Src/Mytouch.c **** //x,y:读取到的坐标值
 107:Core/Src/Mytouch.c **** //返回值:0,失败;1,成功。
 108:Core/Src/Mytouch.c **** u8 TP_Read_XY(u16 *x,u16 *y)
 109:Core/Src/Mytouch.c **** {
 477              		.loc 1 109 1 is_stmt 1 view -0
 478              		.cfi_startproc
 479              		@ args = 0, pretend = 0, frame = 0
 480              		@ frame_needed = 0, uses_anonymous_args = 0
 481              		.loc 1 109 1 is_stmt 0 view .LVU123
 482 0000 70B5     		push	{r4, r5, r6, lr}
 483              	.LCFI5:
 484              		.cfi_def_cfa_offset 16
 485              		.cfi_offset 4, -16
 486              		.cfi_offset 5, -12
 487              		.cfi_offset 6, -8
 488              		.cfi_offset 14, -4
 489 0002 0546     		mov	r5, r0
 490 0004 0C46     		mov	r4, r1
 110:Core/Src/Mytouch.c **** 	u16 xtemp,ytemp;			 	 		  
 491              		.loc 1 110 2 is_stmt 1 view .LVU124
 111:Core/Src/Mytouch.c **** 	xtemp=TP_Read_XOY(CMD_RDX);
 492              		.loc 1 111 2 view .LVU125
 493              		.loc 1 111 8 is_stmt 0 view .LVU126
 494 0006 064B     		ldr	r3, .L35
 495 0008 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 496              	.LVL64:
 497              		.loc 1 111 8 view .LVU127
 498 000a FFF7FEFF 		bl	TP_Read_XOY
 499              	.LVL65:
 500              		.loc 1 111 8 view .LVU128
 501 000e 0646     		mov	r6, r0
 502              	.LVL66:
 112:Core/Src/Mytouch.c **** 	ytemp=TP_Read_XOY(CMD_RDY);	  												   
 503              		.loc 1 112 2 is_stmt 1 view .LVU129
 504              		.loc 1 112 8 is_stmt 0 view .LVU130
 505 0010 044B     		ldr	r3, .L35+4
 506 0012 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccNZMix7.s 			page 12


 507 0014 FFF7FEFF 		bl	TP_Read_XOY
 508              	.LVL67:
 113:Core/Src/Mytouch.c **** 	//if(xtemp<100||ytemp<100)return 0;//读数失败
 114:Core/Src/Mytouch.c **** 	*x=xtemp;
 509              		.loc 1 114 2 is_stmt 1 view .LVU131
 510              		.loc 1 114 4 is_stmt 0 view .LVU132
 511 0018 2E80     		strh	r6, [r5]	@ movhi
 115:Core/Src/Mytouch.c **** 	*y=ytemp;
 512              		.loc 1 115 2 is_stmt 1 view .LVU133
 513              		.loc 1 115 4 is_stmt 0 view .LVU134
 514 001a 2080     		strh	r0, [r4]	@ movhi
 116:Core/Src/Mytouch.c **** 	return 1;//读数成功
 515              		.loc 1 116 2 is_stmt 1 view .LVU135
 117:Core/Src/Mytouch.c **** }
 516              		.loc 1 117 1 is_stmt 0 view .LVU136
 517 001c 0120     		movs	r0, #1
 518              	.LVL68:
 519              		.loc 1 117 1 view .LVU137
 520 001e 70BD     		pop	{r4, r5, r6, pc}
 521              	.LVL69:
 522              	.L36:
 523              		.loc 1 117 1 view .LVU138
 524              		.align	2
 525              	.L35:
 526 0020 00000000 		.word	.LANCHOR0
 527 0024 00000000 		.word	.LANCHOR1
 528              		.cfi_endproc
 529              	.LFE150:
 531              		.section	.text.TP_Read_XY2,"ax",%progbits
 532              		.align	1
 533              		.global	TP_Read_XY2
 534              		.syntax unified
 535              		.thumb
 536              		.thumb_func
 537              		.fpu fpv5-d16
 539              	TP_Read_XY2:
 540              	.LVL70:
 541              	.LFB151:
 118:Core/Src/Mytouch.c **** //连续2次读取触摸屏IC,且这两次的偏差不能超过
 119:Core/Src/Mytouch.c **** //ERR_RANGE,满足条件,则认为读数正确,否则读数错误.	   
 120:Core/Src/Mytouch.c **** //该函数能大大提高准确度
 121:Core/Src/Mytouch.c **** //x,y:读取到的坐标值
 122:Core/Src/Mytouch.c **** //返回值:0,失败;1,成功。
 123:Core/Src/Mytouch.c **** #define ERR_RANGE 50 //误差范围 
 124:Core/Src/Mytouch.c **** u8 TP_Read_XY2(u16 *x,u16 *y) 
 125:Core/Src/Mytouch.c **** {
 542              		.loc 1 125 1 is_stmt 1 view -0
 543              		.cfi_startproc
 544              		@ args = 0, pretend = 0, frame = 8
 545              		@ frame_needed = 0, uses_anonymous_args = 0
 546              		.loc 1 125 1 is_stmt 0 view .LVU140
 547 0000 30B5     		push	{r4, r5, lr}
 548              	.LCFI6:
 549              		.cfi_def_cfa_offset 12
 550              		.cfi_offset 4, -12
 551              		.cfi_offset 5, -8
 552              		.cfi_offset 14, -4
ARM GAS  /tmp/ccNZMix7.s 			page 13


 553 0002 83B0     		sub	sp, sp, #12
 554              	.LCFI7:
 555              		.cfi_def_cfa_offset 24
 556 0004 0546     		mov	r5, r0
 557 0006 0C46     		mov	r4, r1
 126:Core/Src/Mytouch.c **** 	u16 x1,y1;
 558              		.loc 1 126 2 is_stmt 1 view .LVU141
 127:Core/Src/Mytouch.c ****  	u16 x2,y2;
 559              		.loc 1 127 3 view .LVU142
 128:Core/Src/Mytouch.c ****  	u8 flag;    
 560              		.loc 1 128 3 view .LVU143
 129:Core/Src/Mytouch.c ****     flag=TP_Read_XY(&x1,&y1);   
 561              		.loc 1 129 5 view .LVU144
 562              		.loc 1 129 10 is_stmt 0 view .LVU145
 563 0008 01A9     		add	r1, sp, #4
 564              	.LVL71:
 565              		.loc 1 129 10 view .LVU146
 566 000a 0DF10600 		add	r0, sp, #6
 567              	.LVL72:
 568              		.loc 1 129 10 view .LVU147
 569 000e FFF7FEFF 		bl	TP_Read_XY
 570              	.LVL73:
 130:Core/Src/Mytouch.c ****     if(flag==0)return(0);
 571              		.loc 1 130 5 is_stmt 1 view .LVU148
 572              		.loc 1 130 7 is_stmt 0 view .LVU149
 573 0012 08B9     		cbnz	r0, .L50
 574              	.L38:
 131:Core/Src/Mytouch.c ****     flag=TP_Read_XY(&x2,&y2);	   
 132:Core/Src/Mytouch.c ****     if(flag==0)return(0);   
 133:Core/Src/Mytouch.c ****     if(((x2<=x1&&x1<x2+ERR_RANGE)||(x1<=x2&&x2<x1+ERR_RANGE))//前后两次采样在+-50内
 134:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 135:Core/Src/Mytouch.c ****     {
 136:Core/Src/Mytouch.c ****         *x=(x1+x2)/2;
 137:Core/Src/Mytouch.c ****         *y=(y1+y2)/2;
 138:Core/Src/Mytouch.c ****         return 1;
 139:Core/Src/Mytouch.c ****     }else return 0;	  
 140:Core/Src/Mytouch.c **** }   
 575              		.loc 1 140 1 view .LVU150
 576 0014 03B0     		add	sp, sp, #12
 577              	.LCFI8:
 578              		.cfi_remember_state
 579              		.cfi_def_cfa_offset 12
 580              		@ sp needed
 581 0016 30BD     		pop	{r4, r5, pc}
 582              	.LVL74:
 583              	.L50:
 584              	.LCFI9:
 585              		.cfi_restore_state
 131:Core/Src/Mytouch.c ****     flag=TP_Read_XY(&x2,&y2);	   
 586              		.loc 1 131 5 is_stmt 1 view .LVU151
 131:Core/Src/Mytouch.c ****     flag=TP_Read_XY(&x2,&y2);	   
 587              		.loc 1 131 10 is_stmt 0 view .LVU152
 588 0018 6946     		mov	r1, sp
 589 001a 0DF10200 		add	r0, sp, #2
 590 001e FFF7FEFF 		bl	TP_Read_XY
 591              	.LVL75:
 132:Core/Src/Mytouch.c ****     if(((x2<=x1&&x1<x2+ERR_RANGE)||(x1<=x2&&x2<x1+ERR_RANGE))//前后两次采样在+-50内
ARM GAS  /tmp/ccNZMix7.s 			page 14


 592              		.loc 1 132 5 is_stmt 1 view .LVU153
 132:Core/Src/Mytouch.c ****     if(((x2<=x1&&x1<x2+ERR_RANGE)||(x1<=x2&&x2<x1+ERR_RANGE))//前后两次采样在+-50内
 593              		.loc 1 132 7 is_stmt 0 view .LVU154
 594 0022 0028     		cmp	r0, #0
 595 0024 F6D0     		beq	.L38
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 596              		.loc 1 133 5 is_stmt 1 view .LVU155
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 597              		.loc 1 133 12 is_stmt 0 view .LVU156
 598 0026 BDF80220 		ldrh	r2, [sp, #2]
 599 002a BDF80630 		ldrh	r3, [sp, #6]
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 600              		.loc 1 133 7 view .LVU157
 601 002e 9A42     		cmp	r2, r3
 602 0030 03D8     		bhi	.L39
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 603              		.loc 1 133 20 discriminator 1 view .LVU158
 604 0032 02F13101 		add	r1, r2, #49
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 605              		.loc 1 133 16 discriminator 1 view .LVU159
 606 0036 9942     		cmp	r1, r3
 607 0038 05DA     		bge	.L40
 608              	.L39:
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 609              		.loc 1 133 34 discriminator 3 view .LVU160
 610 003a 9A42     		cmp	r2, r3
 611 003c 1ED3     		bcc	.L45
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 612              		.loc 1 133 47 discriminator 4 view .LVU161
 613 003e 03F13101 		add	r1, r3, #49
 133:Core/Src/Mytouch.c ****     &&((y2<=y1&&y1<y2+ERR_RANGE)||(y1<=y2&&y2<y1+ERR_RANGE)))
 614              		.loc 1 133 43 discriminator 4 view .LVU162
 615 0042 9142     		cmp	r1, r2
 616 0044 1CDB     		blt	.L46
 617              	.L40:
 134:Core/Src/Mytouch.c ****     {
 618              		.loc 1 134 11 view .LVU163
 619 0046 BDF80000 		ldrh	r0, [sp]
 620              	.LVL76:
 134:Core/Src/Mytouch.c ****     {
 621              		.loc 1 134 11 view .LVU164
 622 004a BDF80410 		ldrh	r1, [sp, #4]
 134:Core/Src/Mytouch.c ****     {
 623              		.loc 1 134 5 view .LVU165
 624 004e 8842     		cmp	r0, r1
 625 0050 03D8     		bhi	.L41
 134:Core/Src/Mytouch.c ****     {
 626              		.loc 1 134 19 discriminator 1 view .LVU166
 627 0052 00F1310C 		add	ip, r0, #49
 134:Core/Src/Mytouch.c ****     {
 628              		.loc 1 134 15 discriminator 1 view .LVU167
 629 0056 8C45     		cmp	ip, r1
 630 0058 04DA     		bge	.L42
 631              	.L41:
 134:Core/Src/Mytouch.c ****     {
 632              		.loc 1 134 33 discriminator 3 view .LVU168
 633 005a 8842     		cmp	r0, r1
ARM GAS  /tmp/ccNZMix7.s 			page 15


 634 005c 12D3     		bcc	.L47
 134:Core/Src/Mytouch.c ****     {
 635              		.loc 1 134 46 discriminator 4 view .LVU169
 636 005e 3131     		adds	r1, r1, #49
 134:Core/Src/Mytouch.c ****     {
 637              		.loc 1 134 42 discriminator 4 view .LVU170
 638 0060 8142     		cmp	r1, r0
 639 0062 11DB     		blt	.L48
 640              	.L42:
 136:Core/Src/Mytouch.c ****         *y=(y1+y2)/2;
 641              		.loc 1 136 9 is_stmt 1 view .LVU171
 136:Core/Src/Mytouch.c ****         *y=(y1+y2)/2;
 642              		.loc 1 136 19 is_stmt 0 view .LVU172
 643 0064 1344     		add	r3, r3, r2
 644 0066 5B10     		asrs	r3, r3, #1
 136:Core/Src/Mytouch.c ****         *y=(y1+y2)/2;
 645              		.loc 1 136 11 view .LVU173
 646 0068 2B80     		strh	r3, [r5]	@ movhi
 137:Core/Src/Mytouch.c ****         return 1;
 647              		.loc 1 137 9 is_stmt 1 view .LVU174
 137:Core/Src/Mytouch.c ****         return 1;
 648              		.loc 1 137 15 is_stmt 0 view .LVU175
 649 006a BDF80430 		ldrh	r3, [sp, #4]
 650 006e BDF80020 		ldrh	r2, [sp]
 137:Core/Src/Mytouch.c ****         return 1;
 651              		.loc 1 137 19 view .LVU176
 652 0072 1344     		add	r3, r3, r2
 653 0074 5B10     		asrs	r3, r3, #1
 137:Core/Src/Mytouch.c ****         return 1;
 654              		.loc 1 137 11 view .LVU177
 655 0076 2380     		strh	r3, [r4]	@ movhi
 138:Core/Src/Mytouch.c ****     }else return 0;	  
 656              		.loc 1 138 9 is_stmt 1 view .LVU178
 138:Core/Src/Mytouch.c ****     }else return 0;	  
 657              		.loc 1 138 16 is_stmt 0 view .LVU179
 658 0078 0120     		movs	r0, #1
 659 007a CBE7     		b	.L38
 660              	.LVL77:
 661              	.L45:
 139:Core/Src/Mytouch.c **** }   
 662              		.loc 1 139 18 view .LVU180
 663 007c 0020     		movs	r0, #0
 664              	.LVL78:
 139:Core/Src/Mytouch.c **** }   
 665              		.loc 1 139 18 view .LVU181
 666 007e C9E7     		b	.L38
 667              	.LVL79:
 668              	.L46:
 139:Core/Src/Mytouch.c **** }   
 669              		.loc 1 139 18 view .LVU182
 670 0080 0020     		movs	r0, #0
 671              	.LVL80:
 139:Core/Src/Mytouch.c **** }   
 672              		.loc 1 139 18 view .LVU183
 673 0082 C7E7     		b	.L38
 674              	.L47:
 675 0084 0020     		movs	r0, #0
ARM GAS  /tmp/ccNZMix7.s 			page 16


 676 0086 C5E7     		b	.L38
 677              	.L48:
 678 0088 0020     		movs	r0, #0
 679 008a C3E7     		b	.L38
 680              		.cfi_endproc
 681              	.LFE151:
 683              		.section	.text.TP_Scan,"ax",%progbits
 684              		.align	1
 685              		.global	TP_Scan
 686              		.syntax unified
 687              		.thumb
 688              		.thumb_func
 689              		.fpu fpv5-d16
 691              	TP_Scan:
 692              	.LVL81:
 693              	.LFB154:
 141:Core/Src/Mytouch.c **** //////////////////////////////////////////////////////////////////////////////////		  
 142:Core/Src/Mytouch.c **** //与LCD部分有关的函数  
 143:Core/Src/Mytouch.c **** //画一个触摸点
 144:Core/Src/Mytouch.c **** //用来校准用的
 145:Core/Src/Mytouch.c **** //x,y:坐标
 146:Core/Src/Mytouch.c **** //color:颜色
 147:Core/Src/Mytouch.c **** void TP_Drow_Touch_Point(u16 x,u16 y,u16 color)
 148:Core/Src/Mytouch.c **** {
 149:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 150:Core/Src/Mytouch.c **** 	LCD_DrawLine(x-12,y,x+13,y);//横线
 151:Core/Src/Mytouch.c **** 	LCD_DrawLine(x,y-12,x,y+13);//竖线
 152:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y+1);
 153:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x-1,y+1);
 154:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y-1);
 155:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x-1,y-1);
 156:Core/Src/Mytouch.c **** 	LCD_Draw_Circle(x,y,6);//画中心圈
 157:Core/Src/Mytouch.c **** }	  
 158:Core/Src/Mytouch.c **** //画一个大点(2*2的点)		   
 159:Core/Src/Mytouch.c **** //x,y:坐标
 160:Core/Src/Mytouch.c **** //color:颜色
 161:Core/Src/Mytouch.c **** void TP_Draw_Big_Point(u16 x,u16 y,u16 color)
 162:Core/Src/Mytouch.c **** {	    
 163:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 164:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y);//中心点 
 165:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y);
 166:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y+1);
 167:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y+1);	 	  	
 168:Core/Src/Mytouch.c **** }							  
 169:Core/Src/Mytouch.c **** //////////////////////////////////////////////////////////////////////////////////		  
 170:Core/Src/Mytouch.c **** //触摸按键扫描
 171:Core/Src/Mytouch.c **** //tp:0,屏幕坐标;1,物理坐标(校准等特殊场合用)
 172:Core/Src/Mytouch.c **** //返回值:当前触屏状态.
 173:Core/Src/Mytouch.c **** //0,触屏无触摸;1,触屏有触摸
 174:Core/Src/Mytouch.c **** u8 TP_Scan(u8 tp)
 175:Core/Src/Mytouch.c **** {			   
 694              		.loc 1 175 1 is_stmt 1 view -0
 695              		.cfi_startproc
 696              		@ args = 0, pretend = 0, frame = 0
 697              		@ frame_needed = 0, uses_anonymous_args = 0
 698              		.loc 1 175 1 is_stmt 0 view .LVU185
 699 0000 10B5     		push	{r4, lr}
ARM GAS  /tmp/ccNZMix7.s 			page 17


 700              	.LCFI10:
 701              		.cfi_def_cfa_offset 8
 702              		.cfi_offset 4, -8
 703              		.cfi_offset 14, -4
 704 0002 0446     		mov	r4, r0
 176:Core/Src/Mytouch.c **** 	if(PEN==0)//有按键按下
 705              		.loc 1 176 2 is_stmt 1 view .LVU186
 706              		.loc 1 176 5 is_stmt 0 view .LVU187
 707 0004 8021     		movs	r1, #128
 708 0006 3548     		ldr	r0, .L59
 709              	.LVL82:
 710              		.loc 1 176 5 view .LVU188
 711 0008 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 712              	.LVL83:
 713              		.loc 1 176 4 view .LVU189
 714 000c 0028     		cmp	r0, #0
 715 000e 4FD1     		bne	.L52
 177:Core/Src/Mytouch.c **** 	{
 178:Core/Src/Mytouch.c **** 		if(tp)TP_Read_XY2(&tp_dev.x[0],&tp_dev.y[0]);//读取物理坐标
 716              		.loc 1 178 3 is_stmt 1 view .LVU190
 717              		.loc 1 178 5 is_stmt 0 view .LVU191
 718 0010 C4B1     		cbz	r4, .L53
 719              		.loc 1 178 9 is_stmt 1 discriminator 1 view .LVU192
 720 0012 3348     		ldr	r0, .L59+4
 721 0014 00F11601 		add	r1, r0, #22
 722 0018 0C30     		adds	r0, r0, #12
 723 001a FFF7FEFF 		bl	TP_Read_XY2
 724              	.LVL84:
 725              	.L54:
 179:Core/Src/Mytouch.c **** 		else if(TP_Read_XY2(&tp_dev.x[0],&tp_dev.y[0]))//读取屏幕坐标
 180:Core/Src/Mytouch.c **** 		{
 181:Core/Src/Mytouch.c **** 	 		tp_dev.x[0]=tp_dev.xfac*tp_dev.x[0]+tp_dev.xoff;//将结果转换为屏幕坐标
 182:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 183:Core/Src/Mytouch.c **** 	 	} 
 184:Core/Src/Mytouch.c **** 		if((tp_dev.sta&TP_PRES_DOWN)==0)//之前没有被按下
 726              		.loc 1 184 3 view .LVU193
 727              		.loc 1 184 31 is_stmt 0 view .LVU194
 728 001e 304B     		ldr	r3, .L59+4
 729 0020 93F92030 		ldrsb	r3, [r3, #32]
 730              		.loc 1 184 5 view .LVU195
 731 0024 002B     		cmp	r3, #0
 732 0026 07DB     		blt	.L55
 185:Core/Src/Mytouch.c **** 		{		 
 186:Core/Src/Mytouch.c **** 			tp_dev.sta=TP_PRES_DOWN|TP_CATH_PRES;//按键按下  
 733              		.loc 1 186 4 is_stmt 1 view .LVU196
 734              		.loc 1 186 14 is_stmt 0 view .LVU197
 735 0028 2D4B     		ldr	r3, .L59+4
 736 002a C022     		movs	r2, #192
 737 002c 83F82020 		strb	r2, [r3, #32]
 187:Core/Src/Mytouch.c **** 			tp_dev.x[4]=tp_dev.x[0];//记录第一次按下时的坐标
 738              		.loc 1 187 4 is_stmt 1 view .LVU198
 739              		.loc 1 187 24 is_stmt 0 view .LVU199
 740 0030 9A89     		ldrh	r2, [r3, #12]
 741              		.loc 1 187 15 view .LVU200
 742 0032 9A82     		strh	r2, [r3, #20]	@ movhi
 188:Core/Src/Mytouch.c **** 			tp_dev.y[4]=tp_dev.y[0];  	   			 
 743              		.loc 1 188 4 is_stmt 1 view .LVU201
ARM GAS  /tmp/ccNZMix7.s 			page 18


 744              		.loc 1 188 24 is_stmt 0 view .LVU202
 745 0034 DA8A     		ldrh	r2, [r3, #22]
 746              		.loc 1 188 15 view .LVU203
 747 0036 DA83     		strh	r2, [r3, #30]	@ movhi
 748              	.L55:
 189:Core/Src/Mytouch.c **** 		}			   
 190:Core/Src/Mytouch.c **** 	}else
 191:Core/Src/Mytouch.c **** 	{
 192:Core/Src/Mytouch.c **** 		if(tp_dev.sta&TP_PRES_DOWN)//之前是被按下的
 193:Core/Src/Mytouch.c **** 		{
 194:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<7);//标记按键松开	
 195:Core/Src/Mytouch.c **** 		}else//之前就没有被按下
 196:Core/Src/Mytouch.c **** 		{
 197:Core/Src/Mytouch.c **** 			tp_dev.x[4]=0;
 198:Core/Src/Mytouch.c **** 			tp_dev.y[4]=0;
 199:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 200:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 201:Core/Src/Mytouch.c **** 		}	    
 202:Core/Src/Mytouch.c **** 	}
 203:Core/Src/Mytouch.c **** 	return tp_dev.sta&TP_PRES_DOWN;//返回当前的触屏状态
 749              		.loc 1 203 2 is_stmt 1 view .LVU204
 750              		.loc 1 203 15 is_stmt 0 view .LVU205
 751 0038 294B     		ldr	r3, .L59+4
 752 003a 93F82000 		ldrb	r0, [r3, #32]	@ zero_extendqisi2
 204:Core/Src/Mytouch.c **** }  
 753              		.loc 1 204 1 view .LVU206
 754 003e 00F08000 		and	r0, r0, #128
 755 0042 10BD     		pop	{r4, pc}
 756              	.L53:
 179:Core/Src/Mytouch.c **** 		{
 757              		.loc 1 179 8 is_stmt 1 view .LVU207
 179:Core/Src/Mytouch.c **** 		{
 758              		.loc 1 179 11 is_stmt 0 view .LVU208
 759 0044 2648     		ldr	r0, .L59+4
 760 0046 00F11601 		add	r1, r0, #22
 761 004a 0C30     		adds	r0, r0, #12
 762 004c FFF7FEFF 		bl	TP_Read_XY2
 763              	.LVL85:
 179:Core/Src/Mytouch.c **** 		{
 764              		.loc 1 179 10 view .LVU209
 765 0050 0028     		cmp	r0, #0
 766 0052 E4D0     		beq	.L54
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 767              		.loc 1 181 5 is_stmt 1 view .LVU210
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 768              		.loc 1 181 23 is_stmt 0 view .LVU211
 769 0054 224B     		ldr	r3, .L59+4
 770 0056 93ED097A 		vldr.32	s14, [r3, #36]
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 771              		.loc 1 181 37 view .LVU212
 772 005a 9A89     		ldrh	r2, [r3, #12]
 773 005c 07EE902A 		vmov	s15, r2	@ int
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 774              		.loc 1 181 28 view .LVU213
 775 0060 F8EEE77A 		vcvt.f32.s32	s15, s15
 776 0064 27EE877A 		vmul.f32	s14, s15, s14
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
ARM GAS  /tmp/ccNZMix7.s 			page 19


 777              		.loc 1 181 47 view .LVU214
 778 0068 B3F92C20 		ldrsh	r2, [r3, #44]
 779 006c 07EE902A 		vmov	s15, r2	@ int
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 780              		.loc 1 181 40 view .LVU215
 781 0070 F8EEE77A 		vcvt.f32.s32	s15, s15
 782 0074 77EE877A 		vadd.f32	s15, s15, s14
 181:Core/Src/Mytouch.c **** 			tp_dev.y[0]=tp_dev.yfac*tp_dev.y[0]+tp_dev.yoff;  
 783              		.loc 1 181 16 view .LVU216
 784 0078 FCEEE77A 		vcvt.u32.f32	s15, s15
 785 007c 17EE902A 		vmov	r2, s15	@ int
 786 0080 9A81     		strh	r2, [r3, #12]	@ movhi
 182:Core/Src/Mytouch.c **** 	 	} 
 787              		.loc 1 182 4 is_stmt 1 view .LVU217
 182:Core/Src/Mytouch.c **** 	 	} 
 788              		.loc 1 182 22 is_stmt 0 view .LVU218
 789 0082 93ED0A7A 		vldr.32	s14, [r3, #40]
 182:Core/Src/Mytouch.c **** 	 	} 
 790              		.loc 1 182 36 view .LVU219
 791 0086 DA8A     		ldrh	r2, [r3, #22]
 792 0088 07EE902A 		vmov	s15, r2	@ int
 182:Core/Src/Mytouch.c **** 	 	} 
 793              		.loc 1 182 27 view .LVU220
 794 008c F8EEE77A 		vcvt.f32.s32	s15, s15
 795 0090 27EE877A 		vmul.f32	s14, s15, s14
 182:Core/Src/Mytouch.c **** 	 	} 
 796              		.loc 1 182 46 view .LVU221
 797 0094 B3F92E20 		ldrsh	r2, [r3, #46]
 798 0098 07EE902A 		vmov	s15, r2	@ int
 182:Core/Src/Mytouch.c **** 	 	} 
 799              		.loc 1 182 39 view .LVU222
 800 009c F8EEE77A 		vcvt.f32.s32	s15, s15
 801 00a0 77EE877A 		vadd.f32	s15, s15, s14
 182:Core/Src/Mytouch.c **** 	 	} 
 802              		.loc 1 182 15 view .LVU223
 803 00a4 FCEEE77A 		vcvt.u32.f32	s15, s15
 804 00a8 17EE902A 		vmov	r2, s15	@ int
 805 00ac DA82     		strh	r2, [r3, #22]	@ movhi
 806 00ae B6E7     		b	.L54
 807              	.L52:
 192:Core/Src/Mytouch.c **** 		{
 808              		.loc 1 192 3 is_stmt 1 view .LVU224
 192:Core/Src/Mytouch.c **** 		{
 809              		.loc 1 192 12 is_stmt 0 view .LVU225
 810 00b0 0B4B     		ldr	r3, .L59+4
 811 00b2 93F82020 		ldrb	r2, [r3, #32]	@ zero_extendqisi2
 192:Core/Src/Mytouch.c **** 		{
 812              		.loc 1 192 6 view .LVU226
 813 00b6 93F92030 		ldrsb	r3, [r3, #32]
 192:Core/Src/Mytouch.c **** 		{
 814              		.loc 1 192 5 view .LVU227
 815 00ba 002B     		cmp	r3, #0
 816 00bc 08DB     		blt	.L58
 197:Core/Src/Mytouch.c **** 			tp_dev.y[4]=0;
 817              		.loc 1 197 4 is_stmt 1 view .LVU228
 197:Core/Src/Mytouch.c **** 			tp_dev.y[4]=0;
 818              		.loc 1 197 15 is_stmt 0 view .LVU229
ARM GAS  /tmp/ccNZMix7.s 			page 20


 819 00be 084B     		ldr	r3, .L59+4
 820 00c0 0022     		movs	r2, #0
 821 00c2 9A82     		strh	r2, [r3, #20]	@ movhi
 198:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 822              		.loc 1 198 4 is_stmt 1 view .LVU230
 198:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 823              		.loc 1 198 15 is_stmt 0 view .LVU231
 824 00c4 DA83     		strh	r2, [r3, #30]	@ movhi
 199:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 825              		.loc 1 199 4 is_stmt 1 view .LVU232
 199:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 826              		.loc 1 199 15 is_stmt 0 view .LVU233
 827 00c6 4FF6FF72 		movw	r2, #65535
 828 00ca 9A81     		strh	r2, [r3, #12]	@ movhi
 200:Core/Src/Mytouch.c **** 		}	    
 829              		.loc 1 200 4 is_stmt 1 view .LVU234
 200:Core/Src/Mytouch.c **** 		}	    
 830              		.loc 1 200 15 is_stmt 0 view .LVU235
 831 00cc DA82     		strh	r2, [r3, #22]	@ movhi
 832 00ce B3E7     		b	.L55
 833              	.L58:
 194:Core/Src/Mytouch.c **** 		}else//之前就没有被按下
 834              		.loc 1 194 4 is_stmt 1 view .LVU236
 194:Core/Src/Mytouch.c **** 		}else//之前就没有被按下
 835              		.loc 1 194 14 is_stmt 0 view .LVU237
 836 00d0 02F07F02 		and	r2, r2, #127
 837 00d4 024B     		ldr	r3, .L59+4
 838 00d6 83F82020 		strb	r2, [r3, #32]
 839 00da ADE7     		b	.L55
 840              	.L60:
 841              		.align	2
 842              	.L59:
 843 00dc 001C0258 		.word	1476533248
 844 00e0 00000000 		.word	.LANCHOR2
 845              		.cfi_endproc
 846              	.LFE154:
 848              		.section	.text.TP_Drow_Touch_Point,"ax",%progbits
 849              		.align	1
 850              		.global	TP_Drow_Touch_Point
 851              		.syntax unified
 852              		.thumb
 853              		.thumb_func
 854              		.fpu fpv5-d16
 856              	TP_Drow_Touch_Point:
 857              	.LVL86:
 858              	.LFB152:
 148:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 859              		.loc 1 148 1 is_stmt 1 view -0
 860              		.cfi_startproc
 861              		@ args = 0, pretend = 0, frame = 0
 862              		@ frame_needed = 0, uses_anonymous_args = 0
 148:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 863              		.loc 1 148 1 is_stmt 0 view .LVU239
 864 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 865              	.LCFI11:
 866              		.cfi_def_cfa_offset 24
 867              		.cfi_offset 4, -24
ARM GAS  /tmp/ccNZMix7.s 			page 21


 868              		.cfi_offset 5, -20
 869              		.cfi_offset 6, -16
 870              		.cfi_offset 7, -12
 871              		.cfi_offset 8, -8
 872              		.cfi_offset 14, -4
 873 0004 0446     		mov	r4, r0
 874 0006 0D46     		mov	r5, r1
 149:Core/Src/Mytouch.c **** 	LCD_DrawLine(x-12,y,x+13,y);//横线
 875              		.loc 1 149 2 is_stmt 1 view .LVU240
 149:Core/Src/Mytouch.c **** 	LCD_DrawLine(x-12,y,x+13,y);//横线
 876              		.loc 1 149 13 is_stmt 0 view .LVU241
 877 0008 1A4B     		ldr	r3, .L63
 878 000a 1A60     		str	r2, [r3]
 150:Core/Src/Mytouch.c **** 	LCD_DrawLine(x,y-12,x,y+13);//竖线
 879              		.loc 1 150 2 is_stmt 1 view .LVU242
 880 000c 00F10D02 		add	r2, r0, #13
 881              	.LVL87:
 150:Core/Src/Mytouch.c **** 	LCD_DrawLine(x,y-12,x,y+13);//竖线
 882              		.loc 1 150 2 is_stmt 0 view .LVU243
 883 0010 0C38     		subs	r0, r0, #12
 884              	.LVL88:
 150:Core/Src/Mytouch.c **** 	LCD_DrawLine(x,y-12,x,y+13);//竖线
 885              		.loc 1 150 2 view .LVU244
 886 0012 0B46     		mov	r3, r1
 887 0014 92B2     		uxth	r2, r2
 888 0016 80B2     		uxth	r0, r0
 889 0018 FFF7FEFF 		bl	LCD_DrawLine
 890              	.LVL89:
 151:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y+1);
 891              		.loc 1 151 2 is_stmt 1 view .LVU245
 892 001c 05F10D03 		add	r3, r5, #13
 893 0020 A5F10C01 		sub	r1, r5, #12
 894 0024 9BB2     		uxth	r3, r3
 895 0026 2246     		mov	r2, r4
 896 0028 89B2     		uxth	r1, r1
 897 002a 2046     		mov	r0, r4
 898 002c FFF7FEFF 		bl	LCD_DrawLine
 899              	.LVL90:
 152:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x-1,y+1);
 900              		.loc 1 152 2 view .LVU246
 901 0030 04F10108 		add	r8, r4, #1
 902 0034 1FFA88F8 		uxth	r8, r8
 903 0038 6F1C     		adds	r7, r5, #1
 904 003a BFB2     		uxth	r7, r7
 905 003c 3946     		mov	r1, r7
 906 003e 4046     		mov	r0, r8
 907 0040 FFF7FEFF 		bl	LCD_DrawPoint
 908              	.LVL91:
 153:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y-1);
 909              		.loc 1 153 2 view .LVU247
 910 0044 661E     		subs	r6, r4, #1
 911 0046 B6B2     		uxth	r6, r6
 912 0048 3946     		mov	r1, r7
 913 004a 3046     		mov	r0, r6
 914 004c FFF7FEFF 		bl	LCD_DrawPoint
 915              	.LVL92:
 154:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x-1,y-1);
ARM GAS  /tmp/ccNZMix7.s 			page 22


 916              		.loc 1 154 2 view .LVU248
 917 0050 6F1E     		subs	r7, r5, #1
 918 0052 BFB2     		uxth	r7, r7
 919 0054 3946     		mov	r1, r7
 920 0056 4046     		mov	r0, r8
 921 0058 FFF7FEFF 		bl	LCD_DrawPoint
 922              	.LVL93:
 155:Core/Src/Mytouch.c **** 	LCD_Draw_Circle(x,y,6);//画中心圈
 923              		.loc 1 155 2 view .LVU249
 924 005c 3946     		mov	r1, r7
 925 005e 3046     		mov	r0, r6
 926 0060 FFF7FEFF 		bl	LCD_DrawPoint
 927              	.LVL94:
 156:Core/Src/Mytouch.c **** }	  
 928              		.loc 1 156 2 view .LVU250
 929 0064 0622     		movs	r2, #6
 930 0066 2946     		mov	r1, r5
 931 0068 2046     		mov	r0, r4
 932 006a FFF7FEFF 		bl	LCD_Draw_Circle
 933              	.LVL95:
 157:Core/Src/Mytouch.c **** //画一个大点(2*2的点)		   
 934              		.loc 1 157 1 is_stmt 0 view .LVU251
 935 006e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 936              	.L64:
 937 0072 00BF     		.align	2
 938              	.L63:
 939 0074 00000000 		.word	POINT_COLOR
 940              		.cfi_endproc
 941              	.LFE152:
 943              		.section	.text.TP_Draw_Big_Point,"ax",%progbits
 944              		.align	1
 945              		.global	TP_Draw_Big_Point
 946              		.syntax unified
 947              		.thumb
 948              		.thumb_func
 949              		.fpu fpv5-d16
 951              	TP_Draw_Big_Point:
 952              	.LVL96:
 953              	.LFB153:
 162:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 954              		.loc 1 162 1 is_stmt 1 view -0
 955              		.cfi_startproc
 956              		@ args = 0, pretend = 0, frame = 0
 957              		@ frame_needed = 0, uses_anonymous_args = 0
 162:Core/Src/Mytouch.c **** 	POINT_COLOR=color;
 958              		.loc 1 162 1 is_stmt 0 view .LVU253
 959 0000 70B5     		push	{r4, r5, r6, lr}
 960              	.LCFI12:
 961              		.cfi_def_cfa_offset 16
 962              		.cfi_offset 4, -16
 963              		.cfi_offset 5, -12
 964              		.cfi_offset 6, -8
 965              		.cfi_offset 14, -4
 966 0002 0646     		mov	r6, r0
 967 0004 0C46     		mov	r4, r1
 163:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y);//中心点 
 968              		.loc 1 163 2 is_stmt 1 view .LVU254
ARM GAS  /tmp/ccNZMix7.s 			page 23


 163:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y);//中心点 
 969              		.loc 1 163 13 is_stmt 0 view .LVU255
 970 0006 0A4B     		ldr	r3, .L67
 971 0008 1A60     		str	r2, [r3]
 164:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y);
 972              		.loc 1 164 2 is_stmt 1 view .LVU256
 973 000a FFF7FEFF 		bl	LCD_DrawPoint
 974              	.LVL97:
 165:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x,y+1);
 975              		.loc 1 165 2 view .LVU257
 976 000e 751C     		adds	r5, r6, #1
 977 0010 ADB2     		uxth	r5, r5
 978 0012 2146     		mov	r1, r4
 979 0014 2846     		mov	r0, r5
 980 0016 FFF7FEFF 		bl	LCD_DrawPoint
 981              	.LVL98:
 166:Core/Src/Mytouch.c **** 	LCD_DrawPoint(x+1,y+1);	 	  	
 982              		.loc 1 166 2 view .LVU258
 983 001a 0134     		adds	r4, r4, #1
 984 001c A4B2     		uxth	r4, r4
 985 001e 2146     		mov	r1, r4
 986 0020 3046     		mov	r0, r6
 987 0022 FFF7FEFF 		bl	LCD_DrawPoint
 988              	.LVL99:
 167:Core/Src/Mytouch.c **** }							  
 989              		.loc 1 167 2 view .LVU259
 990 0026 2146     		mov	r1, r4
 991 0028 2846     		mov	r0, r5
 992 002a FFF7FEFF 		bl	LCD_DrawPoint
 993              	.LVL100:
 168:Core/Src/Mytouch.c **** //////////////////////////////////////////////////////////////////////////////////		  
 994              		.loc 1 168 1 is_stmt 0 view .LVU260
 995 002e 70BD     		pop	{r4, r5, r6, pc}
 996              	.L68:
 997              		.align	2
 998              	.L67:
 999 0030 00000000 		.word	POINT_COLOR
 1000              		.cfi_endproc
 1001              	.LFE153:
 1003              		.section	.rodata.TP_Adj_Info_Show.str1.4,"aMS",%progbits,1
 1004              		.align	2
 1005              	.LC0:
 1006 0000 78313A00 		.ascii	"x1:\000"
 1007              		.align	2
 1008              	.LC1:
 1009 0004 79313A00 		.ascii	"y1:\000"
 1010              		.align	2
 1011              	.LC2:
 1012 0008 78323A00 		.ascii	"x2:\000"
 1013              		.align	2
 1014              	.LC3:
 1015 000c 79323A00 		.ascii	"y2:\000"
 1016              		.align	2
 1017              	.LC4:
 1018 0010 78333A00 		.ascii	"x3:\000"
 1019              		.align	2
 1020              	.LC5:
ARM GAS  /tmp/ccNZMix7.s 			page 24


 1021 0014 79333A00 		.ascii	"y3:\000"
 1022              		.align	2
 1023              	.LC6:
 1024 0018 78343A00 		.ascii	"x4:\000"
 1025              		.align	2
 1026              	.LC7:
 1027 001c 79343A00 		.ascii	"y4:\000"
 1028              		.align	2
 1029              	.LC8:
 1030 0020 66616320 		.ascii	"fac is:\000"
 1030      69733A00 
 1031              		.section	.text.TP_Adj_Info_Show,"ax",%progbits
 1032              		.align	1
 1033              		.global	TP_Adj_Info_Show
 1034              		.syntax unified
 1035              		.thumb
 1036              		.thumb_func
 1037              		.fpu fpv5-d16
 1039              	TP_Adj_Info_Show:
 1040              	.LVL101:
 1041              	.LFB157:
 205:Core/Src/Mytouch.c **** //////////////////////////////////////////////////////////////////////////	 
 206:Core/Src/Mytouch.c **** //保存在EEPROM里面的地址区间基址,占用13个字节(RANGE:SAVE_ADDR_BASE~SAVE_ADDR_BASE+
 207:Core/Src/Mytouch.c **** #define SAVE_ADDR_BASE 40
 208:Core/Src/Mytouch.c **** //保存校准参数										    
 209:Core/Src/Mytouch.c **** void TP_Save_Adjdata(void)
 210:Core/Src/Mytouch.c **** {
 211:Core/Src/Mytouch.c **** 	int temp;			 
 212:Core/Src/Mytouch.c **** 	//保存校正结果!		   							  
 213:Core/Src/Mytouch.c **** 	temp=tp_dev.xfac*100000000;//保存x校正因素      
 214:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE,temp,4);   
 215:Core/Src/Mytouch.c **** 	temp=tp_dev.yfac*100000000;//保存y校正因素    
 216:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+4,temp,4);
 217:Core/Src/Mytouch.c **** 	//保存x偏移量
 218:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+8,tp_dev.xoff,2);		    
 219:Core/Src/Mytouch.c **** 	//保存y偏移量
 220:Core/Src/Mytouch.c **** 	AT24CXX_WriteLenByte(SAVE_ADDR_BASE+10,tp_dev.yoff,2);	
 221:Core/Src/Mytouch.c **** 	//保存触屏类型
 222:Core/Src/Mytouch.c **** 	AT24CXX_WriteOneByte(SAVE_ADDR_BASE+12,tp_dev.touchtype);	
 223:Core/Src/Mytouch.c **** 	temp=0X0A;//标记校准过了
 224:Core/Src/Mytouch.c **** 	AT24CXX_WriteOneByte(SAVE_ADDR_BASE+13,temp); 
 225:Core/Src/Mytouch.c **** }
 226:Core/Src/Mytouch.c **** //得到保存在EEPROM里面的校准值
 227:Core/Src/Mytouch.c **** //返回值：1，成功获取数据
 228:Core/Src/Mytouch.c **** //        0，获取失败，要重新校准
 229:Core/Src/Mytouch.c **** u8 TP_Get_Adjdata(void)
 230:Core/Src/Mytouch.c **** {					  
 231:Core/Src/Mytouch.c **** 	int tempfac;
 232:Core/Src/Mytouch.c **** 	tempfac=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+13);//读取标记字,看是否校准过！ 		 
 233:Core/Src/Mytouch.c **** 	if(tempfac==0X0A)//触摸屏已经校准过了			   
 234:Core/Src/Mytouch.c **** 	{    												 
 235:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE,4);		   
 236:Core/Src/Mytouch.c **** 		tp_dev.xfac=(float)tempfac/100000000;//得到x校准参数
 237:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 238:Core/Src/Mytouch.c **** 		tp_dev.yfac=(float)tempfac/100000000;//得到y校准参数
 239:Core/Src/Mytouch.c **** 	    //得到x偏移量
 240:Core/Src/Mytouch.c **** 		tp_dev.xoff=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+8,2);			   	  
ARM GAS  /tmp/ccNZMix7.s 			page 25


 241:Core/Src/Mytouch.c ****  	    //得到y偏移量
 242:Core/Src/Mytouch.c **** 		tp_dev.yoff=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+10,2);				 	  
 243:Core/Src/Mytouch.c ****  		tp_dev.touchtype=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+12);//读取触屏类型标记
 244:Core/Src/Mytouch.c **** 		if(tp_dev.touchtype)//X,Y方向与屏幕相反
 245:Core/Src/Mytouch.c **** 		{
 246:Core/Src/Mytouch.c **** 			CMD_RDX=0X90;
 247:Core/Src/Mytouch.c **** 			CMD_RDY=0XD0;	 
 248:Core/Src/Mytouch.c **** 		}else				   //X,Y方向与屏幕相同
 249:Core/Src/Mytouch.c **** 		{
 250:Core/Src/Mytouch.c **** 			CMD_RDX=0XD0;
 251:Core/Src/Mytouch.c **** 			CMD_RDY=0X90;	 
 252:Core/Src/Mytouch.c **** 		}		 
 253:Core/Src/Mytouch.c **** 		return 1;	 
 254:Core/Src/Mytouch.c **** 	}
 255:Core/Src/Mytouch.c **** 	return 0;
 256:Core/Src/Mytouch.c **** }	 
 257:Core/Src/Mytouch.c **** //提示字符串
 258:Core/Src/Mytouch.c **** u8* const TP_REMIND_MSG_TBL="Please use the stylus click the cross on the screen.The cross will alw
 259:Core/Src/Mytouch.c ****  					  
 260:Core/Src/Mytouch.c **** //提示校准结果(各个参数)
 261:Core/Src/Mytouch.c **** void TP_Adj_Info_Show(u16 x0,u16 y0,u16 x1,u16 y1,u16 x2,u16 y2,u16 x3,u16 y3,u16 fac)
 262:Core/Src/Mytouch.c **** {	  
 1042              		.loc 1 262 1 is_stmt 1 view -0
 1043              		.cfi_startproc
 1044              		@ args = 20, pretend = 0, frame = 0
 1045              		@ frame_needed = 0, uses_anonymous_args = 0
 1046              		.loc 1 262 1 is_stmt 0 view .LVU262
 1047 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1048              	.LCFI13:
 1049              		.cfi_def_cfa_offset 28
 1050              		.cfi_offset 4, -28
 1051              		.cfi_offset 5, -24
 1052              		.cfi_offset 6, -20
 1053              		.cfi_offset 7, -16
 1054              		.cfi_offset 8, -12
 1055              		.cfi_offset 9, -8
 1056              		.cfi_offset 14, -4
 1057 0004 83B0     		sub	sp, sp, #12
 1058              	.LCFI14:
 1059              		.cfi_def_cfa_offset 40
 1060 0006 8146     		mov	r9, r0
 1061 0008 8846     		mov	r8, r1
 1062 000a 1746     		mov	r7, r2
 1063 000c 1E46     		mov	r6, r3
 263:Core/Src/Mytouch.c **** 	POINT_COLOR=RED;
 1064              		.loc 1 263 2 is_stmt 1 view .LVU263
 1065              		.loc 1 263 13 is_stmt 0 view .LVU264
 1066 000e 4F4B     		ldr	r3, .L71
 1067              	.LVL102:
 1068              		.loc 1 263 13 view .LVU265
 1069 0010 4FF47842 		mov	r2, #63488
 1070              	.LVL103:
 1071              		.loc 1 263 13 view .LVU266
 1072 0014 1A60     		str	r2, [r3]
 264:Core/Src/Mytouch.c **** 	LCD_ShowString(40,160,lcddev.width,lcddev.height,16,"x1:");
 1073              		.loc 1 264 2 is_stmt 1 view .LVU267
 1074 0016 4E4D     		ldr	r5, .L71+4
ARM GAS  /tmp/ccNZMix7.s 			page 26


 1075 0018 4E4B     		ldr	r3, .L71+8
 1076 001a 0193     		str	r3, [sp, #4]
 1077 001c 1024     		movs	r4, #16
 1078 001e 0094     		str	r4, [sp]
 1079 0020 6B88     		ldrh	r3, [r5, #2]
 1080 0022 2A88     		ldrh	r2, [r5]
 1081 0024 A021     		movs	r1, #160
 1082              	.LVL104:
 1083              		.loc 1 264 2 is_stmt 0 view .LVU268
 1084 0026 2820     		movs	r0, #40
 1085              	.LVL105:
 1086              		.loc 1 264 2 view .LVU269
 1087 0028 FFF7FEFF 		bl	LCD_ShowString
 1088              	.LVL106:
 265:Core/Src/Mytouch.c ****  	LCD_ShowString(40+80,160,lcddev.width,lcddev.height,16,"y1:");
 1089              		.loc 1 265 3 is_stmt 1 view .LVU270
 1090 002c 4A4B     		ldr	r3, .L71+12
 1091 002e 0193     		str	r3, [sp, #4]
 1092 0030 0094     		str	r4, [sp]
 1093 0032 6B88     		ldrh	r3, [r5, #2]
 1094 0034 2A88     		ldrh	r2, [r5]
 1095 0036 A021     		movs	r1, #160
 1096 0038 7820     		movs	r0, #120
 1097 003a FFF7FEFF 		bl	LCD_ShowString
 1098              	.LVL107:
 266:Core/Src/Mytouch.c ****  	LCD_ShowString(40,180,lcddev.width,lcddev.height,16,"x2:");
 1099              		.loc 1 266 3 view .LVU271
 1100 003e 474B     		ldr	r3, .L71+16
 1101 0040 0193     		str	r3, [sp, #4]
 1102 0042 0094     		str	r4, [sp]
 1103 0044 6B88     		ldrh	r3, [r5, #2]
 1104 0046 2A88     		ldrh	r2, [r5]
 1105 0048 B421     		movs	r1, #180
 1106 004a 2820     		movs	r0, #40
 1107 004c FFF7FEFF 		bl	LCD_ShowString
 1108              	.LVL108:
 267:Core/Src/Mytouch.c ****  	LCD_ShowString(40+80,180,lcddev.width,lcddev.height,16,"y2:");
 1109              		.loc 1 267 3 view .LVU272
 1110 0050 434B     		ldr	r3, .L71+20
 1111 0052 0193     		str	r3, [sp, #4]
 1112 0054 0094     		str	r4, [sp]
 1113 0056 6B88     		ldrh	r3, [r5, #2]
 1114 0058 2A88     		ldrh	r2, [r5]
 1115 005a B421     		movs	r1, #180
 1116 005c 7820     		movs	r0, #120
 1117 005e FFF7FEFF 		bl	LCD_ShowString
 1118              	.LVL109:
 268:Core/Src/Mytouch.c **** 	LCD_ShowString(40,200,lcddev.width,lcddev.height,16,"x3:");
 1119              		.loc 1 268 2 view .LVU273
 1120 0062 404B     		ldr	r3, .L71+24
 1121 0064 0193     		str	r3, [sp, #4]
 1122 0066 0094     		str	r4, [sp]
 1123 0068 6B88     		ldrh	r3, [r5, #2]
 1124 006a 2A88     		ldrh	r2, [r5]
 1125 006c C821     		movs	r1, #200
 1126 006e 2820     		movs	r0, #40
 1127 0070 FFF7FEFF 		bl	LCD_ShowString
ARM GAS  /tmp/ccNZMix7.s 			page 27


 1128              	.LVL110:
 269:Core/Src/Mytouch.c ****  	LCD_ShowString(40+80,200,lcddev.width,lcddev.height,16,"y3:");
 1129              		.loc 1 269 3 view .LVU274
 1130 0074 3C4B     		ldr	r3, .L71+28
 1131 0076 0193     		str	r3, [sp, #4]
 1132 0078 0094     		str	r4, [sp]
 1133 007a 6B88     		ldrh	r3, [r5, #2]
 1134 007c 2A88     		ldrh	r2, [r5]
 1135 007e C821     		movs	r1, #200
 1136 0080 7820     		movs	r0, #120
 1137 0082 FFF7FEFF 		bl	LCD_ShowString
 1138              	.LVL111:
 270:Core/Src/Mytouch.c **** 	LCD_ShowString(40,220,lcddev.width,lcddev.height,16,"x4:");
 1139              		.loc 1 270 2 view .LVU275
 1140 0086 394B     		ldr	r3, .L71+32
 1141 0088 0193     		str	r3, [sp, #4]
 1142 008a 0094     		str	r4, [sp]
 1143 008c 6B88     		ldrh	r3, [r5, #2]
 1144 008e 2A88     		ldrh	r2, [r5]
 1145 0090 DC21     		movs	r1, #220
 1146 0092 2820     		movs	r0, #40
 1147 0094 FFF7FEFF 		bl	LCD_ShowString
 1148              	.LVL112:
 271:Core/Src/Mytouch.c ****  	LCD_ShowString(40+80,220,lcddev.width,lcddev.height,16,"y4:");  
 1149              		.loc 1 271 3 view .LVU276
 1150 0098 354B     		ldr	r3, .L71+36
 1151 009a 0193     		str	r3, [sp, #4]
 1152 009c 0094     		str	r4, [sp]
 1153 009e 6B88     		ldrh	r3, [r5, #2]
 1154 00a0 2A88     		ldrh	r2, [r5]
 1155 00a2 DC21     		movs	r1, #220
 1156 00a4 7820     		movs	r0, #120
 1157 00a6 FFF7FEFF 		bl	LCD_ShowString
 1158              	.LVL113:
 272:Core/Src/Mytouch.c ****  	LCD_ShowString(40,240,lcddev.width,lcddev.height,16,"fac is:");     
 1159              		.loc 1 272 3 view .LVU277
 1160 00aa 324B     		ldr	r3, .L71+40
 1161 00ac 0193     		str	r3, [sp, #4]
 1162 00ae 0094     		str	r4, [sp]
 1163 00b0 6B88     		ldrh	r3, [r5, #2]
 1164 00b2 2A88     		ldrh	r2, [r5]
 1165 00b4 F021     		movs	r1, #240
 1166 00b6 2820     		movs	r0, #40
 1167 00b8 FFF7FEFF 		bl	LCD_ShowString
 1168              	.LVL114:
 273:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24,160,x0,4,16);		//显示数值
 1169              		.loc 1 273 2 view .LVU278
 1170 00bc 0094     		str	r4, [sp]
 1171 00be 0423     		movs	r3, #4
 1172 00c0 4A46     		mov	r2, r9
 1173 00c2 A021     		movs	r1, #160
 1174 00c4 4020     		movs	r0, #64
 1175 00c6 FFF7FEFF 		bl	LCD_ShowNum
 1176              	.LVL115:
 274:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24+80,160,y0,4,16);	//显示数值
 1177              		.loc 1 274 2 view .LVU279
 1178 00ca 0094     		str	r4, [sp]
ARM GAS  /tmp/ccNZMix7.s 			page 28


 1179 00cc 0423     		movs	r3, #4
 1180 00ce 4246     		mov	r2, r8
 1181 00d0 A021     		movs	r1, #160
 1182 00d2 9020     		movs	r0, #144
 1183 00d4 FFF7FEFF 		bl	LCD_ShowNum
 1184              	.LVL116:
 275:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24,180,x1,4,16);		//显示数值
 1185              		.loc 1 275 2 view .LVU280
 1186 00d8 0094     		str	r4, [sp]
 1187 00da 0423     		movs	r3, #4
 1188 00dc 3A46     		mov	r2, r7
 1189 00de B421     		movs	r1, #180
 1190 00e0 4020     		movs	r0, #64
 1191 00e2 FFF7FEFF 		bl	LCD_ShowNum
 1192              	.LVL117:
 276:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24+80,180,y1,4,16);	//显示数值
 1193              		.loc 1 276 2 view .LVU281
 1194 00e6 0094     		str	r4, [sp]
 1195 00e8 0423     		movs	r3, #4
 1196 00ea 3246     		mov	r2, r6
 1197 00ec B421     		movs	r1, #180
 1198 00ee 9020     		movs	r0, #144
 1199 00f0 FFF7FEFF 		bl	LCD_ShowNum
 1200              	.LVL118:
 277:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24,200,x2,4,16);		//显示数值
 1201              		.loc 1 277 2 view .LVU282
 1202 00f4 0094     		str	r4, [sp]
 1203 00f6 0423     		movs	r3, #4
 1204 00f8 BDF82820 		ldrh	r2, [sp, #40]
 1205 00fc C821     		movs	r1, #200
 1206 00fe 4020     		movs	r0, #64
 1207 0100 FFF7FEFF 		bl	LCD_ShowNum
 1208              	.LVL119:
 278:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24+80,200,y2,4,16);	//显示数值
 1209              		.loc 1 278 2 view .LVU283
 1210 0104 0094     		str	r4, [sp]
 1211 0106 0423     		movs	r3, #4
 1212 0108 BDF82C20 		ldrh	r2, [sp, #44]
 1213 010c C821     		movs	r1, #200
 1214 010e 9020     		movs	r0, #144
 1215 0110 FFF7FEFF 		bl	LCD_ShowNum
 1216              	.LVL120:
 279:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24,220,x3,4,16);		//显示数值
 1217              		.loc 1 279 2 view .LVU284
 1218 0114 0094     		str	r4, [sp]
 1219 0116 0423     		movs	r3, #4
 1220 0118 BDF83020 		ldrh	r2, [sp, #48]
 1221 011c DC21     		movs	r1, #220
 1222 011e 4020     		movs	r0, #64
 1223 0120 FFF7FEFF 		bl	LCD_ShowNum
 1224              	.LVL121:
 280:Core/Src/Mytouch.c **** 	LCD_ShowNum(40+24+80,220,y3,4,16);	//显示数值
 1225              		.loc 1 280 2 view .LVU285
 1226 0124 0094     		str	r4, [sp]
 1227 0126 0423     		movs	r3, #4
 1228 0128 BDF83420 		ldrh	r2, [sp, #52]
 1229 012c DC21     		movs	r1, #220
ARM GAS  /tmp/ccNZMix7.s 			page 29


 1230 012e 9020     		movs	r0, #144
 1231 0130 FFF7FEFF 		bl	LCD_ShowNum
 1232              	.LVL122:
 281:Core/Src/Mytouch.c ****  	LCD_ShowNum(40+56,240,fac,3,16); 	//显示数值,该数值必须在95~105范围之内.
 1233              		.loc 1 281 3 view .LVU286
 1234 0134 0094     		str	r4, [sp]
 1235 0136 0323     		movs	r3, #3
 1236 0138 BDF83820 		ldrh	r2, [sp, #56]
 1237 013c F021     		movs	r1, #240
 1238 013e 6020     		movs	r0, #96
 1239 0140 FFF7FEFF 		bl	LCD_ShowNum
 1240              	.LVL123:
 282:Core/Src/Mytouch.c **** 
 283:Core/Src/Mytouch.c **** }
 1241              		.loc 1 283 1 is_stmt 0 view .LVU287
 1242 0144 03B0     		add	sp, sp, #12
 1243              	.LCFI15:
 1244              		.cfi_def_cfa_offset 28
 1245              		@ sp needed
 1246 0146 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1247              	.LVL124:
 1248              	.L72:
 1249              		.loc 1 283 1 view .LVU288
 1250 014a 00BF     		.align	2
 1251              	.L71:
 1252 014c 00000000 		.word	POINT_COLOR
 1253 0150 00000000 		.word	lcddev
 1254 0154 00000000 		.word	.LC0
 1255 0158 04000000 		.word	.LC1
 1256 015c 08000000 		.word	.LC2
 1257 0160 0C000000 		.word	.LC3
 1258 0164 10000000 		.word	.LC4
 1259 0168 14000000 		.word	.LC5
 1260 016c 18000000 		.word	.LC6
 1261 0170 1C000000 		.word	.LC7
 1262 0174 20000000 		.word	.LC8
 1263              		.cfi_endproc
 1264              	.LFE157:
 1266              		.section	.text.CT_Delay,"ax",%progbits
 1267              		.align	1
 1268              		.global	CT_Delay
 1269              		.syntax unified
 1270              		.thumb
 1271              		.thumb_func
 1272              		.fpu fpv5-d16
 1274              	CT_Delay:
 1275              	.LFB160:
 284:Core/Src/Mytouch.c **** 		 
 285:Core/Src/Mytouch.c **** //触摸屏校准代码
 286:Core/Src/Mytouch.c **** //得到四个校准参数
 287:Core/Src/Mytouch.c **** void TP_Adjust(void)
 288:Core/Src/Mytouch.c **** {								 
 289:Core/Src/Mytouch.c **** 	u16 pos_temp[4][2];//坐标缓存值
 290:Core/Src/Mytouch.c **** 	u8  cnt=0;	
 291:Core/Src/Mytouch.c **** 	u16 d1,d2;
 292:Core/Src/Mytouch.c **** 	u32 tem1,tem2;
 293:Core/Src/Mytouch.c **** 	double fac; 	
ARM GAS  /tmp/ccNZMix7.s 			page 30


 294:Core/Src/Mytouch.c **** 	u16 outtime=0;
 295:Core/Src/Mytouch.c ****  	cnt=0;				
 296:Core/Src/Mytouch.c **** 	POINT_COLOR=BLUE;
 297:Core/Src/Mytouch.c **** 	BACK_COLOR =WHITE;
 298:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏   
 299:Core/Src/Mytouch.c **** 	POINT_COLOR=RED;//红色 
 300:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏 	   
 301:Core/Src/Mytouch.c **** 	POINT_COLOR=BLACK;
 302:Core/Src/Mytouch.c **** 	LCD_ShowString(40,40,160,100,16,(u8*)TP_REMIND_MSG_TBL);//显示提示信息
 303:Core/Src/Mytouch.c **** 	TP_Drow_Touch_Point(20,20,RED);//画点1 
 304:Core/Src/Mytouch.c **** 	tp_dev.sta=0;//消除触发信号 
 305:Core/Src/Mytouch.c **** 	tp_dev.xfac=0;//xfac用来标记是否校准过,所以校准之前必须清掉!以免错误	 
 306:Core/Src/Mytouch.c **** 	while(1)//如果连续10秒钟没有按下,则自动退出
 307:Core/Src/Mytouch.c **** 	{
 308:Core/Src/Mytouch.c **** 		tp_dev.scan(1);//扫描物理坐标
 309:Core/Src/Mytouch.c **** 		if((tp_dev.sta&0xc0)==TP_CATH_PRES)//按键按下了一次(此时按键松开了.)
 310:Core/Src/Mytouch.c **** 		{	
 311:Core/Src/Mytouch.c **** 			outtime=0;		
 312:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 313:Core/Src/Mytouch.c **** 						   			   
 314:Core/Src/Mytouch.c **** 			pos_temp[cnt][0]=tp_dev.x[0];
 315:Core/Src/Mytouch.c **** 			pos_temp[cnt][1]=tp_dev.y[0];
 316:Core/Src/Mytouch.c **** 			cnt++;	  
 317:Core/Src/Mytouch.c **** 			switch(cnt)
 318:Core/Src/Mytouch.c **** 			{			   
 319:Core/Src/Mytouch.c **** 				case 1:						 
 320:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,20,WHITE);				//清除点1 
 321:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(lcddev.width-20,20,RED);	//画点2
 322:Core/Src/Mytouch.c **** 					break;
 323:Core/Src/Mytouch.c **** 				case 2:
 324:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,20,WHITE);	//清除点2
 325:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,lcddev.height-20,RED);	//画点3
 326:Core/Src/Mytouch.c **** 					break;
 327:Core/Src/Mytouch.c **** 				case 3:
 328:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(20,lcddev.height-20,WHITE);			//清除点3
 329:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,RED);	//画点4
 330:Core/Src/Mytouch.c **** 					break;
 331:Core/Src/Mytouch.c **** 				case 4:	 //全部四个点已经得到
 332:Core/Src/Mytouch.c **** 	    		    //对边相等
 333:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[0][0]-pos_temp[1][0]);//x1-x2
 334:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 335:Core/Src/Mytouch.c **** 					tem1*=tem1;
 336:Core/Src/Mytouch.c **** 					tem2*=tem2;
 337:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,2的距离
 338:Core/Src/Mytouch.c **** 					
 339:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[2][0]-pos_temp[3][0]);//x3-x4
 340:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 341:Core/Src/Mytouch.c **** 					tem1*=tem1;
 342:Core/Src/Mytouch.c **** 					tem2*=tem2;
 343:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到3,4的距离
 344:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 345:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 346:Core/Src/Mytouch.c **** 					{
 347:Core/Src/Mytouch.c **** 						cnt=0;
 348:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 349:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 350:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
ARM GAS  /tmp/ccNZMix7.s 			page 31


 351:Core/Src/Mytouch.c ****  						continue;
 352:Core/Src/Mytouch.c **** 					}
 353:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[0][0]-pos_temp[2][0]);//x1-x3
 354:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[2][1]);//y1-y3
 355:Core/Src/Mytouch.c **** 					tem1*=tem1;
 356:Core/Src/Mytouch.c **** 					tem2*=tem2;
 357:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,3的距离
 358:Core/Src/Mytouch.c **** 					
 359:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[1][0]-pos_temp[3][0]);//x2-x4
 360:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[3][1]);//y2-y4
 361:Core/Src/Mytouch.c **** 					tem1*=tem1;
 362:Core/Src/Mytouch.c **** 					tem2*=tem2;
 363:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,4的距离
 364:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 365:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 366:Core/Src/Mytouch.c **** 					{
 367:Core/Src/Mytouch.c **** 						cnt=0;
 368:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 369:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 370:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 371:Core/Src/Mytouch.c **** 						continue;
 372:Core/Src/Mytouch.c **** 					}//正确了
 373:Core/Src/Mytouch.c **** 								   
 374:Core/Src/Mytouch.c **** 					//对角线相等
 375:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[1][0]-pos_temp[2][0]);//x1-x3
 376:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[2][1]);//y1-y3
 377:Core/Src/Mytouch.c **** 					tem1*=tem1;
 378:Core/Src/Mytouch.c **** 					tem2*=tem2;
 379:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,4的距离
 380:Core/Src/Mytouch.c **** 	
 381:Core/Src/Mytouch.c **** 					tem1=abs(pos_temp[0][0]-pos_temp[3][0]);//x2-x4
 382:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[3][1]);//y2-y4
 383:Core/Src/Mytouch.c **** 					tem1*=tem1;
 384:Core/Src/Mytouch.c **** 					tem2*=tem2;
 385:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,3的距离
 386:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 387:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 388:Core/Src/Mytouch.c **** 					{
 389:Core/Src/Mytouch.c **** 						cnt=0;
 390:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 391:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 392:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 393:Core/Src/Mytouch.c **** 						continue;
 394:Core/Src/Mytouch.c **** 					}//正确了
 395:Core/Src/Mytouch.c **** 					//计算结果
 396:Core/Src/Mytouch.c **** 					tp_dev.xfac=(float)(lcddev.width-40)/(pos_temp[1][0]-pos_temp[0][0]);//得到xfac		 
 397:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 398:Core/Src/Mytouch.c **** 						  
 399:Core/Src/Mytouch.c **** 					tp_dev.yfac=(float)(lcddev.height-40)/(pos_temp[2][1]-pos_temp[0][1]);//得到yfac
 400:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 401:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 402:Core/Src/Mytouch.c **** 					{
 403:Core/Src/Mytouch.c **** 						cnt=0;
 404:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 405:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 406:Core/Src/Mytouch.c **** 						LCD_ShowString(40,26,lcddev.width,lcddev.height,16,"TP Need readjust!");
 407:Core/Src/Mytouch.c **** 						tp_dev.touchtype=!tp_dev.touchtype;//修改触屏类型.
ARM GAS  /tmp/ccNZMix7.s 			page 32


 408:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 409:Core/Src/Mytouch.c **** 						{
 410:Core/Src/Mytouch.c **** 							CMD_RDX=0X90;
 411:Core/Src/Mytouch.c **** 							CMD_RDY=0XD0;	 
 412:Core/Src/Mytouch.c **** 						}else				   //X,Y方向与屏幕相同
 413:Core/Src/Mytouch.c **** 						{
 414:Core/Src/Mytouch.c **** 							CMD_RDX=0XD0;
 415:Core/Src/Mytouch.c **** 							CMD_RDY=0X90;	 
 416:Core/Src/Mytouch.c **** 						}			    
 417:Core/Src/Mytouch.c **** 						continue;
 418:Core/Src/Mytouch.c **** 					}		
 419:Core/Src/Mytouch.c **** 					POINT_COLOR=BLUE;
 420:Core/Src/Mytouch.c **** 					LCD_Clear(WHITE);//清屏
 421:Core/Src/Mytouch.c **** 					LCD_ShowString(35,110,lcddev.width,lcddev.height,16,"Touch Screen Adjust OK!");//校正完成
 422:Core/Src/Mytouch.c **** 					HAL_Delay(1000);
 423:Core/Src/Mytouch.c **** 					TP_Save_Adjdata();  
 424:Core/Src/Mytouch.c ****  					LCD_Clear(WHITE);//清屏   
 425:Core/Src/Mytouch.c **** 					return;//校正完成				 
 426:Core/Src/Mytouch.c **** 			}
 427:Core/Src/Mytouch.c **** 		}
 428:Core/Src/Mytouch.c **** 		HAL_Delay(10);
 429:Core/Src/Mytouch.c **** 		outtime++;
 430:Core/Src/Mytouch.c **** 		if(outtime>1000)
 431:Core/Src/Mytouch.c **** 		{
 432:Core/Src/Mytouch.c **** 			TP_Get_Adjdata();
 433:Core/Src/Mytouch.c **** 			break;
 434:Core/Src/Mytouch.c **** 	 	} 
 435:Core/Src/Mytouch.c ****  	}
 436:Core/Src/Mytouch.c **** }
 437:Core/Src/Mytouch.c **** //触摸屏初始化  		    
 438:Core/Src/Mytouch.c **** //返回值:0,没有进行校准
 439:Core/Src/Mytouch.c **** //       1,进行过校准
 440:Core/Src/Mytouch.c **** u8 TP_Init(void)
 441:Core/Src/Mytouch.c **** {	
 442:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 443:Core/Src/Mytouch.c **** 	if(lcddev.id==0X5510||lcddev.id==0X4342||lcddev.id==0X4384) //4.3 800*40MCU电容触摸屏或者4.
 444:Core/Src/Mytouch.c **** 	{
 445:Core/Src/Mytouch.c **** 		if(GT9147_Init()==0)	//是GT9147
 446:Core/Src/Mytouch.c **** 		{ 
 447:Core/Src/Mytouch.c **** 			tp_dev.scan=GT9147_Scan;	//扫描函数指向GT9147触摸屏扫描
 448:Core/Src/Mytouch.c **** 		}else
 449:Core/Src/Mytouch.c **** 		{
 450:Core/Src/Mytouch.c **** 			OTT2001A_Init();
 451:Core/Src/Mytouch.c **** 			tp_dev.scan=OTT2001A_Scan;	//扫描函数指向OTT2001A触摸屏扫描
 452:Core/Src/Mytouch.c **** 		}
 453:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=0X80;	//电容屏 
 454:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 455:Core/Src/Mytouch.c **** 		return 0;
 456:Core/Src/Mytouch.c **** 	}else if(lcddev.id==0X1963||lcddev.id==0X7084||lcddev.id==0X7016)//SSD1963 7寸屏或者 7寸800*4
 457:Core/Src/Mytouch.c **** 	{
 458:Core/Src/Mytouch.c **** 		FT5206_Init();
 459:Core/Src/Mytouch.c **** 		tp_dev.scan=FT5206_Scan;		//扫描函数指向GT9147触摸屏扫描		
 460:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=0X80;			//电容屏 
 461:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 462:Core/Src/Mytouch.c **** 		return 0;
 463:Core/Src/Mytouch.c **** 	}else
 464:Core/Src/Mytouch.c **** 	{
ARM GAS  /tmp/ccNZMix7.s 			page 33


 465:Core/Src/Mytouch.c ****         
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 468:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 469:Core/Src/Mytouch.c ****         
 470:Core/Src/Mytouch.c **** 		//PH6
 471:Core/Src/Mytouch.c **** 		GPIO_Initure.Pin=GPIO_PIN_6;            //PH6
 472:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 473:Core/Src/Mytouch.c **** 		GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 474:Core/Src/Mytouch.c **** 		GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 475:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 476:Core/Src/Mytouch.c ****         
 477:Core/Src/Mytouch.c **** 		//PI3,8
 478:Core/Src/Mytouch.c **** 		GPIO_Initure.Pin=GPIO_PIN_3|GPIO_PIN_8; //PI3,8
 479:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 480:Core/Src/Mytouch.c ****         
 481:Core/Src/Mytouch.c **** 		//PH7
 482:Core/Src/Mytouch.c **** 		GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 483:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 484:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 485:Core/Src/Mytouch.c ****         
 486:Core/Src/Mytouch.c **** 		//PG3
 487:Core/Src/Mytouch.c **** 		GPIO_Initure.Pin=GPIO_PIN_3;            //PG3
 488:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOG,&GPIO_Initure);     //初始化
 489:Core/Src/Mytouch.c ****         
 490:Core/Src/Mytouch.c **** 		TP_Read_XY(&tp_dev.x[0],&tp_dev.y[0]);//第一次读取初始化	 
 491:Core/Src/Mytouch.c **** 		AT24CXX_Init();		//初始化24CXX
 492:Core/Src/Mytouch.c **** 		if(TP_Get_Adjdata())return 0;//已经校准
 493:Core/Src/Mytouch.c **** 		else			   //未校准?
 494:Core/Src/Mytouch.c **** 		{ 										    
 495:Core/Src/Mytouch.c **** 			LCD_Clear(WHITE);//清屏
 496:Core/Src/Mytouch.c **** 			TP_Adjust();  	//屏幕校准 
 497:Core/Src/Mytouch.c **** 			TP_Save_Adjdata();	 
 498:Core/Src/Mytouch.c **** 		}			
 499:Core/Src/Mytouch.c **** 		TP_Get_Adjdata();	
 500:Core/Src/Mytouch.c **** 	}
 501:Core/Src/Mytouch.c **** 	return 1; 									 
 502:Core/Src/Mytouch.c **** }
 503:Core/Src/Mytouch.c **** 
 504:Core/Src/Mytouch.c **** 
 505:Core/Src/Mytouch.c **** /* 触摸芯片IIC接口 */
 506:Core/Src/Mytouch.c **** 
 507:Core/Src/Mytouch.c ****  //控制I2C速度的延时
 508:Core/Src/Mytouch.c **** void CT_Delay(void)
 509:Core/Src/Mytouch.c **** {
 1276              		.loc 1 509 1 is_stmt 1 view -0
 1277              		.cfi_startproc
 1278              		@ args = 0, pretend = 0, frame = 0
 1279              		@ frame_needed = 0, uses_anonymous_args = 0
 1280 0000 08B5     		push	{r3, lr}
 1281              	.LCFI16:
 1282              		.cfi_def_cfa_offset 8
 1283              		.cfi_offset 3, -8
 1284              		.cfi_offset 14, -4
 510:Core/Src/Mytouch.c **** 	delay_us(2);
 1285              		.loc 1 510 2 view .LVU290
 1286 0002 0220     		movs	r0, #2
ARM GAS  /tmp/ccNZMix7.s 			page 34


 1287 0004 FFF7FEFF 		bl	delay_us
 1288              	.LVL125:
 511:Core/Src/Mytouch.c **** } 
 1289              		.loc 1 511 1 is_stmt 0 view .LVU291
 1290 0008 08BD     		pop	{r3, pc}
 1291              		.cfi_endproc
 1292              	.LFE160:
 1294              		.section	.text.CT_IIC_Init,"ax",%progbits
 1295              		.align	1
 1296              		.global	CT_IIC_Init
 1297              		.syntax unified
 1298              		.thumb
 1299              		.thumb_func
 1300              		.fpu fpv5-d16
 1302              	CT_IIC_Init:
 1303              	.LFB161:
 512:Core/Src/Mytouch.c **** 
 513:Core/Src/Mytouch.c **** //电容触摸芯片IIC接口初始化
 514:Core/Src/Mytouch.c **** void CT_IIC_Init(void)
 515:Core/Src/Mytouch.c **** {					     
 1304              		.loc 1 515 1 is_stmt 1 view -0
 1305              		.cfi_startproc
 1306              		@ args = 0, pretend = 0, frame = 32
 1307              		@ frame_needed = 0, uses_anonymous_args = 0
 1308 0000 00B5     		push	{lr}
 1309              	.LCFI17:
 1310              		.cfi_def_cfa_offset 4
 1311              		.cfi_offset 14, -4
 1312 0002 89B0     		sub	sp, sp, #36
 1313              	.LCFI18:
 1314              		.cfi_def_cfa_offset 40
 516:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 1315              		.loc 1 516 5 view .LVU293
 517:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
 1316              		.loc 1 517 5 view .LVU294
 1317              	.LBB2:
 1318              		.loc 1 517 5 view .LVU295
 1319              		.loc 1 517 5 view .LVU296
 1320 0004 164B     		ldr	r3, .L77
 1321 0006 D3F8E020 		ldr	r2, [r3, #224]
 1322 000a 42F08002 		orr	r2, r2, #128
 1323 000e C3F8E020 		str	r2, [r3, #224]
 1324              		.loc 1 517 5 view .LVU297
 1325 0012 D3F8E020 		ldr	r2, [r3, #224]
 1326 0016 02F08002 		and	r2, r2, #128
 1327 001a 0192     		str	r2, [sp, #4]
 1328              		.loc 1 517 5 view .LVU298
 1329 001c 019A     		ldr	r2, [sp, #4]
 1330              	.LBE2:
 1331              		.loc 1 517 5 view .LVU299
 518:Core/Src/Mytouch.c **** 	__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 1332              		.loc 1 518 2 view .LVU300
 1333              	.LBB3:
 1334              		.loc 1 518 2 view .LVU301
 1335              		.loc 1 518 2 view .LVU302
 1336 001e D3F8E020 		ldr	r2, [r3, #224]
 1337 0022 42F48072 		orr	r2, r2, #256
ARM GAS  /tmp/ccNZMix7.s 			page 35


 1338 0026 C3F8E020 		str	r2, [r3, #224]
 1339              		.loc 1 518 2 view .LVU303
 1340 002a D3F8E030 		ldr	r3, [r3, #224]
 1341 002e 03F48073 		and	r3, r3, #256
 1342 0032 0293     		str	r3, [sp, #8]
 1343              		.loc 1 518 2 view .LVU304
 1344 0034 029B     		ldr	r3, [sp, #8]
 1345              	.LBE3:
 1346              		.loc 1 518 2 view .LVU305
 519:Core/Src/Mytouch.c ****     
 520:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_6;            //PH6
 1347              		.loc 1 520 5 view .LVU306
 1348              		.loc 1 520 21 is_stmt 0 view .LVU307
 1349 0036 4023     		movs	r3, #64
 1350 0038 0393     		str	r3, [sp, #12]
 521:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_OD;  //开漏输出
 1351              		.loc 1 521 5 is_stmt 1 view .LVU308
 1352              		.loc 1 521 22 is_stmt 0 view .LVU309
 1353 003a 1123     		movs	r3, #17
 1354 003c 0493     		str	r3, [sp, #16]
 522:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 1355              		.loc 1 522 5 is_stmt 1 view .LVU310
 1356              		.loc 1 522 22 is_stmt 0 view .LVU311
 1357 003e 0123     		movs	r3, #1
 1358 0040 0593     		str	r3, [sp, #20]
 523:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 1359              		.loc 1 523 5 is_stmt 1 view .LVU312
 1360              		.loc 1 523 23 is_stmt 0 view .LVU313
 1361 0042 0323     		movs	r3, #3
 1362 0044 0693     		str	r3, [sp, #24]
 524:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 1363              		.loc 1 524 5 is_stmt 1 view .LVU314
 1364 0046 03A9     		add	r1, sp, #12
 1365 0048 0648     		ldr	r0, .L77+4
 1366 004a FFF7FEFF 		bl	HAL_GPIO_Init
 1367              	.LVL126:
 525:Core/Src/Mytouch.c **** 	
 526:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_3;            //PI3
 1368              		.loc 1 526 5 view .LVU315
 1369              		.loc 1 526 21 is_stmt 0 view .LVU316
 1370 004e 0823     		movs	r3, #8
 1371 0050 0393     		str	r3, [sp, #12]
 527:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 1372              		.loc 1 527 5 is_stmt 1 view .LVU317
 1373 0052 03A9     		add	r1, sp, #12
 1374 0054 0448     		ldr	r0, .L77+8
 1375 0056 FFF7FEFF 		bl	HAL_GPIO_Init
 1376              	.LVL127:
 528:Core/Src/Mytouch.c **** }
 1377              		.loc 1 528 1 is_stmt 0 view .LVU318
 1378 005a 09B0     		add	sp, sp, #36
 1379              	.LCFI19:
 1380              		.cfi_def_cfa_offset 4
 1381              		@ sp needed
 1382 005c 5DF804FB 		ldr	pc, [sp], #4
 1383              	.L78:
 1384              		.align	2
ARM GAS  /tmp/ccNZMix7.s 			page 36


 1385              	.L77:
 1386 0060 00440258 		.word	1476543488
 1387 0064 001C0258 		.word	1476533248
 1388 0068 00200258 		.word	1476534272
 1389              		.cfi_endproc
 1390              	.LFE161:
 1392              		.section	.text.CT_IIC_Start,"ax",%progbits
 1393              		.align	1
 1394              		.global	CT_IIC_Start
 1395              		.syntax unified
 1396              		.thumb
 1397              		.thumb_func
 1398              		.fpu fpv5-d16
 1400              	CT_IIC_Start:
 1401              	.LFB162:
 529:Core/Src/Mytouch.c **** 
 530:Core/Src/Mytouch.c **** //产生IIC起始信号
 531:Core/Src/Mytouch.c **** void CT_IIC_Start(void)
 532:Core/Src/Mytouch.c **** {
 1402              		.loc 1 532 1 is_stmt 1 view -0
 1403              		.cfi_startproc
 1404              		@ args = 0, pretend = 0, frame = 0
 1405              		@ frame_needed = 0, uses_anonymous_args = 0
 1406 0000 38B5     		push	{r3, r4, r5, lr}
 1407              	.LCFI20:
 1408              		.cfi_def_cfa_offset 16
 1409              		.cfi_offset 3, -16
 1410              		.cfi_offset 4, -12
 1411              		.cfi_offset 5, -8
 1412              		.cfi_offset 14, -4
 533:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);	  	  
 1413              		.loc 1 533 2 view .LVU320
 1414 0002 0E4D     		ldr	r5, .L81
 1415 0004 0122     		movs	r2, #1
 1416 0006 0821     		movs	r1, #8
 1417 0008 2846     		mov	r0, r5
 1418 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1419              	.LVL128:
 534:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1420              		.loc 1 534 2 view .LVU321
 1421 000e 0C4C     		ldr	r4, .L81+4
 1422 0010 0122     		movs	r2, #1
 1423 0012 4021     		movs	r1, #64
 1424 0014 2046     		mov	r0, r4
 1425 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1426              	.LVL129:
 535:Core/Src/Mytouch.c ****     CT_Delay();
 1427              		.loc 1 535 5 view .LVU322
 1428 001a FFF7FEFF 		bl	CT_Delay
 1429              	.LVL130:
 536:Core/Src/Mytouch.c ****  	CT_IIC_SDA(0);//START:when CLK is high,DATA change form high to low 
 1430              		.loc 1 536 3 view .LVU323
 1431 001e 0022     		movs	r2, #0
 1432 0020 0821     		movs	r1, #8
 1433 0022 2846     		mov	r0, r5
 1434 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1435              	.LVL131:
ARM GAS  /tmp/ccNZMix7.s 			page 37


 537:Core/Src/Mytouch.c ****     CT_Delay();
 1436              		.loc 1 537 5 view .LVU324
 1437 0028 FFF7FEFF 		bl	CT_Delay
 1438              	.LVL132:
 538:Core/Src/Mytouch.c **** 	CT_IIC_SCL(0);//钳住I2C总线，准备发送或接收数据 
 1439              		.loc 1 538 2 view .LVU325
 1440 002c 0022     		movs	r2, #0
 1441 002e 4021     		movs	r1, #64
 1442 0030 2046     		mov	r0, r4
 1443 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1444              	.LVL133:
 539:Core/Src/Mytouch.c ****     CT_Delay();
 1445              		.loc 1 539 5 view .LVU326
 1446 0036 FFF7FEFF 		bl	CT_Delay
 1447              	.LVL134:
 540:Core/Src/Mytouch.c **** }	 
 1448              		.loc 1 540 1 is_stmt 0 view .LVU327
 1449 003a 38BD     		pop	{r3, r4, r5, pc}
 1450              	.L82:
 1451              		.align	2
 1452              	.L81:
 1453 003c 00200258 		.word	1476534272
 1454 0040 001C0258 		.word	1476533248
 1455              		.cfi_endproc
 1456              	.LFE162:
 1458              		.section	.text.CT_IIC_Stop,"ax",%progbits
 1459              		.align	1
 1460              		.global	CT_IIC_Stop
 1461              		.syntax unified
 1462              		.thumb
 1463              		.thumb_func
 1464              		.fpu fpv5-d16
 1466              	CT_IIC_Stop:
 1467              	.LFB163:
 541:Core/Src/Mytouch.c **** 
 542:Core/Src/Mytouch.c **** //产生IIC停止信号
 543:Core/Src/Mytouch.c **** void CT_IIC_Stop(void)
 544:Core/Src/Mytouch.c **** {
 1468              		.loc 1 544 1 is_stmt 1 view -0
 1469              		.cfi_startproc
 1470              		@ args = 0, pretend = 0, frame = 0
 1471              		@ frame_needed = 0, uses_anonymous_args = 0
 1472 0000 10B5     		push	{r4, lr}
 1473              	.LCFI21:
 1474              		.cfi_def_cfa_offset 8
 1475              		.cfi_offset 4, -8
 1476              		.cfi_offset 14, -4
 545:Core/Src/Mytouch.c **** 	CT_IIC_SDA(0);
 1477              		.loc 1 545 2 view .LVU329
 1478 0002 0A4C     		ldr	r4, .L85
 1479 0004 0022     		movs	r2, #0
 1480 0006 0821     		movs	r1, #8
 1481 0008 2046     		mov	r0, r4
 1482 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1483              	.LVL135:
 546:Core/Src/Mytouch.c ****     CT_Delay();
 1484              		.loc 1 546 5 view .LVU330
ARM GAS  /tmp/ccNZMix7.s 			page 38


 1485 000e FFF7FEFF 		bl	CT_Delay
 1486              	.LVL136:
 547:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1487              		.loc 1 547 2 view .LVU331
 1488 0012 0122     		movs	r2, #1
 1489 0014 4021     		movs	r1, #64
 1490 0016 0648     		ldr	r0, .L85+4
 1491 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1492              	.LVL137:
 548:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);//STOP:when CLK is high DATA change form low to high
 1493              		.loc 1 548 2 view .LVU332
 1494 001c 0122     		movs	r2, #1
 1495 001e 0821     		movs	r1, #8
 1496 0020 2046     		mov	r0, r4
 1497 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1498              	.LVL138:
 549:Core/Src/Mytouch.c **** 	CT_Delay();
 1499              		.loc 1 549 2 view .LVU333
 1500 0026 FFF7FEFF 		bl	CT_Delay
 1501              	.LVL139:
 550:Core/Src/Mytouch.c **** }
 1502              		.loc 1 550 1 is_stmt 0 view .LVU334
 1503 002a 10BD     		pop	{r4, pc}
 1504              	.L86:
 1505              		.align	2
 1506              	.L85:
 1507 002c 00200258 		.word	1476534272
 1508 0030 001C0258 		.word	1476533248
 1509              		.cfi_endproc
 1510              	.LFE163:
 1512              		.section	.text.CT_IIC_Wait_Ack,"ax",%progbits
 1513              		.align	1
 1514              		.global	CT_IIC_Wait_Ack
 1515              		.syntax unified
 1516              		.thumb
 1517              		.thumb_func
 1518              		.fpu fpv5-d16
 1520              	CT_IIC_Wait_Ack:
 1521              	.LFB164:
 551:Core/Src/Mytouch.c **** //等待应答信号到来
 552:Core/Src/Mytouch.c **** //返回值：1，接收应答失败
 553:Core/Src/Mytouch.c **** //        0，接收应答成功
 554:Core/Src/Mytouch.c **** u8 CT_IIC_Wait_Ack(void)
 555:Core/Src/Mytouch.c **** {
 1522              		.loc 1 555 1 is_stmt 1 view -0
 1523              		.cfi_startproc
 1524              		@ args = 0, pretend = 0, frame = 0
 1525              		@ frame_needed = 0, uses_anonymous_args = 0
 1526 0000 38B5     		push	{r3, r4, r5, lr}
 1527              	.LCFI22:
 1528              		.cfi_def_cfa_offset 16
 1529              		.cfi_offset 3, -16
 1530              		.cfi_offset 4, -12
 1531              		.cfi_offset 5, -8
 1532              		.cfi_offset 14, -4
 556:Core/Src/Mytouch.c **** 	u8 ucErrTime=0;
 1533              		.loc 1 556 2 view .LVU336
ARM GAS  /tmp/ccNZMix7.s 			page 39


 1534              	.LVL140:
 557:Core/Src/Mytouch.c ****     u8 rack = 0;
 1535              		.loc 1 557 5 view .LVU337
 558:Core/Src/Mytouch.c **** 
 559:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);	
 1536              		.loc 1 559 2 view .LVU338
 1537 0002 0122     		movs	r2, #1
 1538 0004 0821     		movs	r1, #8
 1539 0006 1148     		ldr	r0, .L92
 1540 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1541              	.LVL141:
 560:Core/Src/Mytouch.c **** 	CT_Delay();
 1542              		.loc 1 560 2 view .LVU339
 1543 000c FFF7FEFF 		bl	CT_Delay
 1544              	.LVL142:
 561:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1545              		.loc 1 561 2 view .LVU340
 1546 0010 0122     		movs	r2, #1
 1547 0012 4021     		movs	r1, #64
 1548 0014 0E48     		ldr	r0, .L92+4
 1549 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1550              	.LVL143:
 562:Core/Src/Mytouch.c **** 	CT_Delay();
 1551              		.loc 1 562 2 view .LVU341
 1552 001a FFF7FEFF 		bl	CT_Delay
 1553              	.LVL144:
 563:Core/Src/Mytouch.c ****     
 564:Core/Src/Mytouch.c **** 	while(CT_READ_SDA)
 1554              		.loc 1 564 2 view .LVU342
 556:Core/Src/Mytouch.c ****     u8 rack = 0;
 1555              		.loc 1 556 5 is_stmt 0 view .LVU343
 1556 001e 0024     		movs	r4, #0
 1557              	.LVL145:
 1558              	.L88:
 1559              		.loc 1 564 7 is_stmt 1 view .LVU344
 1560              		.loc 1 564 8 is_stmt 0 view .LVU345
 1561 0020 0821     		movs	r1, #8
 1562 0022 0A48     		ldr	r0, .L92
 1563 0024 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1564              	.LVL146:
 1565              		.loc 1 564 7 view .LVU346
 1566 0028 0546     		mov	r5, r0
 1567 002a 30B1     		cbz	r0, .L89
 565:Core/Src/Mytouch.c **** 	{
 566:Core/Src/Mytouch.c **** 		ucErrTime++;
 1568              		.loc 1 566 3 is_stmt 1 view .LVU347
 1569              		.loc 1 566 12 is_stmt 0 view .LVU348
 1570 002c 0134     		adds	r4, r4, #1
 1571              	.LVL147:
 1572              		.loc 1 566 12 view .LVU349
 1573 002e E4B2     		uxtb	r4, r4
 1574              	.LVL148:
 567:Core/Src/Mytouch.c ****         
 568:Core/Src/Mytouch.c **** 		if(ucErrTime>250)
 1575              		.loc 1 568 3 is_stmt 1 view .LVU350
 1576              		.loc 1 568 5 is_stmt 0 view .LVU351
 1577 0030 FA2C     		cmp	r4, #250
ARM GAS  /tmp/ccNZMix7.s 			page 40


 1578 0032 F5D9     		bls	.L88
 569:Core/Src/Mytouch.c **** 		{
 570:Core/Src/Mytouch.c **** 			CT_IIC_Stop();
 1579              		.loc 1 570 4 is_stmt 1 view .LVU352
 1580 0034 FFF7FEFF 		bl	CT_IIC_Stop
 1581              	.LVL149:
 571:Core/Src/Mytouch.c ****             rack = 1;
 1582              		.loc 1 571 13 view .LVU353
 572:Core/Src/Mytouch.c ****             break;
 1583              		.loc 1 572 13 view .LVU354
 571:Core/Src/Mytouch.c ****             rack = 1;
 1584              		.loc 1 571 18 is_stmt 0 view .LVU355
 1585 0038 0125     		movs	r5, #1
 1586              	.LVL150:
 1587              	.L89:
 573:Core/Src/Mytouch.c **** 		} 
 574:Core/Src/Mytouch.c **** 	}
 575:Core/Src/Mytouch.c ****     
 576:Core/Src/Mytouch.c **** 	CT_IIC_SCL(0);//时钟输出0 	
 1588              		.loc 1 576 2 is_stmt 1 view .LVU356
 1589 003a 0022     		movs	r2, #0
 1590 003c 4021     		movs	r1, #64
 1591 003e 0448     		ldr	r0, .L92+4
 1592 0040 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1593              	.LVL151:
 577:Core/Src/Mytouch.c ****     CT_Delay(); 
 1594              		.loc 1 577 5 view .LVU357
 1595 0044 FFF7FEFF 		bl	CT_Delay
 1596              	.LVL152:
 578:Core/Src/Mytouch.c ****     return rack;
 1597              		.loc 1 578 5 view .LVU358
 579:Core/Src/Mytouch.c **** } 
 1598              		.loc 1 579 1 is_stmt 0 view .LVU359
 1599 0048 2846     		mov	r0, r5
 1600 004a 38BD     		pop	{r3, r4, r5, pc}
 1601              	.LVL153:
 1602              	.L93:
 1603              		.loc 1 579 1 view .LVU360
 1604              		.align	2
 1605              	.L92:
 1606 004c 00200258 		.word	1476534272
 1607 0050 001C0258 		.word	1476533248
 1608              		.cfi_endproc
 1609              	.LFE164:
 1611              		.section	.text.CT_IIC_Ack,"ax",%progbits
 1612              		.align	1
 1613              		.global	CT_IIC_Ack
 1614              		.syntax unified
 1615              		.thumb
 1616              		.thumb_func
 1617              		.fpu fpv5-d16
 1619              	CT_IIC_Ack:
 1620              	.LFB165:
 580:Core/Src/Mytouch.c **** 
 581:Core/Src/Mytouch.c **** //产生ACK应答
 582:Core/Src/Mytouch.c **** void CT_IIC_Ack(void)
 583:Core/Src/Mytouch.c **** {
ARM GAS  /tmp/ccNZMix7.s 			page 41


 1621              		.loc 1 583 1 is_stmt 1 view -0
 1622              		.cfi_startproc
 1623              		@ args = 0, pretend = 0, frame = 0
 1624              		@ frame_needed = 0, uses_anonymous_args = 0
 1625 0000 38B5     		push	{r3, r4, r5, lr}
 1626              	.LCFI23:
 1627              		.cfi_def_cfa_offset 16
 1628              		.cfi_offset 3, -16
 1629              		.cfi_offset 4, -12
 1630              		.cfi_offset 5, -8
 1631              		.cfi_offset 14, -4
 584:Core/Src/Mytouch.c **** 	CT_IIC_SDA(0);
 1632              		.loc 1 584 2 view .LVU362
 1633 0002 0F4C     		ldr	r4, .L96
 1634 0004 0022     		movs	r2, #0
 1635 0006 0821     		movs	r1, #8
 1636 0008 2046     		mov	r0, r4
 1637 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1638              	.LVL154:
 585:Core/Src/Mytouch.c **** 	CT_Delay();
 1639              		.loc 1 585 2 view .LVU363
 1640 000e FFF7FEFF 		bl	CT_Delay
 1641              	.LVL155:
 586:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1642              		.loc 1 586 2 view .LVU364
 1643 0012 0C4D     		ldr	r5, .L96+4
 1644 0014 0122     		movs	r2, #1
 1645 0016 4021     		movs	r1, #64
 1646 0018 2846     		mov	r0, r5
 1647 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1648              	.LVL156:
 587:Core/Src/Mytouch.c **** 	CT_Delay();
 1649              		.loc 1 587 2 view .LVU365
 1650 001e FFF7FEFF 		bl	CT_Delay
 1651              	.LVL157:
 588:Core/Src/Mytouch.c **** 	CT_IIC_SCL(0);
 1652              		.loc 1 588 2 view .LVU366
 1653 0022 0022     		movs	r2, #0
 1654 0024 4021     		movs	r1, #64
 1655 0026 2846     		mov	r0, r5
 1656 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1657              	.LVL158:
 589:Core/Src/Mytouch.c **** 	CT_Delay();
 1658              		.loc 1 589 2 view .LVU367
 1659 002c FFF7FEFF 		bl	CT_Delay
 1660              	.LVL159:
 590:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);
 1661              		.loc 1 590 2 view .LVU368
 1662 0030 0122     		movs	r2, #1
 1663 0032 0821     		movs	r1, #8
 1664 0034 2046     		mov	r0, r4
 1665 0036 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1666              	.LVL160:
 591:Core/Src/Mytouch.c **** 	CT_Delay();
 1667              		.loc 1 591 2 view .LVU369
 1668 003a FFF7FEFF 		bl	CT_Delay
 1669              	.LVL161:
ARM GAS  /tmp/ccNZMix7.s 			page 42


 592:Core/Src/Mytouch.c **** }
 1670              		.loc 1 592 1 is_stmt 0 view .LVU370
 1671 003e 38BD     		pop	{r3, r4, r5, pc}
 1672              	.L97:
 1673              		.align	2
 1674              	.L96:
 1675 0040 00200258 		.word	1476534272
 1676 0044 001C0258 		.word	1476533248
 1677              		.cfi_endproc
 1678              	.LFE165:
 1680              		.section	.text.CT_IIC_NAck,"ax",%progbits
 1681              		.align	1
 1682              		.global	CT_IIC_NAck
 1683              		.syntax unified
 1684              		.thumb
 1685              		.thumb_func
 1686              		.fpu fpv5-d16
 1688              	CT_IIC_NAck:
 1689              	.LFB166:
 593:Core/Src/Mytouch.c **** //不产生ACK应答		    
 594:Core/Src/Mytouch.c **** void CT_IIC_NAck(void)
 595:Core/Src/Mytouch.c **** {
 1690              		.loc 1 595 1 is_stmt 1 view -0
 1691              		.cfi_startproc
 1692              		@ args = 0, pretend = 0, frame = 0
 1693              		@ frame_needed = 0, uses_anonymous_args = 0
 1694 0000 10B5     		push	{r4, lr}
 1695              	.LCFI24:
 1696              		.cfi_def_cfa_offset 8
 1697              		.cfi_offset 4, -8
 1698              		.cfi_offset 14, -4
 596:Core/Src/Mytouch.c **** 	CT_IIC_SDA(1);
 1699              		.loc 1 596 2 view .LVU372
 1700 0002 0122     		movs	r2, #1
 1701 0004 0821     		movs	r1, #8
 1702 0006 0A48     		ldr	r0, .L100
 1703 0008 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1704              	.LVL162:
 597:Core/Src/Mytouch.c **** 	CT_Delay();
 1705              		.loc 1 597 2 view .LVU373
 1706 000c FFF7FEFF 		bl	CT_Delay
 1707              	.LVL163:
 598:Core/Src/Mytouch.c **** 	CT_IIC_SCL(1);
 1708              		.loc 1 598 2 view .LVU374
 1709 0010 084C     		ldr	r4, .L100+4
 1710 0012 0122     		movs	r2, #1
 1711 0014 4021     		movs	r1, #64
 1712 0016 2046     		mov	r0, r4
 1713 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1714              	.LVL164:
 599:Core/Src/Mytouch.c **** 	CT_Delay();
 1715              		.loc 1 599 2 view .LVU375
 1716 001c FFF7FEFF 		bl	CT_Delay
 1717              	.LVL165:
 600:Core/Src/Mytouch.c **** 	CT_IIC_SCL(0);
 1718              		.loc 1 600 2 view .LVU376
 1719 0020 0022     		movs	r2, #0
ARM GAS  /tmp/ccNZMix7.s 			page 43


 1720 0022 4021     		movs	r1, #64
 1721 0024 2046     		mov	r0, r4
 1722 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1723              	.LVL166:
 601:Core/Src/Mytouch.c ****     CT_Delay();
 1724              		.loc 1 601 5 view .LVU377
 1725 002a FFF7FEFF 		bl	CT_Delay
 1726              	.LVL167:
 602:Core/Src/Mytouch.c **** }					 				     
 1727              		.loc 1 602 1 is_stmt 0 view .LVU378
 1728 002e 10BD     		pop	{r4, pc}
 1729              	.L101:
 1730              		.align	2
 1731              	.L100:
 1732 0030 00200258 		.word	1476534272
 1733 0034 001C0258 		.word	1476533248
 1734              		.cfi_endproc
 1735              	.LFE166:
 1737              		.section	.text.CT_IIC_Send_Byte,"ax",%progbits
 1738              		.align	1
 1739              		.global	CT_IIC_Send_Byte
 1740              		.syntax unified
 1741              		.thumb
 1742              		.thumb_func
 1743              		.fpu fpv5-d16
 1745              	CT_IIC_Send_Byte:
 1746              	.LVL168:
 1747              	.LFB167:
 603:Core/Src/Mytouch.c **** //IIC发送一个字节
 604:Core/Src/Mytouch.c **** //返回从机有无应答
 605:Core/Src/Mytouch.c **** //1，有应答
 606:Core/Src/Mytouch.c **** //0，无应答			  
 607:Core/Src/Mytouch.c **** void CT_IIC_Send_Byte(u8 txd)
 608:Core/Src/Mytouch.c **** {                        
 1748              		.loc 1 608 1 is_stmt 1 view -0
 1749              		.cfi_startproc
 1750              		@ args = 0, pretend = 0, frame = 0
 1751              		@ frame_needed = 0, uses_anonymous_args = 0
 1752              		.loc 1 608 1 is_stmt 0 view .LVU380
 1753 0000 70B5     		push	{r4, r5, r6, lr}
 1754              	.LCFI25:
 1755              		.cfi_def_cfa_offset 16
 1756              		.cfi_offset 4, -16
 1757              		.cfi_offset 5, -12
 1758              		.cfi_offset 6, -8
 1759              		.cfi_offset 14, -4
 1760 0002 0446     		mov	r4, r0
 609:Core/Src/Mytouch.c ****     u8 t;   
 1761              		.loc 1 609 5 is_stmt 1 view .LVU381
 610:Core/Src/Mytouch.c **** 
 611:Core/Src/Mytouch.c **** 	for(t=0;t<8;t++)
 1762              		.loc 1 611 2 view .LVU382
 1763              	.LVL169:
 1764              		.loc 1 611 7 is_stmt 0 view .LVU383
 1765 0004 0025     		movs	r5, #0
 1766              		.loc 1 611 2 view .LVU384
 1767 0006 17E0     		b	.L103
ARM GAS  /tmp/ccNZMix7.s 			page 44


 1768              	.LVL170:
 1769              	.L104:
 612:Core/Src/Mytouch.c ****     {              
 613:Core/Src/Mytouch.c ****         CT_IIC_SDA((txd&0x80)>>7); 
 1770              		.loc 1 613 9 discriminator 2 view .LVU385
 1771 0008 0022     		movs	r2, #0
 1772 000a 0821     		movs	r1, #8
 1773 000c 1348     		ldr	r0, .L109
 1774 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 1775              	.LVL171:
 1776              	.L105:
 614:Core/Src/Mytouch.c ****         CT_Delay();
 1777              		.loc 1 614 9 is_stmt 1 discriminator 2 view .LVU386
 1778 0012 FFF7FEFF 		bl	CT_Delay
 1779              	.LVL172:
 615:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 
 1780              		.loc 1 615 3 discriminator 2 view .LVU387
 1781 0016 124E     		ldr	r6, .L109+4
 1782 0018 0122     		movs	r2, #1
 1783 001a 4021     		movs	r1, #64
 1784 001c 3046     		mov	r0, r6
 1785 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
 1786              	.LVL173:
 616:Core/Src/Mytouch.c **** 		CT_Delay();
 1787              		.loc 1 616 3 discriminator 2 view .LVU388
 1788 0022 FFF7FEFF 		bl	CT_Delay
 1789              	.LVL174:
 617:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1790              		.loc 1 617 3 discriminator 2 view .LVU389
 1791 0026 0022     		movs	r2, #0
 1792 0028 4021     		movs	r1, #64
 1793 002a 3046     		mov	r0, r6
 1794 002c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1795              	.LVL175:
 618:Core/Src/Mytouch.c ****         txd<<=1; 	      
 1796              		.loc 1 618 9 discriminator 2 view .LVU390
 1797              		.loc 1 618 12 is_stmt 0 discriminator 2 view .LVU391
 1798 0030 6400     		lsls	r4, r4, #1
 1799              	.LVL176:
 1800              		.loc 1 618 12 discriminator 2 view .LVU392
 1801 0032 E4B2     		uxtb	r4, r4
 1802              	.LVL177:
 611:Core/Src/Mytouch.c ****     {              
 1803              		.loc 1 611 14 is_stmt 1 discriminator 2 view .LVU393
 611:Core/Src/Mytouch.c ****     {              
 1804              		.loc 1 611 15 is_stmt 0 discriminator 2 view .LVU394
 1805 0034 0135     		adds	r5, r5, #1
 1806              	.LVL178:
 611:Core/Src/Mytouch.c ****     {              
 1807              		.loc 1 611 15 discriminator 2 view .LVU395
 1808 0036 EDB2     		uxtb	r5, r5
 1809              	.LVL179:
 1810              	.L103:
 611:Core/Src/Mytouch.c ****     {              
 1811              		.loc 1 611 10 is_stmt 1 discriminator 1 view .LVU396
 611:Core/Src/Mytouch.c ****     {              
 1812              		.loc 1 611 2 is_stmt 0 discriminator 1 view .LVU397
ARM GAS  /tmp/ccNZMix7.s 			page 45


 1813 0038 072D     		cmp	r5, #7
 1814 003a 08D8     		bhi	.L108
 613:Core/Src/Mytouch.c ****         CT_Delay();
 1815              		.loc 1 613 9 is_stmt 1 view .LVU398
 1816 003c 14F0800F 		tst	r4, #128
 1817 0040 E2D0     		beq	.L104
 613:Core/Src/Mytouch.c ****         CT_Delay();
 1818              		.loc 1 613 9 is_stmt 0 discriminator 1 view .LVU399
 1819 0042 0122     		movs	r2, #1
 1820 0044 0821     		movs	r1, #8
 1821 0046 0548     		ldr	r0, .L109
 1822 0048 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1823              	.LVL180:
 1824 004c E1E7     		b	.L105
 1825              	.L108:
 619:Core/Src/Mytouch.c ****     }
 620:Core/Src/Mytouch.c ****     CT_IIC_SDA(1);
 1826              		.loc 1 620 5 is_stmt 1 view .LVU400
 1827 004e 0122     		movs	r2, #1
 1828 0050 0821     		movs	r1, #8
 1829 0052 0248     		ldr	r0, .L109
 1830 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1831              	.LVL181:
 621:Core/Src/Mytouch.c **** } 	    
 1832              		.loc 1 621 1 is_stmt 0 view .LVU401
 1833 0058 70BD     		pop	{r4, r5, r6, pc}
 1834              	.LVL182:
 1835              	.L110:
 1836              		.loc 1 621 1 view .LVU402
 1837 005a 00BF     		.align	2
 1838              	.L109:
 1839 005c 00200258 		.word	1476534272
 1840 0060 001C0258 		.word	1476533248
 1841              		.cfi_endproc
 1842              	.LFE167:
 1844              		.section	.text.CT_IIC_Read_Byte,"ax",%progbits
 1845              		.align	1
 1846              		.global	CT_IIC_Read_Byte
 1847              		.syntax unified
 1848              		.thumb
 1849              		.thumb_func
 1850              		.fpu fpv5-d16
 1852              	CT_IIC_Read_Byte:
 1853              	.LVL183:
 1854              	.LFB168:
 622:Core/Src/Mytouch.c **** //读1个字节，ack=1时，发送ACK，ack=0，发送nACK   
 623:Core/Src/Mytouch.c **** u8 CT_IIC_Read_Byte(unsigned char ack)
 624:Core/Src/Mytouch.c **** {
 1855              		.loc 1 624 1 is_stmt 1 view -0
 1856              		.cfi_startproc
 1857              		@ args = 0, pretend = 0, frame = 0
 1858              		@ frame_needed = 0, uses_anonymous_args = 0
 1859              		.loc 1 624 1 is_stmt 0 view .LVU404
 1860 0000 70B5     		push	{r4, r5, r6, lr}
 1861              	.LCFI26:
 1862              		.cfi_def_cfa_offset 16
 1863              		.cfi_offset 4, -16
ARM GAS  /tmp/ccNZMix7.s 			page 46


 1864              		.cfi_offset 5, -12
 1865              		.cfi_offset 6, -8
 1866              		.cfi_offset 14, -4
 1867 0002 0646     		mov	r6, r0
 625:Core/Src/Mytouch.c **** 	u8 i,receive=0;
 1868              		.loc 1 625 2 is_stmt 1 view .LVU405
 1869              	.LVL184:
 626:Core/Src/Mytouch.c **** 
 627:Core/Src/Mytouch.c **** 	for(i=0;i<8;i++ )
 1870              		.loc 1 627 2 view .LVU406
 625:Core/Src/Mytouch.c **** 	u8 i,receive=0;
 1871              		.loc 1 625 7 is_stmt 0 view .LVU407
 1872 0004 0024     		movs	r4, #0
 1873              		.loc 1 627 7 view .LVU408
 1874 0006 2546     		mov	r5, r4
 1875              		.loc 1 627 2 view .LVU409
 1876 0008 08E0     		b	.L112
 1877              	.LVL185:
 1878              	.L113:
 628:Core/Src/Mytouch.c **** 	{ 
 629:Core/Src/Mytouch.c ****         receive<<=1;
 630:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 	    	   
 631:Core/Src/Mytouch.c **** 		CT_Delay();
 632:Core/Src/Mytouch.c ****         
 633:Core/Src/Mytouch.c **** 		if(CT_READ_SDA)receive++;   
 634:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1879              		.loc 1 634 3 is_stmt 1 discriminator 2 view .LVU410
 1880 000a 0022     		movs	r2, #0
 1881 000c 4021     		movs	r1, #64
 1882 000e 1148     		ldr	r0, .L119
 1883 0010 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1884              	.LVL186:
 635:Core/Src/Mytouch.c **** 		CT_Delay();
 1885              		.loc 1 635 3 discriminator 2 view .LVU411
 1886 0014 FFF7FEFF 		bl	CT_Delay
 1887              	.LVL187:
 627:Core/Src/Mytouch.c **** 	{ 
 1888              		.loc 1 627 14 discriminator 2 view .LVU412
 627:Core/Src/Mytouch.c **** 	{ 
 1889              		.loc 1 627 15 is_stmt 0 discriminator 2 view .LVU413
 1890 0018 0135     		adds	r5, r5, #1
 1891              	.LVL188:
 627:Core/Src/Mytouch.c **** 	{ 
 1892              		.loc 1 627 15 discriminator 2 view .LVU414
 1893 001a EDB2     		uxtb	r5, r5
 1894              	.LVL189:
 1895              	.L112:
 627:Core/Src/Mytouch.c **** 	{ 
 1896              		.loc 1 627 10 is_stmt 1 discriminator 1 view .LVU415
 627:Core/Src/Mytouch.c **** 	{ 
 1897              		.loc 1 627 2 is_stmt 0 discriminator 1 view .LVU416
 1898 001c 072D     		cmp	r5, #7
 1899 001e 11D8     		bhi	.L118
 629:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 	    	   
 1900              		.loc 1 629 9 is_stmt 1 view .LVU417
 629:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 	    	   
 1901              		.loc 1 629 16 is_stmt 0 view .LVU418
ARM GAS  /tmp/ccNZMix7.s 			page 47


 1902 0020 6400     		lsls	r4, r4, #1
 1903              	.LVL190:
 629:Core/Src/Mytouch.c **** 		CT_IIC_SCL(1); 	    	   
 1904              		.loc 1 629 16 view .LVU419
 1905 0022 E4B2     		uxtb	r4, r4
 1906              	.LVL191:
 630:Core/Src/Mytouch.c **** 		CT_Delay();
 1907              		.loc 1 630 3 is_stmt 1 view .LVU420
 1908 0024 0122     		movs	r2, #1
 1909 0026 4021     		movs	r1, #64
 1910 0028 0A48     		ldr	r0, .L119
 1911 002a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1912              	.LVL192:
 631:Core/Src/Mytouch.c ****         
 1913              		.loc 1 631 3 view .LVU421
 1914 002e FFF7FEFF 		bl	CT_Delay
 1915              	.LVL193:
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1916              		.loc 1 633 3 view .LVU422
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1917              		.loc 1 633 6 is_stmt 0 view .LVU423
 1918 0032 0821     		movs	r1, #8
 1919 0034 0848     		ldr	r0, .L119+4
 1920 0036 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1921              	.LVL194:
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1922              		.loc 1 633 5 view .LVU424
 1923 003a 0028     		cmp	r0, #0
 1924 003c E5D0     		beq	.L113
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1925              		.loc 1 633 18 is_stmt 1 discriminator 1 view .LVU425
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1926              		.loc 1 633 25 is_stmt 0 discriminator 1 view .LVU426
 1927 003e 0134     		adds	r4, r4, #1
 1928              	.LVL195:
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1929              		.loc 1 633 25 discriminator 1 view .LVU427
 1930 0040 E4B2     		uxtb	r4, r4
 1931              	.LVL196:
 633:Core/Src/Mytouch.c **** 		CT_IIC_SCL(0);	
 1932              		.loc 1 633 25 discriminator 1 view .LVU428
 1933 0042 E2E7     		b	.L113
 1934              	.L118:
 636:Core/Src/Mytouch.c ****         
 637:Core/Src/Mytouch.c **** 	}	  				 
 638:Core/Src/Mytouch.c **** 	if (!ack)
 1935              		.loc 1 638 2 is_stmt 1 view .LVU429
 1936              		.loc 1 638 5 is_stmt 0 view .LVU430
 1937 0044 1EB9     		cbnz	r6, .L115
 639:Core/Src/Mytouch.c ****         CT_IIC_NAck();//发送nACK
 1938              		.loc 1 639 9 is_stmt 1 view .LVU431
 1939 0046 FFF7FEFF 		bl	CT_IIC_NAck
 1940              	.LVL197:
 1941              	.L116:
 640:Core/Src/Mytouch.c **** 	else 
 641:Core/Src/Mytouch.c ****         CT_IIC_Ack(); //发送ACK   
 642:Core/Src/Mytouch.c ****  	return receive;
ARM GAS  /tmp/ccNZMix7.s 			page 48


 1942              		.loc 1 642 3 view .LVU432
 643:Core/Src/Mytouch.c **** }
 1943              		.loc 1 643 1 is_stmt 0 view .LVU433
 1944 004a 2046     		mov	r0, r4
 1945 004c 70BD     		pop	{r4, r5, r6, pc}
 1946              	.LVL198:
 1947              	.L115:
 641:Core/Src/Mytouch.c ****  	return receive;
 1948              		.loc 1 641 9 is_stmt 1 view .LVU434
 1949 004e FFF7FEFF 		bl	CT_IIC_Ack
 1950              	.LVL199:
 1951 0052 FAE7     		b	.L116
 1952              	.L120:
 1953              		.align	2
 1954              	.L119:
 1955 0054 001C0258 		.word	1476533248
 1956 0058 00200258 		.word	1476534272
 1957              		.cfi_endproc
 1958              	.LFE168:
 1960              		.section	.text.GT9147_WR_Reg,"ax",%progbits
 1961              		.align	1
 1962              		.global	GT9147_WR_Reg
 1963              		.syntax unified
 1964              		.thumb
 1965              		.thumb_func
 1966              		.fpu fpv5-d16
 1968              	GT9147_WR_Reg:
 1969              	.LVL200:
 1970              	.LFB170:
 644:Core/Src/Mytouch.c **** 
 645:Core/Src/Mytouch.c **** /* GT9147 */
 646:Core/Src/Mytouch.c **** 
 647:Core/Src/Mytouch.c **** 
 648:Core/Src/Mytouch.c **** const u8 GT9147_CFG_TBL[]=
 649:Core/Src/Mytouch.c **** { 
 650:Core/Src/Mytouch.c **** 	0X60,0XE0,0X01,0X20,0X03,0X05,0X35,0X00,0X02,0X08,
 651:Core/Src/Mytouch.c **** 	0X1E,0X08,0X50,0X3C,0X0F,0X05,0X00,0X00,0XFF,0X67,
 652:Core/Src/Mytouch.c **** 	0X50,0X00,0X00,0X18,0X1A,0X1E,0X14,0X89,0X28,0X0A,
 653:Core/Src/Mytouch.c **** 	0X30,0X2E,0XBB,0X0A,0X03,0X00,0X00,0X02,0X33,0X1D,
 654:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X32,0X00,0X00,
 655:Core/Src/Mytouch.c **** 	0X2A,0X1C,0X5A,0X94,0XC5,0X02,0X07,0X00,0X00,0X00,
 656:Core/Src/Mytouch.c **** 	0XB5,0X1F,0X00,0X90,0X28,0X00,0X77,0X32,0X00,0X62,
 657:Core/Src/Mytouch.c **** 	0X3F,0X00,0X52,0X50,0X00,0X52,0X00,0X00,0X00,0X00,
 658:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 659:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X0F,
 660:Core/Src/Mytouch.c **** 	0X0F,0X03,0X06,0X10,0X42,0XF8,0X0F,0X14,0X00,0X00,
 661:Core/Src/Mytouch.c **** 	0X00,0X00,0X1A,0X18,0X16,0X14,0X12,0X10,0X0E,0X0C,
 662:Core/Src/Mytouch.c **** 	0X0A,0X08,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 663:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 664:Core/Src/Mytouch.c **** 	0X00,0X00,0X29,0X28,0X24,0X22,0X20,0X1F,0X1E,0X1D,
 665:Core/Src/Mytouch.c **** 	0X0E,0X0C,0X0A,0X08,0X06,0X05,0X04,0X02,0X00,0XFF,
 666:Core/Src/Mytouch.c **** 	0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
 667:Core/Src/Mytouch.c **** 	0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,
 668:Core/Src/Mytouch.c **** 	0XFF,0XFF,0XFF,0XFF,
 669:Core/Src/Mytouch.c **** };  
 670:Core/Src/Mytouch.c **** //发送GT9147配置参数
 671:Core/Src/Mytouch.c **** //mode:0,参数不保存到flash
ARM GAS  /tmp/ccNZMix7.s 			page 49


 672:Core/Src/Mytouch.c **** //     1,参数保存到flash
 673:Core/Src/Mytouch.c **** u8 GT9147_Send_Cfg(u8 mode)
 674:Core/Src/Mytouch.c **** {
 675:Core/Src/Mytouch.c **** 	u8 buf[2];
 676:Core/Src/Mytouch.c **** 	u8 i=0;
 677:Core/Src/Mytouch.c **** 	buf[0]=0;
 678:Core/Src/Mytouch.c **** 	buf[1]=mode;	//是否写入到GT9147 FLASH?  即是否掉电保存
 679:Core/Src/Mytouch.c **** 	for(i=0;i<sizeof(GT9147_CFG_TBL);i++)buf[0]+=GT9147_CFG_TBL[i];//计算校验和
 680:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 681:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CFGS_REG,(u8*)GT9147_CFG_TBL,sizeof(GT9147_CFG_TBL));//发送寄存器配置
 682:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CHECK_REG,buf,2);//写入校验和,和配置更新标记
 683:Core/Src/Mytouch.c **** 	return 0;
 684:Core/Src/Mytouch.c **** } 
 685:Core/Src/Mytouch.c **** //向GT9147写入一次数据
 686:Core/Src/Mytouch.c **** //reg:起始寄存器地址
 687:Core/Src/Mytouch.c **** //buf:数据缓缓存区
 688:Core/Src/Mytouch.c **** //len:写数据长度
 689:Core/Src/Mytouch.c **** //返回值:0,成功;1,失败.
 690:Core/Src/Mytouch.c **** u8 GT9147_WR_Reg(u16 reg,u8 *buf,u8 len)
 691:Core/Src/Mytouch.c **** {
 1971              		.loc 1 691 1 view -0
 1972              		.cfi_startproc
 1973              		@ args = 0, pretend = 0, frame = 0
 1974              		@ frame_needed = 0, uses_anonymous_args = 0
 1975              		.loc 1 691 1 is_stmt 0 view .LVU436
 1976 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1977              	.LCFI27:
 1978              		.cfi_def_cfa_offset 24
 1979              		.cfi_offset 3, -24
 1980              		.cfi_offset 4, -20
 1981              		.cfi_offset 5, -16
 1982              		.cfi_offset 6, -12
 1983              		.cfi_offset 7, -8
 1984              		.cfi_offset 14, -4
 1985 0002 0446     		mov	r4, r0
 1986 0004 0F46     		mov	r7, r1
 1987 0006 1546     		mov	r5, r2
 692:Core/Src/Mytouch.c **** 	u8 i;
 1988              		.loc 1 692 2 is_stmt 1 view .LVU437
 693:Core/Src/Mytouch.c **** 	u8 ret=0;
 1989              		.loc 1 693 2 view .LVU438
 1990              	.LVL201:
 694:Core/Src/Mytouch.c **** 	CT_IIC_Start();	
 1991              		.loc 1 694 2 view .LVU439
 1992 0008 FFF7FEFF 		bl	CT_IIC_Start
 1993              	.LVL202:
 695:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(GT_CMD_WR);   	//发送写命令 	 
 1994              		.loc 1 695 3 view .LVU440
 1995 000c 2820     		movs	r0, #40
 1996 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 1997              	.LVL203:
 696:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();
 1998              		.loc 1 696 2 view .LVU441
 1999 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2000              	.LVL204:
 697:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg>>8);   	//发送高8位地址
 2001              		.loc 1 697 2 view .LVU442
ARM GAS  /tmp/ccNZMix7.s 			page 50


 2002 0016 200A     		lsrs	r0, r4, #8
 2003 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 2004              	.LVL205:
 698:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 2005              		.loc 1 698 2 view .LVU443
 2006 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2007              	.LVL206:
 699:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 2008              		.loc 1 699 2 view .LVU444
 2009 0020 E0B2     		uxtb	r0, r4
 2010 0022 FFF7FEFF 		bl	CT_IIC_Send_Byte
 2011              	.LVL207:
 700:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 2012              		.loc 1 700 2 view .LVU445
 2013 0026 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2014              	.LVL208:
 701:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2015              		.loc 1 701 2 view .LVU446
 693:Core/Src/Mytouch.c **** 	CT_IIC_Start();	
 2016              		.loc 1 693 5 is_stmt 0 view .LVU447
 2017 002a 0026     		movs	r6, #0
 2018              		.loc 1 701 7 view .LVU448
 2019 002c 3446     		mov	r4, r6
 2020              		.loc 1 701 2 view .LVU449
 2021 002e 01E0     		b	.L122
 2022              	.LVL209:
 2023              	.L126:
 2024              		.loc 1 701 16 is_stmt 1 discriminator 2 view .LVU450
 2025              		.loc 1 701 17 is_stmt 0 discriminator 2 view .LVU451
 2026 0030 0134     		adds	r4, r4, #1
 2027              	.LVL210:
 2028              		.loc 1 701 17 discriminator 2 view .LVU452
 2029 0032 E4B2     		uxtb	r4, r4
 2030              	.LVL211:
 2031              	.L122:
 2032              		.loc 1 701 10 is_stmt 1 discriminator 1 view .LVU453
 2033              		.loc 1 701 2 is_stmt 0 discriminator 1 view .LVU454
 2034 0034 AC42     		cmp	r4, r5
 2035 0036 07D2     		bcs	.L123
 702:Core/Src/Mytouch.c **** 	{	   
 703:Core/Src/Mytouch.c ****     	CT_IIC_Send_Byte(buf[i]);  	//发数据
 2036              		.loc 1 703 6 is_stmt 1 view .LVU455
 2037 0038 385D     		ldrb	r0, [r7, r4]	@ zero_extendqisi2
 2038 003a FFF7FEFF 		bl	CT_IIC_Send_Byte
 2039              	.LVL212:
 704:Core/Src/Mytouch.c **** 		ret=CT_IIC_Wait_Ack();
 2040              		.loc 1 704 3 view .LVU456
 2041              		.loc 1 704 7 is_stmt 0 view .LVU457
 2042 003e FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2043              	.LVL213:
 705:Core/Src/Mytouch.c **** 		if(ret)break;  
 2044              		.loc 1 705 3 is_stmt 1 view .LVU458
 2045              		.loc 1 705 5 is_stmt 0 view .LVU459
 2046 0042 0646     		mov	r6, r0
 2047 0044 0028     		cmp	r0, #0
 2048 0046 F3D0     		beq	.L126
 2049              	.LVL214:
ARM GAS  /tmp/ccNZMix7.s 			page 51


 2050              	.L123:
 706:Core/Src/Mytouch.c **** 	}
 707:Core/Src/Mytouch.c ****     CT_IIC_Stop();					//产生一个停止条件	    
 2051              		.loc 1 707 5 is_stmt 1 view .LVU460
 2052 0048 FFF7FEFF 		bl	CT_IIC_Stop
 2053              	.LVL215:
 708:Core/Src/Mytouch.c **** 	return ret; 
 2054              		.loc 1 708 2 view .LVU461
 709:Core/Src/Mytouch.c **** }
 2055              		.loc 1 709 1 is_stmt 0 view .LVU462
 2056 004c 3046     		mov	r0, r6
 2057 004e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2058              		.loc 1 709 1 view .LVU463
 2059              		.cfi_endproc
 2060              	.LFE170:
 2062              		.section	.text.GT9147_Send_Cfg,"ax",%progbits
 2063              		.align	1
 2064              		.global	GT9147_Send_Cfg
 2065              		.syntax unified
 2066              		.thumb
 2067              		.thumb_func
 2068              		.fpu fpv5-d16
 2070              	GT9147_Send_Cfg:
 2071              	.LVL216:
 2072              	.LFB169:
 674:Core/Src/Mytouch.c **** 	u8 buf[2];
 2073              		.loc 1 674 1 is_stmt 1 view -0
 2074              		.cfi_startproc
 2075              		@ args = 0, pretend = 0, frame = 8
 2076              		@ frame_needed = 0, uses_anonymous_args = 0
 674:Core/Src/Mytouch.c **** 	u8 buf[2];
 2077              		.loc 1 674 1 is_stmt 0 view .LVU465
 2078 0000 00B5     		push	{lr}
 2079              	.LCFI28:
 2080              		.cfi_def_cfa_offset 4
 2081              		.cfi_offset 14, -4
 2082 0002 83B0     		sub	sp, sp, #12
 2083              	.LCFI29:
 2084              		.cfi_def_cfa_offset 16
 675:Core/Src/Mytouch.c **** 	u8 i=0;
 2085              		.loc 1 675 2 is_stmt 1 view .LVU466
 676:Core/Src/Mytouch.c **** 	buf[0]=0;
 2086              		.loc 1 676 2 view .LVU467
 2087              	.LVL217:
 677:Core/Src/Mytouch.c **** 	buf[1]=mode;	//是否写入到GT9147 FLASH?  即是否掉电保存
 2088              		.loc 1 677 2 view .LVU468
 677:Core/Src/Mytouch.c **** 	buf[1]=mode;	//是否写入到GT9147 FLASH?  即是否掉电保存
 2089              		.loc 1 677 8 is_stmt 0 view .LVU469
 2090 0004 0023     		movs	r3, #0
 2091 0006 8DF80430 		strb	r3, [sp, #4]
 678:Core/Src/Mytouch.c **** 	for(i=0;i<sizeof(GT9147_CFG_TBL);i++)buf[0]+=GT9147_CFG_TBL[i];//计算校验和
 2092              		.loc 1 678 2 is_stmt 1 view .LVU470
 678:Core/Src/Mytouch.c **** 	for(i=0;i<sizeof(GT9147_CFG_TBL);i++)buf[0]+=GT9147_CFG_TBL[i];//计算校验和
 2093              		.loc 1 678 8 is_stmt 0 view .LVU471
 2094 000a 8DF80500 		strb	r0, [sp, #5]
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2095              		.loc 1 679 2 is_stmt 1 view .LVU472
ARM GAS  /tmp/ccNZMix7.s 			page 52


 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2096              		.loc 1 679 2 is_stmt 0 view .LVU473
 2097 000e 08E0     		b	.L128
 2098              	.LVL218:
 2099              	.L129:
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2100              		.loc 1 679 39 is_stmt 1 discriminator 3 view .LVU474
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2101              		.loc 1 679 61 is_stmt 0 discriminator 3 view .LVU475
 2102 0010 0F4A     		ldr	r2, .L131
 2103 0012 D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2104              		.loc 1 679 45 discriminator 3 view .LVU476
 2105 0014 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 2106 0018 0A44     		add	r2, r2, r1
 2107 001a 8DF80420 		strb	r2, [sp, #4]
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2108              		.loc 1 679 35 is_stmt 1 discriminator 3 view .LVU477
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2109              		.loc 1 679 36 is_stmt 0 discriminator 3 view .LVU478
 2110 001e 0133     		adds	r3, r3, #1
 2111              	.LVL219:
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2112              		.loc 1 679 36 discriminator 3 view .LVU479
 2113 0020 DBB2     		uxtb	r3, r3
 2114              	.LVL220:
 2115              	.L128:
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2116              		.loc 1 679 10 is_stmt 1 discriminator 1 view .LVU480
 679:Core/Src/Mytouch.c ****     buf[0]=(~buf[0])+1;
 2117              		.loc 1 679 2 is_stmt 0 discriminator 1 view .LVU481
 2118 0022 B72B     		cmp	r3, #183
 2119 0024 F4D9     		bls	.L129
 680:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CFGS_REG,(u8*)GT9147_CFG_TBL,sizeof(GT9147_CFG_TBL));//发送寄存器配置
 2120              		.loc 1 680 5 is_stmt 1 view .LVU482
 680:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CFGS_REG,(u8*)GT9147_CFG_TBL,sizeof(GT9147_CFG_TBL));//发送寄存器配置
 2121              		.loc 1 680 17 is_stmt 0 view .LVU483
 2122 0026 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 2123              	.LVL221:
 680:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CFGS_REG,(u8*)GT9147_CFG_TBL,sizeof(GT9147_CFG_TBL));//发送寄存器配置
 2124              		.loc 1 680 11 view .LVU484
 2125 002a 5B42     		rsbs	r3, r3, #0
 2126 002c 8DF80430 		strb	r3, [sp, #4]
 681:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CHECK_REG,buf,2);//写入校验和,和配置更新标记
 2127              		.loc 1 681 2 is_stmt 1 view .LVU485
 2128 0030 B822     		movs	r2, #184
 2129 0032 0749     		ldr	r1, .L131
 2130 0034 48F24700 		movw	r0, #32839
 2131              	.LVL222:
 681:Core/Src/Mytouch.c **** 	GT9147_WR_Reg(GT_CHECK_REG,buf,2);//写入校验和,和配置更新标记
 2132              		.loc 1 681 2 is_stmt 0 view .LVU486
 2133 0038 FFF7FEFF 		bl	GT9147_WR_Reg
 2134              	.LVL223:
 682:Core/Src/Mytouch.c **** 	return 0;
 2135              		.loc 1 682 2 is_stmt 1 view .LVU487
 2136 003c 0222     		movs	r2, #2
 2137 003e 01A9     		add	r1, sp, #4
ARM GAS  /tmp/ccNZMix7.s 			page 53


 2138 0040 48F2FF00 		movw	r0, #33023
 2139 0044 FFF7FEFF 		bl	GT9147_WR_Reg
 2140              	.LVL224:
 683:Core/Src/Mytouch.c **** } 
 2141              		.loc 1 683 2 view .LVU488
 684:Core/Src/Mytouch.c **** //向GT9147写入一次数据
 2142              		.loc 1 684 1 is_stmt 0 view .LVU489
 2143 0048 0020     		movs	r0, #0
 2144 004a 03B0     		add	sp, sp, #12
 2145              	.LCFI30:
 2146              		.cfi_def_cfa_offset 4
 2147              		@ sp needed
 2148 004c 5DF804FB 		ldr	pc, [sp], #4
 2149              	.L132:
 2150              		.align	2
 2151              	.L131:
 2152 0050 00000000 		.word	.LANCHOR3
 2153              		.cfi_endproc
 2154              	.LFE169:
 2156              		.section	.text.GT9147_RD_Reg,"ax",%progbits
 2157              		.align	1
 2158              		.global	GT9147_RD_Reg
 2159              		.syntax unified
 2160              		.thumb
 2161              		.thumb_func
 2162              		.fpu fpv5-d16
 2164              	GT9147_RD_Reg:
 2165              	.LVL225:
 2166              	.LFB171:
 710:Core/Src/Mytouch.c **** //从GT9147读出一次数据
 711:Core/Src/Mytouch.c **** //reg:起始寄存器地址
 712:Core/Src/Mytouch.c **** //buf:数据缓缓存区
 713:Core/Src/Mytouch.c **** //len:读数据长度			  
 714:Core/Src/Mytouch.c **** void GT9147_RD_Reg(u16 reg,u8 *buf,u8 len)
 715:Core/Src/Mytouch.c **** {
 2167              		.loc 1 715 1 is_stmt 1 view -0
 2168              		.cfi_startproc
 2169              		@ args = 0, pretend = 0, frame = 0
 2170              		@ frame_needed = 0, uses_anonymous_args = 0
 2171              		.loc 1 715 1 is_stmt 0 view .LVU491
 2172 0000 70B5     		push	{r4, r5, r6, lr}
 2173              	.LCFI31:
 2174              		.cfi_def_cfa_offset 16
 2175              		.cfi_offset 4, -16
 2176              		.cfi_offset 5, -12
 2177              		.cfi_offset 6, -8
 2178              		.cfi_offset 14, -4
 2179 0002 0446     		mov	r4, r0
 2180 0004 0E46     		mov	r6, r1
 2181 0006 1546     		mov	r5, r2
 716:Core/Src/Mytouch.c **** 	u8 i; 
 2182              		.loc 1 716 2 is_stmt 1 view .LVU492
 717:Core/Src/Mytouch.c ****  	CT_IIC_Start();	
 2183              		.loc 1 717 3 view .LVU493
 2184 0008 FFF7FEFF 		bl	CT_IIC_Start
 2185              	.LVL226:
 718:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(GT_CMD_WR);   //发送写命令 	 
ARM GAS  /tmp/ccNZMix7.s 			page 54


 2186              		.loc 1 718 3 view .LVU494
 2187 000c 2820     		movs	r0, #40
 2188 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 2189              	.LVL227:
 719:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();
 2190              		.loc 1 719 2 view .LVU495
 2191 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2192              	.LVL228:
 720:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg>>8);   	//发送高8位地址
 2193              		.loc 1 720 3 view .LVU496
 2194 0016 200A     		lsrs	r0, r4, #8
 2195 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 2196              	.LVL229:
 721:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 2197              		.loc 1 721 2 view .LVU497
 2198 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2199              	.LVL230:
 722:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 2200              		.loc 1 722 3 view .LVU498
 2201 0020 E0B2     		uxtb	r0, r4
 2202 0022 FFF7FEFF 		bl	CT_IIC_Send_Byte
 2203              	.LVL231:
 723:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 2204              		.loc 1 723 2 view .LVU499
 2205 0026 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2206              	.LVL232:
 724:Core/Src/Mytouch.c ****  	CT_IIC_Start();  	 	   
 2207              		.loc 1 724 3 view .LVU500
 2208 002a FFF7FEFF 		bl	CT_IIC_Start
 2209              	.LVL233:
 725:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(GT_CMD_RD);   //发送读命令		   
 2210              		.loc 1 725 2 view .LVU501
 2211 002e 2920     		movs	r0, #41
 2212 0030 FFF7FEFF 		bl	CT_IIC_Send_Byte
 2213              	.LVL234:
 726:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();	   
 2214              		.loc 1 726 2 view .LVU502
 2215 0034 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 2216              	.LVL235:
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2217              		.loc 1 727 2 view .LVU503
 2218              		.loc 1 727 7 is_stmt 0 view .LVU504
 2219 0038 0024     		movs	r4, #0
 2220              		.loc 1 727 2 view .LVU505
 2221 003a 08E0     		b	.L134
 2222              	.LVL236:
 2223              	.L135:
 728:Core/Src/Mytouch.c **** 	{	   
 729:Core/Src/Mytouch.c ****     	buf[i]=CT_IIC_Read_Byte(i==(len-1)?0:1); //发数据	  
 2224              		.loc 1 729 6 is_stmt 1 discriminator 3 view .LVU506
 2225              		.loc 1 729 37 is_stmt 0 discriminator 3 view .LVU507
 2226 003c 681E     		subs	r0, r5, #1
 2227              		.loc 1 729 13 discriminator 3 view .LVU508
 2228 003e 201A     		subs	r0, r4, r0
 2229 0040 18BF     		it	ne
 2230 0042 0120     		movne	r0, #1
 2231 0044 FFF7FEFF 		bl	CT_IIC_Read_Byte
ARM GAS  /tmp/ccNZMix7.s 			page 55


 2232              	.LVL237:
 2233              		.loc 1 729 12 discriminator 3 view .LVU509
 2234 0048 3055     		strb	r0, [r6, r4]
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2235              		.loc 1 727 16 is_stmt 1 discriminator 3 view .LVU510
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2236              		.loc 1 727 17 is_stmt 0 discriminator 3 view .LVU511
 2237 004a 0134     		adds	r4, r4, #1
 2238              	.LVL238:
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2239              		.loc 1 727 17 discriminator 3 view .LVU512
 2240 004c E4B2     		uxtb	r4, r4
 2241              	.LVL239:
 2242              	.L134:
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2243              		.loc 1 727 10 is_stmt 1 discriminator 1 view .LVU513
 727:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 2244              		.loc 1 727 2 is_stmt 0 discriminator 1 view .LVU514
 2245 004e AC42     		cmp	r4, r5
 2246 0050 F4D3     		bcc	.L135
 730:Core/Src/Mytouch.c **** 	} 
 731:Core/Src/Mytouch.c ****     CT_IIC_Stop();//产生一个停止条件    
 2247              		.loc 1 731 5 is_stmt 1 view .LVU515
 2248 0052 FFF7FEFF 		bl	CT_IIC_Stop
 2249              	.LVL240:
 732:Core/Src/Mytouch.c **** } 
 2250              		.loc 1 732 1 is_stmt 0 view .LVU516
 2251 0056 70BD     		pop	{r4, r5, r6, pc}
 2252              		.loc 1 732 1 view .LVU517
 2253              		.cfi_endproc
 2254              	.LFE171:
 2256              		.section	.text.GT9147_Scan,"ax",%progbits
 2257              		.align	1
 2258              		.global	GT9147_Scan
 2259              		.syntax unified
 2260              		.thumb
 2261              		.thumb_func
 2262              		.fpu fpv5-d16
 2264              	GT9147_Scan:
 2265              	.LVL241:
 2266              	.LFB173:
 733:Core/Src/Mytouch.c **** //初始化GT9147触摸屏
 734:Core/Src/Mytouch.c **** //返回值:0,初始化成功;1,初始化失败 
 735:Core/Src/Mytouch.c **** u8 GT9147_Init(void)
 736:Core/Src/Mytouch.c **** {
 737:Core/Src/Mytouch.c **** 	u8 temp[5]; 
 738:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 739:Core/Src/Mytouch.c ****     
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
 741:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 742:Core/Src/Mytouch.c ****                 
 743:Core/Src/Mytouch.c ****     //PH7
 744:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 745:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 746:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 747:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 748:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
ARM GAS  /tmp/ccNZMix7.s 			page 56


 749:Core/Src/Mytouch.c ****             
 750:Core/Src/Mytouch.c ****     //PI8
 751:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_8;            //PI8
 752:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 753:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 754:Core/Src/Mytouch.c **** 	CT_IIC_Init();      	//初始化电容屏的I2C总线  
 755:Core/Src/Mytouch.c **** 	GT_RST(0);				//复位
 756:Core/Src/Mytouch.c **** 	HAL_Delay(10);
 757:Core/Src/Mytouch.c ****  	GT_RST(1);				//释放复位		    
 758:Core/Src/Mytouch.c **** 	HAL_Delay(10); 
 759:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 760:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 761:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_NOPULL;          //不带上下拉，浮空输入
 762:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 763:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 764:Core/Src/Mytouch.c **** 	HAL_Delay(100);  
 765:Core/Src/Mytouch.c **** 	GT9147_RD_Reg(GT_PID_REG,temp,4);//读取产品ID
 766:Core/Src/Mytouch.c **** 	temp[4]=0;
 767:Core/Src/Mytouch.c **** 	printf("CTP ID:%s\r\n",temp);	//打印ID
 768:Core/Src/Mytouch.c **** 	if(strcmp((char*)temp,"9147")==0)//ID==9147
 769:Core/Src/Mytouch.c **** 	{
 770:Core/Src/Mytouch.c **** 		temp[0]=0X02;			
 771:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//软复位GT9147
 772:Core/Src/Mytouch.c **** 		GT9147_RD_Reg(GT_CFGS_REG,temp,1);//读取GT_CFGS_REG寄存器
 773:Core/Src/Mytouch.c **** 		if(temp[0]<0X60)//默认版本比较低,需要更新flash配置
 774:Core/Src/Mytouch.c **** 		{
 775:Core/Src/Mytouch.c **** 			printf("Default Ver:%d\r\n",temp[0]);
 776:Core/Src/Mytouch.c ****             if(lcddev.id==0X5510)GT9147_Send_Cfg(1);//更新并保存配置
 777:Core/Src/Mytouch.c **** 		}
 778:Core/Src/Mytouch.c **** 		HAL_Delay(10);
 779:Core/Src/Mytouch.c **** 		temp[0]=0X00;	 
 780:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//结束复位   
 781:Core/Src/Mytouch.c **** 		return 0;
 782:Core/Src/Mytouch.c **** 	} 
 783:Core/Src/Mytouch.c **** 	return 0;
 784:Core/Src/Mytouch.c **** }
 785:Core/Src/Mytouch.c **** const u16 GT9147_TPX_TBL[5]={GT_TP1_REG,GT_TP2_REG,GT_TP3_REG,GT_TP4_REG,GT_TP5_REG};
 786:Core/Src/Mytouch.c **** //扫描触摸屏(采用查询方式)
 787:Core/Src/Mytouch.c **** //mode:0,正常扫描.
 788:Core/Src/Mytouch.c **** //返回值:当前触屏状态.
 789:Core/Src/Mytouch.c **** //0,触屏无触摸;1,触屏有触摸
 790:Core/Src/Mytouch.c **** u8 GT9147_Scan(u8 mode)
 791:Core/Src/Mytouch.c **** {
 2267              		.loc 1 791 1 is_stmt 1 view -0
 2268              		.cfi_startproc
 2269              		@ args = 0, pretend = 0, frame = 16
 2270              		@ frame_needed = 0, uses_anonymous_args = 0
 2271              		.loc 1 791 1 is_stmt 0 view .LVU519
 2272 0000 70B5     		push	{r4, r5, r6, lr}
 2273              	.LCFI32:
 2274              		.cfi_def_cfa_offset 16
 2275              		.cfi_offset 4, -16
 2276              		.cfi_offset 5, -12
 2277              		.cfi_offset 6, -8
 2278              		.cfi_offset 14, -4
 2279 0002 84B0     		sub	sp, sp, #16
 2280              	.LCFI33:
ARM GAS  /tmp/ccNZMix7.s 			page 57


 2281              		.cfi_def_cfa_offset 32
 2282 0004 8DF80700 		strb	r0, [sp, #7]
 792:Core/Src/Mytouch.c **** 	u8 buf[4];
 2283              		.loc 1 792 2 is_stmt 1 view .LVU520
 793:Core/Src/Mytouch.c **** 	u8 i=0;
 2284              		.loc 1 793 2 view .LVU521
 2285              	.LVL242:
 794:Core/Src/Mytouch.c **** 	u8 res=0;
 2286              		.loc 1 794 2 view .LVU522
 795:Core/Src/Mytouch.c **** 	u8 temp;
 2287              		.loc 1 795 2 view .LVU523
 796:Core/Src/Mytouch.c **** 	u8 tempsta;
 2288              		.loc 1 796 2 view .LVU524
 797:Core/Src/Mytouch.c ****  	static u8 t=0;//控制查询间隔,从而降低CPU占用率   
 2289              		.loc 1 797 3 view .LVU525
 798:Core/Src/Mytouch.c **** 	t++;
 2290              		.loc 1 798 2 view .LVU526
 2291              		.loc 1 798 3 is_stmt 0 view .LVU527
 2292 0008 B44B     		ldr	r3, .L164
 2293 000a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2294 000c 0132     		adds	r2, r2, #1
 2295 000e D2B2     		uxtb	r2, r2
 2296 0010 1A70     		strb	r2, [r3]
 799:Core/Src/Mytouch.c **** 	if((t%10)==0||t<10)//空闲时,每进入10次CTP_Scan函数才检测1次,从而节省CPU使用率
 2297              		.loc 1 799 2 is_stmt 1 view .LVU528
 2298              		.loc 1 799 11 is_stmt 0 view .LVU529
 2299 0012 B34B     		ldr	r3, .L164+4
 2300 0014 A3FB0213 		umull	r1, r3, r3, r2
 2301 0018 DB08     		lsrs	r3, r3, #3
 2302 001a 03EB8303 		add	r3, r3, r3, lsl #2
 2303 001e A2EB4303 		sub	r3, r2, r3, lsl #1
 2304              		.loc 1 799 4 view .LVU530
 2305 0022 13F0FF0F 		tst	r3, #255
 2306 0026 02D0     		beq	.L138
 2307              		.loc 1 799 14 discriminator 1 view .LVU531
 2308 0028 092A     		cmp	r2, #9
 2309 002a 00F22E81 		bhi	.L155
 2310              	.L138:
 800:Core/Src/Mytouch.c **** 	{
 801:Core/Src/Mytouch.c **** 		GT9147_RD_Reg(GT_GSTID_REG,&mode,1);	//读取触摸点的状态  
 2311              		.loc 1 801 3 is_stmt 1 view .LVU532
 2312 002e 0122     		movs	r2, #1
 2313 0030 0DF10701 		add	r1, sp, #7
 2314 0034 48F24E10 		movw	r0, #33102
 2315              	.LVL243:
 2316              		.loc 1 801 3 is_stmt 0 view .LVU533
 2317 0038 FFF7FEFF 		bl	GT9147_RD_Reg
 2318              	.LVL244:
 802:Core/Src/Mytouch.c ****  		if(mode&0X80&&((mode&0XF)<6))
 2319              		.loc 1 802 4 is_stmt 1 view .LVU534
 2320              		.loc 1 802 7 is_stmt 0 view .LVU535
 2321 003c 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2322 0040 9DF90720 		ldrsb	r2, [sp, #7]
 2323              		.loc 1 802 6 view .LVU536
 2324 0044 002A     		cmp	r2, #0
 2325 0046 22DB     		blt	.L158
 2326              	.L140:
ARM GAS  /tmp/ccNZMix7.s 			page 58


 803:Core/Src/Mytouch.c **** 		{
 804:Core/Src/Mytouch.c **** 			temp=0;
 805:Core/Src/Mytouch.c **** 			GT9147_WR_Reg(GT_GSTID_REG,&temp,1);//清标志 		
 806:Core/Src/Mytouch.c **** 		}		
 807:Core/Src/Mytouch.c **** 		if((mode&0XF)&&((mode&0XF)<6))
 2327              		.loc 1 807 3 is_stmt 1 view .LVU537
 2328              		.loc 1 807 11 is_stmt 0 view .LVU538
 2329 0048 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2330              		.loc 1 807 16 view .LVU539
 2331 004c 03F00F02 		and	r2, r3, #15
 2332 0050 13F00F03 		ands	r3, r3, #15
 2333 0054 18BF     		it	ne
 2334 0056 0123     		movne	r3, #1
 2335 0058 052A     		cmp	r2, #5
 2336 005a CCBF     		ite	gt
 2337 005c 0023     		movgt	r3, #0
 2338 005e 03F00103 		andle	r3, r3, #1
 2339              		.loc 1 807 5 view .LVU540
 2340 0062 002B     		cmp	r3, #0
 2341 0064 00F02181 		beq	.L156
 808:Core/Src/Mytouch.c **** 		{
 809:Core/Src/Mytouch.c **** 			temp=0XFF<<(mode&0XF);		//将点的个数转换为1的位数,匹配tp_dev.sta定义 
 2342              		.loc 1 809 4 is_stmt 1 view .LVU541
 2343              		.loc 1 809 13 is_stmt 0 view .LVU542
 2344 0068 FF23     		movs	r3, #255
 2345 006a 9340     		lsls	r3, r3, r2
 2346              		.loc 1 809 8 view .LVU543
 2347 006c DBB2     		uxtb	r3, r3
 2348 006e 8DF80B30 		strb	r3, [sp, #11]
 810:Core/Src/Mytouch.c **** 			tempsta=tp_dev.sta;			//保存当前的tp_dev.sta值
 2349              		.loc 1 810 4 is_stmt 1 view .LVU544
 2350              		.loc 1 810 11 is_stmt 0 view .LVU545
 2351 0072 9C4A     		ldr	r2, .L164+8
 2352 0074 92F82050 		ldrb	r5, [r2, #32]	@ zero_extendqisi2
 2353              	.LVL245:
 811:Core/Src/Mytouch.c **** 			tp_dev.sta=(~temp)|TP_PRES_DOWN|TP_CATH_PRES; 
 2354              		.loc 1 811 4 is_stmt 1 view .LVU546
 2355              		.loc 1 811 35 is_stmt 0 view .LVU547
 2356 0078 DB43     		mvns	r3, r3
 2357 007a 63F03F03 		orn	r3, r3, #63
 2358              		.loc 1 811 14 view .LVU548
 2359 007e 82F82030 		strb	r3, [r2, #32]
 812:Core/Src/Mytouch.c **** 			tp_dev.x[4]=tp_dev.x[0];	//保存触点0的数据
 2360              		.loc 1 812 4 is_stmt 1 view .LVU549
 2361              		.loc 1 812 24 is_stmt 0 view .LVU550
 2362 0082 9389     		ldrh	r3, [r2, #12]
 2363              		.loc 1 812 15 view .LVU551
 2364 0084 9382     		strh	r3, [r2, #20]	@ movhi
 813:Core/Src/Mytouch.c **** 			tp_dev.y[4]=tp_dev.y[0];
 2365              		.loc 1 813 4 is_stmt 1 view .LVU552
 2366              		.loc 1 813 24 is_stmt 0 view .LVU553
 2367 0086 D38A     		ldrh	r3, [r2, #22]
 2368              		.loc 1 813 15 view .LVU554
 2369 0088 D383     		strh	r3, [r2, #30]	@ movhi
 814:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 2370              		.loc 1 814 4 is_stmt 1 view .LVU555
 2371              		.loc 1 814 9 is_stmt 0 view .LVU556
ARM GAS  /tmp/ccNZMix7.s 			page 59


 2372 008a 0024     		movs	r4, #0
 2373              		.loc 1 814 4 view .LVU557
 2374 008c 2FE0     		b	.L141
 2375              	.LVL246:
 2376              	.L158:
 802:Core/Src/Mytouch.c **** 		{
 2377              		.loc 1 802 16 discriminator 1 view .LVU558
 2378 008e 03F00F03 		and	r3, r3, #15
 2379 0092 052B     		cmp	r3, #5
 2380 0094 D8D8     		bhi	.L140
 804:Core/Src/Mytouch.c **** 			GT9147_WR_Reg(GT_GSTID_REG,&temp,1);//清标志 		
 2381              		.loc 1 804 4 is_stmt 1 view .LVU559
 804:Core/Src/Mytouch.c **** 			GT9147_WR_Reg(GT_GSTID_REG,&temp,1);//清标志 		
 2382              		.loc 1 804 8 is_stmt 0 view .LVU560
 2383 0096 0023     		movs	r3, #0
 2384 0098 8DF80B30 		strb	r3, [sp, #11]
 805:Core/Src/Mytouch.c **** 		}		
 2385              		.loc 1 805 4 is_stmt 1 view .LVU561
 2386 009c 0122     		movs	r2, #1
 2387 009e 0DF10B01 		add	r1, sp, #11
 2388 00a2 48F24E10 		movw	r0, #33102
 2389 00a6 FFF7FEFF 		bl	GT9147_WR_Reg
 2390              	.LVL247:
 2391 00aa CDE7     		b	.L140
 2392              	.LVL248:
 2393              	.L160:
 815:Core/Src/Mytouch.c **** 			{
 816:Core/Src/Mytouch.c **** 				if(tp_dev.sta&(1<<i))	//触摸有效?
 817:Core/Src/Mytouch.c **** 				{
 818:Core/Src/Mytouch.c **** 					GT9147_RD_Reg(GT9147_TPX_TBL[i],buf,4);	//读取XY坐标值
 819:Core/Src/Mytouch.c ****                     if(lcddev.id==0X5510)   //4.3寸800*480 MCU屏
 820:Core/Src/Mytouch.c ****                     {
 821:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01)//横屏
 2394              		.loc 1 821 25 view .LVU562
 2395              		.loc 1 821 34 is_stmt 0 view .LVU563
 2396 00ac 8D4B     		ldr	r3, .L164+8
 2397 00ae 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 2398              		.loc 1 821 27 view .LVU564
 2399 00b2 13F0010F 		tst	r3, #1
 2400 00b6 56D0     		beq	.L144
 822:Core/Src/Mytouch.c ****                         {
 823:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[1]<<8)+buf[0];
 2401              		.loc 1 823 29 is_stmt 1 view .LVU565
 2402              		.loc 1 823 50 is_stmt 0 view .LVU566
 2403 00b8 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 2404              		.loc 1 823 61 view .LVU567
 2405 00bc 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 2406              		.loc 1 823 57 view .LVU568
 2407 00c0 01EB0321 		add	r1, r1, r3, lsl #8
 2408              		.loc 1 823 40 view .LVU569
 2409 00c4 874A     		ldr	r2, .L164+8
 2410 00c6 04F10803 		add	r3, r4, #8
 2411 00ca 02EB4303 		add	r3, r2, r3, lsl #1
 2412 00ce D980     		strh	r1, [r3, #6]	@ movhi
 824:Core/Src/Mytouch.c ****                             tp_dev.x[i]=800-(((u16)buf[3]<<8)+buf[2]);
 2413              		.loc 1 824 29 is_stmt 1 view .LVU570
 2414              		.loc 1 824 55 is_stmt 0 view .LVU571
ARM GAS  /tmp/ccNZMix7.s 			page 60


 2415 00d0 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 2416              		.loc 1 824 66 view .LVU572
 2417 00d4 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 2418              		.loc 1 824 62 view .LVU573
 2419 00d8 03EB0123 		add	r3, r3, r1, lsl #8
 2420 00dc 9BB2     		uxth	r3, r3
 2421              		.loc 1 824 44 view .LVU574
 2422 00de C3F54873 		rsb	r3, r3, #800
 2423              		.loc 1 824 40 view .LVU575
 2424 00e2 0436     		adds	r6, r6, #4
 2425 00e4 02EB4602 		add	r2, r2, r6, lsl #1
 2426 00e8 9380     		strh	r3, [r2, #4]	@ movhi
 2427              	.L142:
 814:Core/Src/Mytouch.c **** 			{
 2428              		.loc 1 814 16 is_stmt 1 discriminator 2 view .LVU576
 814:Core/Src/Mytouch.c **** 			{
 2429              		.loc 1 814 17 is_stmt 0 discriminator 2 view .LVU577
 2430 00ea 0134     		adds	r4, r4, #1
 2431              	.LVL249:
 814:Core/Src/Mytouch.c **** 			{
 2432              		.loc 1 814 17 discriminator 2 view .LVU578
 2433 00ec E4B2     		uxtb	r4, r4
 2434              	.LVL250:
 2435              	.L141:
 814:Core/Src/Mytouch.c **** 			{
 2436              		.loc 1 814 12 is_stmt 1 discriminator 1 view .LVU579
 814:Core/Src/Mytouch.c **** 			{
 2437              		.loc 1 814 4 is_stmt 0 discriminator 1 view .LVU580
 2438 00ee 042C     		cmp	r4, #4
 2439 00f0 00F29F80 		bhi	.L159
 816:Core/Src/Mytouch.c **** 				{
 2440              		.loc 1 816 5 is_stmt 1 view .LVU581
 816:Core/Src/Mytouch.c **** 				{
 2441              		.loc 1 816 14 is_stmt 0 view .LVU582
 2442 00f4 7B4B     		ldr	r3, .L164+8
 2443 00f6 93F82030 		ldrb	r3, [r3, #32]	@ zero_extendqisi2
 816:Core/Src/Mytouch.c **** 				{
 2444              		.loc 1 816 8 view .LVU583
 2445 00fa 2646     		mov	r6, r4
 2446 00fc 2341     		asrs	r3, r3, r4
 816:Core/Src/Mytouch.c **** 				{
 2447              		.loc 1 816 7 view .LVU584
 2448 00fe 13F0010F 		tst	r3, #1
 2449 0102 F2D0     		beq	.L142
 818:Core/Src/Mytouch.c ****                     if(lcddev.id==0X5510)   //4.3寸800*480 MCU屏
 2450              		.loc 1 818 6 is_stmt 1 view .LVU585
 2451 0104 0422     		movs	r2, #4
 2452 0106 03A9     		add	r1, sp, #12
 2453 0108 774B     		ldr	r3, .L164+12
 2454 010a 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 2455 010e FFF7FEFF 		bl	GT9147_RD_Reg
 2456              	.LVL251:
 819:Core/Src/Mytouch.c ****                     {
 2457              		.loc 1 819 21 view .LVU586
 819:Core/Src/Mytouch.c ****                     {
 2458              		.loc 1 819 30 is_stmt 0 view .LVU587
 2459 0112 764B     		ldr	r3, .L164+16
ARM GAS  /tmp/ccNZMix7.s 			page 61


 2460 0114 9B88     		ldrh	r3, [r3, #4]
 819:Core/Src/Mytouch.c ****                     {
 2461              		.loc 1 819 23 view .LVU588
 2462 0116 45F21052 		movw	r2, #21776
 2463 011a 9342     		cmp	r3, r2
 2464 011c C6D0     		beq	.L160
 825:Core/Src/Mytouch.c ****                         }else
 826:Core/Src/Mytouch.c ****                         {
 827:Core/Src/Mytouch.c ****                             tp_dev.x[i]=((u16)buf[1]<<8)+buf[0];
 828:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 829:Core/Src/Mytouch.c ****                         }  
 830:Core/Src/Mytouch.c ****                     }else if(lcddev.id==0X4342) //4.3寸480*272 RGB屏
 2465              		.loc 1 830 27 is_stmt 1 view .LVU589
 2466              		.loc 1 830 29 is_stmt 0 view .LVU590
 2467 011e 44F24232 		movw	r2, #17218
 2468 0122 9342     		cmp	r3, r2
 2469 0124 35D0     		beq	.L161
 831:Core/Src/Mytouch.c ****                     {
 832:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01)//横屏
 833:Core/Src/Mytouch.c ****                         {
 834:Core/Src/Mytouch.c ****                             tp_dev.x[i]=(((u16)buf[1]<<8)+buf[0]);
 835:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 836:Core/Src/Mytouch.c ****                         }else
 837:Core/Src/Mytouch.c ****                         {
 838:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[1]<<8)+buf[0];
 839:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 840:Core/Src/Mytouch.c ****                         }
 841:Core/Src/Mytouch.c ****                     }else if(lcddev.id==0X4384) //4.3寸800*480 RGB屏
 2470              		.loc 1 841 27 is_stmt 1 view .LVU591
 2471              		.loc 1 841 29 is_stmt 0 view .LVU592
 2472 0126 44F28432 		movw	r2, #17284
 2473 012a 9342     		cmp	r3, r2
 2474 012c DDD1     		bne	.L142
 842:Core/Src/Mytouch.c ****                     {
 843:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01)//横屏
 2475              		.loc 1 843 25 is_stmt 1 view .LVU593
 2476              		.loc 1 843 34 is_stmt 0 view .LVU594
 2477 012e 6D4B     		ldr	r3, .L164+8
 2478 0130 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 2479              		.loc 1 843 27 view .LVU595
 2480 0134 13F0010F 		tst	r3, #1
 2481 0138 61D0     		beq	.L147
 844:Core/Src/Mytouch.c ****                         {
 845:Core/Src/Mytouch.c ****                             tp_dev.x[i]=(((u16)buf[1]<<8)+buf[0]);
 2482              		.loc 1 845 29 is_stmt 1 view .LVU596
 2483              		.loc 1 845 51 is_stmt 0 view .LVU597
 2484 013a 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 2485              		.loc 1 845 62 view .LVU598
 2486 013e 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 2487              		.loc 1 845 58 view .LVU599
 2488 0142 01EB0321 		add	r1, r1, r3, lsl #8
 2489              		.loc 1 845 40 view .LVU600
 2490 0146 674B     		ldr	r3, .L164+8
 2491 0148 221D     		adds	r2, r4, #4
 2492 014a 03EB4202 		add	r2, r3, r2, lsl #1
 2493 014e 9180     		strh	r1, [r2, #4]	@ movhi
 846:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
ARM GAS  /tmp/ccNZMix7.s 			page 62


 2494              		.loc 1 846 29 is_stmt 1 view .LVU601
 2495              		.loc 1 846 51 is_stmt 0 view .LVU602
 2496 0150 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 2497              		.loc 1 846 62 view .LVU603
 2498 0154 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 2499              		.loc 1 846 58 view .LVU604
 2500 0158 02EB0122 		add	r2, r2, r1, lsl #8
 2501              		.loc 1 846 40 view .LVU605
 2502 015c 0836     		adds	r6, r6, #8
 2503 015e 03EB4603 		add	r3, r3, r6, lsl #1
 2504 0162 DA80     		strh	r2, [r3, #6]	@ movhi
 2505 0164 C1E7     		b	.L142
 2506              	.L144:
 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2507              		.loc 1 827 29 is_stmt 1 view .LVU606
 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2508              		.loc 1 827 50 is_stmt 0 view .LVU607
 2509 0166 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2510              		.loc 1 827 61 view .LVU608
 2511 016a 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2512              		.loc 1 827 57 view .LVU609
 2513 016e 01EB0321 		add	r1, r1, r3, lsl #8
 827:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[3]<<8)+buf[2];
 2514              		.loc 1 827 40 view .LVU610
 2515 0172 5C4B     		ldr	r3, .L164+8
 2516 0174 221D     		adds	r2, r4, #4
 2517 0176 03EB4202 		add	r2, r3, r2, lsl #1
 2518 017a 9180     		strh	r1, [r2, #4]	@ movhi
 828:Core/Src/Mytouch.c ****                         }  
 2519              		.loc 1 828 29 is_stmt 1 view .LVU611
 828:Core/Src/Mytouch.c ****                         }  
 2520              		.loc 1 828 50 is_stmt 0 view .LVU612
 2521 017c 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 828:Core/Src/Mytouch.c ****                         }  
 2522              		.loc 1 828 61 view .LVU613
 2523 0180 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 828:Core/Src/Mytouch.c ****                         }  
 2524              		.loc 1 828 57 view .LVU614
 2525 0184 02EB0122 		add	r2, r2, r1, lsl #8
 828:Core/Src/Mytouch.c ****                         }  
 2526              		.loc 1 828 40 view .LVU615
 2527 0188 0836     		adds	r6, r6, #8
 2528 018a 03EB4603 		add	r3, r3, r6, lsl #1
 2529 018e DA80     		strh	r2, [r3, #6]	@ movhi
 2530 0190 ABE7     		b	.L142
 2531              	.L161:
 832:Core/Src/Mytouch.c ****                         {
 2532              		.loc 1 832 25 is_stmt 1 view .LVU616
 832:Core/Src/Mytouch.c ****                         {
 2533              		.loc 1 832 34 is_stmt 0 view .LVU617
 2534 0192 544B     		ldr	r3, .L164+8
 2535 0194 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 832:Core/Src/Mytouch.c ****                         {
 2536              		.loc 1 832 27 view .LVU618
 2537 0198 13F0010F 		tst	r3, #1
ARM GAS  /tmp/ccNZMix7.s 			page 63


 2538 019c 15D0     		beq	.L146
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2539              		.loc 1 834 29 is_stmt 1 view .LVU619
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2540              		.loc 1 834 51 is_stmt 0 view .LVU620
 2541 019e 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2542              		.loc 1 834 62 view .LVU621
 2543 01a2 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2544              		.loc 1 834 58 view .LVU622
 2545 01a6 01EB0321 		add	r1, r1, r3, lsl #8
 834:Core/Src/Mytouch.c ****                             tp_dev.y[i]=(((u16)buf[3]<<8)+buf[2]);
 2546              		.loc 1 834 40 view .LVU623
 2547 01aa 4E4B     		ldr	r3, .L164+8
 2548 01ac 221D     		adds	r2, r4, #4
 2549 01ae 03EB4202 		add	r2, r3, r2, lsl #1
 2550 01b2 9180     		strh	r1, [r2, #4]	@ movhi
 835:Core/Src/Mytouch.c ****                         }else
 2551              		.loc 1 835 29 is_stmt 1 view .LVU624
 835:Core/Src/Mytouch.c ****                         }else
 2552              		.loc 1 835 51 is_stmt 0 view .LVU625
 2553 01b4 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 835:Core/Src/Mytouch.c ****                         }else
 2554              		.loc 1 835 62 view .LVU626
 2555 01b8 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 835:Core/Src/Mytouch.c ****                         }else
 2556              		.loc 1 835 58 view .LVU627
 2557 01bc 02EB0122 		add	r2, r2, r1, lsl #8
 835:Core/Src/Mytouch.c ****                         }else
 2558              		.loc 1 835 40 view .LVU628
 2559 01c0 0836     		adds	r6, r6, #8
 2560 01c2 03EB4603 		add	r3, r3, r6, lsl #1
 2561 01c6 DA80     		strh	r2, [r3, #6]	@ movhi
 2562 01c8 8FE7     		b	.L142
 2563              	.L146:
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2564              		.loc 1 838 29 is_stmt 1 view .LVU629
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2565              		.loc 1 838 50 is_stmt 0 view .LVU630
 2566 01ca 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2567              		.loc 1 838 61 view .LVU631
 2568 01ce 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2569              		.loc 1 838 57 view .LVU632
 2570 01d2 01EB0321 		add	r1, r1, r3, lsl #8
 838:Core/Src/Mytouch.c ****                             tp_dev.x[i]=272-(((u16)buf[3]<<8)+buf[2]);
 2571              		.loc 1 838 40 view .LVU633
 2572 01d6 434A     		ldr	r2, .L164+8
 2573 01d8 04F10803 		add	r3, r4, #8
 2574 01dc 02EB4303 		add	r3, r2, r3, lsl #1
 2575 01e0 D980     		strh	r1, [r3, #6]	@ movhi
 839:Core/Src/Mytouch.c ****                         }
 2576              		.loc 1 839 29 is_stmt 1 view .LVU634
 839:Core/Src/Mytouch.c ****                         }
 2577              		.loc 1 839 55 is_stmt 0 view .LVU635
ARM GAS  /tmp/ccNZMix7.s 			page 64


 2578 01e2 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 839:Core/Src/Mytouch.c ****                         }
 2579              		.loc 1 839 66 view .LVU636
 2580 01e6 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 839:Core/Src/Mytouch.c ****                         }
 2581              		.loc 1 839 62 view .LVU637
 2582 01ea 03EB0123 		add	r3, r3, r1, lsl #8
 2583 01ee 9BB2     		uxth	r3, r3
 839:Core/Src/Mytouch.c ****                         }
 2584              		.loc 1 839 44 view .LVU638
 2585 01f0 C3F58873 		rsb	r3, r3, #272
 839:Core/Src/Mytouch.c ****                         }
 2586              		.loc 1 839 40 view .LVU639
 2587 01f4 0436     		adds	r6, r6, #4
 2588 01f6 02EB4602 		add	r2, r2, r6, lsl #1
 2589 01fa 9380     		strh	r3, [r2, #4]	@ movhi
 2590 01fc 75E7     		b	.L142
 2591              	.L147:
 847:Core/Src/Mytouch.c ****                         }else
 848:Core/Src/Mytouch.c ****                         {
 849:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)buf[1]<<8)+buf[0];
 2592              		.loc 1 849 29 is_stmt 1 view .LVU640
 2593              		.loc 1 849 50 is_stmt 0 view .LVU641
 2594 01fe 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 2595              		.loc 1 849 61 view .LVU642
 2596 0202 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 2597              		.loc 1 849 57 view .LVU643
 2598 0206 01EB0321 		add	r1, r1, r3, lsl #8
 2599              		.loc 1 849 40 view .LVU644
 2600 020a 364A     		ldr	r2, .L164+8
 2601 020c 04F10803 		add	r3, r4, #8
 2602 0210 02EB4303 		add	r3, r2, r3, lsl #1
 2603 0214 D980     		strh	r1, [r3, #6]	@ movhi
 850:Core/Src/Mytouch.c ****                             tp_dev.x[i]=480-(((u16)buf[3]<<8)+buf[2]);
 2604              		.loc 1 850 29 is_stmt 1 view .LVU645
 2605              		.loc 1 850 55 is_stmt 0 view .LVU646
 2606 0216 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
 2607              		.loc 1 850 66 view .LVU647
 2608 021a 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 2609              		.loc 1 850 62 view .LVU648
 2610 021e 03EB0123 		add	r3, r3, r1, lsl #8
 2611 0222 9BB2     		uxth	r3, r3
 2612              		.loc 1 850 44 view .LVU649
 2613 0224 C3F5F073 		rsb	r3, r3, #480
 2614              		.loc 1 850 40 view .LVU650
 2615 0228 0436     		adds	r6, r6, #4
 2616 022a 02EB4606 		add	r6, r2, r6, lsl #1
 2617 022e B380     		strh	r3, [r6, #4]	@ movhi
 2618 0230 5BE7     		b	.L142
 2619              	.L159:
 851:Core/Src/Mytouch.c ****                         }
 852:Core/Src/Mytouch.c ****                     }
 853:Core/Src/Mytouch.c **** 				}
 854:Core/Src/Mytouch.c **** 			}  
 855:Core/Src/Mytouch.c **** 			res=1;
 2620              		.loc 1 855 4 is_stmt 1 view .LVU651
 2621              	.LVL252:
ARM GAS  /tmp/ccNZMix7.s 			page 65


 856:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)//非法数据(坐标超出了)
 2622              		.loc 1 856 4 view .LVU652
 2623              		.loc 1 856 15 is_stmt 0 view .LVU653
 2624 0232 2C4B     		ldr	r3, .L164+8
 2625 0234 9A89     		ldrh	r2, [r3, #12]
 2626              		.loc 1 856 25 view .LVU654
 2627 0236 2D4B     		ldr	r3, .L164+16
 2628 0238 1B88     		ldrh	r3, [r3]
 2629              		.loc 1 856 6 view .LVU655
 2630 023a 9A42     		cmp	r2, r3
 2631 023c 05D8     		bhi	.L149
 2632              		.loc 1 856 41 discriminator 1 view .LVU656
 2633 023e 294B     		ldr	r3, .L164+8
 2634 0240 DA8A     		ldrh	r2, [r3, #22]
 2635              		.loc 1 856 51 discriminator 1 view .LVU657
 2636 0242 2A4B     		ldr	r3, .L164+16
 2637 0244 5B88     		ldrh	r3, [r3, #2]
 2638              		.loc 1 856 31 discriminator 1 view .LVU658
 2639 0246 9A42     		cmp	r2, r3
 2640 0248 1AD9     		bls	.L150
 2641              	.L149:
 857:Core/Src/Mytouch.c **** 			{ 
 858:Core/Src/Mytouch.c **** 				if((mode&0XF)>1)		//有其他点有数据,则复第二个触点的数据到第一个触点.
 2642              		.loc 1 858 5 is_stmt 1 view .LVU659
 2643              		.loc 1 858 18 is_stmt 0 view .LVU660
 2644 024a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2645              		.loc 1 858 7 view .LVU661
 2646 024e 13F00E0F 		tst	r3, #14
 2647 0252 09D0     		beq	.L151
 859:Core/Src/Mytouch.c **** 				{
 860:Core/Src/Mytouch.c **** 					tp_dev.x[0]=tp_dev.x[1];
 2648              		.loc 1 860 6 is_stmt 1 view .LVU662
 2649              		.loc 1 860 26 is_stmt 0 view .LVU663
 2650 0254 234B     		ldr	r3, .L164+8
 2651 0256 DA89     		ldrh	r2, [r3, #14]
 2652              		.loc 1 860 17 view .LVU664
 2653 0258 9A81     		strh	r2, [r3, #12]	@ movhi
 861:Core/Src/Mytouch.c **** 					tp_dev.y[0]=tp_dev.y[1];
 2654              		.loc 1 861 6 is_stmt 1 view .LVU665
 2655              		.loc 1 861 26 is_stmt 0 view .LVU666
 2656 025a 1A8B     		ldrh	r2, [r3, #24]
 2657              		.loc 1 861 17 view .LVU667
 2658 025c DA82     		strh	r2, [r3, #22]	@ movhi
 862:Core/Src/Mytouch.c **** 					t=0;				//触发一次,则会最少连续监测10次,从而提高命中率
 2659              		.loc 1 862 6 is_stmt 1 view .LVU668
 2660              		.loc 1 862 7 is_stmt 0 view .LVU669
 2661 025e 1F4B     		ldr	r3, .L164
 2662 0260 0022     		movs	r2, #0
 2663 0262 1A70     		strb	r2, [r3]
 855:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)//非法数据(坐标超出了)
 2664              		.loc 1 855 7 view .LVU670
 2665 0264 0120     		movs	r0, #1
 2666 0266 11E0     		b	.L139
 2667              	.L151:
 863:Core/Src/Mytouch.c **** 				}else					//非法数据,则忽略此次数据(还原原来的)  
 864:Core/Src/Mytouch.c **** 				{
 865:Core/Src/Mytouch.c **** 					tp_dev.x[0]=tp_dev.x[4];
ARM GAS  /tmp/ccNZMix7.s 			page 66


 2668              		.loc 1 865 6 is_stmt 1 view .LVU671
 2669              		.loc 1 865 26 is_stmt 0 view .LVU672
 2670 0268 1E4B     		ldr	r3, .L164+8
 2671 026a 9A8A     		ldrh	r2, [r3, #20]
 2672              		.loc 1 865 17 view .LVU673
 2673 026c 9A81     		strh	r2, [r3, #12]	@ movhi
 866:Core/Src/Mytouch.c **** 					tp_dev.y[0]=tp_dev.y[4];
 2674              		.loc 1 866 6 is_stmt 1 view .LVU674
 2675              		.loc 1 866 26 is_stmt 0 view .LVU675
 2676 026e DA8B     		ldrh	r2, [r3, #30]
 2677              		.loc 1 866 17 view .LVU676
 2678 0270 DA82     		strh	r2, [r3, #22]	@ movhi
 867:Core/Src/Mytouch.c **** 					mode=0X80;		
 2679              		.loc 1 867 6 is_stmt 1 view .LVU677
 2680              		.loc 1 867 10 is_stmt 0 view .LVU678
 2681 0272 8022     		movs	r2, #128
 2682 0274 8DF80720 		strb	r2, [sp, #7]
 868:Core/Src/Mytouch.c **** 					tp_dev.sta=tempsta;	//恢复tp_dev.sta
 2683              		.loc 1 868 6 is_stmt 1 view .LVU679
 2684              		.loc 1 868 16 is_stmt 0 view .LVU680
 2685 0278 83F82050 		strb	r5, [r3, #32]
 855:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)//非法数据(坐标超出了)
 2686              		.loc 1 855 7 view .LVU681
 2687 027c 0120     		movs	r0, #1
 2688 027e 05E0     		b	.L139
 2689              	.L150:
 869:Core/Src/Mytouch.c **** 				}
 870:Core/Src/Mytouch.c **** 			}else t=0;					//触发一次,则会最少连续监测10次,从而提高命中率
 2690              		.loc 1 870 10 is_stmt 1 view .LVU682
 2691              		.loc 1 870 11 is_stmt 0 view .LVU683
 2692 0280 164B     		ldr	r3, .L164
 2693 0282 0022     		movs	r2, #0
 2694 0284 1A70     		strb	r2, [r3]
 855:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)//非法数据(坐标超出了)
 2695              		.loc 1 855 7 view .LVU684
 2696 0286 0120     		movs	r0, #1
 2697 0288 00E0     		b	.L139
 2698              	.LVL253:
 2699              	.L155:
 794:Core/Src/Mytouch.c **** 	u8 temp;
 2700              		.loc 1 794 5 view .LVU685
 2701 028a 0020     		movs	r0, #0
 2702              	.LVL254:
 2703              	.L139:
 871:Core/Src/Mytouch.c **** 		}
 872:Core/Src/Mytouch.c **** 	}
 873:Core/Src/Mytouch.c **** 	if((mode&0X8F)==0X80)//无触摸点按下
 2704              		.loc 1 873 2 is_stmt 1 view .LVU686
 2705              		.loc 1 873 10 is_stmt 0 view .LVU687
 2706 028c 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2707              		.loc 1 873 4 view .LVU688
 2708 0290 03F08F03 		and	r3, r3, #143
 2709 0294 802B     		cmp	r3, #128
 2710 0296 0AD0     		beq	.L162
 2711              	.L152:
 874:Core/Src/Mytouch.c **** 	{ 
 875:Core/Src/Mytouch.c **** 		if(tp_dev.sta&TP_PRES_DOWN)	//之前是被按下的
ARM GAS  /tmp/ccNZMix7.s 			page 67


 876:Core/Src/Mytouch.c **** 		{
 877:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<7);	//标记按键松开
 878:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 879:Core/Src/Mytouch.c **** 		{ 
 880:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 881:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 882:Core/Src/Mytouch.c **** 			tp_dev.sta&=0XE0;	//清除点有效标记	
 883:Core/Src/Mytouch.c **** 		}	 
 884:Core/Src/Mytouch.c **** 	} 	
 885:Core/Src/Mytouch.c **** 	if(t>240)t=10;//重新从10开始计数
 2712              		.loc 1 885 2 is_stmt 1 view .LVU689
 2713              		.loc 1 885 6 is_stmt 0 view .LVU690
 2714 0298 104B     		ldr	r3, .L164
 2715 029a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2716              		.loc 1 885 4 view .LVU691
 2717 029c F02B     		cmp	r3, #240
 2718 029e 02D9     		bls	.L154
 2719              		.loc 1 885 11 is_stmt 1 discriminator 1 view .LVU692
 2720              		.loc 1 885 12 is_stmt 0 discriminator 1 view .LVU693
 2721 02a0 0E4B     		ldr	r3, .L164
 2722 02a2 0A22     		movs	r2, #10
 2723 02a4 1A70     		strb	r2, [r3]
 2724              	.L154:
 886:Core/Src/Mytouch.c **** 	return res;
 2725              		.loc 1 886 2 is_stmt 1 view .LVU694
 887:Core/Src/Mytouch.c **** }
 2726              		.loc 1 887 1 is_stmt 0 view .LVU695
 2727 02a6 04B0     		add	sp, sp, #16
 2728              	.LCFI34:
 2729              		.cfi_remember_state
 2730              		.cfi_def_cfa_offset 16
 2731              		@ sp needed
 2732 02a8 70BD     		pop	{r4, r5, r6, pc}
 2733              	.LVL255:
 2734              	.L156:
 2735              	.LCFI35:
 2736              		.cfi_restore_state
 794:Core/Src/Mytouch.c **** 	u8 temp;
 2737              		.loc 1 794 5 view .LVU696
 2738 02aa 0020     		movs	r0, #0
 2739 02ac EEE7     		b	.L139
 2740              	.LVL256:
 2741              	.L162:
 875:Core/Src/Mytouch.c **** 		{
 2742              		.loc 1 875 3 is_stmt 1 view .LVU697
 875:Core/Src/Mytouch.c **** 		{
 2743              		.loc 1 875 12 is_stmt 0 view .LVU698
 2744 02ae 0D4A     		ldr	r2, .L164+8
 2745 02b0 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
 875:Core/Src/Mytouch.c **** 		{
 2746              		.loc 1 875 6 view .LVU699
 2747 02b4 92F92020 		ldrsb	r2, [r2, #32]
 875:Core/Src/Mytouch.c **** 		{
 2748              		.loc 1 875 5 view .LVU700
 2749 02b8 002A     		cmp	r2, #0
 2750 02ba 09DB     		blt	.L163
 880:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
ARM GAS  /tmp/ccNZMix7.s 			page 68


 2751              		.loc 1 880 4 is_stmt 1 view .LVU701
 880:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 2752              		.loc 1 880 15 is_stmt 0 view .LVU702
 2753 02bc 094A     		ldr	r2, .L164+8
 2754 02be 4FF6FF71 		movw	r1, #65535
 2755 02c2 9181     		strh	r1, [r2, #12]	@ movhi
 881:Core/Src/Mytouch.c **** 			tp_dev.sta&=0XE0;	//清除点有效标记	
 2756              		.loc 1 881 4 is_stmt 1 view .LVU703
 881:Core/Src/Mytouch.c **** 			tp_dev.sta&=0XE0;	//清除点有效标记	
 2757              		.loc 1 881 15 is_stmt 0 view .LVU704
 2758 02c4 D182     		strh	r1, [r2, #22]	@ movhi
 882:Core/Src/Mytouch.c **** 		}	 
 2759              		.loc 1 882 4 is_stmt 1 view .LVU705
 882:Core/Src/Mytouch.c **** 		}	 
 2760              		.loc 1 882 14 is_stmt 0 view .LVU706
 2761 02c6 23F01F03 		bic	r3, r3, #31
 2762 02ca 82F82030 		strb	r3, [r2, #32]
 2763 02ce E3E7     		b	.L152
 2764              	.L163:
 877:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 2765              		.loc 1 877 4 is_stmt 1 view .LVU707
 877:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 2766              		.loc 1 877 14 is_stmt 0 view .LVU708
 2767 02d0 03F07F03 		and	r3, r3, #127
 2768 02d4 034A     		ldr	r2, .L164+8
 2769 02d6 82F82030 		strb	r3, [r2, #32]
 2770 02da DDE7     		b	.L152
 2771              	.L165:
 2772              		.align	2
 2773              	.L164:
 2774 02dc 00000000 		.word	.LANCHOR4
 2775 02e0 CDCCCCCC 		.word	-858993459
 2776 02e4 00000000 		.word	.LANCHOR2
 2777 02e8 00000000 		.word	.LANCHOR5
 2778 02ec 00000000 		.word	lcddev
 2779              		.cfi_endproc
 2780              	.LFE173:
 2782              		.section	.rodata.GT9147_Init.str1.4,"aMS",%progbits,1
 2783              		.align	2
 2784              	.LC9:
 2785 0000 43545020 		.ascii	"CTP ID:%s\015\012\000"
 2785      49443A25 
 2785      730D0A00 
 2786              		.align	2
 2787              	.LC10:
 2788 000c 39313437 		.ascii	"9147\000"
 2788      00
 2789 0011 000000   		.align	2
 2790              	.LC11:
 2791 0014 44656661 		.ascii	"Default Ver:%d\015\012\000"
 2791      756C7420 
 2791      5665723A 
 2791      25640D0A 
 2791      00
 2792              		.section	.text.GT9147_Init,"ax",%progbits
 2793              		.align	1
 2794              		.global	GT9147_Init
ARM GAS  /tmp/ccNZMix7.s 			page 69


 2795              		.syntax unified
 2796              		.thumb
 2797              		.thumb_func
 2798              		.fpu fpv5-d16
 2800              	GT9147_Init:
 2801              	.LFB172:
 736:Core/Src/Mytouch.c **** 	u8 temp[5]; 
 2802              		.loc 1 736 1 is_stmt 1 view -0
 2803              		.cfi_startproc
 2804              		@ args = 0, pretend = 0, frame = 40
 2805              		@ frame_needed = 0, uses_anonymous_args = 0
 2806 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2807              	.LCFI36:
 2808              		.cfi_def_cfa_offset 32
 2809              		.cfi_offset 4, -32
 2810              		.cfi_offset 5, -28
 2811              		.cfi_offset 6, -24
 2812              		.cfi_offset 7, -20
 2813              		.cfi_offset 8, -16
 2814              		.cfi_offset 9, -12
 2815              		.cfi_offset 10, -8
 2816              		.cfi_offset 14, -4
 2817 0004 8AB0     		sub	sp, sp, #40
 2818              	.LCFI37:
 2819              		.cfi_def_cfa_offset 72
 737:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 2820              		.loc 1 737 2 view .LVU710
 738:Core/Src/Mytouch.c ****     
 2821              		.loc 1 738 5 view .LVU711
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2822              		.loc 1 740 5 view .LVU712
 2823              	.LBB4:
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2824              		.loc 1 740 5 view .LVU713
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2825              		.loc 1 740 5 view .LVU714
 2826 0006 4A4B     		ldr	r3, .L172
 2827 0008 D3F8E020 		ldr	r2, [r3, #224]
 2828 000c 42F08002 		orr	r2, r2, #128
 2829 0010 C3F8E020 		str	r2, [r3, #224]
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2830              		.loc 1 740 5 view .LVU715
 2831 0014 D3F8E020 		ldr	r2, [r3, #224]
 2832 0018 02F08002 		and	r2, r2, #128
 2833 001c 0192     		str	r2, [sp, #4]
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2834              		.loc 1 740 5 view .LVU716
 2835 001e 019A     		ldr	r2, [sp, #4]
 2836              	.LBE4:
 740:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 2837              		.loc 1 740 5 view .LVU717
 741:Core/Src/Mytouch.c ****                 
 2838              		.loc 1 741 5 view .LVU718
 2839              	.LBB5:
 741:Core/Src/Mytouch.c ****                 
 2840              		.loc 1 741 5 view .LVU719
 741:Core/Src/Mytouch.c ****                 
ARM GAS  /tmp/ccNZMix7.s 			page 70


 2841              		.loc 1 741 5 view .LVU720
 2842 0020 D3F8E020 		ldr	r2, [r3, #224]
 2843 0024 42F48072 		orr	r2, r2, #256
 2844 0028 C3F8E020 		str	r2, [r3, #224]
 741:Core/Src/Mytouch.c ****                 
 2845              		.loc 1 741 5 view .LVU721
 2846 002c D3F8E030 		ldr	r3, [r3, #224]
 2847 0030 03F48073 		and	r3, r3, #256
 2848 0034 0293     		str	r3, [sp, #8]
 741:Core/Src/Mytouch.c ****                 
 2849              		.loc 1 741 5 view .LVU722
 2850 0036 029B     		ldr	r3, [sp, #8]
 2851              	.LBE5:
 741:Core/Src/Mytouch.c ****                 
 2852              		.loc 1 741 5 view .LVU723
 744:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 2853              		.loc 1 744 5 view .LVU724
 744:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 2854              		.loc 1 744 21 is_stmt 0 view .LVU725
 2855 0038 4FF0800A 		mov	r10, #128
 2856 003c CDF80CA0 		str	r10, [sp, #12]
 745:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 2857              		.loc 1 745 5 is_stmt 1 view .LVU726
 745:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 2858              		.loc 1 745 22 is_stmt 0 view .LVU727
 2859 0040 0024     		movs	r4, #0
 2860 0042 0494     		str	r4, [sp, #16]
 746:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 2861              		.loc 1 746 5 is_stmt 1 view .LVU728
 746:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 2862              		.loc 1 746 22 is_stmt 0 view .LVU729
 2863 0044 0127     		movs	r7, #1
 2864 0046 0597     		str	r7, [sp, #20]
 747:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 2865              		.loc 1 747 5 is_stmt 1 view .LVU730
 747:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 2866              		.loc 1 747 23 is_stmt 0 view .LVU731
 2867 0048 4FF00309 		mov	r9, #3
 2868 004c CDF81890 		str	r9, [sp, #24]
 748:Core/Src/Mytouch.c ****             
 2869              		.loc 1 748 5 is_stmt 1 view .LVU732
 2870 0050 DFF8F480 		ldr	r8, .L172+24
 2871 0054 03A9     		add	r1, sp, #12
 2872 0056 4046     		mov	r0, r8
 2873 0058 FFF7FEFF 		bl	HAL_GPIO_Init
 2874              	.LVL257:
 751:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 2875              		.loc 1 751 5 view .LVU733
 751:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 2876              		.loc 1 751 21 is_stmt 0 view .LVU734
 2877 005c 4FF48076 		mov	r6, #256
 2878 0060 0396     		str	r6, [sp, #12]
 752:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 2879              		.loc 1 752 5 is_stmt 1 view .LVU735
 752:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 2880              		.loc 1 752 22 is_stmt 0 view .LVU736
 2881 0062 0497     		str	r7, [sp, #16]
ARM GAS  /tmp/ccNZMix7.s 			page 71


 753:Core/Src/Mytouch.c **** 	CT_IIC_Init();      	//初始化电容屏的I2C总线  
 2882              		.loc 1 753 5 is_stmt 1 view .LVU737
 2883 0064 334D     		ldr	r5, .L172+4
 2884 0066 03A9     		add	r1, sp, #12
 2885 0068 2846     		mov	r0, r5
 2886 006a FFF7FEFF 		bl	HAL_GPIO_Init
 2887              	.LVL258:
 754:Core/Src/Mytouch.c **** 	GT_RST(0);				//复位
 2888              		.loc 1 754 2 view .LVU738
 2889 006e FFF7FEFF 		bl	CT_IIC_Init
 2890              	.LVL259:
 755:Core/Src/Mytouch.c **** 	HAL_Delay(10);
 2891              		.loc 1 755 2 view .LVU739
 2892 0072 2246     		mov	r2, r4
 2893 0074 3146     		mov	r1, r6
 2894 0076 2846     		mov	r0, r5
 2895 0078 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2896              	.LVL260:
 756:Core/Src/Mytouch.c ****  	GT_RST(1);				//释放复位		    
 2897              		.loc 1 756 2 view .LVU740
 2898 007c 0A20     		movs	r0, #10
 2899 007e FFF7FEFF 		bl	HAL_Delay
 2900              	.LVL261:
 757:Core/Src/Mytouch.c **** 	HAL_Delay(10); 
 2901              		.loc 1 757 3 view .LVU741
 2902 0082 3A46     		mov	r2, r7
 2903 0084 3146     		mov	r1, r6
 2904 0086 2846     		mov	r0, r5
 2905 0088 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2906              	.LVL262:
 758:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 2907              		.loc 1 758 2 view .LVU742
 2908 008c 0A20     		movs	r0, #10
 2909 008e FFF7FEFF 		bl	HAL_Delay
 2910              	.LVL263:
 759:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 2911              		.loc 1 759 5 view .LVU743
 759:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 2912              		.loc 1 759 21 is_stmt 0 view .LVU744
 2913 0092 CDF80CA0 		str	r10, [sp, #12]
 760:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_NOPULL;          //不带上下拉，浮空输入
 2914              		.loc 1 760 5 is_stmt 1 view .LVU745
 760:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_NOPULL;          //不带上下拉，浮空输入
 2915              		.loc 1 760 22 is_stmt 0 view .LVU746
 2916 0096 0494     		str	r4, [sp, #16]
 761:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 2917              		.loc 1 761 5 is_stmt 1 view .LVU747
 761:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 2918              		.loc 1 761 22 is_stmt 0 view .LVU748
 2919 0098 0594     		str	r4, [sp, #20]
 762:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 2920              		.loc 1 762 5 is_stmt 1 view .LVU749
 762:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 2921              		.loc 1 762 23 is_stmt 0 view .LVU750
 2922 009a CDF81890 		str	r9, [sp, #24]
 763:Core/Src/Mytouch.c **** 	HAL_Delay(100);  
 2923              		.loc 1 763 5 is_stmt 1 view .LVU751
ARM GAS  /tmp/ccNZMix7.s 			page 72


 2924 009e 03A9     		add	r1, sp, #12
 2925 00a0 4046     		mov	r0, r8
 2926 00a2 FFF7FEFF 		bl	HAL_GPIO_Init
 2927              	.LVL264:
 764:Core/Src/Mytouch.c **** 	GT9147_RD_Reg(GT_PID_REG,temp,4);//读取产品ID
 2928              		.loc 1 764 2 view .LVU752
 2929 00a6 6420     		movs	r0, #100
 2930 00a8 FFF7FEFF 		bl	HAL_Delay
 2931              	.LVL265:
 765:Core/Src/Mytouch.c **** 	temp[4]=0;
 2932              		.loc 1 765 2 view .LVU753
 2933 00ac 0422     		movs	r2, #4
 2934 00ae 08A9     		add	r1, sp, #32
 2935 00b0 48F24010 		movw	r0, #33088
 2936 00b4 FFF7FEFF 		bl	GT9147_RD_Reg
 2937              	.LVL266:
 766:Core/Src/Mytouch.c **** 	printf("CTP ID:%s\r\n",temp);	//打印ID
 2938              		.loc 1 766 2 view .LVU754
 766:Core/Src/Mytouch.c **** 	printf("CTP ID:%s\r\n",temp);	//打印ID
 2939              		.loc 1 766 9 is_stmt 0 view .LVU755
 2940 00b8 8DF82440 		strb	r4, [sp, #36]
 767:Core/Src/Mytouch.c **** 	if(strcmp((char*)temp,"9147")==0)//ID==9147
 2941              		.loc 1 767 2 is_stmt 1 view .LVU756
 2942 00bc 08A9     		add	r1, sp, #32
 2943 00be 1E48     		ldr	r0, .L172+8
 2944 00c0 FFF7FEFF 		bl	printf
 2945              	.LVL267:
 768:Core/Src/Mytouch.c **** 	{
 2946              		.loc 1 768 2 view .LVU757
 768:Core/Src/Mytouch.c **** 	{
 2947              		.loc 1 768 5 is_stmt 0 view .LVU758
 2948 00c4 1D49     		ldr	r1, .L172+12
 2949 00c6 08A8     		add	r0, sp, #32
 2950 00c8 FFF7FEFF 		bl	strcmp
 2951              	.LVL268:
 768:Core/Src/Mytouch.c **** 	{
 2952              		.loc 1 768 4 view .LVU759
 2953 00cc 18B1     		cbz	r0, .L170
 2954              	.L167:
 784:Core/Src/Mytouch.c **** const u16 GT9147_TPX_TBL[5]={GT_TP1_REG,GT_TP2_REG,GT_TP3_REG,GT_TP4_REG,GT_TP5_REG};
 2955              		.loc 1 784 1 view .LVU760
 2956 00ce 0020     		movs	r0, #0
 2957 00d0 0AB0     		add	sp, sp, #40
 2958              	.LCFI38:
 2959              		.cfi_remember_state
 2960              		.cfi_def_cfa_offset 32
 2961              		@ sp needed
 2962 00d2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2963              	.L170:
 2964              	.LCFI39:
 2965              		.cfi_restore_state
 770:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//软复位GT9147
 2966              		.loc 1 770 3 is_stmt 1 view .LVU761
 770:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//软复位GT9147
 2967              		.loc 1 770 10 is_stmt 0 view .LVU762
 2968 00d6 0223     		movs	r3, #2
 2969 00d8 8DF82030 		strb	r3, [sp, #32]
ARM GAS  /tmp/ccNZMix7.s 			page 73


 771:Core/Src/Mytouch.c **** 		GT9147_RD_Reg(GT_CFGS_REG,temp,1);//读取GT_CFGS_REG寄存器
 2970              		.loc 1 771 3 is_stmt 1 view .LVU763
 2971 00dc 3A46     		mov	r2, r7
 2972 00de 08A9     		add	r1, sp, #32
 2973 00e0 48F24000 		movw	r0, #32832
 2974 00e4 FFF7FEFF 		bl	GT9147_WR_Reg
 2975              	.LVL269:
 772:Core/Src/Mytouch.c **** 		if(temp[0]<0X60)//默认版本比较低,需要更新flash配置
 2976              		.loc 1 772 3 view .LVU764
 2977 00e8 3A46     		mov	r2, r7
 2978 00ea 08A9     		add	r1, sp, #32
 2979 00ec 48F24700 		movw	r0, #32839
 2980 00f0 FFF7FEFF 		bl	GT9147_RD_Reg
 2981              	.LVL270:
 773:Core/Src/Mytouch.c **** 		{
 2982              		.loc 1 773 3 view .LVU765
 773:Core/Src/Mytouch.c **** 		{
 2983              		.loc 1 773 10 is_stmt 0 view .LVU766
 2984 00f4 9DF82010 		ldrb	r1, [sp, #32]	@ zero_extendqisi2
 773:Core/Src/Mytouch.c **** 		{
 2985              		.loc 1 773 5 view .LVU767
 2986 00f8 5F29     		cmp	r1, #95
 2987 00fa 0CD9     		bls	.L171
 2988              	.L168:
 778:Core/Src/Mytouch.c **** 		temp[0]=0X00;	 
 2989              		.loc 1 778 3 is_stmt 1 view .LVU768
 2990 00fc 0A20     		movs	r0, #10
 2991 00fe FFF7FEFF 		bl	HAL_Delay
 2992              	.LVL271:
 779:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//结束复位   
 2993              		.loc 1 779 3 view .LVU769
 779:Core/Src/Mytouch.c **** 		GT9147_WR_Reg(GT_CTRL_REG,temp,1);//结束复位   
 2994              		.loc 1 779 10 is_stmt 0 view .LVU770
 2995 0102 0023     		movs	r3, #0
 2996 0104 8DF82030 		strb	r3, [sp, #32]
 780:Core/Src/Mytouch.c **** 		return 0;
 2997              		.loc 1 780 3 is_stmt 1 view .LVU771
 2998 0108 0122     		movs	r2, #1
 2999 010a 08A9     		add	r1, sp, #32
 3000 010c 48F24000 		movw	r0, #32832
 3001 0110 FFF7FEFF 		bl	GT9147_WR_Reg
 3002              	.LVL272:
 781:Core/Src/Mytouch.c **** 	} 
 3003              		.loc 1 781 3 view .LVU772
 781:Core/Src/Mytouch.c **** 	} 
 3004              		.loc 1 781 10 is_stmt 0 view .LVU773
 3005 0114 DBE7     		b	.L167
 3006              	.L171:
 775:Core/Src/Mytouch.c ****             if(lcddev.id==0X5510)GT9147_Send_Cfg(1);//更新并保存配置
 3007              		.loc 1 775 4 is_stmt 1 view .LVU774
 3008 0116 0A48     		ldr	r0, .L172+16
 3009 0118 FFF7FEFF 		bl	printf
 3010              	.LVL273:
 776:Core/Src/Mytouch.c **** 		}
 3011              		.loc 1 776 13 view .LVU775
 776:Core/Src/Mytouch.c **** 		}
 3012              		.loc 1 776 22 is_stmt 0 view .LVU776
ARM GAS  /tmp/ccNZMix7.s 			page 74


 3013 011c 094B     		ldr	r3, .L172+20
 3014 011e 9A88     		ldrh	r2, [r3, #4]
 776:Core/Src/Mytouch.c **** 		}
 3015              		.loc 1 776 15 view .LVU777
 3016 0120 45F21053 		movw	r3, #21776
 3017 0124 9A42     		cmp	r2, r3
 3018 0126 E9D1     		bne	.L168
 776:Core/Src/Mytouch.c **** 		}
 3019              		.loc 1 776 34 is_stmt 1 discriminator 1 view .LVU778
 3020 0128 3846     		mov	r0, r7
 3021 012a FFF7FEFF 		bl	GT9147_Send_Cfg
 3022              	.LVL274:
 3023 012e E5E7     		b	.L168
 3024              	.L173:
 3025              		.align	2
 3026              	.L172:
 3027 0130 00440258 		.word	1476543488
 3028 0134 00200258 		.word	1476534272
 3029 0138 00000000 		.word	.LC9
 3030 013c 0C000000 		.word	.LC10
 3031 0140 14000000 		.word	.LC11
 3032 0144 00000000 		.word	lcddev
 3033 0148 001C0258 		.word	1476533248
 3034              		.cfi_endproc
 3035              	.LFE172:
 3037              		.section	.text.OTT2001A_WR_Reg,"ax",%progbits
 3038              		.align	1
 3039              		.global	OTT2001A_WR_Reg
 3040              		.syntax unified
 3041              		.thumb
 3042              		.thumb_func
 3043              		.fpu fpv5-d16
 3045              	OTT2001A_WR_Reg:
 3046              	.LVL275:
 3047              	.LFB174:
 888:Core/Src/Mytouch.c **** 
 889:Core/Src/Mytouch.c **** /* OTT2001A */
 890:Core/Src/Mytouch.c **** 
 891:Core/Src/Mytouch.c **** 
 892:Core/Src/Mytouch.c **** //向OTT2001A写入一次数据
 893:Core/Src/Mytouch.c **** //reg:起始寄存器地址
 894:Core/Src/Mytouch.c **** //buf:数据缓缓存区
 895:Core/Src/Mytouch.c **** //len:写数据长度
 896:Core/Src/Mytouch.c **** //返回值:0,成功;1,失败.
 897:Core/Src/Mytouch.c **** u8 OTT2001A_WR_Reg(u16 reg,u8 *buf,u8 len)
 898:Core/Src/Mytouch.c **** {
 3048              		.loc 1 898 1 view -0
 3049              		.cfi_startproc
 3050              		@ args = 0, pretend = 0, frame = 0
 3051              		@ frame_needed = 0, uses_anonymous_args = 0
 3052              		.loc 1 898 1 is_stmt 0 view .LVU780
 3053 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3054              	.LCFI40:
 3055              		.cfi_def_cfa_offset 24
 3056              		.cfi_offset 3, -24
 3057              		.cfi_offset 4, -20
 3058              		.cfi_offset 5, -16
ARM GAS  /tmp/ccNZMix7.s 			page 75


 3059              		.cfi_offset 6, -12
 3060              		.cfi_offset 7, -8
 3061              		.cfi_offset 14, -4
 3062 0002 0446     		mov	r4, r0
 3063 0004 0F46     		mov	r7, r1
 3064 0006 1546     		mov	r5, r2
 899:Core/Src/Mytouch.c **** 	u8 i;
 3065              		.loc 1 899 2 is_stmt 1 view .LVU781
 900:Core/Src/Mytouch.c **** 	u8 ret=0;
 3066              		.loc 1 900 2 view .LVU782
 3067              	.LVL276:
 901:Core/Src/Mytouch.c **** 	CT_IIC_Start();	
 3068              		.loc 1 901 2 view .LVU783
 3069 0008 FFF7FEFF 		bl	CT_IIC_Start
 3070              	.LVL277:
 902:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(OTT_CMD_WR);   //发送写命令 	 
 3071              		.loc 1 902 3 view .LVU784
 3072 000c B220     		movs	r0, #178
 3073 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 3074              	.LVL278:
 903:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();
 3075              		.loc 1 903 2 view .LVU785
 3076 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3077              	.LVL279:
 904:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg>>8);   	//发送高8位地址
 3078              		.loc 1 904 2 view .LVU786
 3079 0016 200A     		lsrs	r0, r4, #8
 3080 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3081              	.LVL280:
 905:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 3082              		.loc 1 905 2 view .LVU787
 3083 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3084              	.LVL281:
 906:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 3085              		.loc 1 906 2 view .LVU788
 3086 0020 E0B2     		uxtb	r0, r4
 3087 0022 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3088              	.LVL282:
 907:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 3089              		.loc 1 907 2 view .LVU789
 3090 0026 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3091              	.LVL283:
 908:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3092              		.loc 1 908 2 view .LVU790
 900:Core/Src/Mytouch.c **** 	CT_IIC_Start();	
 3093              		.loc 1 900 5 is_stmt 0 view .LVU791
 3094 002a 0026     		movs	r6, #0
 3095              		.loc 1 908 7 view .LVU792
 3096 002c 3446     		mov	r4, r6
 3097              		.loc 1 908 2 view .LVU793
 3098 002e 01E0     		b	.L175
 3099              	.LVL284:
 3100              	.L179:
 3101              		.loc 1 908 16 is_stmt 1 discriminator 2 view .LVU794
 3102              		.loc 1 908 17 is_stmt 0 discriminator 2 view .LVU795
 3103 0030 0134     		adds	r4, r4, #1
 3104              	.LVL285:
ARM GAS  /tmp/ccNZMix7.s 			page 76


 3105              		.loc 1 908 17 discriminator 2 view .LVU796
 3106 0032 E4B2     		uxtb	r4, r4
 3107              	.LVL286:
 3108              	.L175:
 3109              		.loc 1 908 10 is_stmt 1 discriminator 1 view .LVU797
 3110              		.loc 1 908 2 is_stmt 0 discriminator 1 view .LVU798
 3111 0034 AC42     		cmp	r4, r5
 3112 0036 07D2     		bcs	.L176
 909:Core/Src/Mytouch.c **** 	{	   
 910:Core/Src/Mytouch.c ****     	CT_IIC_Send_Byte(buf[i]);  	//发数据
 3113              		.loc 1 910 6 is_stmt 1 view .LVU799
 3114 0038 385D     		ldrb	r0, [r7, r4]	@ zero_extendqisi2
 3115 003a FFF7FEFF 		bl	CT_IIC_Send_Byte
 3116              	.LVL287:
 911:Core/Src/Mytouch.c **** 		ret=CT_IIC_Wait_Ack();
 3117              		.loc 1 911 3 view .LVU800
 3118              		.loc 1 911 7 is_stmt 0 view .LVU801
 3119 003e FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3120              	.LVL288:
 912:Core/Src/Mytouch.c **** 		if(ret)break;  
 3121              		.loc 1 912 3 is_stmt 1 view .LVU802
 3122              		.loc 1 912 5 is_stmt 0 view .LVU803
 3123 0042 0646     		mov	r6, r0
 3124 0044 0028     		cmp	r0, #0
 3125 0046 F3D0     		beq	.L179
 3126              	.LVL289:
 3127              	.L176:
 913:Core/Src/Mytouch.c **** 	}
 914:Core/Src/Mytouch.c ****     CT_IIC_Stop();					//产生一个停止条件	    
 3128              		.loc 1 914 5 is_stmt 1 view .LVU804
 3129 0048 FFF7FEFF 		bl	CT_IIC_Stop
 3130              	.LVL290:
 915:Core/Src/Mytouch.c **** 	return ret; 
 3131              		.loc 1 915 2 view .LVU805
 916:Core/Src/Mytouch.c **** }
 3132              		.loc 1 916 1 is_stmt 0 view .LVU806
 3133 004c 3046     		mov	r0, r6
 3134 004e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3135              		.loc 1 916 1 view .LVU807
 3136              		.cfi_endproc
 3137              	.LFE174:
 3139              		.section	.text.OTT2001A_RD_Reg,"ax",%progbits
 3140              		.align	1
 3141              		.global	OTT2001A_RD_Reg
 3142              		.syntax unified
 3143              		.thumb
 3144              		.thumb_func
 3145              		.fpu fpv5-d16
 3147              	OTT2001A_RD_Reg:
 3148              	.LVL291:
 3149              	.LFB175:
 917:Core/Src/Mytouch.c **** //从OTT2001A读出一次数据
 918:Core/Src/Mytouch.c **** //reg:起始寄存器地址
 919:Core/Src/Mytouch.c **** //buf:数据缓缓存区
 920:Core/Src/Mytouch.c **** //len:读数据长度			  
 921:Core/Src/Mytouch.c **** void OTT2001A_RD_Reg(u16 reg,u8 *buf,u8 len)
 922:Core/Src/Mytouch.c **** {
ARM GAS  /tmp/ccNZMix7.s 			page 77


 3150              		.loc 1 922 1 is_stmt 1 view -0
 3151              		.cfi_startproc
 3152              		@ args = 0, pretend = 0, frame = 0
 3153              		@ frame_needed = 0, uses_anonymous_args = 0
 3154              		.loc 1 922 1 is_stmt 0 view .LVU809
 3155 0000 70B5     		push	{r4, r5, r6, lr}
 3156              	.LCFI41:
 3157              		.cfi_def_cfa_offset 16
 3158              		.cfi_offset 4, -16
 3159              		.cfi_offset 5, -12
 3160              		.cfi_offset 6, -8
 3161              		.cfi_offset 14, -4
 3162 0002 0446     		mov	r4, r0
 3163 0004 0E46     		mov	r6, r1
 3164 0006 1546     		mov	r5, r2
 923:Core/Src/Mytouch.c **** 	u8 i; 
 3165              		.loc 1 923 2 is_stmt 1 view .LVU810
 924:Core/Src/Mytouch.c ****  	CT_IIC_Start();	
 3166              		.loc 1 924 3 view .LVU811
 3167 0008 FFF7FEFF 		bl	CT_IIC_Start
 3168              	.LVL292:
 925:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(OTT_CMD_WR);   //发送写命令 	 
 3169              		.loc 1 925 3 view .LVU812
 3170 000c B220     		movs	r0, #178
 3171 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 3172              	.LVL293:
 926:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();
 3173              		.loc 1 926 2 view .LVU813
 3174 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3175              	.LVL294:
 927:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg>>8);   	//发送高8位地址
 3176              		.loc 1 927 3 view .LVU814
 3177 0016 200A     		lsrs	r0, r4, #8
 3178 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3179              	.LVL295:
 928:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 3180              		.loc 1 928 2 view .LVU815
 3181 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3182              	.LVL296:
 929:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 3183              		.loc 1 929 3 view .LVU816
 3184 0020 E0B2     		uxtb	r0, r4
 3185 0022 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3186              	.LVL297:
 930:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 3187              		.loc 1 930 2 view .LVU817
 3188 0026 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3189              	.LVL298:
 931:Core/Src/Mytouch.c ****  	CT_IIC_Start();  	 	   
 3190              		.loc 1 931 3 view .LVU818
 3191 002a FFF7FEFF 		bl	CT_IIC_Start
 3192              	.LVL299:
 932:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(OTT_CMD_RD);   //发送读命令		   
 3193              		.loc 1 932 2 view .LVU819
 3194 002e B320     		movs	r0, #179
 3195 0030 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3196              	.LVL300:
ARM GAS  /tmp/ccNZMix7.s 			page 78


 933:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();	   
 3197              		.loc 1 933 2 view .LVU820
 3198 0034 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3199              	.LVL301:
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3200              		.loc 1 934 2 view .LVU821
 3201              		.loc 1 934 7 is_stmt 0 view .LVU822
 3202 0038 0024     		movs	r4, #0
 3203              		.loc 1 934 2 view .LVU823
 3204 003a 08E0     		b	.L181
 3205              	.LVL302:
 3206              	.L182:
 935:Core/Src/Mytouch.c **** 	{	   
 936:Core/Src/Mytouch.c ****     	buf[i]=CT_IIC_Read_Byte(i==(len-1)?0:1); //发数据	  
 3207              		.loc 1 936 6 is_stmt 1 discriminator 3 view .LVU824
 3208              		.loc 1 936 37 is_stmt 0 discriminator 3 view .LVU825
 3209 003c 681E     		subs	r0, r5, #1
 3210              		.loc 1 936 13 discriminator 3 view .LVU826
 3211 003e 201A     		subs	r0, r4, r0
 3212 0040 18BF     		it	ne
 3213 0042 0120     		movne	r0, #1
 3214 0044 FFF7FEFF 		bl	CT_IIC_Read_Byte
 3215              	.LVL303:
 3216              		.loc 1 936 12 discriminator 3 view .LVU827
 3217 0048 3055     		strb	r0, [r6, r4]
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3218              		.loc 1 934 16 is_stmt 1 discriminator 3 view .LVU828
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3219              		.loc 1 934 17 is_stmt 0 discriminator 3 view .LVU829
 3220 004a 0134     		adds	r4, r4, #1
 3221              	.LVL304:
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3222              		.loc 1 934 17 discriminator 3 view .LVU830
 3223 004c E4B2     		uxtb	r4, r4
 3224              	.LVL305:
 3225              	.L181:
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3226              		.loc 1 934 10 is_stmt 1 discriminator 1 view .LVU831
 934:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3227              		.loc 1 934 2 is_stmt 0 discriminator 1 view .LVU832
 3228 004e AC42     		cmp	r4, r5
 3229 0050 F4D3     		bcc	.L182
 937:Core/Src/Mytouch.c **** 	} 
 938:Core/Src/Mytouch.c ****     CT_IIC_Stop();//产生一个停止条件    
 3230              		.loc 1 938 5 is_stmt 1 view .LVU833
 3231 0052 FFF7FEFF 		bl	CT_IIC_Stop
 3232              	.LVL306:
 939:Core/Src/Mytouch.c **** }
 3233              		.loc 1 939 1 is_stmt 0 view .LVU834
 3234 0056 70BD     		pop	{r4, r5, r6, pc}
 3235              		.loc 1 939 1 view .LVU835
 3236              		.cfi_endproc
 3237              	.LFE175:
 3239              		.section	.text.OTT2001A_Scan,"ax",%progbits
 3240              		.align	1
 3241              		.global	OTT2001A_Scan
 3242              		.syntax unified
ARM GAS  /tmp/ccNZMix7.s 			page 79


 3243              		.thumb
 3244              		.thumb_func
 3245              		.fpu fpv5-d16
 3247              	OTT2001A_Scan:
 3248              	.LVL307:
 3249              	.LFB178:
 940:Core/Src/Mytouch.c **** //传感器打开/关闭操作
 941:Core/Src/Mytouch.c **** //cmd:1,打开传感器;0,关闭传感器
 942:Core/Src/Mytouch.c **** void OTT2001A_SensorControl(u8 cmd)
 943:Core/Src/Mytouch.c **** {
 944:Core/Src/Mytouch.c **** 	u8 regval=0X00;
 945:Core/Src/Mytouch.c **** 	if(cmd)regval=0X80;
 946:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
 947:Core/Src/Mytouch.c **** } 
 948:Core/Src/Mytouch.c **** //初始化触摸屏
 949:Core/Src/Mytouch.c **** //返回值:0,初始化成功;1,初始化失败 
 950:Core/Src/Mytouch.c **** u8 OTT2001A_Init(void)
 951:Core/Src/Mytouch.c **** {
 952:Core/Src/Mytouch.c ****  	u8 regval=0; 
 953:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 954:Core/Src/Mytouch.c ****  
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
 956:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 957:Core/Src/Mytouch.c ****                 
 958:Core/Src/Mytouch.c ****     //PH7
 959:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
 960:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 961:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 962:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 963:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 964:Core/Src/Mytouch.c ****             
 965:Core/Src/Mytouch.c ****     //PI8
 966:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_8;            //PI8
 967:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 968:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 969:Core/Src/Mytouch.c ****     
 970:Core/Src/Mytouch.c **** 	CT_IIC_Init();      	//初始化电容屏的I2C总线  
 971:Core/Src/Mytouch.c **** 	OTT_RST(0);				//复位
 972:Core/Src/Mytouch.c **** 	HAL_Delay(100);
 973:Core/Src/Mytouch.c ****  	OTT_RST(1);				//释放复位		    
 974:Core/Src/Mytouch.c **** 	HAL_Delay(100); 
 975:Core/Src/Mytouch.c **** 	OTT2001A_SensorControl(1);	//打开传感器 
 976:Core/Src/Mytouch.c **** 	OTT2001A_RD_Reg(OTT_CTRL_REG,&regval,1);//读取传感器运行寄存器的值来判断I2C通信
 977:Core/Src/Mytouch.c **** 	printf("CTP ID:%x\r\n",regval);
 978:Core/Src/Mytouch.c ****     if(regval==0x80)return 0;
 979:Core/Src/Mytouch.c **** 	return 1;
 980:Core/Src/Mytouch.c **** }
 981:Core/Src/Mytouch.c **** 
 982:Core/Src/Mytouch.c **** const u16 OTT_TPX_TBL[5]={OTT_TP1_REG,OTT_TP2_REG,OTT_TP3_REG,OTT_TP4_REG,OTT_TP5_REG};
 983:Core/Src/Mytouch.c **** //扫描触摸屏(采用查询方式)
 984:Core/Src/Mytouch.c **** //mode:0,正常扫描.
 985:Core/Src/Mytouch.c **** //返回值:当前触屏状态.
 986:Core/Src/Mytouch.c **** //0,触屏无触摸;1,触屏有触摸
 987:Core/Src/Mytouch.c **** u8 OTT2001A_Scan(u8 mode)
 988:Core/Src/Mytouch.c **** {
 3250              		.loc 1 988 1 is_stmt 1 view -0
 3251              		.cfi_startproc
ARM GAS  /tmp/ccNZMix7.s 			page 80


 3252              		@ args = 0, pretend = 0, frame = 16
 3253              		@ frame_needed = 0, uses_anonymous_args = 0
 3254              		.loc 1 988 1 is_stmt 0 view .LVU837
 3255 0000 30B5     		push	{r4, r5, lr}
 3256              	.LCFI42:
 3257              		.cfi_def_cfa_offset 12
 3258              		.cfi_offset 4, -12
 3259              		.cfi_offset 5, -8
 3260              		.cfi_offset 14, -4
 3261 0002 85B0     		sub	sp, sp, #20
 3262              	.LCFI43:
 3263              		.cfi_def_cfa_offset 32
 3264 0004 8DF80700 		strb	r0, [sp, #7]
 989:Core/Src/Mytouch.c **** 	u8 buf[4];
 3265              		.loc 1 989 2 is_stmt 1 view .LVU838
 990:Core/Src/Mytouch.c **** 	u8 i=0;
 3266              		.loc 1 990 2 view .LVU839
 3267              	.LVL308:
 991:Core/Src/Mytouch.c **** 	u8 res=0;
 3268              		.loc 1 991 2 view .LVU840
 992:Core/Src/Mytouch.c **** 	static u8 t=0;//控制查询间隔,从而降低CPU占用率   
 3269              		.loc 1 992 2 view .LVU841
 993:Core/Src/Mytouch.c **** 	t++;
 3270              		.loc 1 993 2 view .LVU842
 3271              		.loc 1 993 3 is_stmt 0 view .LVU843
 3272 0008 6D4B     		ldr	r3, .L199+24
 3273 000a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3274 000c 0132     		adds	r2, r2, #1
 3275 000e D2B2     		uxtb	r2, r2
 3276 0010 1A70     		strb	r2, [r3]
 994:Core/Src/Mytouch.c **** 	if((t%10)==0||t<10)//空闲时,每进入10次CTP_Scan函数才检测1次,从而节省CPU使用率
 3277              		.loc 1 994 2 is_stmt 1 view .LVU844
 3278              		.loc 1 994 11 is_stmt 0 view .LVU845
 3279 0012 6C4B     		ldr	r3, .L199+28
 3280 0014 A3FB0213 		umull	r1, r3, r3, r2
 3281 0018 DB08     		lsrs	r3, r3, #3
 3282 001a 03EB8303 		add	r3, r3, r3, lsl #2
 3283 001e A2EB4303 		sub	r3, r2, r3, lsl #1
 3284              		.loc 1 994 4 view .LVU846
 3285 0022 13F0FF0F 		tst	r3, #255
 3286 0026 02D0     		beq	.L185
 3287              		.loc 1 994 14 discriminator 1 view .LVU847
 3288 0028 092A     		cmp	r2, #9
 3289 002a 00F29780 		bhi	.L195
 3290              	.L185:
 995:Core/Src/Mytouch.c **** 	{
 996:Core/Src/Mytouch.c **** 		OTT2001A_RD_Reg(OTT_GSTID_REG,&mode,1);//读取触摸点的状态  
 3291              		.loc 1 996 3 is_stmt 1 view .LVU848
 3292 002e 0122     		movs	r2, #1
 3293 0030 0DF10701 		add	r1, sp, #7
 3294 0034 0020     		movs	r0, #0
 3295              	.LVL309:
 3296              		.loc 1 996 3 is_stmt 0 view .LVU849
 3297 0036 FFF7FEFF 		bl	OTT2001A_RD_Reg
 3298              	.LVL310:
 997:Core/Src/Mytouch.c **** 		if(mode&0X1F)
 3299              		.loc 1 997 3 is_stmt 1 view .LVU850
ARM GAS  /tmp/ccNZMix7.s 			page 81


 3300              		.loc 1 997 10 is_stmt 0 view .LVU851
 3301 003a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3302              		.loc 1 997 5 view .LVU852
 3303 003e 13F01F00 		ands	r0, r3, #31
 3304 0042 00F08C80 		beq	.L186
 998:Core/Src/Mytouch.c **** 		{
 999:Core/Src/Mytouch.c **** 			tp_dev.sta=(mode&0X1F)|TP_PRES_DOWN|TP_CATH_PRES;
 3305              		.loc 1 999 4 is_stmt 1 view .LVU853
 3306              		.loc 1 999 39 is_stmt 0 view .LVU854
 3307 0046 40F0C003 		orr	r3, r0, #192
 3308              		.loc 1 999 14 view .LVU855
 3309 004a 5F4A     		ldr	r2, .L199+32
 3310 004c 82F82030 		strb	r3, [r2, #32]
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3311              		.loc 1 1000 4 is_stmt 1 view .LVU856
 3312              		.loc 1 1000 9 is_stmt 0 view .LVU857
 3313 0050 0024     		movs	r4, #0
 3314              		.loc 1 1000 4 view .LVU858
 3315 0052 2EE0     		b	.L187
 3316              	.LVL311:
 3317              	.L189:
1001:Core/Src/Mytouch.c **** 			{
1002:Core/Src/Mytouch.c **** 				if(tp_dev.sta&(1<<i))	//触摸有效?
1003:Core/Src/Mytouch.c **** 				{
1004:Core/Src/Mytouch.c **** 					OTT2001A_RD_Reg(OTT_TPX_TBL[i],buf,4);	//读取XY坐标值
1005:Core/Src/Mytouch.c **** 					if(tp_dev.touchtype&0X01)//横屏
1006:Core/Src/Mytouch.c **** 					{
1007:Core/Src/Mytouch.c **** 						tp_dev.y[i]=(((u16)buf[2]<<8)+buf[3])*OTT_SCAL_Y;
1008:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
1009:Core/Src/Mytouch.c **** 					}else
1010:Core/Src/Mytouch.c **** 					{
1011:Core/Src/Mytouch.c **** 						tp_dev.x[i]=(((u16)buf[2]<<8)+buf[3])*OTT_SCAL_Y;
 3318              		.loc 1 1011 7 is_stmt 1 view .LVU859
 3319              		.loc 1 1011 29 is_stmt 0 view .LVU860
 3320 0054 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
 3321              		.loc 1 1011 40 view .LVU861
 3322 0058 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 3323              		.loc 1 1011 36 view .LVU862
 3324 005c 03EB0223 		add	r3, r3, r2, lsl #8
 3325 0060 07EE103A 		vmov	s14, r3	@ int
 3326              		.loc 1 1011 44 view .LVU863
 3327 0064 B8EEC77B 		vcvt.f64.s32	d7, s14
 3328 0068 9FED4F6B 		vldr.64	d6, .L199
 3329 006c 27EE067B 		vmul.f64	d7, d7, d6
 3330              		.loc 1 1011 18 view .LVU864
 3331 0070 554A     		ldr	r2, .L199+32
 3332 0072 231D     		adds	r3, r4, #4
 3333 0074 02EB4303 		add	r3, r2, r3, lsl #1
 3334 0078 BCEEC77B 		vcvt.u32.f64	s14, d7
 3335 007c 17EE101A 		vmov	r1, s14	@ int
 3336 0080 9980     		strh	r1, [r3, #4]	@ movhi
1012:Core/Src/Mytouch.c **** 						tp_dev.y[i]=(((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X;
 3337              		.loc 1 1012 7 is_stmt 1 view .LVU865
 3338              		.loc 1 1012 29 is_stmt 0 view .LVU866
 3339 0082 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 3340              		.loc 1 1012 40 view .LVU867
 3341 0086 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
ARM GAS  /tmp/ccNZMix7.s 			page 82


 3342              		.loc 1 1012 36 view .LVU868
 3343 008a 03EB0123 		add	r3, r3, r1, lsl #8
 3344 008e 07EE103A 		vmov	s14, r3	@ int
 3345              		.loc 1 1012 44 view .LVU869
 3346 0092 B8EEC77B 		vcvt.f64.s32	d7, s14
 3347 0096 9FED466B 		vldr.64	d6, .L199+8
 3348 009a 27EE067B 		vmul.f64	d7, d7, d6
 3349              		.loc 1 1012 18 view .LVU870
 3350 009e 0835     		adds	r5, r5, #8
 3351 00a0 02EB4505 		add	r5, r2, r5, lsl #1
 3352 00a4 BCEEC77B 		vcvt.u32.f64	s14, d7
 3353 00a8 17EE103A 		vmov	r3, s14	@ int
 3354 00ac EB80     		strh	r3, [r5, #6]	@ movhi
 3355              	.L188:
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3356              		.loc 1 1000 16 is_stmt 1 discriminator 2 view .LVU871
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3357              		.loc 1 1000 17 is_stmt 0 discriminator 2 view .LVU872
 3358 00ae 0134     		adds	r4, r4, #1
 3359              	.LVL312:
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3360              		.loc 1 1000 17 discriminator 2 view .LVU873
 3361 00b0 E4B2     		uxtb	r4, r4
 3362              	.LVL313:
 3363              	.L187:
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3364              		.loc 1 1000 12 is_stmt 1 discriminator 1 view .LVU874
1000:Core/Src/Mytouch.c **** 			for(i=0;i<5;i++)
 3365              		.loc 1 1000 4 is_stmt 0 discriminator 1 view .LVU875
 3366 00b2 042C     		cmp	r4, #4
 3367 00b4 45D8     		bhi	.L197
1002:Core/Src/Mytouch.c **** 				{
 3368              		.loc 1 1002 5 is_stmt 1 view .LVU876
1002:Core/Src/Mytouch.c **** 				{
 3369              		.loc 1 1002 14 is_stmt 0 view .LVU877
 3370 00b6 444B     		ldr	r3, .L199+32
 3371 00b8 93F82030 		ldrb	r3, [r3, #32]	@ zero_extendqisi2
1002:Core/Src/Mytouch.c **** 				{
 3372              		.loc 1 1002 8 view .LVU878
 3373 00bc 2546     		mov	r5, r4
 3374 00be 2341     		asrs	r3, r3, r4
1002:Core/Src/Mytouch.c **** 				{
 3375              		.loc 1 1002 7 view .LVU879
 3376 00c0 13F0010F 		tst	r3, #1
 3377 00c4 F3D0     		beq	.L188
1004:Core/Src/Mytouch.c **** 					if(tp_dev.touchtype&0X01)//横屏
 3378              		.loc 1 1004 6 is_stmt 1 view .LVU880
 3379 00c6 0422     		movs	r2, #4
 3380 00c8 03A9     		add	r1, sp, #12
 3381 00ca 404B     		ldr	r3, .L199+36
 3382 00cc 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 3383 00d0 FFF7FEFF 		bl	OTT2001A_RD_Reg
 3384              	.LVL314:
1005:Core/Src/Mytouch.c **** 					{
 3385              		.loc 1 1005 6 view .LVU881
1005:Core/Src/Mytouch.c **** 					{
 3386              		.loc 1 1005 15 is_stmt 0 view .LVU882
ARM GAS  /tmp/ccNZMix7.s 			page 83


 3387 00d4 3C4B     		ldr	r3, .L199+32
 3388 00d6 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
1005:Core/Src/Mytouch.c **** 					{
 3389              		.loc 1 1005 8 view .LVU883
 3390 00da 13F0010F 		tst	r3, #1
 3391 00de B9D0     		beq	.L189
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3392              		.loc 1 1007 7 is_stmt 1 view .LVU884
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3393              		.loc 1 1007 29 is_stmt 0 view .LVU885
 3394 00e0 9DF80E20 		ldrb	r2, [sp, #14]	@ zero_extendqisi2
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3395              		.loc 1 1007 40 view .LVU886
 3396 00e4 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3397              		.loc 1 1007 36 view .LVU887
 3398 00e8 03EB0223 		add	r3, r3, r2, lsl #8
 3399 00ec 07EE103A 		vmov	s14, r3	@ int
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3400              		.loc 1 1007 44 view .LVU888
 3401 00f0 B8EEC77B 		vcvt.f64.s32	d7, s14
 3402 00f4 9FED2C6B 		vldr.64	d6, .L199
 3403 00f8 27EE067B 		vmul.f64	d7, d7, d6
1007:Core/Src/Mytouch.c **** 						tp_dev.x[i]=800-((((u16)buf[0]<<8)+buf[1])*OTT_SCAL_X);
 3404              		.loc 1 1007 18 view .LVU889
 3405 00fc 324A     		ldr	r2, .L199+32
 3406 00fe 04F10803 		add	r3, r4, #8
 3407 0102 02EB4303 		add	r3, r2, r3, lsl #1
 3408 0106 BCEEC77B 		vcvt.u32.f64	s14, d7
 3409 010a 17EE101A 		vmov	r1, s14	@ int
 3410 010e D980     		strh	r1, [r3, #6]	@ movhi
1008:Core/Src/Mytouch.c **** 					}else
 3411              		.loc 1 1008 7 is_stmt 1 view .LVU890
1008:Core/Src/Mytouch.c **** 					}else
 3412              		.loc 1 1008 34 is_stmt 0 view .LVU891
 3413 0110 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
1008:Core/Src/Mytouch.c **** 					}else
 3414              		.loc 1 1008 45 view .LVU892
 3415 0114 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
1008:Core/Src/Mytouch.c **** 					}else
 3416              		.loc 1 1008 41 view .LVU893
 3417 0118 03EB0123 		add	r3, r3, r1, lsl #8
1008:Core/Src/Mytouch.c **** 					}else
 3418              		.loc 1 1008 49 view .LVU894
 3419 011c 07EE903A 		vmov	s15, r3	@ int
 3420 0120 B8EEE76B 		vcvt.f64.s32	d6, s15
1008:Core/Src/Mytouch.c **** 					}else
 3421              		.loc 1 1008 22 view .LVU895
 3422 0124 9FED225B 		vldr.64	d5, .L199+8
 3423 0128 9FED237B 		vldr.64	d7, .L199+16
 3424 012c 06EE457B 		vmls.f64	d7, d6, d5
1008:Core/Src/Mytouch.c **** 					}else
 3425              		.loc 1 1008 18 view .LVU896
 3426 0130 0435     		adds	r5, r5, #4
 3427 0132 02EB4502 		add	r2, r2, r5, lsl #1
 3428 0136 BCEEC77B 		vcvt.u32.f64	s14, d7
 3429 013a 17EE103A 		vmov	r3, s14	@ int
ARM GAS  /tmp/ccNZMix7.s 			page 84


 3430 013e 9380     		strh	r3, [r2, #4]	@ movhi
 3431 0140 B5E7     		b	.L188
 3432              	.L197:
1013:Core/Src/Mytouch.c **** 					}  
1014:Core/Src/Mytouch.c **** 					//printf("x[%d]:%d,y[%d]:%d\r\n",i,tp_dev.x[i],i,tp_dev.y[i]);
1015:Core/Src/Mytouch.c **** 				}			
1016:Core/Src/Mytouch.c **** 			} 
1017:Core/Src/Mytouch.c **** 			res=1;
 3433              		.loc 1 1017 4 is_stmt 1 view .LVU897
 3434              	.LVL315:
1018:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]==0 && tp_dev.y[0]==0)mode=0;	//读到的数据都是0,则忽略此次数据
 3435              		.loc 1 1018 4 view .LVU898
 3436              		.loc 1 1018 15 is_stmt 0 view .LVU899
 3437 0142 214B     		ldr	r3, .L199+32
 3438 0144 9B89     		ldrh	r3, [r3, #12]
 3439              		.loc 1 1018 6 view .LVU900
 3440 0146 23B9     		cbnz	r3, .L191
 3441              		.loc 1 1018 33 discriminator 1 view .LVU901
 3442 0148 1F4B     		ldr	r3, .L199+32
 3443 014a DB8A     		ldrh	r3, [r3, #22]
 3444              		.loc 1 1018 22 discriminator 1 view .LVU902
 3445 014c 0BB9     		cbnz	r3, .L191
 3446              		.loc 1 1018 40 is_stmt 1 discriminator 2 view .LVU903
 3447              		.loc 1 1018 44 is_stmt 0 discriminator 2 view .LVU904
 3448 014e 8DF80730 		strb	r3, [sp, #7]
 3449              	.L191:
1019:Core/Src/Mytouch.c **** 			t=0;		//触发一次,则会最少连续监测10次,从而提高命中率
 3450              		.loc 1 1019 4 is_stmt 1 view .LVU905
 3451              		.loc 1 1019 5 is_stmt 0 view .LVU906
 3452 0152 1B4B     		ldr	r3, .L199+24
 3453 0154 0022     		movs	r2, #0
 3454 0156 1A70     		strb	r2, [r3]
1017:Core/Src/Mytouch.c **** 			if(tp_dev.x[0]==0 && tp_dev.y[0]==0)mode=0;	//读到的数据都是0,则忽略此次数据
 3455              		.loc 1 1017 7 view .LVU907
 3456 0158 0120     		movs	r0, #1
 3457 015a 00E0     		b	.L186
 3458              	.LVL316:
 3459              	.L195:
 991:Core/Src/Mytouch.c **** 	static u8 t=0;//控制查询间隔,从而降低CPU占用率   
 3460              		.loc 1 991 5 view .LVU908
 3461 015c 0020     		movs	r0, #0
 3462              	.LVL317:
 3463              	.L186:
1020:Core/Src/Mytouch.c **** 		}
1021:Core/Src/Mytouch.c **** 	}
1022:Core/Src/Mytouch.c **** 	if((mode&0X1F)==0)//无触摸点按下
 3464              		.loc 1 1022 2 is_stmt 1 view .LVU909
 3465              		.loc 1 1022 10 is_stmt 0 view .LVU910
 3466 015e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3467              		.loc 1 1022 4 view .LVU911
 3468 0162 13F01F0F 		tst	r3, #31
 3469 0166 0FD1     		bne	.L192
1023:Core/Src/Mytouch.c **** 	{ 
1024:Core/Src/Mytouch.c **** 		if(tp_dev.sta&TP_PRES_DOWN)	//之前是被按下的
 3470              		.loc 1 1024 3 is_stmt 1 view .LVU912
 3471              		.loc 1 1024 12 is_stmt 0 view .LVU913
 3472 0168 174A     		ldr	r2, .L199+32
ARM GAS  /tmp/ccNZMix7.s 			page 85


 3473 016a 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
 3474              		.loc 1 1024 6 view .LVU914
 3475 016e 92F92020 		ldrsb	r2, [r2, #32]
 3476              		.loc 1 1024 5 view .LVU915
 3477 0172 002A     		cmp	r2, #0
 3478 0174 11DB     		blt	.L198
1025:Core/Src/Mytouch.c **** 		{
1026:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<7);	//标记按键松开
1027:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
1028:Core/Src/Mytouch.c **** 		{ 
1029:Core/Src/Mytouch.c **** 			tp_dev.x[0]=0xffff;
 3479              		.loc 1 1029 4 is_stmt 1 view .LVU916
 3480              		.loc 1 1029 15 is_stmt 0 view .LVU917
 3481 0176 144A     		ldr	r2, .L199+32
 3482 0178 4FF6FF71 		movw	r1, #65535
 3483 017c 9181     		strh	r1, [r2, #12]	@ movhi
1030:Core/Src/Mytouch.c **** 			tp_dev.y[0]=0xffff;
 3484              		.loc 1 1030 4 is_stmt 1 view .LVU918
 3485              		.loc 1 1030 15 is_stmt 0 view .LVU919
 3486 017e D182     		strh	r1, [r2, #22]	@ movhi
1031:Core/Src/Mytouch.c **** 			tp_dev.sta&=0XE0;	//清除点有效标记	
 3487              		.loc 1 1031 4 is_stmt 1 view .LVU920
 3488              		.loc 1 1031 14 is_stmt 0 view .LVU921
 3489 0180 23F01F03 		bic	r3, r3, #31
 3490 0184 82F82030 		strb	r3, [r2, #32]
 3491              	.L192:
1032:Core/Src/Mytouch.c **** 		}	 
1033:Core/Src/Mytouch.c **** 	} 	
1034:Core/Src/Mytouch.c **** 	if(t>240)t=10;//重新从10开始计数
 3492              		.loc 1 1034 2 is_stmt 1 view .LVU922
 3493              		.loc 1 1034 6 is_stmt 0 view .LVU923
 3494 0188 0D4B     		ldr	r3, .L199+24
 3495 018a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3496              		.loc 1 1034 4 view .LVU924
 3497 018c F02B     		cmp	r3, #240
 3498 018e 02D9     		bls	.L194
 3499              		.loc 1 1034 11 is_stmt 1 discriminator 1 view .LVU925
 3500              		.loc 1 1034 12 is_stmt 0 discriminator 1 view .LVU926
 3501 0190 0B4B     		ldr	r3, .L199+24
 3502 0192 0A22     		movs	r2, #10
 3503 0194 1A70     		strb	r2, [r3]
 3504              	.L194:
1035:Core/Src/Mytouch.c **** 	return res;
 3505              		.loc 1 1035 2 is_stmt 1 view .LVU927
1036:Core/Src/Mytouch.c **** }
 3506              		.loc 1 1036 1 is_stmt 0 view .LVU928
 3507 0196 05B0     		add	sp, sp, #20
 3508              	.LCFI44:
 3509              		.cfi_remember_state
 3510              		.cfi_def_cfa_offset 12
 3511              		@ sp needed
 3512 0198 30BD     		pop	{r4, r5, pc}
 3513              	.L198:
 3514              	.LCFI45:
 3515              		.cfi_restore_state
1026:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 3516              		.loc 1 1026 4 is_stmt 1 view .LVU929
ARM GAS  /tmp/ccNZMix7.s 			page 86


1026:Core/Src/Mytouch.c **** 		}else						//之前就没有被按下
 3517              		.loc 1 1026 14 is_stmt 0 view .LVU930
 3518 019a 03F07F03 		and	r3, r3, #127
 3519 019e 0A4A     		ldr	r2, .L199+32
 3520 01a0 82F82030 		strb	r3, [r2, #32]
 3521 01a4 F0E7     		b	.L192
 3522              	.L200:
 3523 01a6 00BF     		.align	3
 3524              	.L199:
 3525 01a8 7B14AE47 		.word	1202590843
 3526 01ac E17AD43F 		.word	1070889697
 3527 01b0 D8817346 		.word	1181975000
 3528 01b4 94F6D23F 		.word	1070790292
 3529 01b8 00000000 		.word	0
 3530 01bc 00008940 		.word	1082720256
 3531 01c0 00000000 		.word	.LANCHOR6
 3532 01c4 CDCCCCCC 		.word	-858993459
 3533 01c8 00000000 		.word	.LANCHOR2
 3534 01cc 00000000 		.word	.LANCHOR7
 3535              		.cfi_endproc
 3536              	.LFE178:
 3538              		.section	.text.OTT2001A_SensorControl,"ax",%progbits
 3539              		.align	1
 3540              		.global	OTT2001A_SensorControl
 3541              		.syntax unified
 3542              		.thumb
 3543              		.thumb_func
 3544              		.fpu fpv5-d16
 3546              	OTT2001A_SensorControl:
 3547              	.LVL318:
 3548              	.LFB176:
 943:Core/Src/Mytouch.c **** 	u8 regval=0X00;
 3549              		.loc 1 943 1 is_stmt 1 view -0
 3550              		.cfi_startproc
 3551              		@ args = 0, pretend = 0, frame = 8
 3552              		@ frame_needed = 0, uses_anonymous_args = 0
 943:Core/Src/Mytouch.c **** 	u8 regval=0X00;
 3553              		.loc 1 943 1 is_stmt 0 view .LVU932
 3554 0000 00B5     		push	{lr}
 3555              	.LCFI46:
 3556              		.cfi_def_cfa_offset 4
 3557              		.cfi_offset 14, -4
 3558 0002 83B0     		sub	sp, sp, #12
 3559              	.LCFI47:
 3560              		.cfi_def_cfa_offset 16
 944:Core/Src/Mytouch.c **** 	if(cmd)regval=0X80;
 3561              		.loc 1 944 2 is_stmt 1 view .LVU933
 944:Core/Src/Mytouch.c **** 	if(cmd)regval=0X80;
 3562              		.loc 1 944 5 is_stmt 0 view .LVU934
 3563 0004 0023     		movs	r3, #0
 3564 0006 8DF80730 		strb	r3, [sp, #7]
 945:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
 3565              		.loc 1 945 2 is_stmt 1 view .LVU935
 945:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
 3566              		.loc 1 945 4 is_stmt 0 view .LVU936
 3567 000a 10B1     		cbz	r0, .L202
 945:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
ARM GAS  /tmp/ccNZMix7.s 			page 87


 3568              		.loc 1 945 9 is_stmt 1 discriminator 1 view .LVU937
 945:Core/Src/Mytouch.c **** 	OTT2001A_WR_Reg(OTT_CTRL_REG,&regval,1); 
 3569              		.loc 1 945 15 is_stmt 0 discriminator 1 view .LVU938
 3570 000c 8023     		movs	r3, #128
 3571 000e 8DF80730 		strb	r3, [sp, #7]
 3572              	.L202:
 946:Core/Src/Mytouch.c **** } 
 3573              		.loc 1 946 2 is_stmt 1 view .LVU939
 3574 0012 0122     		movs	r2, #1
 3575 0014 0DF10701 		add	r1, sp, #7
 3576 0018 4FF45060 		mov	r0, #3328
 3577              	.LVL319:
 946:Core/Src/Mytouch.c **** } 
 3578              		.loc 1 946 2 is_stmt 0 view .LVU940
 3579 001c FFF7FEFF 		bl	OTT2001A_WR_Reg
 3580              	.LVL320:
 947:Core/Src/Mytouch.c **** //初始化触摸屏
 3581              		.loc 1 947 1 view .LVU941
 3582 0020 03B0     		add	sp, sp, #12
 3583              	.LCFI48:
 3584              		.cfi_def_cfa_offset 4
 3585              		@ sp needed
 3586 0022 5DF804FB 		ldr	pc, [sp], #4
 3587              		.cfi_endproc
 3588              	.LFE176:
 3590              		.section	.rodata.OTT2001A_Init.str1.4,"aMS",%progbits,1
 3591              		.align	2
 3592              	.LC12:
 3593 0000 43545020 		.ascii	"CTP ID:%x\015\012\000"
 3593      49443A25 
 3593      780D0A00 
 3594              		.section	.text.OTT2001A_Init,"ax",%progbits
 3595              		.align	1
 3596              		.global	OTT2001A_Init
 3597              		.syntax unified
 3598              		.thumb
 3599              		.thumb_func
 3600              		.fpu fpv5-d16
 3602              	OTT2001A_Init:
 3603              	.LFB177:
 951:Core/Src/Mytouch.c ****  	u8 regval=0; 
 3604              		.loc 1 951 1 is_stmt 1 view -0
 3605              		.cfi_startproc
 3606              		@ args = 0, pretend = 0, frame = 32
 3607              		@ frame_needed = 0, uses_anonymous_args = 0
 3608 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 3609              	.LCFI49:
 3610              		.cfi_def_cfa_offset 20
 3611              		.cfi_offset 4, -20
 3612              		.cfi_offset 5, -16
 3613              		.cfi_offset 6, -12
 3614              		.cfi_offset 7, -8
 3615              		.cfi_offset 14, -4
 3616 0002 89B0     		sub	sp, sp, #36
 3617              	.LCFI50:
 3618              		.cfi_def_cfa_offset 56
 952:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
ARM GAS  /tmp/ccNZMix7.s 			page 88


 3619              		.loc 1 952 3 view .LVU943
 952:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 3620              		.loc 1 952 6 is_stmt 0 view .LVU944
 3621 0004 0027     		movs	r7, #0
 3622 0006 8DF81F70 		strb	r7, [sp, #31]
 953:Core/Src/Mytouch.c ****  
 3623              		.loc 1 953 5 is_stmt 1 view .LVU945
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3624              		.loc 1 955 5 view .LVU946
 3625              	.LBB6:
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3626              		.loc 1 955 5 view .LVU947
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3627              		.loc 1 955 5 view .LVU948
 3628 000a 2B4B     		ldr	r3, .L208
 3629 000c D3F8E020 		ldr	r2, [r3, #224]
 3630 0010 42F08002 		orr	r2, r2, #128
 3631 0014 C3F8E020 		str	r2, [r3, #224]
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3632              		.loc 1 955 5 view .LVU949
 3633 0018 D3F8E020 		ldr	r2, [r3, #224]
 3634 001c 02F08002 		and	r2, r2, #128
 3635 0020 0092     		str	r2, [sp]
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3636              		.loc 1 955 5 view .LVU950
 3637 0022 009A     		ldr	r2, [sp]
 3638              	.LBE6:
 955:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 3639              		.loc 1 955 5 view .LVU951
 956:Core/Src/Mytouch.c ****                 
 3640              		.loc 1 956 5 view .LVU952
 3641              	.LBB7:
 956:Core/Src/Mytouch.c ****                 
 3642              		.loc 1 956 5 view .LVU953
 956:Core/Src/Mytouch.c ****                 
 3643              		.loc 1 956 5 view .LVU954
 3644 0024 D3F8E020 		ldr	r2, [r3, #224]
 3645 0028 42F48072 		orr	r2, r2, #256
 3646 002c C3F8E020 		str	r2, [r3, #224]
 956:Core/Src/Mytouch.c ****                 
 3647              		.loc 1 956 5 view .LVU955
 3648 0030 D3F8E030 		ldr	r3, [r3, #224]
 3649 0034 03F48073 		and	r3, r3, #256
 3650 0038 0193     		str	r3, [sp, #4]
 956:Core/Src/Mytouch.c ****                 
 3651              		.loc 1 956 5 view .LVU956
 3652 003a 019B     		ldr	r3, [sp, #4]
 3653              	.LBE7:
 956:Core/Src/Mytouch.c ****                 
 3654              		.loc 1 956 5 view .LVU957
 959:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 3655              		.loc 1 959 5 view .LVU958
 959:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 3656              		.loc 1 959 21 is_stmt 0 view .LVU959
 3657 003c 8023     		movs	r3, #128
 3658 003e 0293     		str	r3, [sp, #8]
 960:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
ARM GAS  /tmp/ccNZMix7.s 			page 89


 3659              		.loc 1 960 5 is_stmt 1 view .LVU960
 960:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 3660              		.loc 1 960 22 is_stmt 0 view .LVU961
 3661 0040 0397     		str	r7, [sp, #12]
 961:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 3662              		.loc 1 961 5 is_stmt 1 view .LVU962
 961:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 3663              		.loc 1 961 22 is_stmt 0 view .LVU963
 3664 0042 0124     		movs	r4, #1
 3665 0044 0494     		str	r4, [sp, #16]
 962:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 3666              		.loc 1 962 5 is_stmt 1 view .LVU964
 962:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 3667              		.loc 1 962 23 is_stmt 0 view .LVU965
 3668 0046 0323     		movs	r3, #3
 3669 0048 0593     		str	r3, [sp, #20]
 963:Core/Src/Mytouch.c ****             
 3670              		.loc 1 963 5 is_stmt 1 view .LVU966
 3671 004a 02A9     		add	r1, sp, #8
 3672 004c 1B48     		ldr	r0, .L208+4
 3673 004e FFF7FEFF 		bl	HAL_GPIO_Init
 3674              	.LVL321:
 966:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 3675              		.loc 1 966 5 view .LVU967
 966:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 3676              		.loc 1 966 21 is_stmt 0 view .LVU968
 3677 0052 4FF48076 		mov	r6, #256
 3678 0056 0296     		str	r6, [sp, #8]
 967:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 3679              		.loc 1 967 5 is_stmt 1 view .LVU969
 967:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 3680              		.loc 1 967 22 is_stmt 0 view .LVU970
 3681 0058 0394     		str	r4, [sp, #12]
 968:Core/Src/Mytouch.c ****     
 3682              		.loc 1 968 5 is_stmt 1 view .LVU971
 3683 005a 194D     		ldr	r5, .L208+8
 3684 005c 02A9     		add	r1, sp, #8
 3685 005e 2846     		mov	r0, r5
 3686 0060 FFF7FEFF 		bl	HAL_GPIO_Init
 3687              	.LVL322:
 970:Core/Src/Mytouch.c **** 	OTT_RST(0);				//复位
 3688              		.loc 1 970 2 view .LVU972
 3689 0064 FFF7FEFF 		bl	CT_IIC_Init
 3690              	.LVL323:
 971:Core/Src/Mytouch.c **** 	HAL_Delay(100);
 3691              		.loc 1 971 2 view .LVU973
 3692 0068 3A46     		mov	r2, r7
 3693 006a 3146     		mov	r1, r6
 3694 006c 2846     		mov	r0, r5
 3695 006e FFF7FEFF 		bl	HAL_GPIO_WritePin
 3696              	.LVL324:
 972:Core/Src/Mytouch.c ****  	OTT_RST(1);				//释放复位		    
 3697              		.loc 1 972 2 view .LVU974
 3698 0072 6420     		movs	r0, #100
 3699 0074 FFF7FEFF 		bl	HAL_Delay
 3700              	.LVL325:
 973:Core/Src/Mytouch.c **** 	HAL_Delay(100); 
ARM GAS  /tmp/ccNZMix7.s 			page 90


 3701              		.loc 1 973 3 view .LVU975
 3702 0078 2246     		mov	r2, r4
 3703 007a 3146     		mov	r1, r6
 3704 007c 2846     		mov	r0, r5
 3705 007e FFF7FEFF 		bl	HAL_GPIO_WritePin
 3706              	.LVL326:
 974:Core/Src/Mytouch.c **** 	OTT2001A_SensorControl(1);	//打开传感器 
 3707              		.loc 1 974 2 view .LVU976
 3708 0082 6420     		movs	r0, #100
 3709 0084 FFF7FEFF 		bl	HAL_Delay
 3710              	.LVL327:
 975:Core/Src/Mytouch.c **** 	OTT2001A_RD_Reg(OTT_CTRL_REG,&regval,1);//读取传感器运行寄存器的值来判断I2C通信
 3711              		.loc 1 975 2 view .LVU977
 3712 0088 2046     		mov	r0, r4
 3713 008a FFF7FEFF 		bl	OTT2001A_SensorControl
 3714              	.LVL328:
 976:Core/Src/Mytouch.c **** 	printf("CTP ID:%x\r\n",regval);
 3715              		.loc 1 976 2 view .LVU978
 3716 008e 2246     		mov	r2, r4
 3717 0090 0DF11F01 		add	r1, sp, #31
 3718 0094 4FF45060 		mov	r0, #3328
 3719 0098 FFF7FEFF 		bl	OTT2001A_RD_Reg
 3720              	.LVL329:
 977:Core/Src/Mytouch.c ****     if(regval==0x80)return 0;
 3721              		.loc 1 977 2 view .LVU979
 3722 009c 9DF81F10 		ldrb	r1, [sp, #31]	@ zero_extendqisi2
 3723 00a0 0848     		ldr	r0, .L208+12
 3724 00a2 FFF7FEFF 		bl	printf
 3725              	.LVL330:
 978:Core/Src/Mytouch.c **** 	return 1;
 3726              		.loc 1 978 5 view .LVU980
 978:Core/Src/Mytouch.c **** 	return 1;
 3727              		.loc 1 978 14 is_stmt 0 view .LVU981
 3728 00a6 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 978:Core/Src/Mytouch.c **** 	return 1;
 3729              		.loc 1 978 7 view .LVU982
 3730 00aa 802B     		cmp	r3, #128
 3731 00ac 02D0     		beq	.L206
 979:Core/Src/Mytouch.c **** }
 3732              		.loc 1 979 9 view .LVU983
 3733 00ae 2046     		mov	r0, r4
 3734              	.L205:
 980:Core/Src/Mytouch.c **** 
 3735              		.loc 1 980 1 view .LVU984
 3736 00b0 09B0     		add	sp, sp, #36
 3737              	.LCFI51:
 3738              		.cfi_remember_state
 3739              		.cfi_def_cfa_offset 20
 3740              		@ sp needed
 3741 00b2 F0BD     		pop	{r4, r5, r6, r7, pc}
 3742              	.L206:
 3743              	.LCFI52:
 3744              		.cfi_restore_state
 978:Core/Src/Mytouch.c **** 	return 1;
 3745              		.loc 1 978 28 view .LVU985
 3746 00b4 0020     		movs	r0, #0
 3747 00b6 FBE7     		b	.L205
ARM GAS  /tmp/ccNZMix7.s 			page 91


 3748              	.L209:
 3749              		.align	2
 3750              	.L208:
 3751 00b8 00440258 		.word	1476543488
 3752 00bc 001C0258 		.word	1476533248
 3753 00c0 00200258 		.word	1476534272
 3754 00c4 00000000 		.word	.LC12
 3755              		.cfi_endproc
 3756              	.LFE177:
 3758              		.section	.text.FT5206_WR_Reg,"ax",%progbits
 3759              		.align	1
 3760              		.global	FT5206_WR_Reg
 3761              		.syntax unified
 3762              		.thumb
 3763              		.thumb_func
 3764              		.fpu fpv5-d16
 3766              	FT5206_WR_Reg:
 3767              	.LVL331:
 3768              	.LFB179:
1037:Core/Src/Mytouch.c ****  
1038:Core/Src/Mytouch.c **** 
1039:Core/Src/Mytouch.c ****  /* FT5260 */
1040:Core/Src/Mytouch.c **** 
1041:Core/Src/Mytouch.c ****  //向FT5206写入一次数据
1042:Core/Src/Mytouch.c **** //reg:起始寄存器地址
1043:Core/Src/Mytouch.c **** //buf:数据缓缓存区
1044:Core/Src/Mytouch.c **** //len:写数据长度
1045:Core/Src/Mytouch.c **** //返回值:0,成功;1,失败.
1046:Core/Src/Mytouch.c **** u8 FT5206_WR_Reg(u16 reg,u8 *buf,u8 len)
1047:Core/Src/Mytouch.c **** {
 3769              		.loc 1 1047 1 is_stmt 1 view -0
 3770              		.cfi_startproc
 3771              		@ args = 0, pretend = 0, frame = 0
 3772              		@ frame_needed = 0, uses_anonymous_args = 0
 3773              		.loc 1 1047 1 is_stmt 0 view .LVU987
 3774 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3775              	.LCFI53:
 3776              		.cfi_def_cfa_offset 24
 3777              		.cfi_offset 3, -24
 3778              		.cfi_offset 4, -20
 3779              		.cfi_offset 5, -16
 3780              		.cfi_offset 6, -12
 3781              		.cfi_offset 7, -8
 3782              		.cfi_offset 14, -4
 3783 0002 0446     		mov	r4, r0
 3784 0004 0F46     		mov	r7, r1
 3785 0006 1546     		mov	r5, r2
1048:Core/Src/Mytouch.c **** 	u8 i;
 3786              		.loc 1 1048 2 is_stmt 1 view .LVU988
1049:Core/Src/Mytouch.c **** 	u8 ret=0;
 3787              		.loc 1 1049 2 view .LVU989
 3788              	.LVL332:
1050:Core/Src/Mytouch.c **** 	CT_IIC_Start();	 
 3789              		.loc 1 1050 2 view .LVU990
 3790 0008 FFF7FEFF 		bl	CT_IIC_Start
 3791              	.LVL333:
1051:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(FT_CMD_WR);	//发送写命令 	 
ARM GAS  /tmp/ccNZMix7.s 			page 92


 3792              		.loc 1 1051 2 view .LVU991
 3793 000c 7020     		movs	r0, #112
 3794 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
 3795              	.LVL334:
1052:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 3796              		.loc 1 1052 2 view .LVU992
 3797 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3798              	.LVL335:
1053:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 3799              		.loc 1 1053 2 view .LVU993
 3800 0016 E0B2     		uxtb	r0, r4
 3801 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3802              	.LVL336:
1054:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 3803              		.loc 1 1054 2 view .LVU994
 3804 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3805              	.LVL337:
1055:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3806              		.loc 1 1055 2 view .LVU995
1049:Core/Src/Mytouch.c **** 	CT_IIC_Start();	 
 3807              		.loc 1 1049 5 is_stmt 0 view .LVU996
 3808 0020 0026     		movs	r6, #0
 3809              		.loc 1 1055 7 view .LVU997
 3810 0022 3446     		mov	r4, r6
 3811              		.loc 1 1055 2 view .LVU998
 3812 0024 01E0     		b	.L211
 3813              	.LVL338:
 3814              	.L215:
 3815              		.loc 1 1055 16 is_stmt 1 discriminator 2 view .LVU999
 3816              		.loc 1 1055 17 is_stmt 0 discriminator 2 view .LVU1000
 3817 0026 0134     		adds	r4, r4, #1
 3818              	.LVL339:
 3819              		.loc 1 1055 17 discriminator 2 view .LVU1001
 3820 0028 E4B2     		uxtb	r4, r4
 3821              	.LVL340:
 3822              	.L211:
 3823              		.loc 1 1055 10 is_stmt 1 discriminator 1 view .LVU1002
 3824              		.loc 1 1055 2 is_stmt 0 discriminator 1 view .LVU1003
 3825 002a AC42     		cmp	r4, r5
 3826 002c 07D2     		bcs	.L212
1056:Core/Src/Mytouch.c **** 	{	   
1057:Core/Src/Mytouch.c ****     	CT_IIC_Send_Byte(buf[i]);  	//发数据
 3827              		.loc 1 1057 6 is_stmt 1 view .LVU1004
 3828 002e 385D     		ldrb	r0, [r7, r4]	@ zero_extendqisi2
 3829 0030 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3830              	.LVL341:
1058:Core/Src/Mytouch.c **** 		ret=CT_IIC_Wait_Ack();
 3831              		.loc 1 1058 3 view .LVU1005
 3832              		.loc 1 1058 7 is_stmt 0 view .LVU1006
 3833 0034 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3834              	.LVL342:
1059:Core/Src/Mytouch.c **** 		if(ret)break;  
 3835              		.loc 1 1059 3 is_stmt 1 view .LVU1007
 3836              		.loc 1 1059 5 is_stmt 0 view .LVU1008
 3837 0038 0646     		mov	r6, r0
 3838 003a 0028     		cmp	r0, #0
 3839 003c F3D0     		beq	.L215
ARM GAS  /tmp/ccNZMix7.s 			page 93


 3840              	.LVL343:
 3841              	.L212:
1060:Core/Src/Mytouch.c **** 	}
1061:Core/Src/Mytouch.c ****     CT_IIC_Stop();					//产生一个停止条件	    
 3842              		.loc 1 1061 5 is_stmt 1 view .LVU1009
 3843 003e FFF7FEFF 		bl	CT_IIC_Stop
 3844              	.LVL344:
1062:Core/Src/Mytouch.c **** 	return ret; 
 3845              		.loc 1 1062 2 view .LVU1010
1063:Core/Src/Mytouch.c **** }
 3846              		.loc 1 1063 1 is_stmt 0 view .LVU1011
 3847 0042 3046     		mov	r0, r6
 3848 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3849              		.loc 1 1063 1 view .LVU1012
 3850              		.cfi_endproc
 3851              	.LFE179:
 3853              		.section	.text.FT5206_RD_Reg,"ax",%progbits
 3854              		.align	1
 3855              		.global	FT5206_RD_Reg
 3856              		.syntax unified
 3857              		.thumb
 3858              		.thumb_func
 3859              		.fpu fpv5-d16
 3861              	FT5206_RD_Reg:
 3862              	.LVL345:
 3863              	.LFB180:
1064:Core/Src/Mytouch.c **** //从FT5206读出一次数据
1065:Core/Src/Mytouch.c **** //reg:起始寄存器地址
1066:Core/Src/Mytouch.c **** //buf:数据缓缓存区
1067:Core/Src/Mytouch.c **** //len:读数据长度			  
1068:Core/Src/Mytouch.c **** void FT5206_RD_Reg(u16 reg,u8 *buf,u8 len)
1069:Core/Src/Mytouch.c **** {
 3864              		.loc 1 1069 1 is_stmt 1 view -0
 3865              		.cfi_startproc
 3866              		@ args = 0, pretend = 0, frame = 0
 3867              		@ frame_needed = 0, uses_anonymous_args = 0
 3868              		.loc 1 1069 1 is_stmt 0 view .LVU1014
 3869 0000 70B5     		push	{r4, r5, r6, lr}
 3870              	.LCFI54:
 3871              		.cfi_def_cfa_offset 16
 3872              		.cfi_offset 4, -16
 3873              		.cfi_offset 5, -12
 3874              		.cfi_offset 6, -8
 3875              		.cfi_offset 14, -4
 3876 0002 0446     		mov	r4, r0
 3877 0004 0E46     		mov	r6, r1
 3878 0006 1546     		mov	r5, r2
1070:Core/Src/Mytouch.c **** 	u8 i; 
 3879              		.loc 1 1070 2 is_stmt 1 view .LVU1015
1071:Core/Src/Mytouch.c ****  	CT_IIC_Start();	
 3880              		.loc 1 1071 3 view .LVU1016
 3881 0008 FFF7FEFF 		bl	CT_IIC_Start
 3882              	.LVL346:
1072:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(FT_CMD_WR);   	//发送写命令 	 
 3883              		.loc 1 1072 3 view .LVU1017
 3884 000c 7020     		movs	r0, #112
 3885 000e FFF7FEFF 		bl	CT_IIC_Send_Byte
ARM GAS  /tmp/ccNZMix7.s 			page 94


 3886              	.LVL347:
1073:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack(); 	 										  		   
 3887              		.loc 1 1073 2 view .LVU1018
 3888 0012 FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3889              	.LVL348:
1074:Core/Src/Mytouch.c ****  	CT_IIC_Send_Byte(reg&0XFF);   	//发送低8位地址
 3890              		.loc 1 1074 3 view .LVU1019
 3891 0016 E0B2     		uxtb	r0, r4
 3892 0018 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3893              	.LVL349:
1075:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();  
 3894              		.loc 1 1075 2 view .LVU1020
 3895 001c FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3896              	.LVL350:
1076:Core/Src/Mytouch.c ****  	CT_IIC_Start();  	 	   
 3897              		.loc 1 1076 3 view .LVU1021
 3898 0020 FFF7FEFF 		bl	CT_IIC_Start
 3899              	.LVL351:
1077:Core/Src/Mytouch.c **** 	CT_IIC_Send_Byte(FT_CMD_RD);   	//发送读命令		   
 3900              		.loc 1 1077 2 view .LVU1022
 3901 0024 7120     		movs	r0, #113
 3902 0026 FFF7FEFF 		bl	CT_IIC_Send_Byte
 3903              	.LVL352:
1078:Core/Src/Mytouch.c **** 	CT_IIC_Wait_Ack();	   
 3904              		.loc 1 1078 2 view .LVU1023
 3905 002a FFF7FEFF 		bl	CT_IIC_Wait_Ack
 3906              	.LVL353:
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3907              		.loc 1 1079 2 view .LVU1024
 3908              		.loc 1 1079 7 is_stmt 0 view .LVU1025
 3909 002e 0024     		movs	r4, #0
 3910              		.loc 1 1079 2 view .LVU1026
 3911 0030 08E0     		b	.L217
 3912              	.LVL354:
 3913              	.L218:
1080:Core/Src/Mytouch.c **** 	{	   
1081:Core/Src/Mytouch.c ****     	buf[i]=CT_IIC_Read_Byte(i==(len-1)?0:1); //发数据	  
 3914              		.loc 1 1081 6 is_stmt 1 discriminator 3 view .LVU1027
 3915              		.loc 1 1081 37 is_stmt 0 discriminator 3 view .LVU1028
 3916 0032 681E     		subs	r0, r5, #1
 3917              		.loc 1 1081 13 discriminator 3 view .LVU1029
 3918 0034 201A     		subs	r0, r4, r0
 3919 0036 18BF     		it	ne
 3920 0038 0120     		movne	r0, #1
 3921 003a FFF7FEFF 		bl	CT_IIC_Read_Byte
 3922              	.LVL355:
 3923              		.loc 1 1081 12 discriminator 3 view .LVU1030
 3924 003e 3055     		strb	r0, [r6, r4]
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3925              		.loc 1 1079 16 is_stmt 1 discriminator 3 view .LVU1031
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3926              		.loc 1 1079 17 is_stmt 0 discriminator 3 view .LVU1032
 3927 0040 0134     		adds	r4, r4, #1
 3928              	.LVL356:
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3929              		.loc 1 1079 17 discriminator 3 view .LVU1033
 3930 0042 E4B2     		uxtb	r4, r4
ARM GAS  /tmp/ccNZMix7.s 			page 95


 3931              	.LVL357:
 3932              	.L217:
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3933              		.loc 1 1079 10 is_stmt 1 discriminator 1 view .LVU1034
1079:Core/Src/Mytouch.c **** 	for(i=0;i<len;i++)
 3934              		.loc 1 1079 2 is_stmt 0 discriminator 1 view .LVU1035
 3935 0044 AC42     		cmp	r4, r5
 3936 0046 F4D3     		bcc	.L218
1082:Core/Src/Mytouch.c **** 	} 
1083:Core/Src/Mytouch.c ****     CT_IIC_Stop();//产生一个停止条件     
 3937              		.loc 1 1083 5 is_stmt 1 view .LVU1036
 3938 0048 FFF7FEFF 		bl	CT_IIC_Stop
 3939              	.LVL358:
1084:Core/Src/Mytouch.c **** } 
 3940              		.loc 1 1084 1 is_stmt 0 view .LVU1037
 3941 004c 70BD     		pop	{r4, r5, r6, pc}
 3942              		.loc 1 1084 1 view .LVU1038
 3943              		.cfi_endproc
 3944              	.LFE180:
 3946              		.section	.rodata.FT5206_Scan.str1.4,"aMS",%progbits,1
 3947              		.align	2
 3948              	.LC13:
 3949 0000 39313100 		.ascii	"911\000"
 3950              		.section	.text.FT5206_Scan,"ax",%progbits
 3951              		.align	1
 3952              		.global	FT5206_Scan
 3953              		.syntax unified
 3954              		.thumb
 3955              		.thumb_func
 3956              		.fpu fpv5-d16
 3958              	FT5206_Scan:
 3959              	.LVL359:
 3960              	.LFB182:
1085:Core/Src/Mytouch.c **** u8 CIP[5]; //用来存放触摸IC-GT911
1086:Core/Src/Mytouch.c **** //初始化FT5206触摸屏
1087:Core/Src/Mytouch.c **** //返回值:0,初始化成功;1,初始化失败 
1088:Core/Src/Mytouch.c **** u8 FT5206_Init(void)
1089:Core/Src/Mytouch.c **** {
1090:Core/Src/Mytouch.c ****     u8 temp[5];
1091:Core/Src/Mytouch.c ****     u8 res=1;
1092:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
1093:Core/Src/Mytouch.c ****  
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();			//开启GPIOH时钟
1095:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
1096:Core/Src/Mytouch.c ****                 
1097:Core/Src/Mytouch.c ****     //PH7
1098:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_7;            //PH7
1099:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
1100:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
1101:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
1102:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
1103:Core/Src/Mytouch.c ****             
1104:Core/Src/Mytouch.c ****     //PI8
1105:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_8;            //PI8
1106:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
1107:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
1108:Core/Src/Mytouch.c ****         
ARM GAS  /tmp/ccNZMix7.s 			page 96


1109:Core/Src/Mytouch.c **** 	CT_IIC_Init();      	//初始化电容屏的I2C总线  
1110:Core/Src/Mytouch.c **** 	FT_RST(0);				//复位
1111:Core/Src/Mytouch.c **** 	HAL_Delay(20);
1112:Core/Src/Mytouch.c ****  	FT_RST(1);				//释放复位		    
1113:Core/Src/Mytouch.c **** 	HAL_Delay(50);  	
1114:Core/Src/Mytouch.c **** 	temp[0]=0;
1115:Core/Src/Mytouch.c **** 	//读取版本号，参考值：0x3003
1116:Core/Src/Mytouch.c **** 	FT5206_RD_Reg(FT_ID_G_LIB_VERSION,&temp[0],2);  
1117:Core/Src/Mytouch.c **** 	if((temp[0]==0X30&&temp[1]==0X03)||temp[1]==0X01||temp[1]==0X02)//版本:0X3003/0X0001/0X0002
1118:Core/Src/Mytouch.c **** 	{
1119:Core/Src/Mytouch.c **** 		printf("CTP ID:%x\r\n",((u16)temp[0]<<8)+temp[1]);
1120:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_DEVIDE_MODE,temp,1);	//进入正常操作模式 
1121:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_MODE,temp,1);		//查询模式 
1122:Core/Src/Mytouch.c ****         temp[0]=22;								//触摸有效值，22，越小越灵敏	
1123:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_THGROUP,temp,1);	//设置触摸有效值
1124:Core/Src/Mytouch.c ****         temp[0]=12;								//激活周期，不能小于12，最大14
1125:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_PERIODACTIVE,temp,1); 
1126:Core/Src/Mytouch.c **** 		res = 0;
1127:Core/Src/Mytouch.c **** 	} 
1128:Core/Src/Mytouch.c ****     else
1129:Core/Src/Mytouch.c ****     {
1130:Core/Src/Mytouch.c ****         GT9147_RD_Reg(GT_PID_REG,temp,4); //读取产品ID
1131:Core/Src/Mytouch.c ****         temp[4]=0;
1132:Core/Src/Mytouch.c ****         printf("CTP ID:%s\r\n", temp);  //打印ID
1133:Core/Src/Mytouch.c ****         memcpy(CIP,temp, sizeof(u8)*4);
1134:Core/Src/Mytouch.c ****         temp[0]=0X02;
1135:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1);  //软复位GT9XXX 
1136:Core/Src/Mytouch.c ****         GT9147_RD_Reg(GT_CFGS_REG,temp,1);  //读取GT_CFGS_REG寄存器
1137:Core/Src/Mytouch.c ****         HAL_Delay(10);
1138:Core/Src/Mytouch.c ****         temp[0]=0X00;
1139:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1); //结束复位, 进入读坐标状态
1140:Core/Src/Mytouch.c ****         res = 0;
1141:Core/Src/Mytouch.c ****     }
1142:Core/Src/Mytouch.c **** 	return res;
1143:Core/Src/Mytouch.c **** }
1144:Core/Src/Mytouch.c **** const u16 FT5206_TPX_TBL[5]={FT_TP1_REG,FT_TP2_REG,FT_TP3_REG,FT_TP4_REG,FT_TP5_REG};
1145:Core/Src/Mytouch.c **** //GT911属于GT9xx系列，所以直接调用gt9147的相关宏定义和调用相关函数
1146:Core/Src/Mytouch.c **** const u16 GT911_TPX_TBL[5]={GT_TP1_REG,GT_TP2_REG,GT_TP3_REG,GT_TP4_REG,GT_TP5_REG};
1147:Core/Src/Mytouch.c **** u8 g_gt_tnum=5;      //默认支持的触摸屏点数(5点触摸)
1148:Core/Src/Mytouch.c **** //扫描触摸屏(采用查询方式)
1149:Core/Src/Mytouch.c **** //mode:0,正常扫描.
1150:Core/Src/Mytouch.c **** //返回值:当前触屏状态.
1151:Core/Src/Mytouch.c **** //0,触屏无触摸;1,触屏有触摸
1152:Core/Src/Mytouch.c **** u8 FT5206_Scan(u8 mode)
1153:Core/Src/Mytouch.c **** {
 3961              		.loc 1 1153 1 is_stmt 1 view -0
 3962              		.cfi_startproc
 3963              		@ args = 0, pretend = 0, frame = 16
 3964              		@ frame_needed = 0, uses_anonymous_args = 0
 3965              		.loc 1 1153 1 is_stmt 0 view .LVU1040
 3966 0000 30B5     		push	{r4, r5, lr}
 3967              	.LCFI55:
 3968              		.cfi_def_cfa_offset 12
 3969              		.cfi_offset 4, -12
 3970              		.cfi_offset 5, -8
 3971              		.cfi_offset 14, -4
 3972 0002 85B0     		sub	sp, sp, #20
ARM GAS  /tmp/ccNZMix7.s 			page 97


 3973              	.LCFI56:
 3974              		.cfi_def_cfa_offset 32
 3975 0004 8DF80700 		strb	r0, [sp, #7]
1154:Core/Src/Mytouch.c **** 	u8 buf[4];
 3976              		.loc 1 1154 2 is_stmt 1 view .LVU1041
1155:Core/Src/Mytouch.c **** 	u8 i=0;
 3977              		.loc 1 1155 2 view .LVU1042
 3978              		.loc 1 1155 5 is_stmt 0 view .LVU1043
 3979 0008 0023     		movs	r3, #0
 3980 000a 8DF80B30 		strb	r3, [sp, #11]
1156:Core/Src/Mytouch.c **** 	u8 res=0;
 3981              		.loc 1 1156 2 is_stmt 1 view .LVU1044
 3982              	.LVL360:
1157:Core/Src/Mytouch.c **** 	u8 temp;
 3983              		.loc 1 1157 2 view .LVU1045
1158:Core/Src/Mytouch.c ****     u16 tempsta;
 3984              		.loc 1 1158 5 view .LVU1046
1159:Core/Src/Mytouch.c **** 	static u8 t=0;//控制查询间隔,从而降低CPU占用率   
 3985              		.loc 1 1159 2 view .LVU1047
1160:Core/Src/Mytouch.c **** 	t++;
 3986              		.loc 1 1160 2 view .LVU1048
 3987              		.loc 1 1160 3 is_stmt 0 view .LVU1049
 3988 000e B54B     		ldr	r3, .L246
 3989 0010 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3990 0012 0132     		adds	r2, r2, #1
 3991 0014 D2B2     		uxtb	r2, r2
 3992 0016 1A70     		strb	r2, [r3]
1161:Core/Src/Mytouch.c **** 	if((t%10)==0||t<10)//空闲时,每进入10次CTP_Scan函数才检测1次,从而节省CPU使用率
 3993              		.loc 1 1161 2 is_stmt 1 view .LVU1050
 3994              		.loc 1 1161 11 is_stmt 0 view .LVU1051
 3995 0018 B34B     		ldr	r3, .L246+4
 3996 001a A3FB0213 		umull	r1, r3, r3, r2
 3997 001e DB08     		lsrs	r3, r3, #3
 3998 0020 03EB8303 		add	r3, r3, r3, lsl #2
 3999 0024 A2EB4303 		sub	r3, r2, r3, lsl #1
 4000              		.loc 1 1161 4 view .LVU1052
 4001 0028 13F0FF0F 		tst	r3, #255
 4002 002c 02D0     		beq	.L221
 4003              		.loc 1 1161 14 discriminator 1 view .LVU1053
 4004 002e 092A     		cmp	r2, #9
 4005 0030 00F22881 		bhi	.L239
 4006              	.L221:
1162:Core/Src/Mytouch.c **** 	{
1163:Core/Src/Mytouch.c ****         if(strcmp((char *)CIP,"911")==0) //触摸IC 911
 4007              		.loc 1 1163 9 is_stmt 1 view .LVU1054
 4008              		.loc 1 1163 12 is_stmt 0 view .LVU1055
 4009 0034 AD49     		ldr	r1, .L246+8
 4010 0036 AE48     		ldr	r0, .L246+12
 4011              	.LVL361:
 4012              		.loc 1 1163 12 view .LVU1056
 4013 0038 FFF7FEFF 		bl	strcmp
 4014              	.LVL362:
 4015              		.loc 1 1163 11 view .LVU1057
 4016 003c E8B9     		cbnz	r0, .L223
1164:Core/Src/Mytouch.c ****         {
1165:Core/Src/Mytouch.c ****             GT9147_RD_Reg(GT_GSTID_REG,&mode,1); //读取触摸点状态
 4017              		.loc 1 1165 13 is_stmt 1 view .LVU1058
ARM GAS  /tmp/ccNZMix7.s 			page 98


 4018 003e 0122     		movs	r2, #1
 4019 0040 0DF10701 		add	r1, sp, #7
 4020 0044 48F24E10 		movw	r0, #33102
 4021 0048 FFF7FEFF 		bl	GT9147_RD_Reg
 4022              	.LVL363:
1166:Core/Src/Mytouch.c ****             if((mode&0X80)&&((mode&0XF)<=g_gt_tnum))
 4023              		.loc 1 1166 13 view .LVU1059
 4024              		.loc 1 1166 16 is_stmt 0 view .LVU1060
 4025 004c 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4026 0050 9DF90720 		ldrsb	r2, [sp, #7]
 4027              		.loc 1 1166 15 view .LVU1061
 4028 0054 002A     		cmp	r2, #0
 4029 0056 16DA     		bge	.L224
 4030              		.loc 1 1166 40 discriminator 1 view .LVU1062
 4031 0058 A64A     		ldr	r2, .L246+16
 4032 005a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4033              		.loc 1 1166 27 discriminator 1 view .LVU1063
 4034 005c 03F00F03 		and	r3, r3, #15
 4035 0060 9A42     		cmp	r2, r3
 4036 0062 10D3     		bcc	.L224
1167:Core/Src/Mytouch.c ****             {
1168:Core/Src/Mytouch.c ****                 i=0;
 4037              		.loc 1 1168 17 is_stmt 1 view .LVU1064
 4038              		.loc 1 1168 18 is_stmt 0 view .LVU1065
 4039 0064 0023     		movs	r3, #0
 4040 0066 8DF80B30 		strb	r3, [sp, #11]
1169:Core/Src/Mytouch.c ****                 GT9147_WR_Reg(GT_GSTID_REG,&i,1); //清标志
 4041              		.loc 1 1169 17 is_stmt 1 view .LVU1066
 4042 006a 0122     		movs	r2, #1
 4043 006c 0DF10B01 		add	r1, sp, #11
 4044 0070 48F24E10 		movw	r0, #33102
 4045 0074 FFF7FEFF 		bl	GT9147_WR_Reg
 4046              	.LVL364:
 4047 0078 05E0     		b	.L224
 4048              	.L223:
1170:Core/Src/Mytouch.c ****             }
1171:Core/Src/Mytouch.c ****         }
1172:Core/Src/Mytouch.c ****         else
1173:Core/Src/Mytouch.c ****         {
1174:Core/Src/Mytouch.c ****             FT5206_RD_Reg(FT_REG_NUM_FINGER,&mode,1);//读取触摸点的状态  
 4049              		.loc 1 1174 13 view .LVU1067
 4050 007a 0122     		movs	r2, #1
 4051 007c 0DF10701 		add	r1, sp, #7
 4052 0080 0220     		movs	r0, #2
 4053 0082 FFF7FEFF 		bl	FT5206_RD_Reg
 4054              	.LVL365:
 4055              	.L224:
1175:Core/Src/Mytouch.c ****         }
1176:Core/Src/Mytouch.c **** 		if((mode&0XF)&&((mode&0XF)<=g_gt_tnum))
 4056              		.loc 1 1176 3 view .LVU1068
 4057              		.loc 1 1176 11 is_stmt 0 view .LVU1069
 4058 0086 9DF80740 		ldrb	r4, [sp, #7]	@ zero_extendqisi2
 4059 008a 04F00F04 		and	r4, r4, #15
 4060              		.loc 1 1176 5 view .LVU1070
 4061 008e 002C     		cmp	r4, #0
 4062 0090 00F0F980 		beq	.L222
 4063              		.loc 1 1176 29 discriminator 1 view .LVU1071
ARM GAS  /tmp/ccNZMix7.s 			page 99


 4064 0094 974A     		ldr	r2, .L246+16
 4065 0096 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 4066              		.loc 1 1176 16 discriminator 1 view .LVU1072
 4067 0098 9442     		cmp	r4, r2
 4068 009a 00F20A81 		bhi	.L240
1177:Core/Src/Mytouch.c **** 		{
1178:Core/Src/Mytouch.c **** 			temp=0XFF<<(mode&0XF);//将点的个数转换为1的位数,匹配tp_dev.sta定义 
 4069              		.loc 1 1178 4 is_stmt 1 view .LVU1073
 4070              		.loc 1 1178 13 is_stmt 0 view .LVU1074
 4071 009e FF21     		movs	r1, #255
 4072 00a0 A140     		lsls	r1, r1, r4
 4073              	.LVL366:
1179:Core/Src/Mytouch.c ****             tempsta=tp_dev.sta;    //保存当前的tp_dev.sta值
 4074              		.loc 1 1179 13 is_stmt 1 view .LVU1075
 4075              		.loc 1 1179 27 is_stmt 0 view .LVU1076
 4076 00a2 954B     		ldr	r3, .L246+20
 4077 00a4 93F82050 		ldrb	r5, [r3, #32]	@ zero_extendqisi2
 4078              	.LVL367:
1180:Core/Src/Mytouch.c ****             tp_dev.sta=(~temp)|TP_PRES_DOWN|TP_CATH_PRES;
 4079              		.loc 1 1180 13 is_stmt 1 view .LVU1077
 4080              		.loc 1 1180 44 is_stmt 0 view .LVU1078
 4081 00a8 C943     		mvns	r1, r1
 4082              	.LVL368:
 4083              		.loc 1 1180 44 view .LVU1079
 4084 00aa 61F03F01 		orn	r1, r1, #63
 4085              	.LVL369:
 4086              		.loc 1 1180 23 view .LVU1080
 4087 00ae 83F82010 		strb	r1, [r3, #32]
1181:Core/Src/Mytouch.c ****             tp_dev.x[g_gt_tnum-1]=tp_dev.x[0];//保存触点0的数据,保存在最后一个上
 4088              		.loc 1 1181 13 is_stmt 1 view .LVU1081
 4089              		.loc 1 1181 43 is_stmt 0 view .LVU1082
 4090 00b2 9889     		ldrh	r0, [r3, #12]
 4091              		.loc 1 1181 34 view .LVU1083
 4092 00b4 D11C     		adds	r1, r2, #3
 4093 00b6 03EB4101 		add	r1, r3, r1, lsl #1
 4094 00ba 8880     		strh	r0, [r1, #4]	@ movhi
1182:Core/Src/Mytouch.c ****             tp_dev.y[g_gt_tnum-1]=tp_dev.y[0];
 4095              		.loc 1 1182 13 is_stmt 1 view .LVU1084
 4096              		.loc 1 1182 43 is_stmt 0 view .LVU1085
 4097 00bc D98A     		ldrh	r1, [r3, #22]
 4098              		.loc 1 1182 34 view .LVU1086
 4099 00be 0732     		adds	r2, r2, #7
 4100 00c0 03EB4203 		add	r3, r3, r2, lsl #1
 4101 00c4 D980     		strh	r1, [r3, #6]	@ movhi
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4102              		.loc 1 1183 4 is_stmt 1 view .LVU1087
 4103              		.loc 1 1183 9 is_stmt 0 view .LVU1088
 4104 00c6 0023     		movs	r3, #0
 4105 00c8 8DF80B30 		strb	r3, [sp, #11]
 4106              		.loc 1 1183 4 view .LVU1089
 4107 00cc 1FE0     		b	.L225
 4108              	.LVL370:
 4109              	.L228:
1184:Core/Src/Mytouch.c **** 			{
1185:Core/Src/Mytouch.c **** 				if(tp_dev.sta&(1<<i))		//触摸有效?
1186:Core/Src/Mytouch.c **** 				{
1187:Core/Src/Mytouch.c ****                     if(strcmp((char *)CIP,"911")==0) //触摸IC 911
ARM GAS  /tmp/ccNZMix7.s 			page 100


1188:Core/Src/Mytouch.c ****                     {
1189:Core/Src/Mytouch.c ****                         GT9147_RD_Reg(GT911_TPX_TBL[i],buf,4);   //读取XY坐标值
1190:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01) //横屏
1191:Core/Src/Mytouch.c ****                         {
1192:Core/Src/Mytouch.c ****                             tp_dev.y[i]=lcddev.height-(((u16)buf[3]<<8)+buf[2]);
1193:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
1194:Core/Src/Mytouch.c ****                         }
1195:Core/Src/Mytouch.c ****                         else
1196:Core/Src/Mytouch.c ****                         {
1197:Core/Src/Mytouch.c ****                             tp_dev.x[i]=((u16)buf[3]<<8)+buf[2];
 4110              		.loc 1 1197 29 is_stmt 1 view .LVU1090
 4111              		.loc 1 1197 50 is_stmt 0 view .LVU1091
 4112 00ce 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 4113              		.loc 1 1197 61 view .LVU1092
 4114 00d2 9DF80E00 		ldrb	r0, [sp, #14]	@ zero_extendqisi2
 4115              		.loc 1 1197 37 view .LVU1093
 4116 00d6 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
 4117              		.loc 1 1197 57 view .LVU1094
 4118 00da 00EB0320 		add	r0, r0, r3, lsl #8
 4119              		.loc 1 1197 40 view .LVU1095
 4120 00de 864A     		ldr	r2, .L246+20
 4121 00e0 0B1D     		adds	r3, r1, #4
 4122 00e2 02EB4303 		add	r3, r2, r3, lsl #1
 4123 00e6 9880     		strh	r0, [r3, #4]	@ movhi
1198:Core/Src/Mytouch.c ****                             tp_dev.y[i]=lcddev.height-(((u16)buf[1]<<8)+buf[0]);
 4124              		.loc 1 1198 29 is_stmt 1 view .LVU1096
 4125              		.loc 1 1198 47 is_stmt 0 view .LVU1097
 4126 00e8 844B     		ldr	r3, .L246+24
 4127 00ea 5888     		ldrh	r0, [r3, #2]
 4128              		.loc 1 1198 65 view .LVU1098
 4129 00ec 9DF80D40 		ldrb	r4, [sp, #13]	@ zero_extendqisi2
 4130              		.loc 1 1198 76 view .LVU1099
 4131 00f0 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 4132              		.loc 1 1198 72 view .LVU1100
 4133 00f4 03EB0423 		add	r3, r3, r4, lsl #8
 4134 00f8 9BB2     		uxth	r3, r3
 4135              		.loc 1 1198 54 view .LVU1101
 4136 00fa C31A     		subs	r3, r0, r3
 4137              		.loc 1 1198 40 view .LVU1102
 4138 00fc 0831     		adds	r1, r1, #8
 4139 00fe 02EB4102 		add	r2, r2, r1, lsl #1
 4140 0102 D380     		strh	r3, [r2, #6]	@ movhi
 4141              	.L226:
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4142              		.loc 1 1183 24 is_stmt 1 discriminator 2 view .LVU1103
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4143              		.loc 1 1183 25 is_stmt 0 discriminator 2 view .LVU1104
 4144 0104 9DF80B30 		ldrb	r3, [sp, #11]	@ zero_extendqisi2
 4145 0108 0133     		adds	r3, r3, #1
 4146 010a 8DF80B30 		strb	r3, [sp, #11]
 4147              	.L225:
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4148              		.loc 1 1183 12 is_stmt 1 discriminator 1 view .LVU1105
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4149              		.loc 1 1183 13 is_stmt 0 discriminator 1 view .LVU1106
 4150 010e 9DF80B40 		ldrb	r4, [sp, #11]	@ zero_extendqisi2
 4151 0112 784B     		ldr	r3, .L246+16
ARM GAS  /tmp/ccNZMix7.s 			page 101


 4152 0114 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1183:Core/Src/Mytouch.c **** 			for(i=0;i<g_gt_tnum;i++)
 4153              		.loc 1 1183 4 discriminator 1 view .LVU1107
 4154 0116 9C42     		cmp	r4, r3
 4155 0118 80F08280 		bcs	.L242
1185:Core/Src/Mytouch.c **** 				{
 4156              		.loc 1 1185 5 is_stmt 1 view .LVU1108
1185:Core/Src/Mytouch.c **** 				{
 4157              		.loc 1 1185 14 is_stmt 0 view .LVU1109
 4158 011c 764B     		ldr	r3, .L246+20
 4159 011e 93F82030 		ldrb	r3, [r3, #32]	@ zero_extendqisi2
1185:Core/Src/Mytouch.c **** 				{
 4160              		.loc 1 1185 8 view .LVU1110
 4161 0122 2341     		asrs	r3, r3, r4
1185:Core/Src/Mytouch.c **** 				{
 4162              		.loc 1 1185 7 view .LVU1111
 4163 0124 13F0010F 		tst	r3, #1
 4164 0128 ECD0     		beq	.L226
1187:Core/Src/Mytouch.c ****                     {
 4165              		.loc 1 1187 21 is_stmt 1 view .LVU1112
1187:Core/Src/Mytouch.c ****                     {
 4166              		.loc 1 1187 24 is_stmt 0 view .LVU1113
 4167 012a 7049     		ldr	r1, .L246+8
 4168 012c 7048     		ldr	r0, .L246+12
 4169 012e FFF7FEFF 		bl	strcmp
 4170              	.LVL371:
1187:Core/Src/Mytouch.c ****                     {
 4171              		.loc 1 1187 23 view .LVU1114
 4172 0132 60BB     		cbnz	r0, .L227
1189:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01) //横屏
 4173              		.loc 1 1189 25 is_stmt 1 view .LVU1115
 4174 0134 0422     		movs	r2, #4
 4175 0136 03A9     		add	r1, sp, #12
 4176 0138 714B     		ldr	r3, .L246+28
 4177 013a 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 4178 013e FFF7FEFF 		bl	GT9147_RD_Reg
 4179              	.LVL372:
1190:Core/Src/Mytouch.c ****                         {
 4180              		.loc 1 1190 25 view .LVU1116
1190:Core/Src/Mytouch.c ****                         {
 4181              		.loc 1 1190 34 is_stmt 0 view .LVU1117
 4182 0142 6D4B     		ldr	r3, .L246+20
 4183 0144 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
1190:Core/Src/Mytouch.c ****                         {
 4184              		.loc 1 1190 27 view .LVU1118
 4185 0148 13F0010F 		tst	r3, #1
 4186 014c BFD0     		beq	.L228
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4187              		.loc 1 1192 29 is_stmt 1 view .LVU1119
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4188              		.loc 1 1192 47 is_stmt 0 view .LVU1120
 4189 014e 6B4C     		ldr	r4, .L246+24
 4190 0150 6288     		ldrh	r2, [r4, #2]
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4191              		.loc 1 1192 65 view .LVU1121
 4192 0152 9DF80F10 		ldrb	r1, [sp, #15]	@ zero_extendqisi2
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
ARM GAS  /tmp/ccNZMix7.s 			page 102


 4193              		.loc 1 1192 76 view .LVU1122
 4194 0156 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4195              		.loc 1 1192 72 view .LVU1123
 4196 015a 03EB0123 		add	r3, r3, r1, lsl #8
 4197 015e 9BB2     		uxth	r3, r3
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4198              		.loc 1 1192 37 view .LVU1124
 4199 0160 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4200              		.loc 1 1192 54 view .LVU1125
 4201 0164 D31A     		subs	r3, r2, r3
1192:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)buf[1]<<8)+buf[0]);
 4202              		.loc 1 1192 40 view .LVU1126
 4203 0166 644A     		ldr	r2, .L246+20
 4204 0168 01F10800 		add	r0, r1, #8
 4205 016c 02EB4000 		add	r0, r2, r0, lsl #1
 4206 0170 C380     		strh	r3, [r0, #6]	@ movhi
1193:Core/Src/Mytouch.c ****                         }
 4207              		.loc 1 1193 29 is_stmt 1 view .LVU1127
1193:Core/Src/Mytouch.c ****                         }
 4208              		.loc 1 1193 47 is_stmt 0 view .LVU1128
 4209 0172 2088     		ldrh	r0, [r4]
1193:Core/Src/Mytouch.c ****                         }
 4210              		.loc 1 1193 64 view .LVU1129
 4211 0174 9DF80D40 		ldrb	r4, [sp, #13]	@ zero_extendqisi2
1193:Core/Src/Mytouch.c ****                         }
 4212              		.loc 1 1193 75 view .LVU1130
 4213 0178 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
1193:Core/Src/Mytouch.c ****                         }
 4214              		.loc 1 1193 71 view .LVU1131
 4215 017c 03EB0423 		add	r3, r3, r4, lsl #8
 4216 0180 9BB2     		uxth	r3, r3
1193:Core/Src/Mytouch.c ****                         }
 4217              		.loc 1 1193 53 view .LVU1132
 4218 0182 C31A     		subs	r3, r0, r3
1193:Core/Src/Mytouch.c ****                         }
 4219              		.loc 1 1193 40 view .LVU1133
 4220 0184 0431     		adds	r1, r1, #4
 4221 0186 02EB4102 		add	r2, r2, r1, lsl #1
 4222 018a 9380     		strh	r3, [r2, #4]	@ movhi
 4223 018c BAE7     		b	.L226
 4224              	.L227:
1199:Core/Src/Mytouch.c ****                         }
1200:Core/Src/Mytouch.c ****                     }
1201:Core/Src/Mytouch.c ****                     else
1202:Core/Src/Mytouch.c ****                     {
1203:Core/Src/Mytouch.c ****                         FT5206_RD_Reg(FT5206_TPX_TBL[i],buf,4);	//读取XY坐标值 
 4225              		.loc 1 1203 25 is_stmt 1 view .LVU1134
 4226 018e 0422     		movs	r2, #4
 4227 0190 03A9     		add	r1, sp, #12
 4228 0192 5C4B     		ldr	r3, .L246+32
 4229 0194 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 4230 0198 FFF7FEFF 		bl	FT5206_RD_Reg
 4231              	.LVL373:
1204:Core/Src/Mytouch.c ****                         if(tp_dev.touchtype&0X01)//横屏
 4232              		.loc 1 1204 25 view .LVU1135
ARM GAS  /tmp/ccNZMix7.s 			page 103


 4233              		.loc 1 1204 34 is_stmt 0 view .LVU1136
 4234 019c 564B     		ldr	r3, .L246+20
 4235 019e 93F83030 		ldrb	r3, [r3, #48]	@ zero_extendqisi2
 4236              		.loc 1 1204 27 view .LVU1137
 4237 01a2 13F0010F 		tst	r3, #1
 4238 01a6 1CD0     		beq	.L229
1205:Core/Src/Mytouch.c ****                         {
1206:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)(buf[0]&0X0F)<<8)+buf[1];
 4239              		.loc 1 1206 29 is_stmt 1 view .LVU1138
 4240              		.loc 1 1206 51 is_stmt 0 view .LVU1139
 4241 01a8 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 4242              		.loc 1 1206 60 view .LVU1140
 4243 01ac 1B02     		lsls	r3, r3, #8
 4244 01ae 03F47063 		and	r3, r3, #3840
 4245              		.loc 1 1206 68 view .LVU1141
 4246 01b2 9DF80D20 		ldrb	r2, [sp, #13]	@ zero_extendqisi2
 4247              		.loc 1 1206 37 view .LVU1142
 4248 01b6 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
 4249              		.loc 1 1206 64 view .LVU1143
 4250 01ba 1344     		add	r3, r3, r2
 4251              		.loc 1 1206 40 view .LVU1144
 4252 01bc 4E4A     		ldr	r2, .L246+20
 4253 01be 01F10800 		add	r0, r1, #8
 4254 01c2 02EB4000 		add	r0, r2, r0, lsl #1
 4255 01c6 C380     		strh	r3, [r0, #6]	@ movhi
1207:Core/Src/Mytouch.c ****                             tp_dev.x[i]=((u16)(buf[2]&0X0F)<<8)+buf[3];
 4256              		.loc 1 1207 29 is_stmt 1 view .LVU1145
 4257              		.loc 1 1207 51 is_stmt 0 view .LVU1146
 4258 01c8 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 4259              		.loc 1 1207 60 view .LVU1147
 4260 01cc 1B02     		lsls	r3, r3, #8
 4261 01ce 03F47063 		and	r3, r3, #3840
 4262              		.loc 1 1207 68 view .LVU1148
 4263 01d2 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
 4264              		.loc 1 1207 64 view .LVU1149
 4265 01d6 0344     		add	r3, r3, r0
 4266              		.loc 1 1207 40 view .LVU1150
 4267 01d8 0431     		adds	r1, r1, #4
 4268 01da 02EB4102 		add	r2, r2, r1, lsl #1
 4269 01de 9380     		strh	r3, [r2, #4]	@ movhi
 4270 01e0 90E7     		b	.L226
 4271              	.L229:
1208:Core/Src/Mytouch.c ****                         }else
1209:Core/Src/Mytouch.c ****                         {
1210:Core/Src/Mytouch.c ****                             tp_dev.x[i]=lcddev.width-(((u16)(buf[0]&0X0F)<<8)+buf[1]);
 4272              		.loc 1 1210 29 is_stmt 1 view .LVU1151
 4273              		.loc 1 1210 47 is_stmt 0 view .LVU1152
 4274 01e2 464B     		ldr	r3, .L246+24
 4275 01e4 1A88     		ldrh	r2, [r3]
 4276              		.loc 1 1210 65 view .LVU1153
 4277 01e6 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 4278              		.loc 1 1210 74 view .LVU1154
 4279 01ea 1B02     		lsls	r3, r3, #8
 4280 01ec 03F47063 		and	r3, r3, #3840
 4281              		.loc 1 1210 82 view .LVU1155
 4282 01f0 9DF80D10 		ldrb	r1, [sp, #13]	@ zero_extendqisi2
 4283              		.loc 1 1210 78 view .LVU1156
ARM GAS  /tmp/ccNZMix7.s 			page 104


 4284 01f4 0B44     		add	r3, r3, r1
 4285              		.loc 1 1210 37 view .LVU1157
 4286 01f6 9DF80B10 		ldrb	r1, [sp, #11]	@ zero_extendqisi2
 4287              		.loc 1 1210 53 view .LVU1158
 4288 01fa D31A     		subs	r3, r2, r3
 4289              		.loc 1 1210 40 view .LVU1159
 4290 01fc 3E4A     		ldr	r2, .L246+20
 4291 01fe 081D     		adds	r0, r1, #4
 4292 0200 02EB4000 		add	r0, r2, r0, lsl #1
 4293 0204 8380     		strh	r3, [r0, #4]	@ movhi
1211:Core/Src/Mytouch.c ****                             tp_dev.y[i]=((u16)(buf[2]&0X0F)<<8)+buf[3];
 4294              		.loc 1 1211 29 is_stmt 1 view .LVU1160
 4295              		.loc 1 1211 51 is_stmt 0 view .LVU1161
 4296 0206 9DF80E30 		ldrb	r3, [sp, #14]	@ zero_extendqisi2
 4297              		.loc 1 1211 60 view .LVU1162
 4298 020a 1B02     		lsls	r3, r3, #8
 4299 020c 03F47063 		and	r3, r3, #3840
 4300              		.loc 1 1211 68 view .LVU1163
 4301 0210 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
 4302              		.loc 1 1211 64 view .LVU1164
 4303 0214 0344     		add	r3, r3, r0
 4304              		.loc 1 1211 40 view .LVU1165
 4305 0216 0831     		adds	r1, r1, #8
 4306 0218 02EB4102 		add	r2, r2, r1, lsl #1
 4307 021c D380     		strh	r3, [r2, #6]	@ movhi
 4308 021e 71E7     		b	.L226
 4309              	.L242:
1212:Core/Src/Mytouch.c ****                         }  
1213:Core/Src/Mytouch.c ****                     }
1214:Core/Src/Mytouch.c **** 					//printf("x[%d]:%d,y[%d]:%d\r\n",i,tp_dev.x[i],i,tp_dev.y[i]);
1215:Core/Src/Mytouch.c **** 				}			
1216:Core/Src/Mytouch.c **** 			} 
1217:Core/Src/Mytouch.c **** 			res=1;
 4310              		.loc 1 1217 4 is_stmt 1 view .LVU1166
 4311              	.LVL374:
1218:Core/Src/Mytouch.c ****             if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)  //非法数据(坐标超出了
 4312              		.loc 1 1218 13 view .LVU1167
 4313              		.loc 1 1218 24 is_stmt 0 view .LVU1168
 4314 0220 354A     		ldr	r2, .L246+20
 4315 0222 9189     		ldrh	r1, [r2, #12]
 4316              		.loc 1 1218 34 view .LVU1169
 4317 0224 354A     		ldr	r2, .L246+24
 4318 0226 1288     		ldrh	r2, [r2]
 4319              		.loc 1 1218 15 view .LVU1170
 4320 0228 9142     		cmp	r1, r2
 4321 022a 05D8     		bhi	.L231
 4322              		.loc 1 1218 50 discriminator 1 view .LVU1171
 4323 022c 324A     		ldr	r2, .L246+20
 4324 022e D18A     		ldrh	r1, [r2, #22]
 4325              		.loc 1 1218 60 discriminator 1 view .LVU1172
 4326 0230 324A     		ldr	r2, .L246+24
 4327 0232 5288     		ldrh	r2, [r2, #2]
 4328              		.loc 1 1218 40 discriminator 1 view .LVU1173
 4329 0234 9142     		cmp	r1, r2
 4330 0236 20D9     		bls	.L232
 4331              	.L231:
1219:Core/Src/Mytouch.c ****             {
ARM GAS  /tmp/ccNZMix7.s 			page 105


1220:Core/Src/Mytouch.c ****                 if((mode&0XF)>1)   // 有其他点有数据,则复第二个触点的数据到第一
 4332              		.loc 1 1220 17 is_stmt 1 view .LVU1174
 4333              		.loc 1 1220 30 is_stmt 0 view .LVU1175
 4334 0238 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 4335              		.loc 1 1220 19 view .LVU1176
 4336 023c 12F00E0F 		tst	r2, #14
 4337 0240 09D0     		beq	.L233
1221:Core/Src/Mytouch.c ****                 {
1222:Core/Src/Mytouch.c ****                     tp_dev.x[0]=tp_dev.x[1];
 4338              		.loc 1 1222 21 is_stmt 1 view .LVU1177
 4339              		.loc 1 1222 41 is_stmt 0 view .LVU1178
 4340 0242 2D4B     		ldr	r3, .L246+20
 4341 0244 DA89     		ldrh	r2, [r3, #14]
 4342              		.loc 1 1222 32 view .LVU1179
 4343 0246 9A81     		strh	r2, [r3, #12]	@ movhi
1223:Core/Src/Mytouch.c ****                     tp_dev.y[0]=tp_dev.y[1];
 4344              		.loc 1 1223 21 is_stmt 1 view .LVU1180
 4345              		.loc 1 1223 41 is_stmt 0 view .LVU1181
 4346 0248 1A8B     		ldrh	r2, [r3, #24]
 4347              		.loc 1 1223 32 view .LVU1182
 4348 024a DA82     		strh	r2, [r3, #22]	@ movhi
1224:Core/Src/Mytouch.c ****                     t=0;  // 触发一次,则会最少连续监测10次,从而提高命中率 
 4349              		.loc 1 1224 21 is_stmt 1 view .LVU1183
 4350              		.loc 1 1224 22 is_stmt 0 view .LVU1184
 4351 024c 254B     		ldr	r3, .L246
 4352 024e 0022     		movs	r2, #0
 4353 0250 1A70     		strb	r2, [r3]
1217:Core/Src/Mytouch.c ****             if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)  //非法数据(坐标超出了
 4354              		.loc 1 1217 7 view .LVU1185
 4355 0252 0124     		movs	r4, #1
 4356 0254 17E0     		b	.L222
 4357              	.L233:
1225:Core/Src/Mytouch.c ****                 }
1226:Core/Src/Mytouch.c ****                 else        // 非法数据,则忽略此次数据(还原原来的) 
1227:Core/Src/Mytouch.c ****                 {
1228:Core/Src/Mytouch.c ****                     tp_dev.x[0]=tp_dev.x[g_gt_tnum-1];
 4358              		.loc 1 1228 21 is_stmt 1 view .LVU1186
 4359              		.loc 1 1228 41 is_stmt 0 view .LVU1187
 4360 0256 284A     		ldr	r2, .L246+20
 4361 0258 D91C     		adds	r1, r3, #3
 4362 025a 02EB4101 		add	r1, r2, r1, lsl #1
 4363 025e 8988     		ldrh	r1, [r1, #4]
 4364              		.loc 1 1228 32 view .LVU1188
 4365 0260 9181     		strh	r1, [r2, #12]	@ movhi
1229:Core/Src/Mytouch.c ****                     tp_dev.y[0]=tp_dev.y[g_gt_tnum-1];
 4366              		.loc 1 1229 21 is_stmt 1 view .LVU1189
 4367              		.loc 1 1229 41 is_stmt 0 view .LVU1190
 4368 0262 0733     		adds	r3, r3, #7
 4369 0264 02EB4303 		add	r3, r2, r3, lsl #1
 4370 0268 DB88     		ldrh	r3, [r3, #6]
 4371              		.loc 1 1229 32 view .LVU1191
 4372 026a D382     		strh	r3, [r2, #22]	@ movhi
1230:Core/Src/Mytouch.c ****                     mode=0X80;
 4373              		.loc 1 1230 21 is_stmt 1 view .LVU1192
 4374              		.loc 1 1230 25 is_stmt 0 view .LVU1193
 4375 026c 8023     		movs	r3, #128
 4376 026e 8DF80730 		strb	r3, [sp, #7]
ARM GAS  /tmp/ccNZMix7.s 			page 106


1231:Core/Src/Mytouch.c ****                     tp_dev.sta=tempsta;   // 恢复tp_dev.sta 
 4377              		.loc 1 1231 21 is_stmt 1 view .LVU1194
 4378              		.loc 1 1231 31 is_stmt 0 view .LVU1195
 4379 0272 82F82050 		strb	r5, [r2, #32]
1217:Core/Src/Mytouch.c ****             if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)  //非法数据(坐标超出了
 4380              		.loc 1 1217 7 view .LVU1196
 4381 0276 0124     		movs	r4, #1
 4382 0278 05E0     		b	.L222
 4383              	.L232:
1232:Core/Src/Mytouch.c ****                 }
1233:Core/Src/Mytouch.c ****             }
1234:Core/Src/Mytouch.c ****             else t=0;      // 触发一次,则会最少连续监测10次,从而提高命中率 
 4384              		.loc 1 1234 18 is_stmt 1 view .LVU1197
 4385              		.loc 1 1234 19 is_stmt 0 view .LVU1198
 4386 027a 1A4B     		ldr	r3, .L246
 4387 027c 0022     		movs	r2, #0
 4388 027e 1A70     		strb	r2, [r3]
1217:Core/Src/Mytouch.c ****             if(tp_dev.x[0]>lcddev.width||tp_dev.y[0]>lcddev.height)  //非法数据(坐标超出了
 4389              		.loc 1 1217 7 view .LVU1199
 4390 0280 0124     		movs	r4, #1
 4391 0282 00E0     		b	.L222
 4392              	.LVL375:
 4393              	.L239:
1156:Core/Src/Mytouch.c **** 	u8 temp;
 4394              		.loc 1 1156 5 view .LVU1200
 4395 0284 0024     		movs	r4, #0
 4396              	.LVL376:
 4397              	.L222:
1235:Core/Src/Mytouch.c **** 		}
1236:Core/Src/Mytouch.c **** 	}
1237:Core/Src/Mytouch.c ****     
1238:Core/Src/Mytouch.c ****     if(strcmp((char *)CIP,"911")==0) //触摸IC 911
 4398              		.loc 1 1238 5 is_stmt 1 view .LVU1201
 4399              		.loc 1 1238 8 is_stmt 0 view .LVU1202
 4400 0286 1949     		ldr	r1, .L246+8
 4401 0288 1948     		ldr	r0, .L246+12
 4402 028a FFF7FEFF 		bl	strcmp
 4403              	.LVL377:
 4404              		.loc 1 1238 7 view .LVU1203
 4405 028e 0028     		cmp	r0, #0
 4406 0290 3AD1     		bne	.L234
1239:Core/Src/Mytouch.c ****     {
1240:Core/Src/Mytouch.c ****         if((mode&0X8F)==0X80)//无触摸点按下
 4407              		.loc 1 1240 9 is_stmt 1 view .LVU1204
 4408              		.loc 1 1240 17 is_stmt 0 view .LVU1205
 4409 0292 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 4410              		.loc 1 1240 11 view .LVU1206
 4411 0296 03F08F03 		and	r3, r3, #143
 4412 029a 802B     		cmp	r3, #128
 4413 029c 0BD0     		beq	.L243
 4414              	.L235:
1241:Core/Src/Mytouch.c ****         { 
1242:Core/Src/Mytouch.c ****             if(tp_dev.sta&TP_PRES_DOWN)	//之前是被按下的
1243:Core/Src/Mytouch.c ****             {
1244:Core/Src/Mytouch.c ****                 tp_dev.sta&=~TP_PRES_DOWN;	//标记按键松开
1245:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
1246:Core/Src/Mytouch.c ****             { 
ARM GAS  /tmp/ccNZMix7.s 			page 107


1247:Core/Src/Mytouch.c ****                 tp_dev.x[0]=0xffff;
1248:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
1249:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
1250:Core/Src/Mytouch.c ****             }	 
1251:Core/Src/Mytouch.c ****         } 	
1252:Core/Src/Mytouch.c ****     }
1253:Core/Src/Mytouch.c ****     else
1254:Core/Src/Mytouch.c ****     {
1255:Core/Src/Mytouch.c ****         if((mode&0X1F)==0)//无触摸点按下
1256:Core/Src/Mytouch.c ****         { 
1257:Core/Src/Mytouch.c ****             if(tp_dev.sta&TP_PRES_DOWN)	//之前是被按下的
1258:Core/Src/Mytouch.c ****             {
1259:Core/Src/Mytouch.c ****                 tp_dev.sta&=~TP_PRES_DOWN;	//标记按键松开
1260:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
1261:Core/Src/Mytouch.c ****             { 
1262:Core/Src/Mytouch.c ****                 tp_dev.x[0]=0xffff;
1263:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
1264:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
1265:Core/Src/Mytouch.c ****             }
1266:Core/Src/Mytouch.c ****         }
1267:Core/Src/Mytouch.c ****     }
1268:Core/Src/Mytouch.c ****     
1269:Core/Src/Mytouch.c **** 	if(t>240)t=10;//重新从10开始计数
 4415              		.loc 1 1269 2 is_stmt 1 view .LVU1207
 4416              		.loc 1 1269 6 is_stmt 0 view .LVU1208
 4417 029e 114B     		ldr	r3, .L246
 4418 02a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4419              		.loc 1 1269 4 view .LVU1209
 4420 02a2 F02B     		cmp	r3, #240
 4421 02a4 02D9     		bls	.L238
 4422              		.loc 1 1269 11 is_stmt 1 discriminator 1 view .LVU1210
 4423              		.loc 1 1269 12 is_stmt 0 discriminator 1 view .LVU1211
 4424 02a6 0F4B     		ldr	r3, .L246
 4425 02a8 0A22     		movs	r2, #10
 4426 02aa 1A70     		strb	r2, [r3]
 4427              	.L238:
1270:Core/Src/Mytouch.c **** 	return res;
 4428              		.loc 1 1270 2 is_stmt 1 view .LVU1212
1271:Core/Src/Mytouch.c **** }
 4429              		.loc 1 1271 1 is_stmt 0 view .LVU1213
 4430 02ac 2046     		mov	r0, r4
 4431 02ae 05B0     		add	sp, sp, #20
 4432              	.LCFI57:
 4433              		.cfi_remember_state
 4434              		.cfi_def_cfa_offset 12
 4435              		@ sp needed
 4436 02b0 30BD     		pop	{r4, r5, pc}
 4437              	.LVL378:
 4438              	.L240:
 4439              	.LCFI58:
 4440              		.cfi_restore_state
1156:Core/Src/Mytouch.c **** 	u8 temp;
 4441              		.loc 1 1156 5 view .LVU1214
 4442 02b2 0024     		movs	r4, #0
 4443 02b4 E7E7     		b	.L222
 4444              	.LVL379:
 4445              	.L243:
ARM GAS  /tmp/ccNZMix7.s 			page 108


1242:Core/Src/Mytouch.c ****             {
 4446              		.loc 1 1242 13 is_stmt 1 view .LVU1215
1242:Core/Src/Mytouch.c ****             {
 4447              		.loc 1 1242 22 is_stmt 0 view .LVU1216
 4448 02b6 104A     		ldr	r2, .L246+20
 4449 02b8 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
1242:Core/Src/Mytouch.c ****             {
 4450              		.loc 1 1242 16 view .LVU1217
 4451 02bc 92F92020 		ldrsb	r2, [r2, #32]
1242:Core/Src/Mytouch.c ****             {
 4452              		.loc 1 1242 15 view .LVU1218
 4453 02c0 002A     		cmp	r2, #0
 4454 02c2 09DB     		blt	.L244
1247:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
 4455              		.loc 1 1247 17 is_stmt 1 view .LVU1219
1247:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
 4456              		.loc 1 1247 28 is_stmt 0 view .LVU1220
 4457 02c4 0C4A     		ldr	r2, .L246+20
 4458 02c6 4FF6FF71 		movw	r1, #65535
 4459 02ca 9181     		strh	r1, [r2, #12]	@ movhi
1248:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
 4460              		.loc 1 1248 17 is_stmt 1 view .LVU1221
1248:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
 4461              		.loc 1 1248 28 is_stmt 0 view .LVU1222
 4462 02cc D182     		strh	r1, [r2, #22]	@ movhi
1249:Core/Src/Mytouch.c ****             }	 
 4463              		.loc 1 1249 17 is_stmt 1 view .LVU1223
1249:Core/Src/Mytouch.c ****             }	 
 4464              		.loc 1 1249 27 is_stmt 0 view .LVU1224
 4465 02ce 23F01F03 		bic	r3, r3, #31
 4466 02d2 82F82030 		strb	r3, [r2, #32]
 4467 02d6 E2E7     		b	.L235
 4468              	.L244:
1244:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
 4469              		.loc 1 1244 17 is_stmt 1 view .LVU1225
1244:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
 4470              		.loc 1 1244 27 is_stmt 0 view .LVU1226
 4471 02d8 03F07F03 		and	r3, r3, #127
 4472 02dc 064A     		ldr	r2, .L246+20
 4473 02de 82F82030 		strb	r3, [r2, #32]
 4474 02e2 DCE7     		b	.L235
 4475              	.L247:
 4476              		.align	2
 4477              	.L246:
 4478 02e4 00000000 		.word	.LANCHOR8
 4479 02e8 CDCCCCCC 		.word	-858993459
 4480 02ec 00000000 		.word	.LC13
 4481 02f0 00000000 		.word	.LANCHOR9
 4482 02f4 00000000 		.word	.LANCHOR10
 4483 02f8 00000000 		.word	.LANCHOR2
 4484 02fc 00000000 		.word	lcddev
 4485 0300 00000000 		.word	.LANCHOR11
 4486 0304 00000000 		.word	.LANCHOR12
 4487              	.L234:
1255:Core/Src/Mytouch.c ****         { 
 4488              		.loc 1 1255 9 is_stmt 1 view .LVU1227
1255:Core/Src/Mytouch.c ****         { 
ARM GAS  /tmp/ccNZMix7.s 			page 109


 4489              		.loc 1 1255 17 is_stmt 0 view .LVU1228
 4490 0308 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
1255:Core/Src/Mytouch.c ****         { 
 4491              		.loc 1 1255 11 view .LVU1229
 4492 030c 13F01F0F 		tst	r3, #31
 4493 0310 C5D1     		bne	.L235
1257:Core/Src/Mytouch.c ****             {
 4494              		.loc 1 1257 13 is_stmt 1 view .LVU1230
1257:Core/Src/Mytouch.c ****             {
 4495              		.loc 1 1257 22 is_stmt 0 view .LVU1231
 4496 0312 0B4A     		ldr	r2, .L248
 4497 0314 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
1257:Core/Src/Mytouch.c ****             {
 4498              		.loc 1 1257 16 view .LVU1232
 4499 0318 92F92020 		ldrsb	r2, [r2, #32]
1257:Core/Src/Mytouch.c ****             {
 4500              		.loc 1 1257 15 view .LVU1233
 4501 031c 002A     		cmp	r2, #0
 4502 031e 09DB     		blt	.L245
1262:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
 4503              		.loc 1 1262 17 is_stmt 1 view .LVU1234
1262:Core/Src/Mytouch.c ****                 tp_dev.y[0]=0xffff;
 4504              		.loc 1 1262 28 is_stmt 0 view .LVU1235
 4505 0320 074A     		ldr	r2, .L248
 4506 0322 4FF6FF71 		movw	r1, #65535
 4507 0326 9181     		strh	r1, [r2, #12]	@ movhi
1263:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
 4508              		.loc 1 1263 17 is_stmt 1 view .LVU1236
1263:Core/Src/Mytouch.c ****                 tp_dev.sta&=0XE0;	//清除点有效标记	
 4509              		.loc 1 1263 28 is_stmt 0 view .LVU1237
 4510 0328 D182     		strh	r1, [r2, #22]	@ movhi
1264:Core/Src/Mytouch.c ****             }
 4511              		.loc 1 1264 17 is_stmt 1 view .LVU1238
1264:Core/Src/Mytouch.c ****             }
 4512              		.loc 1 1264 27 is_stmt 0 view .LVU1239
 4513 032a 23F01F03 		bic	r3, r3, #31
 4514 032e 82F82030 		strb	r3, [r2, #32]
 4515 0332 B4E7     		b	.L235
 4516              	.L245:
1259:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
 4517              		.loc 1 1259 17 is_stmt 1 view .LVU1240
1259:Core/Src/Mytouch.c ****             }else						//之前就没有被按下
 4518              		.loc 1 1259 27 is_stmt 0 view .LVU1241
 4519 0334 03F07F03 		and	r3, r3, #127
 4520 0338 014A     		ldr	r2, .L248
 4521 033a 82F82030 		strb	r3, [r2, #32]
 4522 033e AEE7     		b	.L235
 4523              	.L249:
 4524              		.align	2
 4525              	.L248:
 4526 0340 00000000 		.word	.LANCHOR2
 4527              		.cfi_endproc
 4528              	.LFE182:
 4530              		.section	.text.FT5206_Init,"ax",%progbits
 4531              		.align	1
 4532              		.global	FT5206_Init
 4533              		.syntax unified
ARM GAS  /tmp/ccNZMix7.s 			page 110


 4534              		.thumb
 4535              		.thumb_func
 4536              		.fpu fpv5-d16
 4538              	FT5206_Init:
 4539              	.LFB181:
1089:Core/Src/Mytouch.c ****     u8 temp[5];
 4540              		.loc 1 1089 1 is_stmt 1 view -0
 4541              		.cfi_startproc
 4542              		@ args = 0, pretend = 0, frame = 40
 4543              		@ frame_needed = 0, uses_anonymous_args = 0
 4544 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 4545              	.LCFI59:
 4546              		.cfi_def_cfa_offset 20
 4547              		.cfi_offset 4, -20
 4548              		.cfi_offset 5, -16
 4549              		.cfi_offset 6, -12
 4550              		.cfi_offset 7, -8
 4551              		.cfi_offset 14, -4
 4552 0002 8BB0     		sub	sp, sp, #44
 4553              	.LCFI60:
 4554              		.cfi_def_cfa_offset 64
1090:Core/Src/Mytouch.c ****     u8 res=1;
 4555              		.loc 1 1090 5 view .LVU1243
1091:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 4556              		.loc 1 1091 5 view .LVU1244
 4557              	.LVL380:
1092:Core/Src/Mytouch.c ****  
 4558              		.loc 1 1092 5 view .LVU1245
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4559              		.loc 1 1094 5 view .LVU1246
 4560              	.LBB8:
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4561              		.loc 1 1094 5 view .LVU1247
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4562              		.loc 1 1094 5 view .LVU1248
 4563 0004 524B     		ldr	r3, .L257
 4564 0006 D3F8E020 		ldr	r2, [r3, #224]
 4565 000a 42F08002 		orr	r2, r2, #128
 4566 000e C3F8E020 		str	r2, [r3, #224]
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4567              		.loc 1 1094 5 view .LVU1249
 4568 0012 D3F8E020 		ldr	r2, [r3, #224]
 4569 0016 02F08002 		and	r2, r2, #128
 4570 001a 0192     		str	r2, [sp, #4]
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4571              		.loc 1 1094 5 view .LVU1250
 4572 001c 019A     		ldr	r2, [sp, #4]
 4573              	.LBE8:
1094:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 4574              		.loc 1 1094 5 view .LVU1251
1095:Core/Src/Mytouch.c ****                 
 4575              		.loc 1 1095 5 view .LVU1252
 4576              	.LBB9:
1095:Core/Src/Mytouch.c ****                 
 4577              		.loc 1 1095 5 view .LVU1253
1095:Core/Src/Mytouch.c ****                 
 4578              		.loc 1 1095 5 view .LVU1254
ARM GAS  /tmp/ccNZMix7.s 			page 111


 4579 001e D3F8E020 		ldr	r2, [r3, #224]
 4580 0022 42F48072 		orr	r2, r2, #256
 4581 0026 C3F8E020 		str	r2, [r3, #224]
1095:Core/Src/Mytouch.c ****                 
 4582              		.loc 1 1095 5 view .LVU1255
 4583 002a D3F8E030 		ldr	r3, [r3, #224]
 4584 002e 03F48073 		and	r3, r3, #256
 4585 0032 0293     		str	r3, [sp, #8]
1095:Core/Src/Mytouch.c ****                 
 4586              		.loc 1 1095 5 view .LVU1256
 4587 0034 029B     		ldr	r3, [sp, #8]
 4588              	.LBE9:
1095:Core/Src/Mytouch.c ****                 
 4589              		.loc 1 1095 5 view .LVU1257
1098:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 4590              		.loc 1 1098 5 view .LVU1258
1098:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 4591              		.loc 1 1098 21 is_stmt 0 view .LVU1259
 4592 0036 8023     		movs	r3, #128
 4593 0038 0393     		str	r3, [sp, #12]
1099:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 4594              		.loc 1 1099 5 is_stmt 1 view .LVU1260
1099:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 4595              		.loc 1 1099 22 is_stmt 0 view .LVU1261
 4596 003a 0024     		movs	r4, #0
 4597 003c 0494     		str	r4, [sp, #16]
1100:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 4598              		.loc 1 1100 5 is_stmt 1 view .LVU1262
1100:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 4599              		.loc 1 1100 22 is_stmt 0 view .LVU1263
 4600 003e 0127     		movs	r7, #1
 4601 0040 0597     		str	r7, [sp, #20]
1101:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 4602              		.loc 1 1101 5 is_stmt 1 view .LVU1264
1101:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 4603              		.loc 1 1101 23 is_stmt 0 view .LVU1265
 4604 0042 0323     		movs	r3, #3
 4605 0044 0693     		str	r3, [sp, #24]
1102:Core/Src/Mytouch.c ****             
 4606              		.loc 1 1102 5 is_stmt 1 view .LVU1266
 4607 0046 03A9     		add	r1, sp, #12
 4608 0048 4248     		ldr	r0, .L257+4
 4609 004a FFF7FEFF 		bl	HAL_GPIO_Init
 4610              	.LVL381:
1105:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 4611              		.loc 1 1105 5 view .LVU1267
1105:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 4612              		.loc 1 1105 21 is_stmt 0 view .LVU1268
 4613 004e 4FF48076 		mov	r6, #256
 4614 0052 0396     		str	r6, [sp, #12]
1106:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 4615              		.loc 1 1106 5 is_stmt 1 view .LVU1269
1106:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 4616              		.loc 1 1106 22 is_stmt 0 view .LVU1270
 4617 0054 0497     		str	r7, [sp, #16]
1107:Core/Src/Mytouch.c ****         
 4618              		.loc 1 1107 5 is_stmt 1 view .LVU1271
ARM GAS  /tmp/ccNZMix7.s 			page 112


 4619 0056 404D     		ldr	r5, .L257+8
 4620 0058 03A9     		add	r1, sp, #12
 4621 005a 2846     		mov	r0, r5
 4622 005c FFF7FEFF 		bl	HAL_GPIO_Init
 4623              	.LVL382:
1109:Core/Src/Mytouch.c **** 	FT_RST(0);				//复位
 4624              		.loc 1 1109 2 view .LVU1272
 4625 0060 FFF7FEFF 		bl	CT_IIC_Init
 4626              	.LVL383:
1110:Core/Src/Mytouch.c **** 	HAL_Delay(20);
 4627              		.loc 1 1110 2 view .LVU1273
 4628 0064 2246     		mov	r2, r4
 4629 0066 3146     		mov	r1, r6
 4630 0068 2846     		mov	r0, r5
 4631 006a FFF7FEFF 		bl	HAL_GPIO_WritePin
 4632              	.LVL384:
1111:Core/Src/Mytouch.c ****  	FT_RST(1);				//释放复位		    
 4633              		.loc 1 1111 2 view .LVU1274
 4634 006e 1420     		movs	r0, #20
 4635 0070 FFF7FEFF 		bl	HAL_Delay
 4636              	.LVL385:
1112:Core/Src/Mytouch.c **** 	HAL_Delay(50);  	
 4637              		.loc 1 1112 3 view .LVU1275
 4638 0074 3A46     		mov	r2, r7
 4639 0076 3146     		mov	r1, r6
 4640 0078 2846     		mov	r0, r5
 4641 007a FFF7FEFF 		bl	HAL_GPIO_WritePin
 4642              	.LVL386:
1113:Core/Src/Mytouch.c **** 	temp[0]=0;
 4643              		.loc 1 1113 2 view .LVU1276
 4644 007e 3220     		movs	r0, #50
 4645 0080 FFF7FEFF 		bl	HAL_Delay
 4646              	.LVL387:
1114:Core/Src/Mytouch.c **** 	//读取版本号，参考值：0x3003
 4647              		.loc 1 1114 2 view .LVU1277
1114:Core/Src/Mytouch.c **** 	//读取版本号，参考值：0x3003
 4648              		.loc 1 1114 9 is_stmt 0 view .LVU1278
 4649 0084 8DF82040 		strb	r4, [sp, #32]
1116:Core/Src/Mytouch.c **** 	if((temp[0]==0X30&&temp[1]==0X03)||temp[1]==0X01||temp[1]==0X02)//版本:0X3003/0X0001/0X0002
 4650              		.loc 1 1116 2 is_stmt 1 view .LVU1279
 4651 0088 0222     		movs	r2, #2
 4652 008a 08A9     		add	r1, sp, #32
 4653 008c A120     		movs	r0, #161
 4654 008e FFF7FEFF 		bl	FT5206_RD_Reg
 4655              	.LVL388:
1117:Core/Src/Mytouch.c **** 	{
 4656              		.loc 1 1117 2 view .LVU1280
1117:Core/Src/Mytouch.c **** 	{
 4657              		.loc 1 1117 10 is_stmt 0 view .LVU1281
 4658 0092 9DF82030 		ldrb	r3, [sp, #32]	@ zero_extendqisi2
1117:Core/Src/Mytouch.c **** 	{
 4659              		.loc 1 1117 4 view .LVU1282
 4660 0096 302B     		cmp	r3, #48
 4661 0098 29D0     		beq	.L256
 4662              	.L251:
1117:Core/Src/Mytouch.c **** 	{
 4663              		.loc 1 1117 41 discriminator 3 view .LVU1283
ARM GAS  /tmp/ccNZMix7.s 			page 113


 4664 009a 9DF82120 		ldrb	r2, [sp, #33]	@ zero_extendqisi2
1117:Core/Src/Mytouch.c **** 	{
 4665              		.loc 1 1117 35 discriminator 3 view .LVU1284
 4666 009e 012A     		cmp	r2, #1
 4667 00a0 01D0     		beq	.L252
1117:Core/Src/Mytouch.c **** 	{
 4668              		.loc 1 1117 50 discriminator 4 view .LVU1285
 4669 00a2 022A     		cmp	r2, #2
 4670 00a4 28D1     		bne	.L253
 4671              	.L252:
1119:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_DEVIDE_MODE,temp,1);	//进入正常操作模式 
 4672              		.loc 1 1119 3 is_stmt 1 view .LVU1286
1119:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_DEVIDE_MODE,temp,1);	//进入正常操作模式 
 4673              		.loc 1 1119 48 is_stmt 0 view .LVU1287
 4674 00a6 9DF82110 		ldrb	r1, [sp, #33]	@ zero_extendqisi2
1119:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_DEVIDE_MODE,temp,1);	//进入正常操作模式 
 4675              		.loc 1 1119 3 view .LVU1288
 4676 00aa 01EB0321 		add	r1, r1, r3, lsl #8
 4677 00ae 2B48     		ldr	r0, .L257+12
 4678 00b0 FFF7FEFF 		bl	printf
 4679              	.LVL389:
1120:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_MODE,temp,1);		//查询模式 
 4680              		.loc 1 1120 9 is_stmt 1 view .LVU1289
 4681 00b4 0122     		movs	r2, #1
 4682 00b6 08A9     		add	r1, sp, #32
 4683 00b8 0020     		movs	r0, #0
 4684 00ba FFF7FEFF 		bl	FT5206_WR_Reg
 4685              	.LVL390:
1121:Core/Src/Mytouch.c ****         temp[0]=22;								//触摸有效值，22，越小越灵敏	
 4686              		.loc 1 1121 9 view .LVU1290
 4687 00be 0122     		movs	r2, #1
 4688 00c0 08A9     		add	r1, sp, #32
 4689 00c2 A420     		movs	r0, #164
 4690 00c4 FFF7FEFF 		bl	FT5206_WR_Reg
 4691              	.LVL391:
1122:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_THGROUP,temp,1);	//设置触摸有效值
 4692              		.loc 1 1122 9 view .LVU1291
1122:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_THGROUP,temp,1);	//设置触摸有效值
 4693              		.loc 1 1122 16 is_stmt 0 view .LVU1292
 4694 00c8 1623     		movs	r3, #22
 4695 00ca 8DF82030 		strb	r3, [sp, #32]
1123:Core/Src/Mytouch.c ****         temp[0]=12;								//激活周期，不能小于12，最大14
 4696              		.loc 1 1123 9 is_stmt 1 view .LVU1293
 4697 00ce 0122     		movs	r2, #1
 4698 00d0 08A9     		add	r1, sp, #32
 4699 00d2 8020     		movs	r0, #128
 4700 00d4 FFF7FEFF 		bl	FT5206_WR_Reg
 4701              	.LVL392:
1124:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_PERIODACTIVE,temp,1); 
 4702              		.loc 1 1124 9 view .LVU1294
1124:Core/Src/Mytouch.c ****         FT5206_WR_Reg(FT_ID_G_PERIODACTIVE,temp,1); 
 4703              		.loc 1 1124 16 is_stmt 0 view .LVU1295
 4704 00d8 0C23     		movs	r3, #12
 4705 00da 8DF82030 		strb	r3, [sp, #32]
1125:Core/Src/Mytouch.c **** 		res = 0;
 4706              		.loc 1 1125 9 is_stmt 1 view .LVU1296
 4707 00de 0122     		movs	r2, #1
ARM GAS  /tmp/ccNZMix7.s 			page 114


 4708 00e0 08A9     		add	r1, sp, #32
 4709 00e2 8820     		movs	r0, #136
 4710 00e4 FFF7FEFF 		bl	FT5206_WR_Reg
 4711              	.LVL393:
1126:Core/Src/Mytouch.c **** 	} 
 4712              		.loc 1 1126 3 view .LVU1297
 4713              	.L254:
1142:Core/Src/Mytouch.c **** }
 4714              		.loc 1 1142 2 view .LVU1298
1143:Core/Src/Mytouch.c **** const u16 FT5206_TPX_TBL[5]={FT_TP1_REG,FT_TP2_REG,FT_TP3_REG,FT_TP4_REG,FT_TP5_REG};
 4715              		.loc 1 1143 1 is_stmt 0 view .LVU1299
 4716 00e8 0020     		movs	r0, #0
 4717 00ea 0BB0     		add	sp, sp, #44
 4718              	.LCFI61:
 4719              		.cfi_remember_state
 4720              		.cfi_def_cfa_offset 20
 4721              		@ sp needed
 4722 00ec F0BD     		pop	{r4, r5, r6, r7, pc}
 4723              	.LVL394:
 4724              	.L256:
 4725              	.LCFI62:
 4726              		.cfi_restore_state
1117:Core/Src/Mytouch.c **** 	{
 4727              		.loc 1 1117 25 discriminator 1 view .LVU1300
 4728 00ee 9DF82120 		ldrb	r2, [sp, #33]	@ zero_extendqisi2
1117:Core/Src/Mytouch.c **** 	{
 4729              		.loc 1 1117 19 discriminator 1 view .LVU1301
 4730 00f2 032A     		cmp	r2, #3
 4731 00f4 D1D1     		bne	.L251
 4732 00f6 D6E7     		b	.L252
 4733              	.L253:
1130:Core/Src/Mytouch.c ****         temp[4]=0;
 4734              		.loc 1 1130 9 is_stmt 1 view .LVU1302
 4735 00f8 0422     		movs	r2, #4
 4736 00fa 08A9     		add	r1, sp, #32
 4737 00fc 48F24010 		movw	r0, #33088
 4738 0100 FFF7FEFF 		bl	GT9147_RD_Reg
 4739              	.LVL395:
1131:Core/Src/Mytouch.c ****         printf("CTP ID:%s\r\n", temp);  //打印ID
 4740              		.loc 1 1131 9 view .LVU1303
1131:Core/Src/Mytouch.c ****         printf("CTP ID:%s\r\n", temp);  //打印ID
 4741              		.loc 1 1131 16 is_stmt 0 view .LVU1304
 4742 0104 0024     		movs	r4, #0
 4743 0106 8DF82440 		strb	r4, [sp, #36]
1132:Core/Src/Mytouch.c ****         memcpy(CIP,temp, sizeof(u8)*4);
 4744              		.loc 1 1132 9 is_stmt 1 view .LVU1305
 4745 010a 08A9     		add	r1, sp, #32
 4746 010c 1448     		ldr	r0, .L257+16
 4747 010e FFF7FEFF 		bl	printf
 4748              	.LVL396:
1133:Core/Src/Mytouch.c ****         temp[0]=0X02;
 4749              		.loc 1 1133 9 view .LVU1306
 4750 0112 144B     		ldr	r3, .L257+20
 4751 0114 089A     		ldr	r2, [sp, #32]
 4752 0116 1A60     		str	r2, [r3]
1134:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1);  //软复位GT9XXX 
 4753              		.loc 1 1134 9 view .LVU1307
ARM GAS  /tmp/ccNZMix7.s 			page 115


1134:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1);  //软复位GT9XXX 
 4754              		.loc 1 1134 16 is_stmt 0 view .LVU1308
 4755 0118 0223     		movs	r3, #2
 4756 011a 8DF82030 		strb	r3, [sp, #32]
1135:Core/Src/Mytouch.c ****         GT9147_RD_Reg(GT_CFGS_REG,temp,1);  //读取GT_CFGS_REG寄存器
 4757              		.loc 1 1135 9 is_stmt 1 view .LVU1309
 4758 011e 0122     		movs	r2, #1
 4759 0120 08A9     		add	r1, sp, #32
 4760 0122 48F24000 		movw	r0, #32832
 4761 0126 FFF7FEFF 		bl	GT9147_WR_Reg
 4762              	.LVL397:
1136:Core/Src/Mytouch.c ****         HAL_Delay(10);
 4763              		.loc 1 1136 9 view .LVU1310
 4764 012a 0122     		movs	r2, #1
 4765 012c 08A9     		add	r1, sp, #32
 4766 012e 48F24700 		movw	r0, #32839
 4767 0132 FFF7FEFF 		bl	GT9147_RD_Reg
 4768              	.LVL398:
1137:Core/Src/Mytouch.c ****         temp[0]=0X00;
 4769              		.loc 1 1137 9 view .LVU1311
 4770 0136 0A20     		movs	r0, #10
 4771 0138 FFF7FEFF 		bl	HAL_Delay
 4772              	.LVL399:
1138:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1); //结束复位, 进入读坐标状态
 4773              		.loc 1 1138 9 view .LVU1312
1138:Core/Src/Mytouch.c ****         GT9147_WR_Reg(GT_CTRL_REG,temp,1); //结束复位, 进入读坐标状态
 4774              		.loc 1 1138 16 is_stmt 0 view .LVU1313
 4775 013c 8DF82040 		strb	r4, [sp, #32]
1139:Core/Src/Mytouch.c ****         res = 0;
 4776              		.loc 1 1139 9 is_stmt 1 view .LVU1314
 4777 0140 0122     		movs	r2, #1
 4778 0142 08A9     		add	r1, sp, #32
 4779 0144 48F24000 		movw	r0, #32832
 4780 0148 FFF7FEFF 		bl	GT9147_WR_Reg
 4781              	.LVL400:
1140:Core/Src/Mytouch.c ****     }
 4782              		.loc 1 1140 9 view .LVU1315
1140:Core/Src/Mytouch.c ****     }
 4783              		.loc 1 1140 9 is_stmt 0 view .LVU1316
 4784 014c CCE7     		b	.L254
 4785              	.L258:
 4786 014e 00BF     		.align	2
 4787              	.L257:
 4788 0150 00440258 		.word	1476543488
 4789 0154 001C0258 		.word	1476533248
 4790 0158 00200258 		.word	1476534272
 4791 015c 00000000 		.word	.LC12
 4792 0160 00000000 		.word	.LC9
 4793 0164 00000000 		.word	.LANCHOR9
 4794              		.cfi_endproc
 4795              	.LFE181:
 4797              		.section	.text.IIC_Init,"ax",%progbits
 4798              		.align	1
 4799              		.global	IIC_Init
 4800              		.syntax unified
 4801              		.thumb
 4802              		.thumb_func
ARM GAS  /tmp/ccNZMix7.s 			page 116


 4803              		.fpu fpv5-d16
 4805              	IIC_Init:
 4806              	.LFB191:
1272:Core/Src/Mytouch.c ****  
1273:Core/Src/Mytouch.c **** 
1274:Core/Src/Mytouch.c ****  /* 24xx */
1275:Core/Src/Mytouch.c **** 
1276:Core/Src/Mytouch.c **** 
1277:Core/Src/Mytouch.c ****  //初始化IIC接口
1278:Core/Src/Mytouch.c **** void AT24CXX_Init(void)
1279:Core/Src/Mytouch.c **** {
1280:Core/Src/Mytouch.c **** 	IIC_Init();//IIC初始化
1281:Core/Src/Mytouch.c **** }
1282:Core/Src/Mytouch.c **** //在AT24CXX指定地址读出一个数据
1283:Core/Src/Mytouch.c **** //ReadAddr:开始读数的地址  
1284:Core/Src/Mytouch.c **** //返回值  :读到的数据
1285:Core/Src/Mytouch.c **** u8 AT24CXX_ReadOneByte(u16 ReadAddr)
1286:Core/Src/Mytouch.c **** {				  
1287:Core/Src/Mytouch.c **** 	u8 temp=0;		  	    																 
1288:Core/Src/Mytouch.c ****     IIC_Start();  
1289:Core/Src/Mytouch.c **** 	if(EE_TYPE>AT24C16)
1290:Core/Src/Mytouch.c **** 	{
1291:Core/Src/Mytouch.c **** 		IIC_Send_Byte(0XA0);	   //发送写命令
1292:Core/Src/Mytouch.c **** 		IIC_Wait_Ack();
1293:Core/Src/Mytouch.c **** 		IIC_Send_Byte(ReadAddr>>8);//发送高地址	    
1294:Core/Src/Mytouch.c **** 	}else IIC_Send_Byte(0XA0+((ReadAddr/256)<<1));   //发送器件地址0XA0,写数据 	   
1295:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 
1296:Core/Src/Mytouch.c ****     IIC_Send_Byte(ReadAddr%256);   //发送低地址
1297:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	    
1298:Core/Src/Mytouch.c **** 	IIC_Start();  	 	   
1299:Core/Src/Mytouch.c **** 	IIC_Send_Byte(0XA1);           //进入接收模式			   
1300:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	 
1301:Core/Src/Mytouch.c ****     temp=IIC_Read_Byte(0);		   
1302:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件	    
1303:Core/Src/Mytouch.c **** 	return temp;
1304:Core/Src/Mytouch.c **** }
1305:Core/Src/Mytouch.c **** //在AT24CXX指定地址写入一个数据
1306:Core/Src/Mytouch.c **** //WriteAddr  :写入数据的目的地址    
1307:Core/Src/Mytouch.c **** //DataToWrite:要写入的数据
1308:Core/Src/Mytouch.c **** void AT24CXX_WriteOneByte(u16 WriteAddr,u8 DataToWrite)
1309:Core/Src/Mytouch.c **** {				   	  	    																 
1310:Core/Src/Mytouch.c ****     IIC_Start();  
1311:Core/Src/Mytouch.c **** 	if(EE_TYPE>AT24C16)
1312:Core/Src/Mytouch.c **** 	{
1313:Core/Src/Mytouch.c **** 		IIC_Send_Byte(0XA0);	    //发送写命令
1314:Core/Src/Mytouch.c **** 		IIC_Wait_Ack();
1315:Core/Src/Mytouch.c **** 		IIC_Send_Byte(WriteAddr>>8);//发送高地址	  
1316:Core/Src/Mytouch.c **** 	}else IIC_Send_Byte(0XA0+((WriteAddr/256)<<1));   //发送器件地址0XA0,写数据 	 
1317:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	   
1318:Core/Src/Mytouch.c ****     IIC_Send_Byte(WriteAddr%256);   //发送低地址
1319:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 	 										  		   
1320:Core/Src/Mytouch.c **** 	IIC_Send_Byte(DataToWrite);     //发送字节							   
1321:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();  		    	   
1322:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件 
1323:Core/Src/Mytouch.c **** 	HAL_Delay(10);	 
1324:Core/Src/Mytouch.c **** }
1325:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入长度为Len的数据
ARM GAS  /tmp/ccNZMix7.s 			page 117


1326:Core/Src/Mytouch.c **** //该函数用于写入16bit或者32bit的数据.
1327:Core/Src/Mytouch.c **** //WriteAddr  :开始写入的地址  
1328:Core/Src/Mytouch.c **** //DataToWrite:数据数组首地址
1329:Core/Src/Mytouch.c **** //Len        :要写入数据的长度2,4
1330:Core/Src/Mytouch.c **** void AT24CXX_WriteLenByte(u16 WriteAddr,u32 DataToWrite,u8 Len)
1331:Core/Src/Mytouch.c **** {  	
1332:Core/Src/Mytouch.c **** 	u8 t;
1333:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
1334:Core/Src/Mytouch.c **** 	{
1335:Core/Src/Mytouch.c **** 		AT24CXX_WriteOneByte(WriteAddr+t,(DataToWrite>>(8*t))&0xff);
1336:Core/Src/Mytouch.c **** 	}												    
1337:Core/Src/Mytouch.c **** }
1338:Core/Src/Mytouch.c **** 
1339:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始读出长度为Len的数据
1340:Core/Src/Mytouch.c **** //该函数用于读出16bit或者32bit的数据.
1341:Core/Src/Mytouch.c **** //ReadAddr   :开始读出的地址 
1342:Core/Src/Mytouch.c **** //返回值     :数据
1343:Core/Src/Mytouch.c **** //Len        :要读出数据的长度2,4
1344:Core/Src/Mytouch.c **** u32 AT24CXX_ReadLenByte(u16 ReadAddr,u8 Len)
1345:Core/Src/Mytouch.c **** {  	
1346:Core/Src/Mytouch.c **** 	u8 t;
1347:Core/Src/Mytouch.c **** 	u32 temp=0;
1348:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
1349:Core/Src/Mytouch.c **** 	{
1350:Core/Src/Mytouch.c **** 		temp<<=8;
1351:Core/Src/Mytouch.c **** 		temp+=AT24CXX_ReadOneByte(ReadAddr+Len-t-1); 	 				   
1352:Core/Src/Mytouch.c **** 	}
1353:Core/Src/Mytouch.c **** 	return temp;												    
1354:Core/Src/Mytouch.c **** }
1355:Core/Src/Mytouch.c **** //检查AT24CXX是否正常
1356:Core/Src/Mytouch.c **** //这里用了24XX的最后一个地址(255)来存储标志字.
1357:Core/Src/Mytouch.c **** //如果用其他24C系列,这个地址要修改
1358:Core/Src/Mytouch.c **** //返回1:检测失败
1359:Core/Src/Mytouch.c **** //返回0:检测成功
1360:Core/Src/Mytouch.c **** u8 AT24CXX_Check(void)
1361:Core/Src/Mytouch.c **** {
1362:Core/Src/Mytouch.c **** 	u8 temp;
1363:Core/Src/Mytouch.c **** 	temp=AT24CXX_ReadOneByte(255);//避免每次开机都写AT24CXX			   
1364:Core/Src/Mytouch.c **** 	if(temp==0X55)return 0;		   
1365:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
1366:Core/Src/Mytouch.c **** 	{
1367:Core/Src/Mytouch.c **** 		AT24CXX_WriteOneByte(255,0X55);
1368:Core/Src/Mytouch.c **** 	    temp=AT24CXX_ReadOneByte(255);	  
1369:Core/Src/Mytouch.c **** 		if(temp==0X55)return 0;
1370:Core/Src/Mytouch.c **** 	}
1371:Core/Src/Mytouch.c **** 	return 1;											  
1372:Core/Src/Mytouch.c **** }
1373:Core/Src/Mytouch.c **** 
1374:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始读出指定个数的数据
1375:Core/Src/Mytouch.c **** //ReadAddr :开始读出的地址 对24c02为0~255
1376:Core/Src/Mytouch.c **** //pBuffer  :数据数组首地址
1377:Core/Src/Mytouch.c **** //NumToRead:要读出数据的个数
1378:Core/Src/Mytouch.c **** void AT24CXX_Read(u16 ReadAddr,u8 *pBuffer,u16 NumToRead)
1379:Core/Src/Mytouch.c **** {
1380:Core/Src/Mytouch.c **** 	while(NumToRead)
1381:Core/Src/Mytouch.c **** 	{
1382:Core/Src/Mytouch.c **** 		*pBuffer++=AT24CXX_ReadOneByte(ReadAddr++);	
ARM GAS  /tmp/ccNZMix7.s 			page 118


1383:Core/Src/Mytouch.c **** 		NumToRead--;
1384:Core/Src/Mytouch.c **** 	}
1385:Core/Src/Mytouch.c **** }  
1386:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入指定个数的数据
1387:Core/Src/Mytouch.c **** //WriteAddr :开始写入的地址 对24c02为0~255
1388:Core/Src/Mytouch.c **** //pBuffer   :数据数组首地址
1389:Core/Src/Mytouch.c **** //NumToWrite:要写入数据的个数
1390:Core/Src/Mytouch.c **** void AT24CXX_Write(u16 WriteAddr,u8 *pBuffer,u16 NumToWrite)
1391:Core/Src/Mytouch.c **** {
1392:Core/Src/Mytouch.c **** 	while(NumToWrite--)
1393:Core/Src/Mytouch.c **** 	{
1394:Core/Src/Mytouch.c **** 		AT24CXX_WriteOneByte(WriteAddr,*pBuffer);
1395:Core/Src/Mytouch.c **** 		WriteAddr++;
1396:Core/Src/Mytouch.c **** 		pBuffer++;
1397:Core/Src/Mytouch.c **** 	}
1398:Core/Src/Mytouch.c **** }
1399:Core/Src/Mytouch.c **** 
1400:Core/Src/Mytouch.c **** 
1401:Core/Src/Mytouch.c **** /* MyIIC */
1402:Core/Src/Mytouch.c **** 
1403:Core/Src/Mytouch.c **** 
1404:Core/Src/Mytouch.c **** //IIC初始化
1405:Core/Src/Mytouch.c **** void IIC_Init(void)
1406:Core/Src/Mytouch.c **** {
 4807              		.loc 1 1406 1 is_stmt 1 view -0
 4808              		.cfi_startproc
 4809              		@ args = 0, pretend = 0, frame = 24
 4810              		@ frame_needed = 0, uses_anonymous_args = 0
 4811 0000 30B5     		push	{r4, r5, lr}
 4812              	.LCFI63:
 4813              		.cfi_def_cfa_offset 12
 4814              		.cfi_offset 4, -12
 4815              		.cfi_offset 5, -8
 4816              		.cfi_offset 14, -4
 4817 0002 87B0     		sub	sp, sp, #28
 4818              	.LCFI64:
 4819              		.cfi_def_cfa_offset 40
1407:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 4820              		.loc 1 1407 5 view .LVU1318
1408:Core/Src/Mytouch.c ****     
1409:Core/Src/Mytouch.c ****     __HAL_RCC_GPIOH_CLK_ENABLE();   //使能GPIOH时钟
 4821              		.loc 1 1409 5 view .LVU1319
 4822              	.LBB10:
 4823              		.loc 1 1409 5 view .LVU1320
 4824              		.loc 1 1409 5 view .LVU1321
 4825 0004 124B     		ldr	r3, .L261
 4826 0006 D3F8E020 		ldr	r2, [r3, #224]
 4827 000a 42F08002 		orr	r2, r2, #128
 4828 000e C3F8E020 		str	r2, [r3, #224]
 4829              		.loc 1 1409 5 view .LVU1322
 4830 0012 D3F8E030 		ldr	r3, [r3, #224]
 4831 0016 03F08003 		and	r3, r3, #128
 4832 001a 0093     		str	r3, [sp]
 4833              		.loc 1 1409 5 view .LVU1323
 4834 001c 009B     		ldr	r3, [sp]
 4835              	.LBE10:
 4836              		.loc 1 1409 5 view .LVU1324
ARM GAS  /tmp/ccNZMix7.s 			page 119


1410:Core/Src/Mytouch.c ****     
1411:Core/Src/Mytouch.c ****     //PH4,5初始化设置
1412:Core/Src/Mytouch.c ****     GPIO_Initure.Pin=GPIO_PIN_4|GPIO_PIN_5;
 4837              		.loc 1 1412 5 view .LVU1325
 4838              		.loc 1 1412 21 is_stmt 0 view .LVU1326
 4839 001e 3023     		movs	r3, #48
 4840 0020 0193     		str	r3, [sp, #4]
1413:Core/Src/Mytouch.c ****     GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 4841              		.loc 1 1413 5 is_stmt 1 view .LVU1327
 4842              		.loc 1 1413 22 is_stmt 0 view .LVU1328
 4843 0022 0124     		movs	r4, #1
 4844 0024 0294     		str	r4, [sp, #8]
1414:Core/Src/Mytouch.c ****     GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 4845              		.loc 1 1414 5 is_stmt 1 view .LVU1329
 4846              		.loc 1 1414 22 is_stmt 0 view .LVU1330
 4847 0026 0394     		str	r4, [sp, #12]
1415:Core/Src/Mytouch.c ****     GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;    //快速
 4848              		.loc 1 1415 5 is_stmt 1 view .LVU1331
 4849              		.loc 1 1415 23 is_stmt 0 view .LVU1332
 4850 0028 0323     		movs	r3, #3
 4851 002a 0493     		str	r3, [sp, #16]
1416:Core/Src/Mytouch.c ****     HAL_GPIO_Init(GPIOH,&GPIO_Initure);
 4852              		.loc 1 1416 5 is_stmt 1 view .LVU1333
 4853 002c 094D     		ldr	r5, .L261+4
 4854 002e 01A9     		add	r1, sp, #4
 4855 0030 2846     		mov	r0, r5
 4856 0032 FFF7FEFF 		bl	HAL_GPIO_Init
 4857              	.LVL401:
1417:Core/Src/Mytouch.c ****     
1418:Core/Src/Mytouch.c ****     IIC_SDA(1);
 4858              		.loc 1 1418 5 view .LVU1334
 4859 0036 2246     		mov	r2, r4
 4860 0038 2021     		movs	r1, #32
 4861 003a 2846     		mov	r0, r5
 4862 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 4863              	.LVL402:
1419:Core/Src/Mytouch.c ****     IIC_SCL(1);  
 4864              		.loc 1 1419 5 view .LVU1335
 4865 0040 2246     		mov	r2, r4
 4866 0042 1021     		movs	r1, #16
 4867 0044 2846     		mov	r0, r5
 4868 0046 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4869              	.LVL403:
1420:Core/Src/Mytouch.c **** }
 4870              		.loc 1 1420 1 is_stmt 0 view .LVU1336
 4871 004a 07B0     		add	sp, sp, #28
 4872              	.LCFI65:
 4873              		.cfi_def_cfa_offset 12
 4874              		@ sp needed
 4875 004c 30BD     		pop	{r4, r5, pc}
 4876              	.L262:
 4877 004e 00BF     		.align	2
 4878              	.L261:
 4879 0050 00440258 		.word	1476543488
 4880 0054 001C0258 		.word	1476533248
 4881              		.cfi_endproc
 4882              	.LFE191:
ARM GAS  /tmp/ccNZMix7.s 			page 120


 4884              		.section	.text.AT24CXX_Init,"ax",%progbits
 4885              		.align	1
 4886              		.global	AT24CXX_Init
 4887              		.syntax unified
 4888              		.thumb
 4889              		.thumb_func
 4890              		.fpu fpv5-d16
 4892              	AT24CXX_Init:
 4893              	.LFB183:
1279:Core/Src/Mytouch.c **** 	IIC_Init();//IIC初始化
 4894              		.loc 1 1279 1 is_stmt 1 view -0
 4895              		.cfi_startproc
 4896              		@ args = 0, pretend = 0, frame = 0
 4897              		@ frame_needed = 0, uses_anonymous_args = 0
 4898 0000 08B5     		push	{r3, lr}
 4899              	.LCFI66:
 4900              		.cfi_def_cfa_offset 8
 4901              		.cfi_offset 3, -8
 4902              		.cfi_offset 14, -4
1280:Core/Src/Mytouch.c **** }
 4903              		.loc 1 1280 2 view .LVU1338
 4904 0002 FFF7FEFF 		bl	IIC_Init
 4905              	.LVL404:
1281:Core/Src/Mytouch.c **** //在AT24CXX指定地址读出一个数据
 4906              		.loc 1 1281 1 is_stmt 0 view .LVU1339
 4907 0006 08BD     		pop	{r3, pc}
 4908              		.cfi_endproc
 4909              	.LFE183:
 4911              		.section	.text.IIC_Start,"ax",%progbits
 4912              		.align	1
 4913              		.global	IIC_Start
 4914              		.syntax unified
 4915              		.thumb
 4916              		.thumb_func
 4917              		.fpu fpv5-d16
 4919              	IIC_Start:
 4920              	.LFB192:
1421:Core/Src/Mytouch.c **** 
1422:Core/Src/Mytouch.c **** //产生IIC起始信号
1423:Core/Src/Mytouch.c **** void IIC_Start(void)
1424:Core/Src/Mytouch.c **** {
 4921              		.loc 1 1424 1 is_stmt 1 view -0
 4922              		.cfi_startproc
 4923              		@ args = 0, pretend = 0, frame = 0
 4924              		@ frame_needed = 0, uses_anonymous_args = 0
 4925 0000 10B5     		push	{r4, lr}
 4926              	.LCFI67:
 4927              		.cfi_def_cfa_offset 8
 4928              		.cfi_offset 4, -8
 4929              		.cfi_offset 14, -4
1425:Core/Src/Mytouch.c **** 	SDA_OUT();     //sda线输出
 4930              		.loc 1 1425 2 view .LVU1341
 4931 0002 124C     		ldr	r4, .L267
 4932 0004 2368     		ldr	r3, [r4]
 4933 0006 23F44063 		bic	r3, r3, #3072
 4934 000a 2360     		str	r3, [r4]
 4935              		.loc 1 1425 2 view .LVU1342
ARM GAS  /tmp/ccNZMix7.s 			page 121


 4936 000c 2368     		ldr	r3, [r4]
 4937 000e 43F48063 		orr	r3, r3, #1024
 4938 0012 2360     		str	r3, [r4]
 4939              		.loc 1 1425 11 view .LVU1343
1426:Core/Src/Mytouch.c **** 	IIC_SDA(1);	  	  
 4940              		.loc 1 1426 2 view .LVU1344
 4941 0014 0122     		movs	r2, #1
 4942 0016 2021     		movs	r1, #32
 4943 0018 2046     		mov	r0, r4
 4944 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 4945              	.LVL405:
1427:Core/Src/Mytouch.c **** 	IIC_SCL(1);
 4946              		.loc 1 1427 2 view .LVU1345
 4947 001e 0122     		movs	r2, #1
 4948 0020 1021     		movs	r1, #16
 4949 0022 2046     		mov	r0, r4
 4950 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4951              	.LVL406:
1428:Core/Src/Mytouch.c **** 	delay_us(4);
 4952              		.loc 1 1428 2 view .LVU1346
 4953 0028 0420     		movs	r0, #4
 4954 002a FFF7FEFF 		bl	delay_us
 4955              	.LVL407:
1429:Core/Src/Mytouch.c ****  	IIC_SDA(0);//START:when CLK is high,DATA change form high to low 
 4956              		.loc 1 1429 3 view .LVU1347
 4957 002e 0022     		movs	r2, #0
 4958 0030 2021     		movs	r1, #32
 4959 0032 2046     		mov	r0, r4
 4960 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4961              	.LVL408:
1430:Core/Src/Mytouch.c **** 	delay_us(4);
 4962              		.loc 1 1430 2 view .LVU1348
 4963 0038 0420     		movs	r0, #4
 4964 003a FFF7FEFF 		bl	delay_us
 4965              	.LVL409:
1431:Core/Src/Mytouch.c **** 	IIC_SCL(0);//钳住I2C总线，准备发送或接收数据 
 4966              		.loc 1 1431 2 view .LVU1349
 4967 003e 0022     		movs	r2, #0
 4968 0040 1021     		movs	r1, #16
 4969 0042 2046     		mov	r0, r4
 4970 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 4971              	.LVL410:
1432:Core/Src/Mytouch.c **** }	  
 4972              		.loc 1 1432 1 is_stmt 0 view .LVU1350
 4973 0048 10BD     		pop	{r4, pc}
 4974              	.L268:
 4975 004a 00BF     		.align	2
 4976              	.L267:
 4977 004c 001C0258 		.word	1476533248
 4978              		.cfi_endproc
 4979              	.LFE192:
 4981              		.section	.text.IIC_Stop,"ax",%progbits
 4982              		.align	1
 4983              		.global	IIC_Stop
 4984              		.syntax unified
 4985              		.thumb
 4986              		.thumb_func
ARM GAS  /tmp/ccNZMix7.s 			page 122


 4987              		.fpu fpv5-d16
 4989              	IIC_Stop:
 4990              	.LFB193:
1433:Core/Src/Mytouch.c **** //产生IIC停止信号
1434:Core/Src/Mytouch.c **** void IIC_Stop(void)
1435:Core/Src/Mytouch.c **** {
 4991              		.loc 1 1435 1 is_stmt 1 view -0
 4992              		.cfi_startproc
 4993              		@ args = 0, pretend = 0, frame = 0
 4994              		@ frame_needed = 0, uses_anonymous_args = 0
 4995 0000 10B5     		push	{r4, lr}
 4996              	.LCFI68:
 4997              		.cfi_def_cfa_offset 8
 4998              		.cfi_offset 4, -8
 4999              		.cfi_offset 14, -4
1436:Core/Src/Mytouch.c **** 	SDA_OUT();//sda线输出
 5000              		.loc 1 1436 2 view .LVU1352
 5001 0002 124C     		ldr	r4, .L271
 5002 0004 2368     		ldr	r3, [r4]
 5003 0006 23F44063 		bic	r3, r3, #3072
 5004 000a 2360     		str	r3, [r4]
 5005              		.loc 1 1436 2 view .LVU1353
 5006 000c 2368     		ldr	r3, [r4]
 5007 000e 43F48063 		orr	r3, r3, #1024
 5008 0012 2360     		str	r3, [r4]
 5009              		.loc 1 1436 11 view .LVU1354
1437:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 5010              		.loc 1 1437 2 view .LVU1355
 5011 0014 0022     		movs	r2, #0
 5012 0016 1021     		movs	r1, #16
 5013 0018 2046     		mov	r0, r4
 5014 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 5015              	.LVL411:
1438:Core/Src/Mytouch.c **** 	IIC_SDA(0);//STOP:when CLK is high DATA change form low to high
 5016              		.loc 1 1438 2 view .LVU1356
 5017 001e 0022     		movs	r2, #0
 5018 0020 2021     		movs	r1, #32
 5019 0022 2046     		mov	r0, r4
 5020 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5021              	.LVL412:
1439:Core/Src/Mytouch.c ****  	delay_us(4);
 5022              		.loc 1 1439 3 view .LVU1357
 5023 0028 0420     		movs	r0, #4
 5024 002a FFF7FEFF 		bl	delay_us
 5025              	.LVL413:
1440:Core/Src/Mytouch.c **** 	IIC_SCL(1); 
 5026              		.loc 1 1440 2 view .LVU1358
 5027 002e 0122     		movs	r2, #1
 5028 0030 1021     		movs	r1, #16
 5029 0032 2046     		mov	r0, r4
 5030 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5031              	.LVL414:
1441:Core/Src/Mytouch.c **** 	IIC_SDA(1);//发送I2C总线结束信号
 5032              		.loc 1 1441 2 view .LVU1359
 5033 0038 0122     		movs	r2, #1
 5034 003a 2021     		movs	r1, #32
 5035 003c 2046     		mov	r0, r4
ARM GAS  /tmp/ccNZMix7.s 			page 123


 5036 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5037              	.LVL415:
1442:Core/Src/Mytouch.c **** 	delay_us(4);							   	
 5038              		.loc 1 1442 2 view .LVU1360
 5039 0042 0420     		movs	r0, #4
 5040 0044 FFF7FEFF 		bl	delay_us
 5041              	.LVL416:
1443:Core/Src/Mytouch.c **** }
 5042              		.loc 1 1443 1 is_stmt 0 view .LVU1361
 5043 0048 10BD     		pop	{r4, pc}
 5044              	.L272:
 5045 004a 00BF     		.align	2
 5046              	.L271:
 5047 004c 001C0258 		.word	1476533248
 5048              		.cfi_endproc
 5049              	.LFE193:
 5051              		.section	.text.IIC_Wait_Ack,"ax",%progbits
 5052              		.align	1
 5053              		.global	IIC_Wait_Ack
 5054              		.syntax unified
 5055              		.thumb
 5056              		.thumb_func
 5057              		.fpu fpv5-d16
 5059              	IIC_Wait_Ack:
 5060              	.LFB194:
1444:Core/Src/Mytouch.c **** //等待应答信号到来
1445:Core/Src/Mytouch.c **** //返回值：1，接收应答失败
1446:Core/Src/Mytouch.c **** //        0，接收应答成功
1447:Core/Src/Mytouch.c **** u8 IIC_Wait_Ack(void)
1448:Core/Src/Mytouch.c **** {
 5061              		.loc 1 1448 1 is_stmt 1 view -0
 5062              		.cfi_startproc
 5063              		@ args = 0, pretend = 0, frame = 0
 5064              		@ frame_needed = 0, uses_anonymous_args = 0
 5065 0000 38B5     		push	{r3, r4, r5, lr}
 5066              	.LCFI69:
 5067              		.cfi_def_cfa_offset 16
 5068              		.cfi_offset 3, -16
 5069              		.cfi_offset 4, -12
 5070              		.cfi_offset 5, -8
 5071              		.cfi_offset 14, -4
1449:Core/Src/Mytouch.c **** 	u8 ucErrTime=0;
 5072              		.loc 1 1449 2 view .LVU1363
 5073              	.LVL417:
1450:Core/Src/Mytouch.c **** 	SDA_IN();      //SDA设置为输入  
 5074              		.loc 1 1450 2 view .LVU1364
 5075 0002 164C     		ldr	r4, .L279
 5076 0004 2368     		ldr	r3, [r4]
 5077 0006 23F44063 		bic	r3, r3, #3072
 5078 000a 2360     		str	r3, [r4]
 5079              		.loc 1 1450 2 view .LVU1365
 5080 000c 2368     		ldr	r3, [r4]
 5081 000e 2360     		str	r3, [r4]
 5082              		.loc 1 1450 10 view .LVU1366
1451:Core/Src/Mytouch.c **** 	IIC_SDA(1);delay_us(1);	   
 5083              		.loc 1 1451 2 view .LVU1367
 5084 0010 0122     		movs	r2, #1
ARM GAS  /tmp/ccNZMix7.s 			page 124


 5085 0012 2021     		movs	r1, #32
 5086 0014 2046     		mov	r0, r4
 5087 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5088              	.LVL418:
 5089              		.loc 1 1451 13 view .LVU1368
 5090 001a 0120     		movs	r0, #1
 5091 001c FFF7FEFF 		bl	delay_us
 5092              	.LVL419:
1452:Core/Src/Mytouch.c **** 	IIC_SCL(1);delay_us(1);	 
 5093              		.loc 1 1452 2 view .LVU1369
 5094 0020 0122     		movs	r2, #1
 5095 0022 1021     		movs	r1, #16
 5096 0024 2046     		mov	r0, r4
 5097 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5098              	.LVL420:
 5099              		.loc 1 1452 13 view .LVU1370
 5100 002a 0120     		movs	r0, #1
 5101 002c FFF7FEFF 		bl	delay_us
 5102              	.LVL421:
1453:Core/Src/Mytouch.c **** 	while(READ_SDA)
 5103              		.loc 1 1453 2 view .LVU1371
1449:Core/Src/Mytouch.c **** 	SDA_IN();      //SDA设置为输入  
 5104              		.loc 1 1449 5 is_stmt 0 view .LVU1372
 5105 0030 0024     		movs	r4, #0
 5106              	.LVL422:
 5107              	.L274:
 5108              		.loc 1 1453 7 is_stmt 1 view .LVU1373
 5109              		.loc 1 1453 8 is_stmt 0 view .LVU1374
 5110 0032 2021     		movs	r1, #32
 5111 0034 0948     		ldr	r0, .L279
 5112 0036 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 5113              	.LVL423:
 5114              		.loc 1 1453 7 view .LVU1375
 5115 003a 0546     		mov	r5, r0
 5116 003c 38B1     		cbz	r0, .L278
1454:Core/Src/Mytouch.c **** 	{
1455:Core/Src/Mytouch.c **** 		ucErrTime++;
 5117              		.loc 1 1455 3 is_stmt 1 view .LVU1376
 5118              		.loc 1 1455 12 is_stmt 0 view .LVU1377
 5119 003e 0134     		adds	r4, r4, #1
 5120              	.LVL424:
 5121              		.loc 1 1455 12 view .LVU1378
 5122 0040 E4B2     		uxtb	r4, r4
 5123              	.LVL425:
1456:Core/Src/Mytouch.c **** 		if(ucErrTime>250)
 5124              		.loc 1 1456 3 is_stmt 1 view .LVU1379
 5125              		.loc 1 1456 5 is_stmt 0 view .LVU1380
 5126 0042 FA2C     		cmp	r4, #250
 5127 0044 F5D9     		bls	.L274
1457:Core/Src/Mytouch.c **** 		{
1458:Core/Src/Mytouch.c **** 			IIC_Stop();
 5128              		.loc 1 1458 4 is_stmt 1 view .LVU1381
 5129 0046 FFF7FEFF 		bl	IIC_Stop
 5130              	.LVL426:
1459:Core/Src/Mytouch.c **** 			return 1;
 5131              		.loc 1 1459 4 view .LVU1382
 5132              		.loc 1 1459 11 is_stmt 0 view .LVU1383
ARM GAS  /tmp/ccNZMix7.s 			page 125


 5133 004a 0125     		movs	r5, #1
 5134 004c 04E0     		b	.L275
 5135              	.L278:
1460:Core/Src/Mytouch.c **** 		}
1461:Core/Src/Mytouch.c **** 	}
1462:Core/Src/Mytouch.c **** 	IIC_SCL(0);//时钟输出0 	   
 5136              		.loc 1 1462 2 is_stmt 1 view .LVU1384
 5137 004e 0022     		movs	r2, #0
 5138 0050 1021     		movs	r1, #16
 5139 0052 0248     		ldr	r0, .L279
 5140 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5141              	.LVL427:
1463:Core/Src/Mytouch.c **** 	return 0;  
 5142              		.loc 1 1463 2 view .LVU1385
 5143              	.L275:
1464:Core/Src/Mytouch.c **** } 
 5144              		.loc 1 1464 1 is_stmt 0 view .LVU1386
 5145 0058 2846     		mov	r0, r5
 5146 005a 38BD     		pop	{r3, r4, r5, pc}
 5147              	.LVL428:
 5148              	.L280:
 5149              		.loc 1 1464 1 view .LVU1387
 5150              		.align	2
 5151              	.L279:
 5152 005c 001C0258 		.word	1476533248
 5153              		.cfi_endproc
 5154              	.LFE194:
 5156              		.section	.text.IIC_Ack,"ax",%progbits
 5157              		.align	1
 5158              		.global	IIC_Ack
 5159              		.syntax unified
 5160              		.thumb
 5161              		.thumb_func
 5162              		.fpu fpv5-d16
 5164              	IIC_Ack:
 5165              	.LFB195:
1465:Core/Src/Mytouch.c **** //产生ACK应答
1466:Core/Src/Mytouch.c **** void IIC_Ack(void)
1467:Core/Src/Mytouch.c **** {
 5166              		.loc 1 1467 1 is_stmt 1 view -0
 5167              		.cfi_startproc
 5168              		@ args = 0, pretend = 0, frame = 0
 5169              		@ frame_needed = 0, uses_anonymous_args = 0
 5170 0000 10B5     		push	{r4, lr}
 5171              	.LCFI70:
 5172              		.cfi_def_cfa_offset 8
 5173              		.cfi_offset 4, -8
 5174              		.cfi_offset 14, -4
1468:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 5175              		.loc 1 1468 2 view .LVU1389
 5176 0002 124C     		ldr	r4, .L283
 5177 0004 0022     		movs	r2, #0
 5178 0006 1021     		movs	r1, #16
 5179 0008 2046     		mov	r0, r4
 5180 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 5181              	.LVL429:
1469:Core/Src/Mytouch.c **** 	SDA_OUT();
ARM GAS  /tmp/ccNZMix7.s 			page 126


 5182              		.loc 1 1469 2 view .LVU1390
 5183 000e 2368     		ldr	r3, [r4]
 5184 0010 23F44063 		bic	r3, r3, #3072
 5185 0014 2360     		str	r3, [r4]
 5186              		.loc 1 1469 2 view .LVU1391
 5187 0016 2368     		ldr	r3, [r4]
 5188 0018 43F48063 		orr	r3, r3, #1024
 5189 001c 2360     		str	r3, [r4]
 5190              		.loc 1 1469 11 view .LVU1392
1470:Core/Src/Mytouch.c **** 	IIC_SDA(0);
 5191              		.loc 1 1470 2 view .LVU1393
 5192 001e 0022     		movs	r2, #0
 5193 0020 2021     		movs	r1, #32
 5194 0022 2046     		mov	r0, r4
 5195 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5196              	.LVL430:
1471:Core/Src/Mytouch.c **** 	delay_us(2);
 5197              		.loc 1 1471 2 view .LVU1394
 5198 0028 0220     		movs	r0, #2
 5199 002a FFF7FEFF 		bl	delay_us
 5200              	.LVL431:
1472:Core/Src/Mytouch.c **** 	IIC_SCL(1);
 5201              		.loc 1 1472 2 view .LVU1395
 5202 002e 0122     		movs	r2, #1
 5203 0030 1021     		movs	r1, #16
 5204 0032 2046     		mov	r0, r4
 5205 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5206              	.LVL432:
1473:Core/Src/Mytouch.c **** 	delay_us(2);
 5207              		.loc 1 1473 2 view .LVU1396
 5208 0038 0220     		movs	r0, #2
 5209 003a FFF7FEFF 		bl	delay_us
 5210              	.LVL433:
1474:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 5211              		.loc 1 1474 2 view .LVU1397
 5212 003e 0022     		movs	r2, #0
 5213 0040 1021     		movs	r1, #16
 5214 0042 2046     		mov	r0, r4
 5215 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5216              	.LVL434:
1475:Core/Src/Mytouch.c **** }
 5217              		.loc 1 1475 1 is_stmt 0 view .LVU1398
 5218 0048 10BD     		pop	{r4, pc}
 5219              	.L284:
 5220 004a 00BF     		.align	2
 5221              	.L283:
 5222 004c 001C0258 		.word	1476533248
 5223              		.cfi_endproc
 5224              	.LFE195:
 5226              		.section	.text.IIC_NAck,"ax",%progbits
 5227              		.align	1
 5228              		.global	IIC_NAck
 5229              		.syntax unified
 5230              		.thumb
 5231              		.thumb_func
 5232              		.fpu fpv5-d16
 5234              	IIC_NAck:
ARM GAS  /tmp/ccNZMix7.s 			page 127


 5235              	.LFB196:
1476:Core/Src/Mytouch.c **** //不产生ACK应答		    
1477:Core/Src/Mytouch.c **** void IIC_NAck(void)
1478:Core/Src/Mytouch.c **** {
 5236              		.loc 1 1478 1 is_stmt 1 view -0
 5237              		.cfi_startproc
 5238              		@ args = 0, pretend = 0, frame = 0
 5239              		@ frame_needed = 0, uses_anonymous_args = 0
 5240 0000 10B5     		push	{r4, lr}
 5241              	.LCFI71:
 5242              		.cfi_def_cfa_offset 8
 5243              		.cfi_offset 4, -8
 5244              		.cfi_offset 14, -4
1479:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 5245              		.loc 1 1479 2 view .LVU1400
 5246 0002 124C     		ldr	r4, .L287
 5247 0004 0022     		movs	r2, #0
 5248 0006 1021     		movs	r1, #16
 5249 0008 2046     		mov	r0, r4
 5250 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 5251              	.LVL435:
1480:Core/Src/Mytouch.c **** 	SDA_OUT();
 5252              		.loc 1 1480 2 view .LVU1401
 5253 000e 2368     		ldr	r3, [r4]
 5254 0010 23F44063 		bic	r3, r3, #3072
 5255 0014 2360     		str	r3, [r4]
 5256              		.loc 1 1480 2 view .LVU1402
 5257 0016 2368     		ldr	r3, [r4]
 5258 0018 43F48063 		orr	r3, r3, #1024
 5259 001c 2360     		str	r3, [r4]
 5260              		.loc 1 1480 11 view .LVU1403
1481:Core/Src/Mytouch.c **** 	IIC_SDA(1);
 5261              		.loc 1 1481 2 view .LVU1404
 5262 001e 0122     		movs	r2, #1
 5263 0020 2021     		movs	r1, #32
 5264 0022 2046     		mov	r0, r4
 5265 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5266              	.LVL436:
1482:Core/Src/Mytouch.c **** 	delay_us(2);
 5267              		.loc 1 1482 2 view .LVU1405
 5268 0028 0220     		movs	r0, #2
 5269 002a FFF7FEFF 		bl	delay_us
 5270              	.LVL437:
1483:Core/Src/Mytouch.c **** 	IIC_SCL(1);
 5271              		.loc 1 1483 2 view .LVU1406
 5272 002e 0122     		movs	r2, #1
 5273 0030 1021     		movs	r1, #16
 5274 0032 2046     		mov	r0, r4
 5275 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5276              	.LVL438:
1484:Core/Src/Mytouch.c **** 	delay_us(2);
 5277              		.loc 1 1484 2 view .LVU1407
 5278 0038 0220     		movs	r0, #2
 5279 003a FFF7FEFF 		bl	delay_us
 5280              	.LVL439:
1485:Core/Src/Mytouch.c **** 	IIC_SCL(0);
 5281              		.loc 1 1485 2 view .LVU1408
ARM GAS  /tmp/ccNZMix7.s 			page 128


 5282 003e 0022     		movs	r2, #0
 5283 0040 1021     		movs	r1, #16
 5284 0042 2046     		mov	r0, r4
 5285 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5286              	.LVL440:
1486:Core/Src/Mytouch.c **** }					 				     
 5287              		.loc 1 1486 1 is_stmt 0 view .LVU1409
 5288 0048 10BD     		pop	{r4, pc}
 5289              	.L288:
 5290 004a 00BF     		.align	2
 5291              	.L287:
 5292 004c 001C0258 		.word	1476533248
 5293              		.cfi_endproc
 5294              	.LFE196:
 5296              		.section	.text.IIC_Send_Byte,"ax",%progbits
 5297              		.align	1
 5298              		.global	IIC_Send_Byte
 5299              		.syntax unified
 5300              		.thumb
 5301              		.thumb_func
 5302              		.fpu fpv5-d16
 5304              	IIC_Send_Byte:
 5305              	.LVL441:
 5306              	.LFB197:
1487:Core/Src/Mytouch.c **** //IIC发送一个字节
1488:Core/Src/Mytouch.c **** //返回从机有无应答
1489:Core/Src/Mytouch.c **** //1，有应答
1490:Core/Src/Mytouch.c **** //0，无应答			  
1491:Core/Src/Mytouch.c **** void IIC_Send_Byte(u8 txd)
1492:Core/Src/Mytouch.c **** {                        
 5307              		.loc 1 1492 1 is_stmt 1 view -0
 5308              		.cfi_startproc
 5309              		@ args = 0, pretend = 0, frame = 0
 5310              		@ frame_needed = 0, uses_anonymous_args = 0
 5311              		.loc 1 1492 1 is_stmt 0 view .LVU1411
 5312 0000 70B5     		push	{r4, r5, r6, lr}
 5313              	.LCFI72:
 5314              		.cfi_def_cfa_offset 16
 5315              		.cfi_offset 4, -16
 5316              		.cfi_offset 5, -12
 5317              		.cfi_offset 6, -8
 5318              		.cfi_offset 14, -4
 5319 0002 0446     		mov	r4, r0
1493:Core/Src/Mytouch.c ****     u8 t;   
 5320              		.loc 1 1493 5 is_stmt 1 view .LVU1412
1494:Core/Src/Mytouch.c **** 	SDA_OUT(); 	    
 5321              		.loc 1 1494 2 view .LVU1413
 5322 0004 1B48     		ldr	r0, .L296
 5323              	.LVL442:
 5324              		.loc 1 1494 2 is_stmt 0 view .LVU1414
 5325 0006 0368     		ldr	r3, [r0]
 5326 0008 23F44063 		bic	r3, r3, #3072
 5327 000c 0360     		str	r3, [r0]
 5328              		.loc 1 1494 2 is_stmt 1 view .LVU1415
 5329 000e 0368     		ldr	r3, [r0]
 5330 0010 43F48063 		orr	r3, r3, #1024
 5331 0014 0360     		str	r3, [r0]
ARM GAS  /tmp/ccNZMix7.s 			page 129


 5332              		.loc 1 1494 11 view .LVU1416
1495:Core/Src/Mytouch.c ****     IIC_SCL(0);//拉低时钟开始数据传输
 5333              		.loc 1 1495 5 view .LVU1417
 5334 0016 0022     		movs	r2, #0
 5335 0018 1021     		movs	r1, #16
 5336 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 5337              	.LVL443:
1496:Core/Src/Mytouch.c ****     for(t=0;t<8;t++)
 5338              		.loc 1 1496 5 view .LVU1418
 5339              		.loc 1 1496 10 is_stmt 0 view .LVU1419
 5340 001e 0025     		movs	r5, #0
 5341              		.loc 1 1496 5 view .LVU1420
 5342 0020 1CE0     		b	.L290
 5343              	.LVL444:
 5344              	.L291:
1497:Core/Src/Mytouch.c ****     {              
1498:Core/Src/Mytouch.c ****         IIC_SDA((txd&0x80)>>7);
 5345              		.loc 1 1498 9 discriminator 2 view .LVU1421
 5346 0022 0022     		movs	r2, #0
 5347 0024 2021     		movs	r1, #32
 5348 0026 1348     		ldr	r0, .L296
 5349 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 5350              	.LVL445:
 5351              	.L292:
1499:Core/Src/Mytouch.c ****         txd<<=1; 	  
 5352              		.loc 1 1499 9 is_stmt 1 discriminator 2 view .LVU1422
 5353              		.loc 1 1499 12 is_stmt 0 discriminator 2 view .LVU1423
 5354 002c 6400     		lsls	r4, r4, #1
 5355              	.LVL446:
 5356              		.loc 1 1499 12 discriminator 2 view .LVU1424
 5357 002e E4B2     		uxtb	r4, r4
 5358              	.LVL447:
1500:Core/Src/Mytouch.c **** 		delay_us(2);   //对TEA5767这三个延时都是必须的
 5359              		.loc 1 1500 3 is_stmt 1 discriminator 2 view .LVU1425
 5360 0030 0220     		movs	r0, #2
 5361 0032 FFF7FEFF 		bl	delay_us
 5362              	.LVL448:
1501:Core/Src/Mytouch.c **** 		IIC_SCL(1);
 5363              		.loc 1 1501 3 discriminator 2 view .LVU1426
 5364 0036 0F4E     		ldr	r6, .L296
 5365 0038 0122     		movs	r2, #1
 5366 003a 1021     		movs	r1, #16
 5367 003c 3046     		mov	r0, r6
 5368 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5369              	.LVL449:
1502:Core/Src/Mytouch.c **** 		delay_us(2); 
 5370              		.loc 1 1502 3 discriminator 2 view .LVU1427
 5371 0042 0220     		movs	r0, #2
 5372 0044 FFF7FEFF 		bl	delay_us
 5373              	.LVL450:
1503:Core/Src/Mytouch.c **** 		IIC_SCL(0);	
 5374              		.loc 1 1503 3 discriminator 2 view .LVU1428
 5375 0048 0022     		movs	r2, #0
 5376 004a 1021     		movs	r1, #16
 5377 004c 3046     		mov	r0, r6
 5378 004e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5379              	.LVL451:
ARM GAS  /tmp/ccNZMix7.s 			page 130


1504:Core/Src/Mytouch.c **** 		delay_us(2);
 5380              		.loc 1 1504 3 discriminator 2 view .LVU1429
 5381 0052 0220     		movs	r0, #2
 5382 0054 FFF7FEFF 		bl	delay_us
 5383              	.LVL452:
1496:Core/Src/Mytouch.c ****     {              
 5384              		.loc 1 1496 17 discriminator 2 view .LVU1430
1496:Core/Src/Mytouch.c ****     {              
 5385              		.loc 1 1496 18 is_stmt 0 discriminator 2 view .LVU1431
 5386 0058 0135     		adds	r5, r5, #1
 5387              	.LVL453:
1496:Core/Src/Mytouch.c ****     {              
 5388              		.loc 1 1496 18 discriminator 2 view .LVU1432
 5389 005a EDB2     		uxtb	r5, r5
 5390              	.LVL454:
 5391              	.L290:
1496:Core/Src/Mytouch.c ****     {              
 5392              		.loc 1 1496 13 is_stmt 1 discriminator 1 view .LVU1433
1496:Core/Src/Mytouch.c ****     {              
 5393              		.loc 1 1496 5 is_stmt 0 discriminator 1 view .LVU1434
 5394 005c 072D     		cmp	r5, #7
 5395 005e 08D8     		bhi	.L295
1498:Core/Src/Mytouch.c ****         txd<<=1; 	  
 5396              		.loc 1 1498 9 is_stmt 1 view .LVU1435
 5397 0060 14F0800F 		tst	r4, #128
 5398 0064 DDD0     		beq	.L291
1498:Core/Src/Mytouch.c ****         txd<<=1; 	  
 5399              		.loc 1 1498 9 is_stmt 0 discriminator 1 view .LVU1436
 5400 0066 0122     		movs	r2, #1
 5401 0068 2021     		movs	r1, #32
 5402 006a 0248     		ldr	r0, .L296
 5403 006c FFF7FEFF 		bl	HAL_GPIO_WritePin
 5404              	.LVL455:
 5405 0070 DCE7     		b	.L292
 5406              	.L295:
1505:Core/Src/Mytouch.c ****     }	 
1506:Core/Src/Mytouch.c **** } 	    
 5407              		.loc 1 1506 1 view .LVU1437
 5408 0072 70BD     		pop	{r4, r5, r6, pc}
 5409              	.LVL456:
 5410              	.L297:
 5411              		.loc 1 1506 1 view .LVU1438
 5412              		.align	2
 5413              	.L296:
 5414 0074 001C0258 		.word	1476533248
 5415              		.cfi_endproc
 5416              	.LFE197:
 5418              		.section	.text.AT24CXX_WriteOneByte,"ax",%progbits
 5419              		.align	1
 5420              		.global	AT24CXX_WriteOneByte
 5421              		.syntax unified
 5422              		.thumb
 5423              		.thumb_func
 5424              		.fpu fpv5-d16
 5426              	AT24CXX_WriteOneByte:
 5427              	.LVL457:
 5428              	.LFB185:
ARM GAS  /tmp/ccNZMix7.s 			page 131


1309:Core/Src/Mytouch.c ****     IIC_Start();  
 5429              		.loc 1 1309 1 is_stmt 1 view -0
 5430              		.cfi_startproc
 5431              		@ args = 0, pretend = 0, frame = 0
 5432              		@ frame_needed = 0, uses_anonymous_args = 0
1309:Core/Src/Mytouch.c ****     IIC_Start();  
 5433              		.loc 1 1309 1 is_stmt 0 view .LVU1440
 5434 0000 38B5     		push	{r3, r4, r5, lr}
 5435              	.LCFI73:
 5436              		.cfi_def_cfa_offset 16
 5437              		.cfi_offset 3, -16
 5438              		.cfi_offset 4, -12
 5439              		.cfi_offset 5, -8
 5440              		.cfi_offset 14, -4
 5441 0002 0446     		mov	r4, r0
 5442 0004 0D46     		mov	r5, r1
1310:Core/Src/Mytouch.c **** 	if(EE_TYPE>AT24C16)
 5443              		.loc 1 1310 5 is_stmt 1 view .LVU1441
 5444 0006 FFF7FEFF 		bl	IIC_Start
 5445              	.LVL458:
1311:Core/Src/Mytouch.c **** 	{
 5446              		.loc 1 1311 2 view .LVU1442
1316:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	   
 5447              		.loc 1 1316 8 view .LVU1443
1316:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	   
 5448              		.loc 1 1316 43 is_stmt 0 view .LVU1444
 5449 000a 230A     		lsrs	r3, r4, #8
 5450 000c 5B00     		lsls	r3, r3, #1
 5451 000e DBB2     		uxtb	r3, r3
1316:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	   
 5452              		.loc 1 1316 8 view .LVU1445
 5453 0010 603B     		subs	r3, r3, #96
 5454 0012 03F0FE00 		and	r0, r3, #254
 5455 0016 FFF7FEFF 		bl	IIC_Send_Byte
 5456              	.LVL459:
1317:Core/Src/Mytouch.c ****     IIC_Send_Byte(WriteAddr%256);   //发送低地址
 5457              		.loc 1 1317 2 is_stmt 1 view .LVU1446
 5458 001a FFF7FEFF 		bl	IIC_Wait_Ack
 5459              	.LVL460:
1318:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 	 										  		   
 5460              		.loc 1 1318 5 view .LVU1447
 5461 001e E0B2     		uxtb	r0, r4
 5462 0020 FFF7FEFF 		bl	IIC_Send_Byte
 5463              	.LVL461:
1319:Core/Src/Mytouch.c **** 	IIC_Send_Byte(DataToWrite);     //发送字节							   
 5464              		.loc 1 1319 2 view .LVU1448
 5465 0024 FFF7FEFF 		bl	IIC_Wait_Ack
 5466              	.LVL462:
1320:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();  		    	   
 5467              		.loc 1 1320 2 view .LVU1449
 5468 0028 2846     		mov	r0, r5
 5469 002a FFF7FEFF 		bl	IIC_Send_Byte
 5470              	.LVL463:
1321:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件 
 5471              		.loc 1 1321 2 view .LVU1450
 5472 002e FFF7FEFF 		bl	IIC_Wait_Ack
 5473              	.LVL464:
ARM GAS  /tmp/ccNZMix7.s 			page 132


1322:Core/Src/Mytouch.c **** 	HAL_Delay(10);	 
 5474              		.loc 1 1322 5 view .LVU1451
 5475 0032 FFF7FEFF 		bl	IIC_Stop
 5476              	.LVL465:
1323:Core/Src/Mytouch.c **** }
 5477              		.loc 1 1323 2 view .LVU1452
 5478 0036 0A20     		movs	r0, #10
 5479 0038 FFF7FEFF 		bl	HAL_Delay
 5480              	.LVL466:
1324:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入长度为Len的数据
 5481              		.loc 1 1324 1 is_stmt 0 view .LVU1453
 5482 003c 38BD     		pop	{r3, r4, r5, pc}
 5483              		.cfi_endproc
 5484              	.LFE185:
 5486              		.section	.text.AT24CXX_WriteLenByte,"ax",%progbits
 5487              		.align	1
 5488              		.global	AT24CXX_WriteLenByte
 5489              		.syntax unified
 5490              		.thumb
 5491              		.thumb_func
 5492              		.fpu fpv5-d16
 5494              	AT24CXX_WriteLenByte:
 5495              	.LVL467:
 5496              	.LFB186:
1331:Core/Src/Mytouch.c **** 	u8 t;
 5497              		.loc 1 1331 1 is_stmt 1 view -0
 5498              		.cfi_startproc
 5499              		@ args = 0, pretend = 0, frame = 0
 5500              		@ frame_needed = 0, uses_anonymous_args = 0
1331:Core/Src/Mytouch.c **** 	u8 t;
 5501              		.loc 1 1331 1 is_stmt 0 view .LVU1455
 5502 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 5503              	.LCFI74:
 5504              		.cfi_def_cfa_offset 24
 5505              		.cfi_offset 3, -24
 5506              		.cfi_offset 4, -20
 5507              		.cfi_offset 5, -16
 5508              		.cfi_offset 6, -12
 5509              		.cfi_offset 7, -8
 5510              		.cfi_offset 14, -4
 5511 0002 0746     		mov	r7, r0
 5512 0004 0E46     		mov	r6, r1
 5513 0006 1546     		mov	r5, r2
1332:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
 5514              		.loc 1 1332 2 is_stmt 1 view .LVU1456
1333:Core/Src/Mytouch.c **** 	{
 5515              		.loc 1 1333 2 view .LVU1457
 5516              	.LVL468:
1333:Core/Src/Mytouch.c **** 	{
 5517              		.loc 1 1333 7 is_stmt 0 view .LVU1458
 5518 0008 0024     		movs	r4, #0
1333:Core/Src/Mytouch.c **** 	{
 5519              		.loc 1 1333 2 view .LVU1459
 5520 000a 09E0     		b	.L301
 5521              	.LVL469:
 5522              	.L302:
1335:Core/Src/Mytouch.c **** 	}												    
ARM GAS  /tmp/ccNZMix7.s 			page 133


 5523              		.loc 1 1335 3 is_stmt 1 discriminator 3 view .LVU1460
1335:Core/Src/Mytouch.c **** 	}												    
 5524              		.loc 1 1335 52 is_stmt 0 discriminator 3 view .LVU1461
 5525 000c E100     		lsls	r1, r4, #3
1335:Core/Src/Mytouch.c **** 	}												    
 5526              		.loc 1 1335 48 discriminator 3 view .LVU1462
 5527 000e 26FA01F1 		lsr	r1, r6, r1
1335:Core/Src/Mytouch.c **** 	}												    
 5528              		.loc 1 1335 3 discriminator 3 view .LVU1463
 5529 0012 3819     		adds	r0, r7, r4
 5530 0014 C9B2     		uxtb	r1, r1
 5531 0016 80B2     		uxth	r0, r0
 5532 0018 FFF7FEFF 		bl	AT24CXX_WriteOneByte
 5533              	.LVL470:
1333:Core/Src/Mytouch.c **** 	{
 5534              		.loc 1 1333 16 is_stmt 1 discriminator 3 view .LVU1464
1333:Core/Src/Mytouch.c **** 	{
 5535              		.loc 1 1333 17 is_stmt 0 discriminator 3 view .LVU1465
 5536 001c 0134     		adds	r4, r4, #1
 5537              	.LVL471:
1333:Core/Src/Mytouch.c **** 	{
 5538              		.loc 1 1333 17 discriminator 3 view .LVU1466
 5539 001e E4B2     		uxtb	r4, r4
 5540              	.LVL472:
 5541              	.L301:
1333:Core/Src/Mytouch.c **** 	{
 5542              		.loc 1 1333 10 is_stmt 1 discriminator 1 view .LVU1467
1333:Core/Src/Mytouch.c **** 	{
 5543              		.loc 1 1333 2 is_stmt 0 discriminator 1 view .LVU1468
 5544 0020 AC42     		cmp	r4, r5
 5545 0022 F3D3     		bcc	.L302
1337:Core/Src/Mytouch.c **** 
 5546              		.loc 1 1337 1 view .LVU1469
 5547 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
1337:Core/Src/Mytouch.c **** 
 5548              		.loc 1 1337 1 view .LVU1470
 5549              		.cfi_endproc
 5550              	.LFE186:
 5552              		.section	.text.TP_Save_Adjdata,"ax",%progbits
 5553              		.align	1
 5554              		.global	TP_Save_Adjdata
 5555              		.syntax unified
 5556              		.thumb
 5557              		.thumb_func
 5558              		.fpu fpv5-d16
 5560              	TP_Save_Adjdata:
 5561              	.LFB155:
 210:Core/Src/Mytouch.c **** 	int temp;			 
 5562              		.loc 1 210 1 is_stmt 1 view -0
 5563              		.cfi_startproc
 5564              		@ args = 0, pretend = 0, frame = 0
 5565              		@ frame_needed = 0, uses_anonymous_args = 0
 5566 0000 10B5     		push	{r4, lr}
 5567              	.LCFI75:
 5568              		.cfi_def_cfa_offset 8
 5569              		.cfi_offset 4, -8
 5570              		.cfi_offset 14, -4
ARM GAS  /tmp/ccNZMix7.s 			page 134


 5571 0002 2DED028B 		vpush.64	{d8}
 5572              	.LCFI76:
 5573              		.cfi_def_cfa_offset 16
 5574              		.cfi_offset 80, -16
 5575              		.cfi_offset 81, -12
 211:Core/Src/Mytouch.c **** 	//保存校正结果!		   							  
 5576              		.loc 1 211 2 view .LVU1472
 213:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE,temp,4);   
 5577              		.loc 1 213 2 view .LVU1473
 213:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE,temp,4);   
 5578              		.loc 1 213 13 is_stmt 0 view .LVU1474
 5579 0006 194C     		ldr	r4, .L306
 5580 0008 D4ED097A 		vldr.32	s15, [r4, #36]
 213:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE,temp,4);   
 5581              		.loc 1 213 18 view .LVU1475
 5582 000c 9FED188A 		vldr.32	s16, .L306+4
 5583 0010 67EE887A 		vmul.f32	s15, s15, s16
 5584              	.LVL473:
 214:Core/Src/Mytouch.c **** 	temp=tp_dev.yfac*100000000;//保存y校正因素    
 5585              		.loc 1 214 5 is_stmt 1 view .LVU1476
 5586 0014 0422     		movs	r2, #4
 5587 0016 FDEEE77A 		vcvt.s32.f32	s15, s15
 5588              	.LVL474:
 214:Core/Src/Mytouch.c **** 	temp=tp_dev.yfac*100000000;//保存y校正因素    
 5589              		.loc 1 214 5 is_stmt 0 view .LVU1477
 5590 001a 17EE901A 		vmov	r1, s15	@ int
 5591 001e 2820     		movs	r0, #40
 5592 0020 FFF7FEFF 		bl	AT24CXX_WriteLenByte
 5593              	.LVL475:
 215:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+4,temp,4);
 5594              		.loc 1 215 2 is_stmt 1 view .LVU1478
 215:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+4,temp,4);
 5595              		.loc 1 215 13 is_stmt 0 view .LVU1479
 5596 0024 D4ED0A7A 		vldr.32	s15, [r4, #40]
 215:Core/Src/Mytouch.c ****     AT24CXX_WriteLenByte(SAVE_ADDR_BASE+4,temp,4);
 5597              		.loc 1 215 18 view .LVU1480
 5598 0028 67EE887A 		vmul.f32	s15, s15, s16
 5599              	.LVL476:
 216:Core/Src/Mytouch.c **** 	//保存x偏移量
 5600              		.loc 1 216 5 is_stmt 1 view .LVU1481
 5601 002c 0422     		movs	r2, #4
 5602 002e FDEEE77A 		vcvt.s32.f32	s15, s15
 5603              	.LVL477:
 216:Core/Src/Mytouch.c **** 	//保存x偏移量
 5604              		.loc 1 216 5 is_stmt 0 view .LVU1482
 5605 0032 17EE901A 		vmov	r1, s15	@ int
 5606 0036 2C20     		movs	r0, #44
 5607 0038 FFF7FEFF 		bl	AT24CXX_WriteLenByte
 5608              	.LVL478:
 218:Core/Src/Mytouch.c **** 	//保存y偏移量
 5609              		.loc 1 218 5 is_stmt 1 view .LVU1483
 5610 003c 0222     		movs	r2, #2
 5611 003e B4F92C10 		ldrsh	r1, [r4, #44]
 5612 0042 3020     		movs	r0, #48
 5613 0044 FFF7FEFF 		bl	AT24CXX_WriteLenByte
 5614              	.LVL479:
 220:Core/Src/Mytouch.c **** 	//保存触屏类型
ARM GAS  /tmp/ccNZMix7.s 			page 135


 5615              		.loc 1 220 2 view .LVU1484
 5616 0048 0222     		movs	r2, #2
 5617 004a B4F92E10 		ldrsh	r1, [r4, #46]
 5618 004e 3220     		movs	r0, #50
 5619 0050 FFF7FEFF 		bl	AT24CXX_WriteLenByte
 5620              	.LVL480:
 222:Core/Src/Mytouch.c **** 	temp=0X0A;//标记校准过了
 5621              		.loc 1 222 2 view .LVU1485
 5622 0054 94F83010 		ldrb	r1, [r4, #48]	@ zero_extendqisi2
 5623 0058 3420     		movs	r0, #52
 5624 005a FFF7FEFF 		bl	AT24CXX_WriteOneByte
 5625              	.LVL481:
 223:Core/Src/Mytouch.c **** 	AT24CXX_WriteOneByte(SAVE_ADDR_BASE+13,temp); 
 5626              		.loc 1 223 2 view .LVU1486
 224:Core/Src/Mytouch.c **** }
 5627              		.loc 1 224 2 view .LVU1487
 5628 005e 0A21     		movs	r1, #10
 5629 0060 3520     		movs	r0, #53
 5630 0062 FFF7FEFF 		bl	AT24CXX_WriteOneByte
 5631              	.LVL482:
 225:Core/Src/Mytouch.c **** //得到保存在EEPROM里面的校准值
 5632              		.loc 1 225 1 is_stmt 0 view .LVU1488
 5633 0066 BDEC028B 		vldm	sp!, {d8}
 5634              	.LCFI77:
 5635              		.cfi_restore 80
 5636              		.cfi_restore 81
 5637              		.cfi_def_cfa_offset 8
 5638 006a 10BD     		pop	{r4, pc}
 5639              	.L307:
 5640              		.align	2
 5641              	.L306:
 5642 006c 00000000 		.word	.LANCHOR2
 5643 0070 20BCBE4C 		.word	1287568416
 5644              		.cfi_endproc
 5645              	.LFE155:
 5647              		.section	.text.AT24CXX_Write,"ax",%progbits
 5648              		.align	1
 5649              		.global	AT24CXX_Write
 5650              		.syntax unified
 5651              		.thumb
 5652              		.thumb_func
 5653              		.fpu fpv5-d16
 5655              	AT24CXX_Write:
 5656              	.LVL483:
 5657              	.LFB190:
1391:Core/Src/Mytouch.c **** 	while(NumToWrite--)
 5658              		.loc 1 1391 1 is_stmt 1 view -0
 5659              		.cfi_startproc
 5660              		@ args = 0, pretend = 0, frame = 0
 5661              		@ frame_needed = 0, uses_anonymous_args = 0
1391:Core/Src/Mytouch.c **** 	while(NumToWrite--)
 5662              		.loc 1 1391 1 is_stmt 0 view .LVU1490
 5663 0000 70B5     		push	{r4, r5, r6, lr}
 5664              	.LCFI78:
 5665              		.cfi_def_cfa_offset 16
 5666              		.cfi_offset 4, -16
 5667              		.cfi_offset 5, -12
ARM GAS  /tmp/ccNZMix7.s 			page 136


 5668              		.cfi_offset 6, -8
 5669              		.cfi_offset 14, -4
 5670 0002 0446     		mov	r4, r0
 5671 0004 0E46     		mov	r6, r1
1392:Core/Src/Mytouch.c **** 	{
 5672              		.loc 1 1392 2 is_stmt 1 view .LVU1491
1392:Core/Src/Mytouch.c **** 	{
 5673              		.loc 1 1392 7 is_stmt 0 view .LVU1492
 5674 0006 07E0     		b	.L309
 5675              	.LVL484:
 5676              	.L310:
1394:Core/Src/Mytouch.c **** 		WriteAddr++;
 5677              		.loc 1 1394 3 is_stmt 1 view .LVU1493
 5678 0008 16F8011B 		ldrb	r1, [r6], #1	@ zero_extendqisi2
 5679              	.LVL485:
1394:Core/Src/Mytouch.c **** 		WriteAddr++;
 5680              		.loc 1 1394 3 is_stmt 0 view .LVU1494
 5681 000c 2046     		mov	r0, r4
 5682 000e FFF7FEFF 		bl	AT24CXX_WriteOneByte
 5683              	.LVL486:
1395:Core/Src/Mytouch.c **** 		pBuffer++;
 5684              		.loc 1 1395 3 is_stmt 1 view .LVU1495
1395:Core/Src/Mytouch.c **** 		pBuffer++;
 5685              		.loc 1 1395 12 is_stmt 0 view .LVU1496
 5686 0012 0134     		adds	r4, r4, #1
 5687              	.LVL487:
1395:Core/Src/Mytouch.c **** 		pBuffer++;
 5688              		.loc 1 1395 12 view .LVU1497
 5689 0014 A4B2     		uxth	r4, r4
 5690              	.LVL488:
1396:Core/Src/Mytouch.c **** 	}
 5691              		.loc 1 1396 3 is_stmt 1 view .LVU1498
1392:Core/Src/Mytouch.c **** 	{
 5692              		.loc 1 1392 18 is_stmt 0 view .LVU1499
 5693 0016 2A46     		mov	r2, r5
 5694              	.LVL489:
 5695              	.L309:
1392:Core/Src/Mytouch.c **** 	{
 5696              		.loc 1 1392 7 is_stmt 1 view .LVU1500
1392:Core/Src/Mytouch.c **** 	{
 5697              		.loc 1 1392 18 is_stmt 0 view .LVU1501
 5698 0018 531E     		subs	r3, r2, #1
 5699 001a 9DB2     		uxth	r5, r3
 5700              	.LVL490:
1392:Core/Src/Mytouch.c **** 	{
 5701              		.loc 1 1392 7 view .LVU1502
 5702 001c 002A     		cmp	r2, #0
 5703 001e F3D1     		bne	.L310
1398:Core/Src/Mytouch.c **** 
 5704              		.loc 1 1398 1 view .LVU1503
 5705 0020 70BD     		pop	{r4, r5, r6, pc}
1398:Core/Src/Mytouch.c **** 
 5706              		.loc 1 1398 1 view .LVU1504
 5707              		.cfi_endproc
 5708              	.LFE190:
 5710              		.section	.text.IIC_Read_Byte,"ax",%progbits
 5711              		.align	1
ARM GAS  /tmp/ccNZMix7.s 			page 137


 5712              		.global	IIC_Read_Byte
 5713              		.syntax unified
 5714              		.thumb
 5715              		.thumb_func
 5716              		.fpu fpv5-d16
 5718              	IIC_Read_Byte:
 5719              	.LVL491:
 5720              	.LFB198:
1507:Core/Src/Mytouch.c **** //读1个字节，ack=1时，发送ACK，ack=0，发送nACK   
1508:Core/Src/Mytouch.c **** u8 IIC_Read_Byte(unsigned char ack)
1509:Core/Src/Mytouch.c **** {
 5721              		.loc 1 1509 1 is_stmt 1 view -0
 5722              		.cfi_startproc
 5723              		@ args = 0, pretend = 0, frame = 0
 5724              		@ frame_needed = 0, uses_anonymous_args = 0
 5725              		.loc 1 1509 1 is_stmt 0 view .LVU1506
 5726 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 5727              	.LCFI79:
 5728              		.cfi_def_cfa_offset 24
 5729              		.cfi_offset 3, -24
 5730              		.cfi_offset 4, -20
 5731              		.cfi_offset 5, -16
 5732              		.cfi_offset 6, -12
 5733              		.cfi_offset 7, -8
 5734              		.cfi_offset 14, -4
 5735 0002 0746     		mov	r7, r0
1510:Core/Src/Mytouch.c **** 	unsigned char i,receive=0;
 5736              		.loc 1 1510 2 is_stmt 1 view .LVU1507
 5737              	.LVL492:
1511:Core/Src/Mytouch.c **** 	SDA_IN();//SDA设置为输入
 5738              		.loc 1 1511 2 view .LVU1508
 5739 0004 184B     		ldr	r3, .L320
 5740 0006 1A68     		ldr	r2, [r3]
 5741 0008 22F44062 		bic	r2, r2, #3072
 5742 000c 1A60     		str	r2, [r3]
 5743              		.loc 1 1511 2 view .LVU1509
 5744 000e 1A68     		ldr	r2, [r3]
 5745 0010 1A60     		str	r2, [r3]
 5746              		.loc 1 1511 10 view .LVU1510
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5747              		.loc 1 1512 5 view .LVU1511
 5748              	.LVL493:
1510:Core/Src/Mytouch.c **** 	unsigned char i,receive=0;
 5749              		.loc 1 1510 18 is_stmt 0 view .LVU1512
 5750 0012 0024     		movs	r4, #0
 5751              		.loc 1 1512 10 view .LVU1513
 5752 0014 2546     		mov	r5, r4
 5753              		.loc 1 1512 5 view .LVU1514
 5754 0016 04E0     		b	.L313
 5755              	.LVL494:
 5756              	.L314:
1513:Core/Src/Mytouch.c **** 	{
1514:Core/Src/Mytouch.c ****         IIC_SCL(0); 
1515:Core/Src/Mytouch.c ****         delay_us(2);
1516:Core/Src/Mytouch.c **** 		IIC_SCL(1);
1517:Core/Src/Mytouch.c ****         receive<<=1;
1518:Core/Src/Mytouch.c ****         if(READ_SDA)receive++;   
ARM GAS  /tmp/ccNZMix7.s 			page 138


1519:Core/Src/Mytouch.c **** 		delay_us(1); 
 5757              		.loc 1 1519 3 is_stmt 1 discriminator 2 view .LVU1515
 5758 0018 0120     		movs	r0, #1
 5759 001a FFF7FEFF 		bl	delay_us
 5760              	.LVL495:
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5761              		.loc 1 1512 17 discriminator 2 view .LVU1516
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5762              		.loc 1 1512 18 is_stmt 0 discriminator 2 view .LVU1517
 5763 001e 0135     		adds	r5, r5, #1
 5764              	.LVL496:
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5765              		.loc 1 1512 18 discriminator 2 view .LVU1518
 5766 0020 EDB2     		uxtb	r5, r5
 5767              	.LVL497:
 5768              	.L313:
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5769              		.loc 1 1512 13 is_stmt 1 discriminator 1 view .LVU1519
1512:Core/Src/Mytouch.c ****     for(i=0;i<8;i++ )
 5770              		.loc 1 1512 5 is_stmt 0 discriminator 1 view .LVU1520
 5771 0022 072D     		cmp	r5, #7
 5772 0024 18D8     		bhi	.L319
1514:Core/Src/Mytouch.c ****         delay_us(2);
 5773              		.loc 1 1514 9 is_stmt 1 view .LVU1521
 5774 0026 104E     		ldr	r6, .L320
 5775 0028 0022     		movs	r2, #0
 5776 002a 1021     		movs	r1, #16
 5777 002c 3046     		mov	r0, r6
 5778 002e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5779              	.LVL498:
1515:Core/Src/Mytouch.c **** 		IIC_SCL(1);
 5780              		.loc 1 1515 9 view .LVU1522
 5781 0032 0220     		movs	r0, #2
 5782 0034 FFF7FEFF 		bl	delay_us
 5783              	.LVL499:
1516:Core/Src/Mytouch.c ****         receive<<=1;
 5784              		.loc 1 1516 3 view .LVU1523
 5785 0038 0122     		movs	r2, #1
 5786 003a 1021     		movs	r1, #16
 5787 003c 3046     		mov	r0, r6
 5788 003e FFF7FEFF 		bl	HAL_GPIO_WritePin
 5789              	.LVL500:
1517:Core/Src/Mytouch.c ****         if(READ_SDA)receive++;   
 5790              		.loc 1 1517 9 view .LVU1524
1517:Core/Src/Mytouch.c ****         if(READ_SDA)receive++;   
 5791              		.loc 1 1517 16 is_stmt 0 view .LVU1525
 5792 0042 6400     		lsls	r4, r4, #1
 5793              	.LVL501:
1517:Core/Src/Mytouch.c ****         if(READ_SDA)receive++;   
 5794              		.loc 1 1517 16 view .LVU1526
 5795 0044 E4B2     		uxtb	r4, r4
 5796              	.LVL502:
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5797              		.loc 1 1518 9 is_stmt 1 view .LVU1527
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5798              		.loc 1 1518 12 is_stmt 0 view .LVU1528
 5799 0046 2021     		movs	r1, #32
ARM GAS  /tmp/ccNZMix7.s 			page 139


 5800 0048 3046     		mov	r0, r6
 5801 004a FFF7FEFF 		bl	HAL_GPIO_ReadPin
 5802              	.LVL503:
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5803              		.loc 1 1518 11 view .LVU1529
 5804 004e 0028     		cmp	r0, #0
 5805 0050 E2D0     		beq	.L314
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5806              		.loc 1 1518 21 is_stmt 1 discriminator 1 view .LVU1530
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5807              		.loc 1 1518 28 is_stmt 0 discriminator 1 view .LVU1531
 5808 0052 0134     		adds	r4, r4, #1
 5809              	.LVL504:
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5810              		.loc 1 1518 28 discriminator 1 view .LVU1532
 5811 0054 E4B2     		uxtb	r4, r4
 5812              	.LVL505:
1518:Core/Src/Mytouch.c **** 		delay_us(1); 
 5813              		.loc 1 1518 28 discriminator 1 view .LVU1533
 5814 0056 DFE7     		b	.L314
 5815              	.L319:
1520:Core/Src/Mytouch.c ****     }					 
1521:Core/Src/Mytouch.c ****     if (!ack)
 5816              		.loc 1 1521 5 is_stmt 1 view .LVU1534
 5817              		.loc 1 1521 8 is_stmt 0 view .LVU1535
 5818 0058 1FB9     		cbnz	r7, .L316
1522:Core/Src/Mytouch.c ****         IIC_NAck();//发送nACK
 5819              		.loc 1 1522 9 is_stmt 1 view .LVU1536
 5820 005a FFF7FEFF 		bl	IIC_NAck
 5821              	.LVL506:
 5822              	.L317:
1523:Core/Src/Mytouch.c ****     else
1524:Core/Src/Mytouch.c ****         IIC_Ack(); //发送ACK   
1525:Core/Src/Mytouch.c ****     return receive;
 5823              		.loc 1 1525 5 view .LVU1537
1526:Core/Src/Mytouch.c **** }
 5824              		.loc 1 1526 1 is_stmt 0 view .LVU1538
 5825 005e 2046     		mov	r0, r4
 5826 0060 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 5827              	.LVL507:
 5828              	.L316:
1524:Core/Src/Mytouch.c ****     return receive;
 5829              		.loc 1 1524 9 is_stmt 1 view .LVU1539
 5830 0062 FFF7FEFF 		bl	IIC_Ack
 5831              	.LVL508:
 5832 0066 FAE7     		b	.L317
 5833              	.L321:
 5834              		.align	2
 5835              	.L320:
 5836 0068 001C0258 		.word	1476533248
 5837              		.cfi_endproc
 5838              	.LFE198:
 5840              		.section	.text.AT24CXX_ReadOneByte,"ax",%progbits
 5841              		.align	1
 5842              		.global	AT24CXX_ReadOneByte
 5843              		.syntax unified
 5844              		.thumb
ARM GAS  /tmp/ccNZMix7.s 			page 140


 5845              		.thumb_func
 5846              		.fpu fpv5-d16
 5848              	AT24CXX_ReadOneByte:
 5849              	.LVL509:
 5850              	.LFB184:
1286:Core/Src/Mytouch.c **** 	u8 temp=0;		  	    																 
 5851              		.loc 1 1286 1 view -0
 5852              		.cfi_startproc
 5853              		@ args = 0, pretend = 0, frame = 0
 5854              		@ frame_needed = 0, uses_anonymous_args = 0
1286:Core/Src/Mytouch.c **** 	u8 temp=0;		  	    																 
 5855              		.loc 1 1286 1 is_stmt 0 view .LVU1541
 5856 0000 10B5     		push	{r4, lr}
 5857              	.LCFI80:
 5858              		.cfi_def_cfa_offset 8
 5859              		.cfi_offset 4, -8
 5860              		.cfi_offset 14, -4
 5861 0002 0446     		mov	r4, r0
1287:Core/Src/Mytouch.c ****     IIC_Start();  
 5862              		.loc 1 1287 2 is_stmt 1 view .LVU1542
 5863              	.LVL510:
1288:Core/Src/Mytouch.c **** 	if(EE_TYPE>AT24C16)
 5864              		.loc 1 1288 5 view .LVU1543
 5865 0004 FFF7FEFF 		bl	IIC_Start
 5866              	.LVL511:
1289:Core/Src/Mytouch.c **** 	{
 5867              		.loc 1 1289 2 view .LVU1544
1294:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 
 5868              		.loc 1 1294 8 view .LVU1545
1294:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 
 5869              		.loc 1 1294 42 is_stmt 0 view .LVU1546
 5870 0008 230A     		lsrs	r3, r4, #8
 5871 000a 5B00     		lsls	r3, r3, #1
 5872 000c DBB2     		uxtb	r3, r3
1294:Core/Src/Mytouch.c **** 	IIC_Wait_Ack(); 
 5873              		.loc 1 1294 8 view .LVU1547
 5874 000e 603B     		subs	r3, r3, #96
 5875 0010 03F0FE00 		and	r0, r3, #254
 5876 0014 FFF7FEFF 		bl	IIC_Send_Byte
 5877              	.LVL512:
1295:Core/Src/Mytouch.c ****     IIC_Send_Byte(ReadAddr%256);   //发送低地址
 5878              		.loc 1 1295 2 is_stmt 1 view .LVU1548
 5879 0018 FFF7FEFF 		bl	IIC_Wait_Ack
 5880              	.LVL513:
1296:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	    
 5881              		.loc 1 1296 5 view .LVU1549
 5882 001c E0B2     		uxtb	r0, r4
 5883 001e FFF7FEFF 		bl	IIC_Send_Byte
 5884              	.LVL514:
1297:Core/Src/Mytouch.c **** 	IIC_Start();  	 	   
 5885              		.loc 1 1297 2 view .LVU1550
 5886 0022 FFF7FEFF 		bl	IIC_Wait_Ack
 5887              	.LVL515:
1298:Core/Src/Mytouch.c **** 	IIC_Send_Byte(0XA1);           //进入接收模式			   
 5888              		.loc 1 1298 2 view .LVU1551
 5889 0026 FFF7FEFF 		bl	IIC_Start
 5890              	.LVL516:
ARM GAS  /tmp/ccNZMix7.s 			page 141


1299:Core/Src/Mytouch.c **** 	IIC_Wait_Ack();	 
 5891              		.loc 1 1299 2 view .LVU1552
 5892 002a A120     		movs	r0, #161
 5893 002c FFF7FEFF 		bl	IIC_Send_Byte
 5894              	.LVL517:
1300:Core/Src/Mytouch.c ****     temp=IIC_Read_Byte(0);		   
 5895              		.loc 1 1300 2 view .LVU1553
 5896 0030 FFF7FEFF 		bl	IIC_Wait_Ack
 5897              	.LVL518:
1301:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件	    
 5898              		.loc 1 1301 5 view .LVU1554
1301:Core/Src/Mytouch.c ****     IIC_Stop();//产生一个停止条件	    
 5899              		.loc 1 1301 10 is_stmt 0 view .LVU1555
 5900 0034 0020     		movs	r0, #0
 5901 0036 FFF7FEFF 		bl	IIC_Read_Byte
 5902              	.LVL519:
 5903 003a 0446     		mov	r4, r0
 5904              	.LVL520:
1302:Core/Src/Mytouch.c **** 	return temp;
 5905              		.loc 1 1302 5 is_stmt 1 view .LVU1556
 5906 003c FFF7FEFF 		bl	IIC_Stop
 5907              	.LVL521:
1303:Core/Src/Mytouch.c **** }
 5908              		.loc 1 1303 2 view .LVU1557
1304:Core/Src/Mytouch.c **** //在AT24CXX指定地址写入一个数据
 5909              		.loc 1 1304 1 is_stmt 0 view .LVU1558
 5910 0040 2046     		mov	r0, r4
 5911 0042 10BD     		pop	{r4, pc}
1304:Core/Src/Mytouch.c **** //在AT24CXX指定地址写入一个数据
 5912              		.loc 1 1304 1 view .LVU1559
 5913              		.cfi_endproc
 5914              	.LFE184:
 5916              		.section	.text.AT24CXX_ReadLenByte,"ax",%progbits
 5917              		.align	1
 5918              		.global	AT24CXX_ReadLenByte
 5919              		.syntax unified
 5920              		.thumb
 5921              		.thumb_func
 5922              		.fpu fpv5-d16
 5924              	AT24CXX_ReadLenByte:
 5925              	.LVL522:
 5926              	.LFB187:
1345:Core/Src/Mytouch.c **** 	u8 t;
 5927              		.loc 1 1345 1 is_stmt 1 view -0
 5928              		.cfi_startproc
 5929              		@ args = 0, pretend = 0, frame = 0
 5930              		@ frame_needed = 0, uses_anonymous_args = 0
1345:Core/Src/Mytouch.c **** 	u8 t;
 5931              		.loc 1 1345 1 is_stmt 0 view .LVU1561
 5932 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 5933              	.LCFI81:
 5934              		.cfi_def_cfa_offset 24
 5935              		.cfi_offset 3, -24
 5936              		.cfi_offset 4, -20
 5937              		.cfi_offset 5, -16
 5938              		.cfi_offset 6, -12
 5939              		.cfi_offset 7, -8
ARM GAS  /tmp/ccNZMix7.s 			page 142


 5940              		.cfi_offset 14, -4
 5941 0002 0746     		mov	r7, r0
 5942 0004 0E46     		mov	r6, r1
1346:Core/Src/Mytouch.c **** 	u32 temp=0;
 5943              		.loc 1 1346 2 is_stmt 1 view .LVU1562
1347:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
 5944              		.loc 1 1347 2 view .LVU1563
 5945              	.LVL523:
1348:Core/Src/Mytouch.c **** 	{
 5946              		.loc 1 1348 2 view .LVU1564
1347:Core/Src/Mytouch.c **** 	for(t=0;t<Len;t++)
 5947              		.loc 1 1347 6 is_stmt 0 view .LVU1565
 5948 0006 0020     		movs	r0, #0
 5949              	.LVL524:
1348:Core/Src/Mytouch.c **** 	{
 5950              		.loc 1 1348 7 view .LVU1566
 5951 0008 0446     		mov	r4, r0
1348:Core/Src/Mytouch.c **** 	{
 5952              		.loc 1 1348 2 view .LVU1567
 5953 000a 0BE0     		b	.L325
 5954              	.LVL525:
 5955              	.L326:
1350:Core/Src/Mytouch.c **** 		temp+=AT24CXX_ReadOneByte(ReadAddr+Len-t-1); 	 				   
 5956              		.loc 1 1350 3 is_stmt 1 discriminator 3 view .LVU1568
1350:Core/Src/Mytouch.c **** 		temp+=AT24CXX_ReadOneByte(ReadAddr+Len-t-1); 	 				   
 5957              		.loc 1 1350 7 is_stmt 0 discriminator 3 view .LVU1569
 5958 000c 0502     		lsls	r5, r0, #8
 5959              	.LVL526:
1351:Core/Src/Mytouch.c **** 	}
 5960              		.loc 1 1351 3 is_stmt 1 discriminator 3 view .LVU1570
1351:Core/Src/Mytouch.c **** 	}
 5961              		.loc 1 1351 37 is_stmt 0 discriminator 3 view .LVU1571
 5962 000e B819     		adds	r0, r7, r6
 5963 0010 80B2     		uxth	r0, r0
1351:Core/Src/Mytouch.c **** 	}
 5964              		.loc 1 1351 41 discriminator 3 view .LVU1572
 5965 0012 001B     		subs	r0, r0, r4
 5966 0014 80B2     		uxth	r0, r0
1351:Core/Src/Mytouch.c **** 	}
 5967              		.loc 1 1351 9 discriminator 3 view .LVU1573
 5968 0016 0138     		subs	r0, r0, #1
 5969 0018 80B2     		uxth	r0, r0
 5970 001a FFF7FEFF 		bl	AT24CXX_ReadOneByte
 5971              	.LVL527:
1351:Core/Src/Mytouch.c **** 	}
 5972              		.loc 1 1351 7 discriminator 3 view .LVU1574
 5973 001e 2844     		add	r0, r0, r5
 5974              	.LVL528:
1348:Core/Src/Mytouch.c **** 	{
 5975              		.loc 1 1348 16 is_stmt 1 discriminator 3 view .LVU1575
1348:Core/Src/Mytouch.c **** 	{
 5976              		.loc 1 1348 17 is_stmt 0 discriminator 3 view .LVU1576
 5977 0020 0134     		adds	r4, r4, #1
 5978              	.LVL529:
1348:Core/Src/Mytouch.c **** 	{
 5979              		.loc 1 1348 17 discriminator 3 view .LVU1577
 5980 0022 E4B2     		uxtb	r4, r4
ARM GAS  /tmp/ccNZMix7.s 			page 143


 5981              	.LVL530:
 5982              	.L325:
1348:Core/Src/Mytouch.c **** 	{
 5983              		.loc 1 1348 10 is_stmt 1 discriminator 1 view .LVU1578
1348:Core/Src/Mytouch.c **** 	{
 5984              		.loc 1 1348 2 is_stmt 0 discriminator 1 view .LVU1579
 5985 0024 B442     		cmp	r4, r6
 5986 0026 F1D3     		bcc	.L326
1353:Core/Src/Mytouch.c **** }
 5987              		.loc 1 1353 2 is_stmt 1 view .LVU1580
1354:Core/Src/Mytouch.c **** //检查AT24CXX是否正常
 5988              		.loc 1 1354 1 is_stmt 0 view .LVU1581
 5989 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
1354:Core/Src/Mytouch.c **** //检查AT24CXX是否正常
 5990              		.loc 1 1354 1 view .LVU1582
 5991              		.cfi_endproc
 5992              	.LFE187:
 5994              		.section	.text.TP_Get_Adjdata,"ax",%progbits
 5995              		.align	1
 5996              		.global	TP_Get_Adjdata
 5997              		.syntax unified
 5998              		.thumb
 5999              		.thumb_func
 6000              		.fpu fpv5-d16
 6002              	TP_Get_Adjdata:
 6003              	.LFB156:
 230:Core/Src/Mytouch.c **** 	int tempfac;
 6004              		.loc 1 230 1 is_stmt 1 view -0
 6005              		.cfi_startproc
 6006              		@ args = 0, pretend = 0, frame = 0
 6007              		@ frame_needed = 0, uses_anonymous_args = 0
 6008 0000 10B5     		push	{r4, lr}
 6009              	.LCFI82:
 6010              		.cfi_def_cfa_offset 8
 6011              		.cfi_offset 4, -8
 6012              		.cfi_offset 14, -4
 6013 0002 2DED028B 		vpush.64	{d8}
 6014              	.LCFI83:
 6015              		.cfi_def_cfa_offset 16
 6016              		.cfi_offset 80, -16
 6017              		.cfi_offset 81, -12
 231:Core/Src/Mytouch.c **** 	tempfac=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+13);//读取标记字,看是否校准过！ 		 
 6018              		.loc 1 231 2 view .LVU1584
 232:Core/Src/Mytouch.c **** 	if(tempfac==0X0A)//触摸屏已经校准过了			   
 6019              		.loc 1 232 2 view .LVU1585
 232:Core/Src/Mytouch.c **** 	if(tempfac==0X0A)//触摸屏已经校准过了			   
 6020              		.loc 1 232 10 is_stmt 0 view .LVU1586
 6021 0006 3520     		movs	r0, #53
 6022 0008 FFF7FEFF 		bl	AT24CXX_ReadOneByte
 6023              	.LVL531:
 233:Core/Src/Mytouch.c **** 	{    												 
 6024              		.loc 1 233 2 is_stmt 1 view .LVU1587
 233:Core/Src/Mytouch.c **** 	{    												 
 6025              		.loc 1 233 4 is_stmt 0 view .LVU1588
 6026 000c 0A28     		cmp	r0, #10
 6027 000e 03D0     		beq	.L334
 255:Core/Src/Mytouch.c **** }	 
ARM GAS  /tmp/ccNZMix7.s 			page 144


 6028              		.loc 1 255 9 view .LVU1589
 6029 0010 0020     		movs	r0, #0
 6030              	.LVL532:
 6031              	.L329:
 256:Core/Src/Mytouch.c **** //提示字符串
 6032              		.loc 1 256 1 view .LVU1590
 6033 0012 BDEC028B 		vldm	sp!, {d8}
 6034              	.LCFI84:
 6035              		.cfi_remember_state
 6036              		.cfi_restore 80
 6037              		.cfi_restore 81
 6038              		.cfi_def_cfa_offset 8
 6039 0016 10BD     		pop	{r4, pc}
 6040              	.LVL533:
 6041              	.L334:
 6042              	.LCFI85:
 6043              		.cfi_restore_state
 235:Core/Src/Mytouch.c **** 		tp_dev.xfac=(float)tempfac/100000000;//得到x校准参数
 6044              		.loc 1 235 3 is_stmt 1 view .LVU1591
 235:Core/Src/Mytouch.c **** 		tp_dev.xfac=(float)tempfac/100000000;//得到x校准参数
 6045              		.loc 1 235 11 is_stmt 0 view .LVU1592
 6046 0018 0421     		movs	r1, #4
 6047 001a 2820     		movs	r0, #40
 6048              	.LVL534:
 235:Core/Src/Mytouch.c **** 		tp_dev.xfac=(float)tempfac/100000000;//得到x校准参数
 6049              		.loc 1 235 11 view .LVU1593
 6050 001c FFF7FEFF 		bl	AT24CXX_ReadLenByte
 6051              	.LVL535:
 6052 0020 07EE900A 		vmov	s15, r0	@ int
 6053              	.LVL536:
 236:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 6054              		.loc 1 236 3 is_stmt 1 view .LVU1594
 236:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 6055              		.loc 1 236 15 is_stmt 0 view .LVU1595
 6056 0024 F8EEE77A 		vcvt.f32.s32	s15, s15
 236:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 6057              		.loc 1 236 29 view .LVU1596
 6058 0028 9FED188A 		vldr.32	s16, .L335
 6059 002c 87EE887A 		vdiv.f32	s14, s15, s16
 236:Core/Src/Mytouch.c **** 		tempfac=AT24CXX_ReadLenByte(SAVE_ADDR_BASE+4,4);			          
 6060              		.loc 1 236 14 view .LVU1597
 6061 0030 174C     		ldr	r4, .L335+4
 6062 0032 84ED097A 		vstr.32	s14, [r4, #36]
 237:Core/Src/Mytouch.c **** 		tp_dev.yfac=(float)tempfac/100000000;//得到y校准参数
 6063              		.loc 1 237 3 is_stmt 1 view .LVU1598
 237:Core/Src/Mytouch.c **** 		tp_dev.yfac=(float)tempfac/100000000;//得到y校准参数
 6064              		.loc 1 237 11 is_stmt 0 view .LVU1599
 6065 0036 0421     		movs	r1, #4
 6066 0038 2C20     		movs	r0, #44
 6067              	.LVL537:
 237:Core/Src/Mytouch.c **** 		tp_dev.yfac=(float)tempfac/100000000;//得到y校准参数
 6068              		.loc 1 237 11 view .LVU1600
 6069 003a FFF7FEFF 		bl	AT24CXX_ReadLenByte
 6070              	.LVL538:
 6071 003e 07EE900A 		vmov	s15, r0	@ int
 6072              	.LVL539:
 238:Core/Src/Mytouch.c **** 	    //得到x偏移量
ARM GAS  /tmp/ccNZMix7.s 			page 145


 6073              		.loc 1 238 3 is_stmt 1 view .LVU1601
 238:Core/Src/Mytouch.c **** 	    //得到x偏移量
 6074              		.loc 1 238 15 is_stmt 0 view .LVU1602
 6075 0042 F8EEE77A 		vcvt.f32.s32	s15, s15
 238:Core/Src/Mytouch.c **** 	    //得到x偏移量
 6076              		.loc 1 238 29 view .LVU1603
 6077 0046 87EE887A 		vdiv.f32	s14, s15, s16
 238:Core/Src/Mytouch.c **** 	    //得到x偏移量
 6078              		.loc 1 238 14 view .LVU1604
 6079 004a 84ED0A7A 		vstr.32	s14, [r4, #40]
 240:Core/Src/Mytouch.c ****  	    //得到y偏移量
 6080              		.loc 1 240 3 is_stmt 1 view .LVU1605
 240:Core/Src/Mytouch.c ****  	    //得到y偏移量
 6081              		.loc 1 240 15 is_stmt 0 view .LVU1606
 6082 004e 0221     		movs	r1, #2
 6083 0050 3020     		movs	r0, #48
 6084              	.LVL540:
 240:Core/Src/Mytouch.c ****  	    //得到y偏移量
 6085              		.loc 1 240 15 view .LVU1607
 6086 0052 FFF7FEFF 		bl	AT24CXX_ReadLenByte
 6087              	.LVL541:
 240:Core/Src/Mytouch.c ****  	    //得到y偏移量
 6088              		.loc 1 240 14 view .LVU1608
 6089 0056 A085     		strh	r0, [r4, #44]	@ movhi
 242:Core/Src/Mytouch.c ****  		tp_dev.touchtype=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+12);//读取触屏类型标记
 6090              		.loc 1 242 3 is_stmt 1 view .LVU1609
 242:Core/Src/Mytouch.c ****  		tp_dev.touchtype=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+12);//读取触屏类型标记
 6091              		.loc 1 242 15 is_stmt 0 view .LVU1610
 6092 0058 0221     		movs	r1, #2
 6093 005a 3220     		movs	r0, #50
 6094 005c FFF7FEFF 		bl	AT24CXX_ReadLenByte
 6095              	.LVL542:
 242:Core/Src/Mytouch.c ****  		tp_dev.touchtype=AT24CXX_ReadOneByte(SAVE_ADDR_BASE+12);//读取触屏类型标记
 6096              		.loc 1 242 14 view .LVU1611
 6097 0060 E085     		strh	r0, [r4, #46]	@ movhi
 243:Core/Src/Mytouch.c **** 		if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6098              		.loc 1 243 4 is_stmt 1 view .LVU1612
 243:Core/Src/Mytouch.c **** 		if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6099              		.loc 1 243 21 is_stmt 0 view .LVU1613
 6100 0062 3420     		movs	r0, #52
 6101 0064 FFF7FEFF 		bl	AT24CXX_ReadOneByte
 6102              	.LVL543:
 243:Core/Src/Mytouch.c **** 		if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6103              		.loc 1 243 20 view .LVU1614
 6104 0068 84F83000 		strb	r0, [r4, #48]
 244:Core/Src/Mytouch.c **** 		{
 6105              		.loc 1 244 3 is_stmt 1 view .LVU1615
 244:Core/Src/Mytouch.c **** 		{
 6106              		.loc 1 244 5 is_stmt 0 view .LVU1616
 6107 006c 38B1     		cbz	r0, .L330
 246:Core/Src/Mytouch.c **** 			CMD_RDY=0XD0;	 
 6108              		.loc 1 246 4 is_stmt 1 view .LVU1617
 246:Core/Src/Mytouch.c **** 			CMD_RDY=0XD0;	 
 6109              		.loc 1 246 11 is_stmt 0 view .LVU1618
 6110 006e 094B     		ldr	r3, .L335+8
 6111 0070 9022     		movs	r2, #144
 6112 0072 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccNZMix7.s 			page 146


 247:Core/Src/Mytouch.c **** 		}else				   //X,Y方向与屏幕相同
 6113              		.loc 1 247 4 is_stmt 1 view .LVU1619
 247:Core/Src/Mytouch.c **** 		}else				   //X,Y方向与屏幕相同
 6114              		.loc 1 247 11 is_stmt 0 view .LVU1620
 6115 0074 084B     		ldr	r3, .L335+12
 6116 0076 D022     		movs	r2, #208
 6117 0078 1A70     		strb	r2, [r3]
 6118              	.L331:
 253:Core/Src/Mytouch.c **** 	}
 6119              		.loc 1 253 3 is_stmt 1 view .LVU1621
 253:Core/Src/Mytouch.c **** 	}
 6120              		.loc 1 253 10 is_stmt 0 view .LVU1622
 6121 007a 0120     		movs	r0, #1
 6122 007c C9E7     		b	.L329
 6123              	.L330:
 250:Core/Src/Mytouch.c **** 			CMD_RDY=0X90;	 
 6124              		.loc 1 250 4 is_stmt 1 view .LVU1623
 250:Core/Src/Mytouch.c **** 			CMD_RDY=0X90;	 
 6125              		.loc 1 250 11 is_stmt 0 view .LVU1624
 6126 007e 054B     		ldr	r3, .L335+8
 6127 0080 D022     		movs	r2, #208
 6128 0082 1A70     		strb	r2, [r3]
 251:Core/Src/Mytouch.c **** 		}		 
 6129              		.loc 1 251 4 is_stmt 1 view .LVU1625
 251:Core/Src/Mytouch.c **** 		}		 
 6130              		.loc 1 251 11 is_stmt 0 view .LVU1626
 6131 0084 044B     		ldr	r3, .L335+12
 6132 0086 9022     		movs	r2, #144
 6133 0088 1A70     		strb	r2, [r3]
 6134 008a F6E7     		b	.L331
 6135              	.L336:
 6136              		.align	2
 6137              	.L335:
 6138 008c 20BCBE4C 		.word	1287568416
 6139 0090 00000000 		.word	.LANCHOR2
 6140 0094 00000000 		.word	.LANCHOR0
 6141 0098 00000000 		.word	.LANCHOR1
 6142              		.cfi_endproc
 6143              	.LFE156:
 6145              		.section	.rodata.TP_Adjust.str1.4,"aMS",%progbits,1
 6146              		.align	2
 6147              	.LC14:
 6148 0000 506C6561 		.ascii	"Please use the stylus click the cross on the screen"
 6148      73652075 
 6148      73652074 
 6148      68652073 
 6148      74796C75 
 6149 0033 2E546865 		.ascii	".The cross will always move until the screen adjust"
 6149      2063726F 
 6149      73732077 
 6149      696C6C20 
 6149      616C7761 
 6150 0066 6D656E74 		.ascii	"ment is completed.\000"
 6150      20697320 
 6150      636F6D70 
 6150      6C657465 
 6150      642E00
ARM GAS  /tmp/ccNZMix7.s 			page 147


 6151 0079 000000   		.align	2
 6152              	.LC15:
 6153 007c 5450204E 		.ascii	"TP Need readjust!\000"
 6153      65656420 
 6153      72656164 
 6153      6A757374 
 6153      2100
 6154 008e 0000     		.align	2
 6155              	.LC16:
 6156 0090 546F7563 		.ascii	"Touch Screen Adjust OK!\000"
 6156      68205363 
 6156      7265656E 
 6156      2041646A 
 6156      75737420 
 6157              		.section	.text.TP_Adjust,"ax",%progbits
 6158              		.align	1
 6159              		.global	TP_Adjust
 6160              		.syntax unified
 6161              		.thumb
 6162              		.thumb_func
 6163              		.fpu fpv5-d16
 6165              	TP_Adjust:
 6166              	.LFB158:
 288:Core/Src/Mytouch.c **** 	u16 pos_temp[4][2];//坐标缓存值
 6167              		.loc 1 288 1 is_stmt 1 view -0
 6168              		.cfi_startproc
 6169              		@ args = 0, pretend = 0, frame = 16
 6170              		@ frame_needed = 0, uses_anonymous_args = 0
 6171 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6172              	.LCFI86:
 6173              		.cfi_def_cfa_offset 36
 6174              		.cfi_offset 4, -36
 6175              		.cfi_offset 5, -32
 6176              		.cfi_offset 6, -28
 6177              		.cfi_offset 7, -24
 6178              		.cfi_offset 8, -20
 6179              		.cfi_offset 9, -16
 6180              		.cfi_offset 10, -12
 6181              		.cfi_offset 11, -8
 6182              		.cfi_offset 14, -4
 6183 0004 2DED048B 		vpush.64	{d8, d9}
 6184              	.LCFI87:
 6185              		.cfi_def_cfa_offset 52
 6186              		.cfi_offset 80, -52
 6187              		.cfi_offset 81, -48
 6188              		.cfi_offset 82, -44
 6189              		.cfi_offset 83, -40
 6190 0008 8BB0     		sub	sp, sp, #44
 6191              	.LCFI88:
 6192              		.cfi_def_cfa_offset 96
 289:Core/Src/Mytouch.c **** 	u8  cnt=0;	
 6193              		.loc 1 289 2 view .LVU1628
 290:Core/Src/Mytouch.c **** 	u16 d1,d2;
 6194              		.loc 1 290 2 view .LVU1629
 6195              	.LVL544:
 291:Core/Src/Mytouch.c **** 	u32 tem1,tem2;
 6196              		.loc 1 291 2 view .LVU1630
ARM GAS  /tmp/ccNZMix7.s 			page 148


 292:Core/Src/Mytouch.c **** 	double fac; 	
 6197              		.loc 1 292 2 view .LVU1631
 293:Core/Src/Mytouch.c **** 	u16 outtime=0;
 6198              		.loc 1 293 2 view .LVU1632
 294:Core/Src/Mytouch.c ****  	cnt=0;				
 6199              		.loc 1 294 2 view .LVU1633
 295:Core/Src/Mytouch.c **** 	POINT_COLOR=BLUE;
 6200              		.loc 1 295 3 view .LVU1634
 296:Core/Src/Mytouch.c **** 	BACK_COLOR =WHITE;
 6201              		.loc 1 296 2 view .LVU1635
 296:Core/Src/Mytouch.c **** 	BACK_COLOR =WHITE;
 6202              		.loc 1 296 13 is_stmt 0 view .LVU1636
 6203 000a D14C     		ldr	r4, .L365+24
 6204 000c 1F23     		movs	r3, #31
 6205 000e 2360     		str	r3, [r4]
 297:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏   
 6206              		.loc 1 297 2 is_stmt 1 view .LVU1637
 297:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏   
 6207              		.loc 1 297 13 is_stmt 0 view .LVU1638
 6208 0010 4FF6FF75 		movw	r5, #65535
 6209 0014 CF4B     		ldr	r3, .L365+28
 6210 0016 1D60     		str	r5, [r3]
 298:Core/Src/Mytouch.c **** 	POINT_COLOR=RED;//红色 
 6211              		.loc 1 298 2 is_stmt 1 view .LVU1639
 6212 0018 2846     		mov	r0, r5
 6213 001a FFF7FEFF 		bl	LCD_Clear
 6214              	.LVL545:
 299:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏 	   
 6215              		.loc 1 299 2 view .LVU1640
 299:Core/Src/Mytouch.c **** 	LCD_Clear(WHITE);//清屏 	   
 6216              		.loc 1 299 13 is_stmt 0 view .LVU1641
 6217 001e 4FF47846 		mov	r6, #63488
 6218 0022 2660     		str	r6, [r4]
 300:Core/Src/Mytouch.c **** 	POINT_COLOR=BLACK;
 6219              		.loc 1 300 2 is_stmt 1 view .LVU1642
 6220 0024 2846     		mov	r0, r5
 6221 0026 FFF7FEFF 		bl	LCD_Clear
 6222              	.LVL546:
 301:Core/Src/Mytouch.c **** 	LCD_ShowString(40,40,160,100,16,(u8*)TP_REMIND_MSG_TBL);//显示提示信息
 6223              		.loc 1 301 2 view .LVU1643
 301:Core/Src/Mytouch.c **** 	LCD_ShowString(40,40,160,100,16,(u8*)TP_REMIND_MSG_TBL);//显示提示信息
 6224              		.loc 1 301 13 is_stmt 0 view .LVU1644
 6225 002a 0025     		movs	r5, #0
 6226 002c 2560     		str	r5, [r4]
 302:Core/Src/Mytouch.c **** 	TP_Drow_Touch_Point(20,20,RED);//画点1 
 6227              		.loc 1 302 2 is_stmt 1 view .LVU1645
 6228 002e CA4B     		ldr	r3, .L365+32
 6229 0030 0193     		str	r3, [sp, #4]
 6230 0032 1023     		movs	r3, #16
 6231 0034 0093     		str	r3, [sp]
 6232 0036 6423     		movs	r3, #100
 6233 0038 A022     		movs	r2, #160
 6234 003a 2821     		movs	r1, #40
 6235 003c 0846     		mov	r0, r1
 6236 003e FFF7FEFF 		bl	LCD_ShowString
 6237              	.LVL547:
 303:Core/Src/Mytouch.c **** 	tp_dev.sta=0;//消除触发信号 
ARM GAS  /tmp/ccNZMix7.s 			page 149


 6238              		.loc 1 303 2 view .LVU1646
 6239 0042 3246     		mov	r2, r6
 6240 0044 1421     		movs	r1, #20
 6241 0046 0846     		mov	r0, r1
 6242 0048 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6243              	.LVL548:
 304:Core/Src/Mytouch.c **** 	tp_dev.xfac=0;//xfac用来标记是否校准过,所以校准之前必须清掉!以免错误	 
 6244              		.loc 1 304 2 view .LVU1647
 304:Core/Src/Mytouch.c **** 	tp_dev.xfac=0;//xfac用来标记是否校准过,所以校准之前必须清掉!以免错误	 
 6245              		.loc 1 304 12 is_stmt 0 view .LVU1648
 6246 004c C34B     		ldr	r3, .L365+36
 6247 004e 83F82050 		strb	r5, [r3, #32]
 305:Core/Src/Mytouch.c **** 	while(1)//如果连续10秒钟没有按下,则自动退出
 6248              		.loc 1 305 2 is_stmt 1 view .LVU1649
 305:Core/Src/Mytouch.c **** 	while(1)//如果连续10秒钟没有按下,则自动退出
 6249              		.loc 1 305 13 is_stmt 0 view .LVU1650
 6250 0052 0022     		movs	r2, #0
 6251 0054 5A62     		str	r2, [r3, #36]	@ float
 294:Core/Src/Mytouch.c ****  	cnt=0;				
 6252              		.loc 1 294 6 view .LVU1651
 6253 0056 2C46     		mov	r4, r5
 6254 0058 18E0     		b	.L338
 6255              	.LVL549:
 6256              	.L344:
 6257              	.LBB11:
 320:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(lcddev.width-20,20,RED);	//画点2
 6258              		.loc 1 320 6 is_stmt 1 view .LVU1652
 6259 005a 4FF6FF72 		movw	r2, #65535
 6260 005e 1421     		movs	r1, #20
 6261 0060 0846     		mov	r0, r1
 6262 0062 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6263              	.LVL550:
 321:Core/Src/Mytouch.c **** 					break;
 6264              		.loc 1 321 6 view .LVU1653
 321:Core/Src/Mytouch.c **** 					break;
 6265              		.loc 1 321 32 is_stmt 0 view .LVU1654
 6266 0066 BE4B     		ldr	r3, .L365+40
 6267 0068 1888     		ldrh	r0, [r3]
 321:Core/Src/Mytouch.c **** 					break;
 6268              		.loc 1 321 6 view .LVU1655
 6269 006a 1438     		subs	r0, r0, #20
 6270 006c 4FF47842 		mov	r2, #63488
 6271 0070 1421     		movs	r1, #20
 6272 0072 80B2     		uxth	r0, r0
 6273 0074 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6274              	.LVL551:
 322:Core/Src/Mytouch.c **** 				case 2:
 6275              		.loc 1 322 6 is_stmt 1 view .LVU1656
 6276              	.LBE11:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6277              		.loc 1 311 11 is_stmt 0 view .LVU1657
 6278 0078 0024     		movs	r4, #0
 6279              	.LVL552:
 6280              	.L339:
 428:Core/Src/Mytouch.c **** 		outtime++;
 6281              		.loc 1 428 3 is_stmt 1 view .LVU1658
 6282 007a 0A20     		movs	r0, #10
ARM GAS  /tmp/ccNZMix7.s 			page 150


 6283 007c FFF7FEFF 		bl	HAL_Delay
 6284              	.LVL553:
 429:Core/Src/Mytouch.c **** 		if(outtime>1000)
 6285              		.loc 1 429 3 view .LVU1659
 429:Core/Src/Mytouch.c **** 		if(outtime>1000)
 6286              		.loc 1 429 10 is_stmt 0 view .LVU1660
 6287 0080 0134     		adds	r4, r4, #1
 6288              	.LVL554:
 429:Core/Src/Mytouch.c **** 		if(outtime>1000)
 6289              		.loc 1 429 10 view .LVU1661
 6290 0082 A4B2     		uxth	r4, r4
 6291              	.LVL555:
 430:Core/Src/Mytouch.c **** 		{
 6292              		.loc 1 430 3 is_stmt 1 view .LVU1662
 430:Core/Src/Mytouch.c **** 		{
 6293              		.loc 1 430 5 is_stmt 0 view .LVU1663
 6294 0084 B4F57A7F 		cmp	r4, #1000
 6295 0088 00F29182 		bhi	.L364
 6296              	.LVL556:
 6297              	.L338:
 306:Core/Src/Mytouch.c **** 	{
 6298              		.loc 1 306 2 is_stmt 1 view .LVU1664
 308:Core/Src/Mytouch.c **** 		if((tp_dev.sta&0xc0)==TP_CATH_PRES)//按键按下了一次(此时按键松开了.)
 6299              		.loc 1 308 3 view .LVU1665
 308:Core/Src/Mytouch.c **** 		if((tp_dev.sta&0xc0)==TP_CATH_PRES)//按键按下了一次(此时按键松开了.)
 6300              		.loc 1 308 9 is_stmt 0 view .LVU1666
 6301 008c B34E     		ldr	r6, .L365+36
 6302 008e 7368     		ldr	r3, [r6, #4]
 308:Core/Src/Mytouch.c **** 		if((tp_dev.sta&0xc0)==TP_CATH_PRES)//按键按下了一次(此时按键松开了.)
 6303              		.loc 1 308 3 view .LVU1667
 6304 0090 0120     		movs	r0, #1
 6305 0092 9847     		blx	r3
 6306              	.LVL557:
 309:Core/Src/Mytouch.c **** 		{	
 6307              		.loc 1 309 3 is_stmt 1 view .LVU1668
 309:Core/Src/Mytouch.c **** 		{	
 6308              		.loc 1 309 13 is_stmt 0 view .LVU1669
 6309 0094 96F82030 		ldrb	r3, [r6, #32]	@ zero_extendqisi2
 309:Core/Src/Mytouch.c **** 		{	
 6310              		.loc 1 309 5 view .LVU1670
 6311 0098 03F0C002 		and	r2, r3, #192
 6312 009c 402A     		cmp	r2, #64
 6313 009e ECD1     		bne	.L339
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6314              		.loc 1 311 4 is_stmt 1 view .LVU1671
 6315              	.LVL558:
 312:Core/Src/Mytouch.c **** 						   			   
 6316              		.loc 1 312 4 view .LVU1672
 312:Core/Src/Mytouch.c **** 						   			   
 6317              		.loc 1 312 14 is_stmt 0 view .LVU1673
 6318 00a0 23F04003 		bic	r3, r3, #64
 6319 00a4 86F82030 		strb	r3, [r6, #32]
 314:Core/Src/Mytouch.c **** 			pos_temp[cnt][1]=tp_dev.y[0];
 6320              		.loc 1 314 4 is_stmt 1 view .LVU1674
 314:Core/Src/Mytouch.c **** 			pos_temp[cnt][1]=tp_dev.y[0];
 6321              		.loc 1 314 29 is_stmt 0 view .LVU1675
 6322 00a8 B189     		ldrh	r1, [r6, #12]
ARM GAS  /tmp/ccNZMix7.s 			page 151


 314:Core/Src/Mytouch.c **** 			pos_temp[cnt][1]=tp_dev.y[0];
 6323              		.loc 1 314 20 view .LVU1676
 6324 00aa 0AAB     		add	r3, sp, #40
 6325 00ac 03EB8503 		add	r3, r3, r5, lsl #2
 6326 00b0 23F8101C 		strh	r1, [r3, #-16]	@ movhi
 315:Core/Src/Mytouch.c **** 			cnt++;	  
 6327              		.loc 1 315 4 is_stmt 1 view .LVU1677
 315:Core/Src/Mytouch.c **** 			cnt++;	  
 6328              		.loc 1 315 29 is_stmt 0 view .LVU1678
 6329 00b4 F28A     		ldrh	r2, [r6, #22]
 315:Core/Src/Mytouch.c **** 			cnt++;	  
 6330              		.loc 1 315 20 view .LVU1679
 6331 00b6 23F80E2C 		strh	r2, [r3, #-14]	@ movhi
 316:Core/Src/Mytouch.c **** 			switch(cnt)
 6332              		.loc 1 316 4 is_stmt 1 view .LVU1680
 316:Core/Src/Mytouch.c **** 			switch(cnt)
 6333              		.loc 1 316 7 is_stmt 0 view .LVU1681
 6334 00ba 0135     		adds	r5, r5, #1
 6335              	.LVL559:
 316:Core/Src/Mytouch.c **** 			switch(cnt)
 6336              		.loc 1 316 7 view .LVU1682
 6337 00bc EDB2     		uxtb	r5, r5
 6338              	.LVL560:
 317:Core/Src/Mytouch.c **** 			{			   
 6339              		.loc 1 317 4 is_stmt 1 view .LVU1683
 6340 00be 6B1E     		subs	r3, r5, #1
 6341 00c0 032B     		cmp	r3, #3
 6342 00c2 00F27282 		bhi	.L360
 6343 00c6 01A2     		adr	r2, .L341
 6344 00c8 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 6345              		.p2align 2
 6346              	.L341:
 6347 00cc 5B000000 		.word	.L344+1
 6348 00d0 DD000000 		.word	.L343+1
 6349 00d4 03010000 		.word	.L342+1
 6350 00d8 2D010000 		.word	.L340+1
 6351              		.p2align 1
 6352              	.L343:
 6353              	.LBB12:
 324:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,lcddev.height-20,RED);	//画点3
 6354              		.loc 1 324 7 view .LVU1684
 324:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,lcddev.height-20,RED);	//画点3
 6355              		.loc 1 324 33 is_stmt 0 view .LVU1685
 6356 00dc A04C     		ldr	r4, .L365+40
 6357 00de 2088     		ldrh	r0, [r4]
 324:Core/Src/Mytouch.c **** 					TP_Drow_Touch_Point(20,lcddev.height-20,RED);	//画点3
 6358              		.loc 1 324 7 view .LVU1686
 6359 00e0 1438     		subs	r0, r0, #20
 6360 00e2 4FF6FF72 		movw	r2, #65535
 6361 00e6 1421     		movs	r1, #20
 6362 00e8 80B2     		uxth	r0, r0
 6363 00ea FFF7FEFF 		bl	TP_Drow_Touch_Point
 6364              	.LVL561:
 325:Core/Src/Mytouch.c **** 					break;
 6365              		.loc 1 325 6 is_stmt 1 view .LVU1687
 325:Core/Src/Mytouch.c **** 					break;
 6366              		.loc 1 325 35 is_stmt 0 view .LVU1688
ARM GAS  /tmp/ccNZMix7.s 			page 152


 6367 00ee 6188     		ldrh	r1, [r4, #2]
 325:Core/Src/Mytouch.c **** 					break;
 6368              		.loc 1 325 6 view .LVU1689
 6369 00f0 1439     		subs	r1, r1, #20
 6370 00f2 4FF47842 		mov	r2, #63488
 6371 00f6 89B2     		uxth	r1, r1
 6372 00f8 1420     		movs	r0, #20
 6373 00fa FFF7FEFF 		bl	TP_Drow_Touch_Point
 6374              	.LVL562:
 326:Core/Src/Mytouch.c **** 				case 3:
 6375              		.loc 1 326 6 is_stmt 1 view .LVU1690
 6376              	.LBE12:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6377              		.loc 1 311 11 is_stmt 0 view .LVU1691
 6378 00fe 0024     		movs	r4, #0
 6379              	.LBB13:
 326:Core/Src/Mytouch.c **** 				case 3:
 6380              		.loc 1 326 6 view .LVU1692
 6381 0100 BBE7     		b	.L339
 6382              	.L342:
 328:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,RED);	//画点4
 6383              		.loc 1 328 7 is_stmt 1 view .LVU1693
 328:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,RED);	//画点4
 6384              		.loc 1 328 36 is_stmt 0 view .LVU1694
 6385 0102 974C     		ldr	r4, .L365+40
 6386 0104 6188     		ldrh	r1, [r4, #2]
 328:Core/Src/Mytouch.c ****  					TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,RED);	//画点4
 6387              		.loc 1 328 7 view .LVU1695
 6388 0106 1439     		subs	r1, r1, #20
 6389 0108 4FF6FF72 		movw	r2, #65535
 6390 010c 89B2     		uxth	r1, r1
 6391 010e 1420     		movs	r0, #20
 6392 0110 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6393              	.LVL563:
 329:Core/Src/Mytouch.c **** 					break;
 6394              		.loc 1 329 7 is_stmt 1 view .LVU1696
 329:Core/Src/Mytouch.c **** 					break;
 6395              		.loc 1 329 33 is_stmt 0 view .LVU1697
 6396 0114 2088     		ldrh	r0, [r4]
 329:Core/Src/Mytouch.c **** 					break;
 6397              		.loc 1 329 49 view .LVU1698
 6398 0116 6188     		ldrh	r1, [r4, #2]
 329:Core/Src/Mytouch.c **** 					break;
 6399              		.loc 1 329 7 view .LVU1699
 6400 0118 1439     		subs	r1, r1, #20
 6401 011a 1438     		subs	r0, r0, #20
 6402 011c 4FF47842 		mov	r2, #63488
 6403 0120 89B2     		uxth	r1, r1
 6404 0122 80B2     		uxth	r0, r0
 6405 0124 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6406              	.LVL564:
 330:Core/Src/Mytouch.c **** 				case 4:	 //全部四个点已经得到
 6407              		.loc 1 330 6 is_stmt 1 view .LVU1700
 6408              	.LBE13:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6409              		.loc 1 311 11 is_stmt 0 view .LVU1701
 6410 0128 0024     		movs	r4, #0
ARM GAS  /tmp/ccNZMix7.s 			page 153


 6411              	.LBB14:
 330:Core/Src/Mytouch.c **** 				case 4:	 //全部四个点已经得到
 6412              		.loc 1 330 6 view .LVU1702
 6413 012a A6E7     		b	.L339
 6414              	.L340:
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6415              		.loc 1 333 6 is_stmt 1 view .LVU1703
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6416              		.loc 1 333 26 is_stmt 0 view .LVU1704
 6417 012c BDF81850 		ldrh	r5, [sp, #24]
 6418              	.LVL565:
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6419              		.loc 1 333 41 view .LVU1705
 6420 0130 BDF81C70 		ldrh	r7, [sp, #28]
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6421              		.loc 1 333 29 view .LVU1706
 6422 0134 EB1B     		subs	r3, r5, r7
 6423              	.LVL566:
 333:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[1][1]);//y1-y2
 6424              		.loc 1 333 11 view .LVU1707
 6425 0136 002B     		cmp	r3, #0
 6426 0138 B8BF     		it	lt
 6427 013a 5B42     		rsblt	r3, r3, #0
 6428              	.LVL567:
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6429              		.loc 1 334 6 is_stmt 1 view .LVU1708
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6430              		.loc 1 334 26 is_stmt 0 view .LVU1709
 6431 013c BDF81A40 		ldrh	r4, [sp, #26]
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6432              		.loc 1 334 41 view .LVU1710
 6433 0140 BDF81E80 		ldrh	r8, [sp, #30]
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6434              		.loc 1 334 29 view .LVU1711
 6435 0144 A4EB0802 		sub	r2, r4, r8
 334:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6436              		.loc 1 334 11 view .LVU1712
 6437 0148 002A     		cmp	r2, #0
 6438 014a B8BF     		it	lt
 6439 014c 5242     		rsblt	r2, r2, #0
 6440              	.LVL568:
 335:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6441              		.loc 1 335 6 is_stmt 1 view .LVU1713
 336:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,2的距离
 6442              		.loc 1 336 6 view .LVU1714
 336:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,2的距离
 6443              		.loc 1 336 10 is_stmt 0 view .LVU1715
 6444 014e 02FB02F2 		mul	r2, r2, r2
 6445              	.LVL569:
 337:Core/Src/Mytouch.c **** 					
 6446              		.loc 1 337 6 is_stmt 1 view .LVU1716
 337:Core/Src/Mytouch.c **** 					
 6447              		.loc 1 337 18 is_stmt 0 view .LVU1717
 6448 0152 03FB0323 		mla	r3, r3, r3, r2
 6449              	.LVL570:
 337:Core/Src/Mytouch.c **** 					
 6450              		.loc 1 337 18 view .LVU1718
ARM GAS  /tmp/ccNZMix7.s 			page 154


 6451 0156 00EE103A 		vmov	s0, r3	@ int
 337:Core/Src/Mytouch.c **** 					
 6452              		.loc 1 337 9 view .LVU1719
 6453 015a B8EE400B 		vcvt.f64.u32	d0, s0
 6454 015e FFF7FEFF 		bl	sqrt
 6455              	.LVL571:
 337:Core/Src/Mytouch.c **** 					
 6456              		.loc 1 337 8 view .LVU1720
 6457 0162 BCEEC00B 		vcvt.u32.f64	s0, d0
 6458 0166 10EE103A 		vmov	r3, s0	@ int
 6459 016a 9BB2     		uxth	r3, r3
 6460 016c 09EE103A 		vmov	s18, r3	@ int
 6461              	.LVL572:
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6462              		.loc 1 339 6 is_stmt 1 view .LVU1721
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6463              		.loc 1 339 26 is_stmt 0 view .LVU1722
 6464 0170 BDF82090 		ldrh	r9, [sp, #32]
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6465              		.loc 1 339 41 view .LVU1723
 6466 0174 BDF824A0 		ldrh	r10, [sp, #36]
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6467              		.loc 1 339 29 view .LVU1724
 6468 0178 A9EB0A03 		sub	r3, r9, r10
 339:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[2][1]-pos_temp[3][1]);//y3-y4
 6469              		.loc 1 339 11 view .LVU1725
 6470 017c 002B     		cmp	r3, #0
 6471 017e B8BF     		it	lt
 6472 0180 5B42     		rsblt	r3, r3, #0
 6473              	.LVL573:
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6474              		.loc 1 340 6 is_stmt 1 view .LVU1726
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6475              		.loc 1 340 26 is_stmt 0 view .LVU1727
 6476 0182 BDF82260 		ldrh	r6, [sp, #34]
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6477              		.loc 1 340 41 view .LVU1728
 6478 0186 BDF826B0 		ldrh	fp, [sp, #38]
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6479              		.loc 1 340 29 view .LVU1729
 6480 018a A6EB0B02 		sub	r2, r6, fp
 340:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6481              		.loc 1 340 11 view .LVU1730
 6482 018e 002A     		cmp	r2, #0
 6483 0190 B8BF     		it	lt
 6484 0192 5242     		rsblt	r2, r2, #0
 6485              	.LVL574:
 341:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6486              		.loc 1 341 6 is_stmt 1 view .LVU1731
 342:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到3,4的距离
 6487              		.loc 1 342 6 view .LVU1732
 342:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到3,4的距离
 6488              		.loc 1 342 10 is_stmt 0 view .LVU1733
 6489 0194 02FB02F2 		mul	r2, r2, r2
 6490              	.LVL575:
 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6491              		.loc 1 343 6 is_stmt 1 view .LVU1734
ARM GAS  /tmp/ccNZMix7.s 			page 155


 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6492              		.loc 1 343 18 is_stmt 0 view .LVU1735
 6493 0198 03FB0323 		mla	r3, r3, r3, r2
 6494              	.LVL576:
 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6495              		.loc 1 343 18 view .LVU1736
 6496 019c 00EE103A 		vmov	s0, r3	@ int
 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6497              		.loc 1 343 9 view .LVU1737
 6498 01a0 B8EE400B 		vcvt.f64.u32	d0, s0
 6499 01a4 FFF7FEFF 		bl	sqrt
 6500              	.LVL577:
 343:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6501              		.loc 1 343 8 view .LVU1738
 6502 01a8 BCEEC00B 		vcvt.u32.f64	s0, d0
 6503 01ac 10EE103A 		vmov	r3, s0	@ int
 6504 01b0 9BB2     		uxth	r3, r3
 6505              	.LVL578:
 344:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 6506              		.loc 1 344 6 is_stmt 1 view .LVU1739
 344:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 6507              		.loc 1 344 10 is_stmt 0 view .LVU1740
 6508 01b2 B8EE497A 		vcvt.f32.u32	s14, s18
 344:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 6509              		.loc 1 344 19 view .LVU1741
 6510 01b6 07EE903A 		vmov	s15, r3	@ int
 6511 01ba F8EEE77A 		vcvt.f32.s32	s15, s15
 6512 01be 87EE278A 		vdiv.f32	s16, s14, s15
 344:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05||d1==0||d2==0)//不合格
 6513              		.loc 1 344 9 view .LVU1742
 6514 01c2 B7EEC88A 		vcvt.f64.f32	d8, s16
 6515              	.LVL579:
 345:Core/Src/Mytouch.c **** 					{
 6516              		.loc 1 345 6 is_stmt 1 view .LVU1743
 345:Core/Src/Mytouch.c **** 					{
 6517              		.loc 1 345 8 is_stmt 0 view .LVU1744
 6518 01c6 9FED5C7B 		vldr.64	d7, .L365
 6519 01ca B4EEC78B 		vcmpe.f64	d8, d7
 6520 01ce F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6521 01d2 00F18680 		bmi	.L345
 345:Core/Src/Mytouch.c **** 					{
 6522              		.loc 1 345 17 discriminator 1 view .LVU1745
 6523 01d6 9FED5A7B 		vldr.64	d7, .L365+8
 6524 01da B4EEC78B 		vcmpe.f64	d8, d7
 6525 01de F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6526 01e2 7EDC     		bgt	.L345
 345:Core/Src/Mytouch.c **** 					{
 6527              		.loc 1 345 38 discriminator 2 view .LVU1746
 6528 01e4 B3FA83F3 		clz	r3, r3
 6529              	.LVL580:
 345:Core/Src/Mytouch.c **** 					{
 6530              		.loc 1 345 38 discriminator 2 view .LVU1747
 6531 01e8 5B09     		lsrs	r3, r3, #5
 345:Core/Src/Mytouch.c **** 					{
 6532              		.loc 1 345 34 discriminator 2 view .LVU1748
 6533 01ea 19EE102A 		vmov	r2, s18	@ int
 6534 01ee 002A     		cmp	r2, #0
ARM GAS  /tmp/ccNZMix7.s 			page 156


 6535 01f0 77D0     		beq	.L345
 6536 01f2 002B     		cmp	r3, #0
 6537 01f4 75D1     		bne	.L345
 353:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[2][1]);//y1-y3
 6538              		.loc 1 353 6 is_stmt 1 view .LVU1749
 353:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[2][1]);//y1-y3
 6539              		.loc 1 353 29 is_stmt 0 view .LVU1750
 6540 01f6 A5EB0903 		sub	r3, r5, r9
 353:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[2][1]);//y1-y3
 6541              		.loc 1 353 11 view .LVU1751
 6542 01fa 002B     		cmp	r3, #0
 6543 01fc B8BF     		it	lt
 6544 01fe 5B42     		rsblt	r3, r3, #0
 6545              	.LVL581:
 354:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6546              		.loc 1 354 6 is_stmt 1 view .LVU1752
 354:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6547              		.loc 1 354 29 is_stmt 0 view .LVU1753
 6548 0200 A21B     		subs	r2, r4, r6
 354:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6549              		.loc 1 354 11 view .LVU1754
 6550 0202 002A     		cmp	r2, #0
 6551 0204 B8BF     		it	lt
 6552 0206 5242     		rsblt	r2, r2, #0
 6553              	.LVL582:
 355:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6554              		.loc 1 355 6 is_stmt 1 view .LVU1755
 356:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,3的距离
 6555              		.loc 1 356 6 view .LVU1756
 356:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,3的距离
 6556              		.loc 1 356 10 is_stmt 0 view .LVU1757
 6557 0208 02FB02F2 		mul	r2, r2, r2
 6558              	.LVL583:
 357:Core/Src/Mytouch.c **** 					
 6559              		.loc 1 357 6 is_stmt 1 view .LVU1758
 357:Core/Src/Mytouch.c **** 					
 6560              		.loc 1 357 18 is_stmt 0 view .LVU1759
 6561 020c 03FB0323 		mla	r3, r3, r3, r2
 6562              	.LVL584:
 357:Core/Src/Mytouch.c **** 					
 6563              		.loc 1 357 18 view .LVU1760
 6564 0210 00EE103A 		vmov	s0, r3	@ int
 6565              	.LVL585:
 357:Core/Src/Mytouch.c **** 					
 6566              		.loc 1 357 9 view .LVU1761
 6567 0214 B8EE400B 		vcvt.f64.u32	d0, s0
 6568 0218 FFF7FEFF 		bl	sqrt
 6569              	.LVL586:
 357:Core/Src/Mytouch.c **** 					
 6570              		.loc 1 357 8 view .LVU1762
 6571 021c BCEEC00B 		vcvt.u32.f64	s0, d0
 6572 0220 10EE103A 		vmov	r3, s0	@ int
 6573 0224 9BB2     		uxth	r3, r3
 6574 0226 08EE103A 		vmov	s16, r3	@ int
 6575              	.LVL587:
 359:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[3][1]);//y2-y4
 6576              		.loc 1 359 6 is_stmt 1 view .LVU1763
ARM GAS  /tmp/ccNZMix7.s 			page 157


 359:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[3][1]);//y2-y4
 6577              		.loc 1 359 29 is_stmt 0 view .LVU1764
 6578 022a A7EB0A03 		sub	r3, r7, r10
 359:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[3][1]);//y2-y4
 6579              		.loc 1 359 11 view .LVU1765
 6580 022e 002B     		cmp	r3, #0
 6581 0230 B8BF     		it	lt
 6582 0232 5B42     		rsblt	r3, r3, #0
 6583              	.LVL588:
 360:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6584              		.loc 1 360 6 is_stmt 1 view .LVU1766
 360:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6585              		.loc 1 360 29 is_stmt 0 view .LVU1767
 6586 0234 A8EB0B02 		sub	r2, r8, fp
 360:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6587              		.loc 1 360 11 view .LVU1768
 6588 0238 002A     		cmp	r2, #0
 6589 023a B8BF     		it	lt
 6590 023c 5242     		rsblt	r2, r2, #0
 6591              	.LVL589:
 361:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6592              		.loc 1 361 6 is_stmt 1 view .LVU1769
 362:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,4的距离
 6593              		.loc 1 362 6 view .LVU1770
 362:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,4的距离
 6594              		.loc 1 362 10 is_stmt 0 view .LVU1771
 6595 023e 02FB02F2 		mul	r2, r2, r2
 6596              	.LVL590:
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6597              		.loc 1 363 6 is_stmt 1 view .LVU1772
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6598              		.loc 1 363 18 is_stmt 0 view .LVU1773
 6599 0242 03FB0323 		mla	r3, r3, r3, r2
 6600              	.LVL591:
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6601              		.loc 1 363 18 view .LVU1774
 6602 0246 00EE103A 		vmov	s0, r3	@ int
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6603              		.loc 1 363 9 view .LVU1775
 6604 024a B8EE400B 		vcvt.f64.u32	d0, s0
 6605 024e FFF7FEFF 		bl	sqrt
 6606              	.LVL592:
 363:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6607              		.loc 1 363 8 view .LVU1776
 6608 0252 BCEEC00B 		vcvt.u32.f64	s0, d0
 6609 0256 10EE103A 		vmov	r3, s0	@ int
 6610 025a 9BB2     		uxth	r3, r3
 6611 025c 00EE103A 		vmov	s0, r3	@ int
 6612              	.LVL593:
 364:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6613              		.loc 1 364 6 is_stmt 1 view .LVU1777
 364:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6614              		.loc 1 364 10 is_stmt 0 view .LVU1778
 6615 0260 B8EE487A 		vcvt.f32.u32	s14, s16
 364:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6616              		.loc 1 364 19 view .LVU1779
 6617 0264 F8EEC07A 		vcvt.f32.s32	s15, s0
ARM GAS  /tmp/ccNZMix7.s 			page 158


 6618 0268 87EE278A 		vdiv.f32	s16, s14, s15
 6619              	.LVL594:
 364:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6620              		.loc 1 364 9 view .LVU1780
 6621 026c B7EEC88A 		vcvt.f64.f32	d8, s16
 6622              	.LVL595:
 365:Core/Src/Mytouch.c **** 					{
 6623              		.loc 1 365 6 is_stmt 1 view .LVU1781
 365:Core/Src/Mytouch.c **** 					{
 6624              		.loc 1 365 8 is_stmt 0 view .LVU1782
 6625 0270 9FED317B 		vldr.64	d7, .L365
 6626 0274 B4EEC78B 		vcmpe.f64	d8, d7
 6627 0278 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6628 027c 06D4     		bmi	.L349
 365:Core/Src/Mytouch.c **** 					{
 6629              		.loc 1 365 17 discriminator 1 view .LVU1783
 6630 027e 9FED307B 		vldr.64	d7, .L365+8
 6631 0282 B4EEC78B 		vcmpe.f64	d8, d7
 6632 0286 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6633 028a 6BDD     		ble	.L361
 6634              	.L349:
 367:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6635              		.loc 1 367 7 is_stmt 1 view .LVU1784
 6636              	.LVL596:
 368:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6637              		.loc 1 368 11 view .LVU1785
 368:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6638              		.loc 1 368 37 is_stmt 0 view .LVU1786
 6639 028c 344B     		ldr	r3, .L365+40
 6640 028e 1888     		ldrh	r0, [r3]
 368:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6641              		.loc 1 368 53 view .LVU1787
 6642 0290 5988     		ldrh	r1, [r3, #2]
 368:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6643              		.loc 1 368 11 view .LVU1788
 6644 0292 1439     		subs	r1, r1, #20
 6645 0294 1438     		subs	r0, r0, #20
 6646 0296 4FF6FF72 		movw	r2, #65535
 6647 029a 89B2     		uxth	r1, r1
 6648 029c 80B2     		uxth	r0, r0
 6649 029e FFF7FEFF 		bl	TP_Drow_Touch_Point
 6650              	.LVL597:
 369:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 6651              		.loc 1 369 11 is_stmt 1 view .LVU1789
 6652 02a2 4FF47842 		mov	r2, #63488
 6653 02a6 1421     		movs	r1, #20
 6654 02a8 0846     		mov	r0, r1
 6655 02aa FFF7FEFF 		bl	TP_Drow_Touch_Point
 6656              	.LVL598:
 370:Core/Src/Mytouch.c **** 						continue;
 6657              		.loc 1 370 8 view .LVU1790
 370:Core/Src/Mytouch.c **** 						continue;
 6658              		.loc 1 370 148 is_stmt 0 view .LVU1791
 6659 02ae 9FED267B 		vldr.64	d7, .L365+16
 6660 02b2 28EE078B 		vmul.f64	d8, d8, d7
 6661              	.LVL599:
 370:Core/Src/Mytouch.c **** 						continue;
ARM GAS  /tmp/ccNZMix7.s 			page 159


 6662              		.loc 1 370 8 view .LVU1792
 6663 02b6 BCEEC88B 		vcvt.u32.f64	s16, d8
 6664 02ba 18EE103A 		vmov	r3, s16	@ int
 6665 02be 9BB2     		uxth	r3, r3
 6666 02c0 0493     		str	r3, [sp, #16]
 6667 02c2 CDF80CB0 		str	fp, [sp, #12]
 6668 02c6 CDF808A0 		str	r10, [sp, #8]
 6669 02ca 0196     		str	r6, [sp, #4]
 6670 02cc CDF80090 		str	r9, [sp]
 6671 02d0 4346     		mov	r3, r8
 6672 02d2 3A46     		mov	r2, r7
 6673 02d4 2146     		mov	r1, r4
 6674 02d6 2846     		mov	r0, r5
 6675 02d8 FFF7FEFF 		bl	TP_Adj_Info_Show
 6676              	.LVL600:
 371:Core/Src/Mytouch.c **** 					}//正确了
 6677              		.loc 1 371 7 is_stmt 1 view .LVU1793
 6678              	.LBE14:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6679              		.loc 1 311 11 is_stmt 0 view .LVU1794
 6680 02dc 0024     		movs	r4, #0
 6681              	.LBB15:
 367:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6682              		.loc 1 367 10 view .LVU1795
 6683 02de 2546     		mov	r5, r4
 371:Core/Src/Mytouch.c **** 					}//正确了
 6684              		.loc 1 371 7 view .LVU1796
 6685 02e0 D4E6     		b	.L338
 6686              	.LVL601:
 6687              	.L345:
 347:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6688              		.loc 1 347 7 is_stmt 1 view .LVU1797
 348:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6689              		.loc 1 348 11 view .LVU1798
 348:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6690              		.loc 1 348 37 is_stmt 0 view .LVU1799
 6691 02e2 1F4B     		ldr	r3, .L365+40
 6692 02e4 1888     		ldrh	r0, [r3]
 348:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6693              		.loc 1 348 53 view .LVU1800
 6694 02e6 5988     		ldrh	r1, [r3, #2]
 348:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6695              		.loc 1 348 11 view .LVU1801
 6696 02e8 1439     		subs	r1, r1, #20
 6697 02ea 1438     		subs	r0, r0, #20
 6698 02ec 4FF6FF72 		movw	r2, #65535
 6699 02f0 89B2     		uxth	r1, r1
 6700 02f2 80B2     		uxth	r0, r0
 6701 02f4 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6702              	.LVL602:
 349:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 6703              		.loc 1 349 11 is_stmt 1 view .LVU1802
 6704 02f8 4FF47842 		mov	r2, #63488
 6705 02fc 1421     		movs	r1, #20
 6706 02fe 0846     		mov	r0, r1
 6707 0300 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6708              	.LVL603:
ARM GAS  /tmp/ccNZMix7.s 			page 160


 350:Core/Src/Mytouch.c ****  						continue;
 6709              		.loc 1 350 8 view .LVU1803
 350:Core/Src/Mytouch.c ****  						continue;
 6710              		.loc 1 350 148 is_stmt 0 view .LVU1804
 6711 0304 9FED107B 		vldr.64	d7, .L365+16
 6712 0308 28EE078B 		vmul.f64	d8, d8, d7
 6713              	.LVL604:
 350:Core/Src/Mytouch.c ****  						continue;
 6714              		.loc 1 350 8 view .LVU1805
 6715 030c BCEEC88B 		vcvt.u32.f64	s16, d8
 6716 0310 18EE103A 		vmov	r3, s16	@ int
 6717 0314 9BB2     		uxth	r3, r3
 6718 0316 0493     		str	r3, [sp, #16]
 6719 0318 CDF80CB0 		str	fp, [sp, #12]
 6720 031c CDF808A0 		str	r10, [sp, #8]
 6721 0320 0196     		str	r6, [sp, #4]
 6722 0322 CDF80090 		str	r9, [sp]
 6723 0326 4346     		mov	r3, r8
 6724 0328 3A46     		mov	r2, r7
 6725 032a 2146     		mov	r1, r4
 6726 032c 2846     		mov	r0, r5
 6727 032e FFF7FEFF 		bl	TP_Adj_Info_Show
 6728              	.LVL605:
 351:Core/Src/Mytouch.c **** 					}
 6729              		.loc 1 351 8 is_stmt 1 view .LVU1806
 6730              	.LBE15:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6731              		.loc 1 311 11 is_stmt 0 view .LVU1807
 6732 0332 0024     		movs	r4, #0
 6733              	.LBB16:
 347:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6734              		.loc 1 347 10 view .LVU1808
 6735 0334 2546     		mov	r5, r4
 351:Core/Src/Mytouch.c **** 					}
 6736              		.loc 1 351 8 view .LVU1809
 6737 0336 A9E6     		b	.L338
 6738              	.L366:
 6739              		.align	3
 6740              	.L365:
 6741 0338 66666666 		.word	1717986918
 6742 033c 6666EE3F 		.word	1072588390
 6743 0340 CDCCCCCC 		.word	-858993459
 6744 0344 CCCCF03F 		.word	1072745676
 6745 0348 00000000 		.word	0
 6746 034c 00005940 		.word	1079574528
 6747 0350 00000000 		.word	POINT_COLOR
 6748 0354 00000000 		.word	BACK_COLOR
 6749 0358 00000000 		.word	.LC14
 6750 035c 00000000 		.word	.LANCHOR2
 6751 0360 00000000 		.word	lcddev
 6752              	.LVL606:
 6753              	.L361:
 375:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[2][1]);//y1-y3
 6754              		.loc 1 375 6 is_stmt 1 view .LVU1810
 375:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[2][1]);//y1-y3
 6755              		.loc 1 375 29 is_stmt 0 view .LVU1811
 6756 0364 A7EB0903 		sub	r3, r7, r9
ARM GAS  /tmp/ccNZMix7.s 			page 161


 375:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[1][1]-pos_temp[2][1]);//y1-y3
 6757              		.loc 1 375 11 view .LVU1812
 6758 0368 002B     		cmp	r3, #0
 6759 036a B8BF     		it	lt
 6760 036c 5B42     		rsblt	r3, r3, #0
 6761              	.LVL607:
 376:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6762              		.loc 1 376 6 is_stmt 1 view .LVU1813
 376:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6763              		.loc 1 376 29 is_stmt 0 view .LVU1814
 6764 036e A8EB0602 		sub	r2, r8, r6
 376:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6765              		.loc 1 376 11 view .LVU1815
 6766 0372 002A     		cmp	r2, #0
 6767 0374 B8BF     		it	lt
 6768 0376 5242     		rsblt	r2, r2, #0
 6769              	.LVL608:
 377:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6770              		.loc 1 377 6 is_stmt 1 view .LVU1816
 378:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,4的距离
 6771              		.loc 1 378 6 view .LVU1817
 378:Core/Src/Mytouch.c **** 					d1=sqrt(tem1+tem2);//得到1,4的距离
 6772              		.loc 1 378 10 is_stmt 0 view .LVU1818
 6773 0378 02FB02F2 		mul	r2, r2, r2
 6774              	.LVL609:
 379:Core/Src/Mytouch.c **** 	
 6775              		.loc 1 379 6 is_stmt 1 view .LVU1819
 379:Core/Src/Mytouch.c **** 	
 6776              		.loc 1 379 18 is_stmt 0 view .LVU1820
 6777 037c 03FB0323 		mla	r3, r3, r3, r2
 6778              	.LVL610:
 379:Core/Src/Mytouch.c **** 	
 6779              		.loc 1 379 18 view .LVU1821
 6780 0380 00EE103A 		vmov	s0, r3	@ int
 6781              	.LVL611:
 379:Core/Src/Mytouch.c **** 	
 6782              		.loc 1 379 9 view .LVU1822
 6783 0384 B8EE400B 		vcvt.f64.u32	d0, s0
 6784 0388 FFF7FEFF 		bl	sqrt
 6785              	.LVL612:
 379:Core/Src/Mytouch.c **** 	
 6786              		.loc 1 379 8 view .LVU1823
 6787 038c BCEEC00B 		vcvt.u32.f64	s0, d0
 6788 0390 10EE103A 		vmov	r3, s0	@ int
 6789 0394 9BB2     		uxth	r3, r3
 6790 0396 08EE103A 		vmov	s16, r3	@ int
 6791              	.LVL613:
 381:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[3][1]);//y2-y4
 6792              		.loc 1 381 6 is_stmt 1 view .LVU1824
 381:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[3][1]);//y2-y4
 6793              		.loc 1 381 29 is_stmt 0 view .LVU1825
 6794 039a A5EB0A03 		sub	r3, r5, r10
 381:Core/Src/Mytouch.c **** 					tem2=abs(pos_temp[0][1]-pos_temp[3][1]);//y2-y4
 6795              		.loc 1 381 11 view .LVU1826
 6796 039e 002B     		cmp	r3, #0
 6797 03a0 B8BF     		it	lt
 6798 03a2 5B42     		rsblt	r3, r3, #0
ARM GAS  /tmp/ccNZMix7.s 			page 162


 6799              	.LVL614:
 382:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6800              		.loc 1 382 6 is_stmt 1 view .LVU1827
 382:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6801              		.loc 1 382 29 is_stmt 0 view .LVU1828
 6802 03a4 A4EB0B02 		sub	r2, r4, fp
 382:Core/Src/Mytouch.c **** 					tem1*=tem1;
 6803              		.loc 1 382 11 view .LVU1829
 6804 03a8 002A     		cmp	r2, #0
 6805 03aa B8BF     		it	lt
 6806 03ac 5242     		rsblt	r2, r2, #0
 6807              	.LVL615:
 383:Core/Src/Mytouch.c **** 					tem2*=tem2;
 6808              		.loc 1 383 6 is_stmt 1 view .LVU1830
 384:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,3的距离
 6809              		.loc 1 384 6 view .LVU1831
 384:Core/Src/Mytouch.c **** 					d2=sqrt(tem1+tem2);//得到2,3的距离
 6810              		.loc 1 384 10 is_stmt 0 view .LVU1832
 6811 03ae 02FB02F2 		mul	r2, r2, r2
 6812              	.LVL616:
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6813              		.loc 1 385 6 is_stmt 1 view .LVU1833
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6814              		.loc 1 385 18 is_stmt 0 view .LVU1834
 6815 03b2 03FB0323 		mla	r3, r3, r3, r2
 6816              	.LVL617:
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6817              		.loc 1 385 18 view .LVU1835
 6818 03b6 00EE103A 		vmov	s0, r3	@ int
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6819              		.loc 1 385 9 view .LVU1836
 6820 03ba B8EE400B 		vcvt.f64.u32	d0, s0
 6821 03be FFF7FEFF 		bl	sqrt
 6822              	.LVL618:
 385:Core/Src/Mytouch.c **** 					fac=(float)d1/d2;
 6823              		.loc 1 385 8 view .LVU1837
 6824 03c2 BCEEC00B 		vcvt.u32.f64	s0, d0
 6825 03c6 10EE103A 		vmov	r3, s0	@ int
 6826 03ca 9BB2     		uxth	r3, r3
 6827 03cc 00EE103A 		vmov	s0, r3	@ int
 6828              	.LVL619:
 386:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6829              		.loc 1 386 6 is_stmt 1 view .LVU1838
 386:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6830              		.loc 1 386 10 is_stmt 0 view .LVU1839
 6831 03d0 B8EE488A 		vcvt.f32.u32	s16, s16
 6832              	.LVL620:
 386:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6833              		.loc 1 386 19 view .LVU1840
 6834 03d4 F8EEC07A 		vcvt.f32.s32	s15, s0
 6835 03d8 88EE277A 		vdiv.f32	s14, s16, s15
 386:Core/Src/Mytouch.c **** 					if(fac<0.95||fac>1.05)//不合格
 6836              		.loc 1 386 9 view .LVU1841
 6837 03dc B7EEC78A 		vcvt.f64.f32	d8, s14
 6838              	.LVL621:
 387:Core/Src/Mytouch.c **** 					{
 6839              		.loc 1 387 6 is_stmt 1 view .LVU1842
ARM GAS  /tmp/ccNZMix7.s 			page 163


 387:Core/Src/Mytouch.c **** 					{
 6840              		.loc 1 387 8 is_stmt 0 view .LVU1843
 6841 03e0 9FED777B 		vldr.64	d7, .L367
 6842 03e4 B4EEC78B 		vcmpe.f64	d8, d7
 6843 03e8 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6844 03ec 00F18E80 		bmi	.L352
 387:Core/Src/Mytouch.c **** 					{
 6845              		.loc 1 387 17 discriminator 1 view .LVU1844
 6846 03f0 9FED757B 		vldr.64	d7, .L367+8
 6847 03f4 B4EEC78B 		vcmpe.f64	d8, d7
 6848 03f8 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 6849 03fc 00F38680 		bgt	.L352
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6850              		.loc 1 396 6 is_stmt 1 view .LVU1845
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6851              		.loc 1 396 32 is_stmt 0 view .LVU1846
 6852 0400 754A     		ldr	r2, .L367+24
 6853 0402 B2F80080 		ldrh	r8, [r2]
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6854              		.loc 1 396 38 view .LVU1847
 6855 0406 A8F12803 		sub	r3, r8, #40
 6856 040a 07EE103A 		vmov	s14, r3	@ int
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6857              		.loc 1 396 18 view .LVU1848
 6858 040e B8EEC77A 		vcvt.f32.s32	s14, s14
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6859              		.loc 1 396 58 view .LVU1849
 6860 0412 7B1B     		subs	r3, r7, r5
 6861 0414 07EE903A 		vmov	s15, r3	@ int
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6862              		.loc 1 396 42 view .LVU1850
 6863 0418 F8EEE77A 		vcvt.f32.s32	s15, s15
 6864 041c 87EE270A 		vdiv.f32	s0, s14, s15
 6865              	.LVL622:
 396:Core/Src/Mytouch.c **** 					tp_dev.xoff=(lcddev.width-tp_dev.xfac*(pos_temp[1][0]+pos_temp[0][0]))/2;//得到xoff
 6866              		.loc 1 396 17 view .LVU1851
 6867 0420 6E4B     		ldr	r3, .L367+28
 6868 0422 83ED090A 		vstr.32	s0, [r3, #36]
 397:Core/Src/Mytouch.c **** 						  
 6869              		.loc 1 397 6 is_stmt 1 view .LVU1852
 397:Core/Src/Mytouch.c **** 						  
 6870              		.loc 1 397 59 is_stmt 0 view .LVU1853
 6871 0426 E919     		adds	r1, r5, r7
 6872 0428 07EE901A 		vmov	s15, r1	@ int
 397:Core/Src/Mytouch.c **** 						  
 6873              		.loc 1 397 43 view .LVU1854
 6874 042c F8EEE77A 		vcvt.f32.s32	s15, s15
 6875 0430 67EE807A 		vmul.f32	s15, s15, s0
 397:Core/Src/Mytouch.c **** 						  
 6876              		.loc 1 397 31 view .LVU1855
 6877 0434 07EE108A 		vmov	s14, r8	@ int
 6878 0438 B8EEC77A 		vcvt.f32.s32	s14, s14
 6879 043c 77EE677A 		vsub.f32	s15, s14, s15
 397:Core/Src/Mytouch.c **** 						  
 6880              		.loc 1 397 76 view .LVU1856
 6881 0440 F6EE006A 		vmov.f32	s13, #5.0e-1
 6882 0444 67EEA67A 		vmul.f32	s15, s15, s13
ARM GAS  /tmp/ccNZMix7.s 			page 164


 397:Core/Src/Mytouch.c **** 						  
 6883              		.loc 1 397 17 view .LVU1857
 6884 0448 FDEEE77A 		vcvt.s32.f32	s15, s15
 6885 044c 17EE901A 		vmov	r1, s15	@ int
 6886 0450 9985     		strh	r1, [r3, #44]	@ movhi
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6887              		.loc 1 399 6 is_stmt 1 view .LVU1858
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6888              		.loc 1 399 32 is_stmt 0 view .LVU1859
 6889 0452 5588     		ldrh	r5, [r2, #2]
 6890              	.LVL623:
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6891              		.loc 1 399 39 view .LVU1860
 6892 0454 A5F12802 		sub	r2, r5, #40
 6893 0458 07EE102A 		vmov	s14, r2	@ int
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6894              		.loc 1 399 18 view .LVU1861
 6895 045c B8EEC77A 		vcvt.f32.s32	s14, s14
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6896              		.loc 1 399 59 view .LVU1862
 6897 0460 321B     		subs	r2, r6, r4
 6898 0462 07EE902A 		vmov	s15, r2	@ int
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6899              		.loc 1 399 43 view .LVU1863
 6900 0466 F8EEE77A 		vcvt.f32.s32	s15, s15
 6901 046a 87EE278A 		vdiv.f32	s16, s14, s15
 6902              	.LVL624:
 399:Core/Src/Mytouch.c **** 					tp_dev.yoff=(lcddev.height-tp_dev.yfac*(pos_temp[2][1]+pos_temp[0][1]))/2;//得到yoff  
 6903              		.loc 1 399 17 view .LVU1864
 6904 046e 83ED0A8A 		vstr.32	s16, [r3, #40]
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6905              		.loc 1 400 6 is_stmt 1 view .LVU1865
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6906              		.loc 1 400 60 is_stmt 0 view .LVU1866
 6907 0472 A219     		adds	r2, r4, r6
 6908 0474 07EE902A 		vmov	s15, r2	@ int
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6909              		.loc 1 400 44 view .LVU1867
 6910 0478 F8EEE77A 		vcvt.f32.s32	s15, s15
 6911 047c 67EE887A 		vmul.f32	s15, s15, s16
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6912              		.loc 1 400 32 view .LVU1868
 6913 0480 07EE105A 		vmov	s14, r5	@ int
 6914 0484 B8EEC77A 		vcvt.f32.s32	s14, s14
 6915 0488 77EE677A 		vsub.f32	s15, s14, s15
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6916              		.loc 1 400 77 view .LVU1869
 6917 048c 67EEA67A 		vmul.f32	s15, s15, s13
 400:Core/Src/Mytouch.c **** 					if(abs(tp_dev.xfac)>2||abs(tp_dev.yfac)>2)//触屏和预设的相反了.
 6918              		.loc 1 400 17 view .LVU1870
 6919 0490 FDEEE77A 		vcvt.s32.f32	s15, s15
 6920 0494 17EE902A 		vmov	r2, s15	@ int
 6921 0498 DA85     		strh	r2, [r3, #46]	@ movhi
 401:Core/Src/Mytouch.c **** 					{
 6922              		.loc 1 401 6 is_stmt 1 view .LVU1871
 401:Core/Src/Mytouch.c **** 					{
 6923              		.loc 1 401 9 is_stmt 0 view .LVU1872
ARM GAS  /tmp/ccNZMix7.s 			page 165


 6924 049a B7EEC00A 		vcvt.f64.f32	d0, s0
 6925 049e FFF7FEFF 		bl	abs
 6926              	.LVL625:
 401:Core/Src/Mytouch.c **** 					{
 6927              		.loc 1 401 8 view .LVU1873
 6928 04a2 0228     		cmp	r0, #2
 6929 04a4 05DC     		bgt	.L355
 401:Core/Src/Mytouch.c **** 					{
 6930              		.loc 1 401 29 discriminator 1 view .LVU1874
 6931 04a6 B7EEC80A 		vcvt.f64.f32	d0, s16
 6932 04aa FFF7FEFF 		bl	abs
 6933              	.LVL626:
 401:Core/Src/Mytouch.c **** 					{
 6934              		.loc 1 401 27 discriminator 1 view .LVU1875
 6935 04ae 0228     		cmp	r0, #2
 6936 04b0 5EDD     		ble	.L356
 6937              	.L355:
 403:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6938              		.loc 1 403 7 is_stmt 1 view .LVU1876
 6939              	.LVL627:
 404:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 6940              		.loc 1 404 11 view .LVU1877
 6941 04b2 A5F11401 		sub	r1, r5, #20
 6942 04b6 A8F11400 		sub	r0, r8, #20
 6943 04ba 4FF6FF72 		movw	r2, #65535
 6944 04be 89B2     		uxth	r1, r1
 6945 04c0 80B2     		uxth	r0, r0
 6946 04c2 FFF7FEFF 		bl	TP_Drow_Touch_Point
 6947              	.LVL628:
 405:Core/Src/Mytouch.c **** 						LCD_ShowString(40,26,lcddev.width,lcddev.height,16,"TP Need readjust!");
 6948              		.loc 1 405 11 view .LVU1878
 6949 04c6 4FF47842 		mov	r2, #63488
 6950 04ca 1421     		movs	r1, #20
 6951 04cc 0846     		mov	r0, r1
 6952 04ce FFF7FEFF 		bl	TP_Drow_Touch_Point
 6953              	.LVL629:
 406:Core/Src/Mytouch.c **** 						tp_dev.touchtype=!tp_dev.touchtype;//修改触屏类型.
 6954              		.loc 1 406 7 view .LVU1879
 6955 04d2 414A     		ldr	r2, .L367+24
 6956 04d4 424B     		ldr	r3, .L367+32
 6957 04d6 0193     		str	r3, [sp, #4]
 6958 04d8 1023     		movs	r3, #16
 6959 04da 0093     		str	r3, [sp]
 6960 04dc 5388     		ldrh	r3, [r2, #2]
 6961 04de 1288     		ldrh	r2, [r2]
 6962 04e0 1A21     		movs	r1, #26
 6963 04e2 2820     		movs	r0, #40
 6964 04e4 FFF7FEFF 		bl	LCD_ShowString
 6965              	.LVL630:
 407:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6966              		.loc 1 407 7 view .LVU1880
 407:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6967              		.loc 1 407 31 is_stmt 0 view .LVU1881
 6968 04e8 3C4A     		ldr	r2, .L367+28
 6969 04ea 92F83030 		ldrb	r3, [r2, #48]	@ zero_extendqisi2
 407:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6970              		.loc 1 407 24 view .LVU1882
ARM GAS  /tmp/ccNZMix7.s 			page 166


 6971 04ee B3FA83F3 		clz	r3, r3
 6972 04f2 5B09     		lsrs	r3, r3, #5
 407:Core/Src/Mytouch.c **** 						if(tp_dev.touchtype)//X,Y方向与屏幕相反
 6973              		.loc 1 407 23 view .LVU1883
 6974 04f4 82F83030 		strb	r3, [r2, #48]
 408:Core/Src/Mytouch.c **** 						{
 6975              		.loc 1 408 7 is_stmt 1 view .LVU1884
 408:Core/Src/Mytouch.c **** 						{
 6976              		.loc 1 408 9 is_stmt 0 view .LVU1885
 6977 04f8 9BB3     		cbz	r3, .L357
 410:Core/Src/Mytouch.c **** 							CMD_RDY=0XD0;	 
 6978              		.loc 1 410 8 is_stmt 1 view .LVU1886
 410:Core/Src/Mytouch.c **** 							CMD_RDY=0XD0;	 
 6979              		.loc 1 410 15 is_stmt 0 view .LVU1887
 6980 04fa 3A4B     		ldr	r3, .L367+36
 6981 04fc 9022     		movs	r2, #144
 6982 04fe 1A70     		strb	r2, [r3]
 411:Core/Src/Mytouch.c **** 						}else				   //X,Y方向与屏幕相同
 6983              		.loc 1 411 8 is_stmt 1 view .LVU1888
 411:Core/Src/Mytouch.c **** 						}else				   //X,Y方向与屏幕相同
 6984              		.loc 1 411 15 is_stmt 0 view .LVU1889
 6985 0500 394B     		ldr	r3, .L367+40
 6986 0502 D022     		movs	r2, #208
 6987 0504 1A70     		strb	r2, [r3]
 6988              	.L358:
 417:Core/Src/Mytouch.c **** 					}		
 6989              		.loc 1 417 7 is_stmt 1 view .LVU1890
 6990              	.LBE16:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 6991              		.loc 1 311 11 is_stmt 0 view .LVU1891
 6992 0506 0024     		movs	r4, #0
 6993              	.LVL631:
 6994              	.LBB17:
 403:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 6995              		.loc 1 403 10 view .LVU1892
 6996 0508 2546     		mov	r5, r4
 417:Core/Src/Mytouch.c **** 					}		
 6997              		.loc 1 417 7 view .LVU1893
 6998 050a BFE5     		b	.L338
 6999              	.LVL632:
 7000              	.L352:
 389:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 7001              		.loc 1 389 7 is_stmt 1 view .LVU1894
 390:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 7002              		.loc 1 390 11 view .LVU1895
 390:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 7003              		.loc 1 390 37 is_stmt 0 view .LVU1896
 7004 050c 324B     		ldr	r3, .L367+24
 7005 050e 1888     		ldrh	r0, [r3]
 390:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 7006              		.loc 1 390 53 view .LVU1897
 7007 0510 5988     		ldrh	r1, [r3, #2]
 390:Core/Src/Mytouch.c ****    	 					TP_Drow_Touch_Point(20,20,RED);								//画点1
 7008              		.loc 1 390 11 view .LVU1898
 7009 0512 1439     		subs	r1, r1, #20
 7010 0514 1438     		subs	r0, r0, #20
 7011 0516 4FF6FF72 		movw	r2, #65535
ARM GAS  /tmp/ccNZMix7.s 			page 167


 7012 051a 89B2     		uxth	r1, r1
 7013 051c 80B2     		uxth	r0, r0
 7014 051e FFF7FEFF 		bl	TP_Drow_Touch_Point
 7015              	.LVL633:
 391:Core/Src/Mytouch.c ****  						TP_Adj_Info_Show(pos_temp[0][0],pos_temp[0][1],pos_temp[1][0],pos_temp[1][1],pos_temp[2][0],
 7016              		.loc 1 391 11 is_stmt 1 view .LVU1899
 7017 0522 4FF47842 		mov	r2, #63488
 7018 0526 1421     		movs	r1, #20
 7019 0528 0846     		mov	r0, r1
 7020 052a FFF7FEFF 		bl	TP_Drow_Touch_Point
 7021              	.LVL634:
 392:Core/Src/Mytouch.c **** 						continue;
 7022              		.loc 1 392 8 view .LVU1900
 392:Core/Src/Mytouch.c **** 						continue;
 7023              		.loc 1 392 148 is_stmt 0 view .LVU1901
 7024 052e 9FED287B 		vldr.64	d7, .L367+16
 7025 0532 28EE078B 		vmul.f64	d8, d8, d7
 7026              	.LVL635:
 392:Core/Src/Mytouch.c **** 						continue;
 7027              		.loc 1 392 8 view .LVU1902
 7028 0536 BCEEC88B 		vcvt.u32.f64	s16, d8
 7029 053a 18EE103A 		vmov	r3, s16	@ int
 7030 053e 9BB2     		uxth	r3, r3
 7031 0540 0493     		str	r3, [sp, #16]
 7032 0542 CDF80CB0 		str	fp, [sp, #12]
 7033 0546 CDF808A0 		str	r10, [sp, #8]
 7034 054a 0196     		str	r6, [sp, #4]
 7035 054c CDF80090 		str	r9, [sp]
 7036 0550 4346     		mov	r3, r8
 7037 0552 3A46     		mov	r2, r7
 7038 0554 2146     		mov	r1, r4
 7039 0556 2846     		mov	r0, r5
 7040 0558 FFF7FEFF 		bl	TP_Adj_Info_Show
 7041              	.LVL636:
 393:Core/Src/Mytouch.c **** 					}//正确了
 7042              		.loc 1 393 7 is_stmt 1 view .LVU1903
 7043              	.LBE17:
 311:Core/Src/Mytouch.c **** 			tp_dev.sta&=~(1<<6);//标记按键已经被处理过了.
 7044              		.loc 1 311 11 is_stmt 0 view .LVU1904
 7045 055c 0024     		movs	r4, #0
 7046              	.LVL637:
 7047              	.LBB18:
 389:Core/Src/Mytouch.c ****  				    	TP_Drow_Touch_Point(lcddev.width-20,lcddev.height-20,WHITE);	//清除点4
 7048              		.loc 1 389 10 view .LVU1905
 7049 055e 2546     		mov	r5, r4
 7050              	.LVL638:
 393:Core/Src/Mytouch.c **** 					}//正确了
 7051              		.loc 1 393 7 view .LVU1906
 7052 0560 94E5     		b	.L338
 7053              	.LVL639:
 7054              	.L357:
 414:Core/Src/Mytouch.c **** 							CMD_RDY=0X90;	 
 7055              		.loc 1 414 8 is_stmt 1 view .LVU1907
 414:Core/Src/Mytouch.c **** 							CMD_RDY=0X90;	 
 7056              		.loc 1 414 15 is_stmt 0 view .LVU1908
 7057 0562 204B     		ldr	r3, .L367+36
 7058 0564 D022     		movs	r2, #208
ARM GAS  /tmp/ccNZMix7.s 			page 168


 7059 0566 1A70     		strb	r2, [r3]
 415:Core/Src/Mytouch.c **** 						}			    
 7060              		.loc 1 415 8 is_stmt 1 view .LVU1909
 415:Core/Src/Mytouch.c **** 						}			    
 7061              		.loc 1 415 15 is_stmt 0 view .LVU1910
 7062 0568 1F4B     		ldr	r3, .L367+40
 7063 056a 9022     		movs	r2, #144
 7064 056c 1A70     		strb	r2, [r3]
 7065 056e CAE7     		b	.L358
 7066              	.LVL640:
 7067              	.L356:
 419:Core/Src/Mytouch.c **** 					LCD_Clear(WHITE);//清屏
 7068              		.loc 1 419 6 is_stmt 1 view .LVU1911
 419:Core/Src/Mytouch.c **** 					LCD_Clear(WHITE);//清屏
 7069              		.loc 1 419 17 is_stmt 0 view .LVU1912
 7070 0570 1E4B     		ldr	r3, .L367+44
 7071 0572 1F22     		movs	r2, #31
 7072 0574 1A60     		str	r2, [r3]
 420:Core/Src/Mytouch.c **** 					LCD_ShowString(35,110,lcddev.width,lcddev.height,16,"Touch Screen Adjust OK!");//校正完成
 7073              		.loc 1 420 6 is_stmt 1 view .LVU1913
 7074 0576 4FF6FF70 		movw	r0, #65535
 7075 057a FFF7FEFF 		bl	LCD_Clear
 7076              	.LVL641:
 421:Core/Src/Mytouch.c **** 					HAL_Delay(1000);
 7077              		.loc 1 421 6 view .LVU1914
 7078 057e 164A     		ldr	r2, .L367+24
 7079 0580 1B4B     		ldr	r3, .L367+48
 7080 0582 0193     		str	r3, [sp, #4]
 7081 0584 1023     		movs	r3, #16
 7082 0586 0093     		str	r3, [sp]
 7083 0588 5388     		ldrh	r3, [r2, #2]
 7084 058a 1288     		ldrh	r2, [r2]
 7085 058c 6E21     		movs	r1, #110
 7086 058e 2320     		movs	r0, #35
 7087 0590 FFF7FEFF 		bl	LCD_ShowString
 7088              	.LVL642:
 422:Core/Src/Mytouch.c **** 					TP_Save_Adjdata();  
 7089              		.loc 1 422 6 view .LVU1915
 7090 0594 4FF47A70 		mov	r0, #1000
 7091 0598 FFF7FEFF 		bl	HAL_Delay
 7092              	.LVL643:
 423:Core/Src/Mytouch.c ****  					LCD_Clear(WHITE);//清屏   
 7093              		.loc 1 423 6 view .LVU1916
 7094 059c FFF7FEFF 		bl	TP_Save_Adjdata
 7095              	.LVL644:
 424:Core/Src/Mytouch.c **** 					return;//校正完成				 
 7096              		.loc 1 424 7 view .LVU1917
 7097 05a0 4FF6FF70 		movw	r0, #65535
 7098 05a4 FFF7FEFF 		bl	LCD_Clear
 7099              	.LVL645:
 425:Core/Src/Mytouch.c **** 			}
 7100              		.loc 1 425 6 view .LVU1918
 7101 05a8 03E0     		b	.L337
 7102              	.LVL646:
 7103              	.L360:
 425:Core/Src/Mytouch.c **** 			}
 7104              		.loc 1 425 6 is_stmt 0 view .LVU1919
ARM GAS  /tmp/ccNZMix7.s 			page 169


 7105              	.LBE18:
 317:Core/Src/Mytouch.c **** 			{			   
 7106              		.loc 1 317 4 view .LVU1920
 7107 05aa 0024     		movs	r4, #0
 7108 05ac 65E5     		b	.L339
 7109              	.LVL647:
 7110              	.L364:
 432:Core/Src/Mytouch.c **** 			break;
 7111              		.loc 1 432 4 is_stmt 1 view .LVU1921
 7112 05ae FFF7FEFF 		bl	TP_Get_Adjdata
 7113              	.LVL648:
 433:Core/Src/Mytouch.c **** 	 	} 
 7114              		.loc 1 433 4 view .LVU1922
 7115              	.L337:
 436:Core/Src/Mytouch.c **** //触摸屏初始化  		    
 7116              		.loc 1 436 1 is_stmt 0 view .LVU1923
 7117 05b2 0BB0     		add	sp, sp, #44
 7118              	.LCFI89:
 7119              		.cfi_def_cfa_offset 52
 7120              		@ sp needed
 7121 05b4 BDEC048B 		vldm	sp!, {d8-d9}
 7122              	.LCFI90:
 7123              		.cfi_restore 82
 7124              		.cfi_restore 83
 7125              		.cfi_restore 80
 7126              		.cfi_restore 81
 7127              		.cfi_def_cfa_offset 36
 7128 05b8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7129              	.L368:
 7130 05bc AFF30080 		.align	3
 7131              	.L367:
 7132 05c0 66666666 		.word	1717986918
 7133 05c4 6666EE3F 		.word	1072588390
 7134 05c8 CDCCCCCC 		.word	-858993459
 7135 05cc CCCCF03F 		.word	1072745676
 7136 05d0 00000000 		.word	0
 7137 05d4 00005940 		.word	1079574528
 7138 05d8 00000000 		.word	lcddev
 7139 05dc 00000000 		.word	.LANCHOR2
 7140 05e0 7C000000 		.word	.LC15
 7141 05e4 00000000 		.word	.LANCHOR0
 7142 05e8 00000000 		.word	.LANCHOR1
 7143 05ec 00000000 		.word	POINT_COLOR
 7144 05f0 90000000 		.word	.LC16
 7145              		.cfi_endproc
 7146              	.LFE158:
 7148              		.section	.text.TP_Init,"ax",%progbits
 7149              		.align	1
 7150              		.global	TP_Init
 7151              		.syntax unified
 7152              		.thumb
 7153              		.thumb_func
 7154              		.fpu fpv5-d16
 7156              	TP_Init:
 7157              	.LFB159:
 441:Core/Src/Mytouch.c ****     GPIO_InitTypeDef GPIO_Initure;
 7158              		.loc 1 441 1 is_stmt 1 view -0
ARM GAS  /tmp/ccNZMix7.s 			page 170


 7159              		.cfi_startproc
 7160              		@ args = 0, pretend = 0, frame = 32
 7161              		@ frame_needed = 0, uses_anonymous_args = 0
 7162 0000 10B5     		push	{r4, lr}
 7163              	.LCFI91:
 7164              		.cfi_def_cfa_offset 8
 7165              		.cfi_offset 4, -8
 7166              		.cfi_offset 14, -4
 7167 0002 88B0     		sub	sp, sp, #32
 7168              	.LCFI92:
 7169              		.cfi_def_cfa_offset 40
 442:Core/Src/Mytouch.c **** 	if(lcddev.id==0X5510||lcddev.id==0X4342||lcddev.id==0X4384) //4.3 800*40MCU电容触摸屏或者4.
 7170              		.loc 1 442 5 view .LVU1925
 443:Core/Src/Mytouch.c **** 	{
 7171              		.loc 1 443 2 view .LVU1926
 443:Core/Src/Mytouch.c **** 	{
 7172              		.loc 1 443 11 is_stmt 0 view .LVU1927
 7173 0004 564B     		ldr	r3, .L380
 7174 0006 9B88     		ldrh	r3, [r3, #4]
 443:Core/Src/Mytouch.c **** 	{
 7175              		.loc 1 443 4 view .LVU1928
 7176 0008 45F21051 		movw	r1, #21776
 7177 000c 44F24232 		movw	r2, #17218
 7178 0010 9342     		cmp	r3, r2
 7179 0012 18BF     		it	ne
 7180 0014 8B42     		cmpne	r3, r1
 7181 0016 63D0     		beq	.L370
 443:Core/Src/Mytouch.c **** 	{
 7182              		.loc 1 443 41 discriminator 1 view .LVU1929
 7183 0018 44F28432 		movw	r2, #17284
 7184 001c 9342     		cmp	r3, r2
 7185 001e 5FD0     		beq	.L370
 456:Core/Src/Mytouch.c **** 	{
 7186              		.loc 1 456 8 is_stmt 1 view .LVU1930
 456:Core/Src/Mytouch.c **** 	{
 7187              		.loc 1 456 10 is_stmt 0 view .LVU1931
 7188 0020 41F66311 		movw	r1, #6499
 7189 0024 47F28402 		movw	r2, #28804
 7190 0028 9342     		cmp	r3, r2
 7191 002a 18BF     		it	ne
 7192 002c 8B42     		cmpne	r3, r1
 7193 002e 75D0     		beq	.L375
 456:Core/Src/Mytouch.c **** 	{
 7194              		.loc 1 456 47 discriminator 1 view .LVU1932
 7195 0030 47F21602 		movw	r2, #28694
 7196 0034 9342     		cmp	r3, r2
 7197 0036 71D0     		beq	.L375
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7198              		.loc 1 466 3 is_stmt 1 view .LVU1933
 7199              	.LBB19:
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7200              		.loc 1 466 3 view .LVU1934
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7201              		.loc 1 466 3 view .LVU1935
 7202 0038 4A4B     		ldr	r3, .L380+4
 7203 003a D3F8E020 		ldr	r2, [r3, #224]
 7204 003e 42F08002 		orr	r2, r2, #128
ARM GAS  /tmp/ccNZMix7.s 			page 171


 7205 0042 C3F8E020 		str	r2, [r3, #224]
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7206              		.loc 1 466 3 view .LVU1936
 7207 0046 D3F8E020 		ldr	r2, [r3, #224]
 7208 004a 02F08002 		and	r2, r2, #128
 7209 004e 0092     		str	r2, [sp]
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7210              		.loc 1 466 3 view .LVU1937
 7211 0050 009A     		ldr	r2, [sp]
 7212              	.LBE19:
 466:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOI_CLK_ENABLE();			//开启GPIOI时钟
 7213              		.loc 1 466 3 view .LVU1938
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7214              		.loc 1 467 3 view .LVU1939
 7215              	.LBB20:
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7216              		.loc 1 467 3 view .LVU1940
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7217              		.loc 1 467 3 view .LVU1941
 7218 0052 D3F8E020 		ldr	r2, [r3, #224]
 7219 0056 42F48072 		orr	r2, r2, #256
 7220 005a C3F8E020 		str	r2, [r3, #224]
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7221              		.loc 1 467 3 view .LVU1942
 7222 005e D3F8E020 		ldr	r2, [r3, #224]
 7223 0062 02F48072 		and	r2, r2, #256
 7224 0066 0192     		str	r2, [sp, #4]
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7225              		.loc 1 467 3 view .LVU1943
 7226 0068 019A     		ldr	r2, [sp, #4]
 7227              	.LBE20:
 467:Core/Src/Mytouch.c **** 		__HAL_RCC_GPIOG_CLK_ENABLE();			//开启GPIOG时钟
 7228              		.loc 1 467 3 view .LVU1944
 468:Core/Src/Mytouch.c ****         
 7229              		.loc 1 468 3 view .LVU1945
 7230              	.LBB21:
 468:Core/Src/Mytouch.c ****         
 7231              		.loc 1 468 3 view .LVU1946
 468:Core/Src/Mytouch.c ****         
 7232              		.loc 1 468 3 view .LVU1947
 7233 006a D3F8E020 		ldr	r2, [r3, #224]
 7234 006e 42F04002 		orr	r2, r2, #64
 7235 0072 C3F8E020 		str	r2, [r3, #224]
 468:Core/Src/Mytouch.c ****         
 7236              		.loc 1 468 3 view .LVU1948
 7237 0076 D3F8E030 		ldr	r3, [r3, #224]
 7238 007a 03F04003 		and	r3, r3, #64
 7239 007e 0293     		str	r3, [sp, #8]
 468:Core/Src/Mytouch.c ****         
 7240              		.loc 1 468 3 view .LVU1949
 7241 0080 029B     		ldr	r3, [sp, #8]
 7242              	.LBE21:
 468:Core/Src/Mytouch.c ****         
 7243              		.loc 1 468 3 view .LVU1950
 471:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
 7244              		.loc 1 471 3 view .LVU1951
 471:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_OUTPUT_PP;  //推挽输出
ARM GAS  /tmp/ccNZMix7.s 			page 172


 7245              		.loc 1 471 19 is_stmt 0 view .LVU1952
 7246 0082 4023     		movs	r3, #64
 7247 0084 0393     		str	r3, [sp, #12]
 472:Core/Src/Mytouch.c **** 		GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 7248              		.loc 1 472 3 is_stmt 1 view .LVU1953
 472:Core/Src/Mytouch.c **** 		GPIO_Initure.Pull=GPIO_PULLUP;          //上拉
 7249              		.loc 1 472 20 is_stmt 0 view .LVU1954
 7250 0086 0123     		movs	r3, #1
 7251 0088 0493     		str	r3, [sp, #16]
 473:Core/Src/Mytouch.c **** 		GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 7252              		.loc 1 473 3 is_stmt 1 view .LVU1955
 473:Core/Src/Mytouch.c **** 		GPIO_Initure.Speed=GPIO_SPEED_FREQ_VERY_HIGH;     //高速
 7253              		.loc 1 473 20 is_stmt 0 view .LVU1956
 7254 008a 0593     		str	r3, [sp, #20]
 474:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 7255              		.loc 1 474 3 is_stmt 1 view .LVU1957
 474:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 7256              		.loc 1 474 21 is_stmt 0 view .LVU1958
 7257 008c 0323     		movs	r3, #3
 7258 008e 0693     		str	r3, [sp, #24]
 475:Core/Src/Mytouch.c ****         
 7259              		.loc 1 475 3 is_stmt 1 view .LVU1959
 7260 0090 354C     		ldr	r4, .L380+8
 7261 0092 03A9     		add	r1, sp, #12
 7262 0094 2046     		mov	r0, r4
 7263 0096 FFF7FEFF 		bl	HAL_GPIO_Init
 7264              	.LVL649:
 478:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 7265              		.loc 1 478 3 view .LVU1960
 478:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOI,&GPIO_Initure);     //初始化
 7266              		.loc 1 478 19 is_stmt 0 view .LVU1961
 7267 009a 4FF48473 		mov	r3, #264
 7268 009e 0393     		str	r3, [sp, #12]
 479:Core/Src/Mytouch.c ****         
 7269              		.loc 1 479 3 is_stmt 1 view .LVU1962
 7270 00a0 03A9     		add	r1, sp, #12
 7271 00a2 3248     		ldr	r0, .L380+12
 7272 00a4 FFF7FEFF 		bl	HAL_GPIO_Init
 7273              	.LVL650:
 482:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 7274              		.loc 1 482 3 view .LVU1963
 482:Core/Src/Mytouch.c **** 		GPIO_Initure.Mode=GPIO_MODE_INPUT;      //输入
 7275              		.loc 1 482 19 is_stmt 0 view .LVU1964
 7276 00a8 8023     		movs	r3, #128
 7277 00aa 0393     		str	r3, [sp, #12]
 483:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 7278              		.loc 1 483 3 is_stmt 1 view .LVU1965
 483:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOH,&GPIO_Initure);     //初始化
 7279              		.loc 1 483 20 is_stmt 0 view .LVU1966
 7280 00ac 0023     		movs	r3, #0
 7281 00ae 0493     		str	r3, [sp, #16]
 484:Core/Src/Mytouch.c ****         
 7282              		.loc 1 484 3 is_stmt 1 view .LVU1967
 7283 00b0 03A9     		add	r1, sp, #12
 7284 00b2 2046     		mov	r0, r4
 7285 00b4 FFF7FEFF 		bl	HAL_GPIO_Init
 7286              	.LVL651:
ARM GAS  /tmp/ccNZMix7.s 			page 173


 487:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOG,&GPIO_Initure);     //初始化
 7287              		.loc 1 487 3 view .LVU1968
 487:Core/Src/Mytouch.c **** 		HAL_GPIO_Init(GPIOG,&GPIO_Initure);     //初始化
 7288              		.loc 1 487 19 is_stmt 0 view .LVU1969
 7289 00b8 0823     		movs	r3, #8
 7290 00ba 0393     		str	r3, [sp, #12]
 488:Core/Src/Mytouch.c ****         
 7291              		.loc 1 488 3 is_stmt 1 view .LVU1970
 7292 00bc 03A9     		add	r1, sp, #12
 7293 00be 2C48     		ldr	r0, .L380+16
 7294 00c0 FFF7FEFF 		bl	HAL_GPIO_Init
 7295              	.LVL652:
 490:Core/Src/Mytouch.c **** 		AT24CXX_Init();		//初始化24CXX
 7296              		.loc 1 490 3 view .LVU1971
 7297 00c4 2B48     		ldr	r0, .L380+20
 7298 00c6 00F11601 		add	r1, r0, #22
 7299 00ca 0C30     		adds	r0, r0, #12
 7300 00cc FFF7FEFF 		bl	TP_Read_XY
 7301              	.LVL653:
 491:Core/Src/Mytouch.c **** 		if(TP_Get_Adjdata())return 0;//已经校准
 7302              		.loc 1 491 3 view .LVU1972
 7303 00d0 FFF7FEFF 		bl	AT24CXX_Init
 7304              	.LVL654:
 492:Core/Src/Mytouch.c **** 		else			   //未校准?
 7305              		.loc 1 492 3 view .LVU1973
 492:Core/Src/Mytouch.c **** 		else			   //未校准?
 7306              		.loc 1 492 6 is_stmt 0 view .LVU1974
 7307 00d4 FFF7FEFF 		bl	TP_Get_Adjdata
 7308              	.LVL655:
 492:Core/Src/Mytouch.c **** 		else			   //未校准?
 7309              		.loc 1 492 5 view .LVU1975
 7310 00d8 0028     		cmp	r0, #0
 7311 00da 34D0     		beq	.L379
 492:Core/Src/Mytouch.c **** 		else			   //未校准?
 7312              		.loc 1 492 30 view .LVU1976
 7313 00dc 0020     		movs	r0, #0
 7314 00de 15E0     		b	.L374
 7315              	.L370:
 445:Core/Src/Mytouch.c **** 		{ 
 7316              		.loc 1 445 3 is_stmt 1 view .LVU1977
 445:Core/Src/Mytouch.c **** 		{ 
 7317              		.loc 1 445 6 is_stmt 0 view .LVU1978
 7318 00e0 FFF7FEFF 		bl	GT9147_Init
 7319              	.LVL656:
 445:Core/Src/Mytouch.c **** 		{ 
 7320              		.loc 1 445 5 view .LVU1979
 7321 00e4 A0B9     		cbnz	r0, .L372
 447:Core/Src/Mytouch.c **** 		}else
 7322              		.loc 1 447 4 is_stmt 1 view .LVU1980
 447:Core/Src/Mytouch.c **** 		}else
 7323              		.loc 1 447 15 is_stmt 0 view .LVU1981
 7324 00e6 234B     		ldr	r3, .L380+20
 7325 00e8 234A     		ldr	r2, .L380+24
 7326 00ea 5A60     		str	r2, [r3, #4]
 7327              	.L373:
 453:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 7328              		.loc 1 453 3 is_stmt 1 view .LVU1982
ARM GAS  /tmp/ccNZMix7.s 			page 174


 453:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 7329              		.loc 1 453 19 is_stmt 0 view .LVU1983
 7330 00ec 2149     		ldr	r1, .L380+20
 7331 00ee 91F83030 		ldrb	r3, [r1, #48]	@ zero_extendqisi2
 7332 00f2 43F08002 		orr	r2, r3, #128
 7333 00f6 81F83020 		strb	r2, [r1, #48]
 454:Core/Src/Mytouch.c **** 		return 0;
 7334              		.loc 1 454 3 is_stmt 1 view .LVU1984
 454:Core/Src/Mytouch.c **** 		return 0;
 7335              		.loc 1 454 27 is_stmt 0 view .LVU1985
 7336 00fa 194B     		ldr	r3, .L380
 7337 00fc 93F90630 		ldrsb	r3, [r3, #6]
 454:Core/Src/Mytouch.c **** 		return 0;
 7338              		.loc 1 454 31 view .LVU1986
 7339 0100 03F00103 		and	r3, r3, #1
 454:Core/Src/Mytouch.c **** 		return 0;
 7340              		.loc 1 454 19 view .LVU1987
 7341 0104 1343     		orrs	r3, r3, r2
 7342 0106 81F83030 		strb	r3, [r1, #48]
 455:Core/Src/Mytouch.c **** 	}else if(lcddev.id==0X1963||lcddev.id==0X7084||lcddev.id==0X7016)//SSD1963 7寸屏或者 7寸800*4
 7343              		.loc 1 455 3 is_stmt 1 view .LVU1988
 455:Core/Src/Mytouch.c **** 	}else if(lcddev.id==0X1963||lcddev.id==0X7084||lcddev.id==0X7016)//SSD1963 7寸屏或者 7寸800*4
 7344              		.loc 1 455 10 is_stmt 0 view .LVU1989
 7345 010a 0020     		movs	r0, #0
 7346              	.L374:
 502:Core/Src/Mytouch.c **** 
 7347              		.loc 1 502 1 view .LVU1990
 7348 010c 08B0     		add	sp, sp, #32
 7349              	.LCFI93:
 7350              		.cfi_remember_state
 7351              		.cfi_def_cfa_offset 8
 7352              		@ sp needed
 7353 010e 10BD     		pop	{r4, pc}
 7354              	.L372:
 7355              	.LCFI94:
 7356              		.cfi_restore_state
 450:Core/Src/Mytouch.c **** 			tp_dev.scan=OTT2001A_Scan;	//扫描函数指向OTT2001A触摸屏扫描
 7357              		.loc 1 450 4 is_stmt 1 view .LVU1991
 7358 0110 FFF7FEFF 		bl	OTT2001A_Init
 7359              	.LVL657:
 451:Core/Src/Mytouch.c **** 		}
 7360              		.loc 1 451 4 view .LVU1992
 451:Core/Src/Mytouch.c **** 		}
 7361              		.loc 1 451 15 is_stmt 0 view .LVU1993
 7362 0114 174B     		ldr	r3, .L380+20
 7363 0116 194A     		ldr	r2, .L380+28
 7364 0118 5A60     		str	r2, [r3, #4]
 7365 011a E7E7     		b	.L373
 7366              	.L375:
 458:Core/Src/Mytouch.c **** 		tp_dev.scan=FT5206_Scan;		//扫描函数指向GT9147触摸屏扫描		
 7367              		.loc 1 458 3 is_stmt 1 view .LVU1994
 7368 011c FFF7FEFF 		bl	FT5206_Init
 7369              	.LVL658:
 459:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=0X80;			//电容屏 
 7370              		.loc 1 459 3 view .LVU1995
 459:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=0X80;			//电容屏 
 7371              		.loc 1 459 14 is_stmt 0 view .LVU1996
ARM GAS  /tmp/ccNZMix7.s 			page 175


 7372 0120 144A     		ldr	r2, .L380+20
 7373 0122 174B     		ldr	r3, .L380+32
 7374 0124 5360     		str	r3, [r2, #4]
 460:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 7375              		.loc 1 460 3 is_stmt 1 view .LVU1997
 460:Core/Src/Mytouch.c **** 		tp_dev.touchtype|=lcddev.dir&0X01;//横屏还是竖屏 
 7376              		.loc 1 460 19 is_stmt 0 view .LVU1998
 7377 0126 92F83030 		ldrb	r3, [r2, #48]	@ zero_extendqisi2
 7378 012a 43F08001 		orr	r1, r3, #128
 7379 012e 82F83010 		strb	r1, [r2, #48]
 461:Core/Src/Mytouch.c **** 		return 0;
 7380              		.loc 1 461 3 is_stmt 1 view .LVU1999
 461:Core/Src/Mytouch.c **** 		return 0;
 7381              		.loc 1 461 27 is_stmt 0 view .LVU2000
 7382 0132 0B4B     		ldr	r3, .L380
 7383 0134 93F90630 		ldrsb	r3, [r3, #6]
 461:Core/Src/Mytouch.c **** 		return 0;
 7384              		.loc 1 461 31 view .LVU2001
 7385 0138 03F00103 		and	r3, r3, #1
 461:Core/Src/Mytouch.c **** 		return 0;
 7386              		.loc 1 461 19 view .LVU2002
 7387 013c 0B43     		orrs	r3, r3, r1
 7388 013e 82F83030 		strb	r3, [r2, #48]
 462:Core/Src/Mytouch.c **** 	}else
 7389              		.loc 1 462 3 is_stmt 1 view .LVU2003
 462:Core/Src/Mytouch.c **** 	}else
 7390              		.loc 1 462 10 is_stmt 0 view .LVU2004
 7391 0142 0020     		movs	r0, #0
 7392 0144 E2E7     		b	.L374
 7393              	.L379:
 495:Core/Src/Mytouch.c **** 			TP_Adjust();  	//屏幕校准 
 7394              		.loc 1 495 4 is_stmt 1 view .LVU2005
 7395 0146 4FF6FF70 		movw	r0, #65535
 7396 014a FFF7FEFF 		bl	LCD_Clear
 7397              	.LVL659:
 496:Core/Src/Mytouch.c **** 			TP_Save_Adjdata();	 
 7398              		.loc 1 496 4 view .LVU2006
 7399 014e FFF7FEFF 		bl	TP_Adjust
 7400              	.LVL660:
 497:Core/Src/Mytouch.c **** 		}			
 7401              		.loc 1 497 4 view .LVU2007
 7402 0152 FFF7FEFF 		bl	TP_Save_Adjdata
 7403              	.LVL661:
 499:Core/Src/Mytouch.c **** 	}
 7404              		.loc 1 499 3 view .LVU2008
 7405 0156 FFF7FEFF 		bl	TP_Get_Adjdata
 7406              	.LVL662:
 501:Core/Src/Mytouch.c **** }
 7407              		.loc 1 501 2 view .LVU2009
 501:Core/Src/Mytouch.c **** }
 7408              		.loc 1 501 9 is_stmt 0 view .LVU2010
 7409 015a 0120     		movs	r0, #1
 7410 015c D6E7     		b	.L374
 7411              	.L381:
 7412 015e 00BF     		.align	2
 7413              	.L380:
 7414 0160 00000000 		.word	lcddev
ARM GAS  /tmp/ccNZMix7.s 			page 176


 7415 0164 00440258 		.word	1476543488
 7416 0168 001C0258 		.word	1476533248
 7417 016c 00200258 		.word	1476534272
 7418 0170 00180258 		.word	1476532224
 7419 0174 00000000 		.word	.LANCHOR2
 7420 0178 00000000 		.word	GT9147_Scan
 7421 017c 00000000 		.word	OTT2001A_Scan
 7422 0180 00000000 		.word	FT5206_Scan
 7423              		.cfi_endproc
 7424              	.LFE159:
 7426              		.section	.text.AT24CXX_Check,"ax",%progbits
 7427              		.align	1
 7428              		.global	AT24CXX_Check
 7429              		.syntax unified
 7430              		.thumb
 7431              		.thumb_func
 7432              		.fpu fpv5-d16
 7434              	AT24CXX_Check:
 7435              	.LFB188:
1361:Core/Src/Mytouch.c **** 	u8 temp;
 7436              		.loc 1 1361 1 is_stmt 1 view -0
 7437              		.cfi_startproc
 7438              		@ args = 0, pretend = 0, frame = 0
 7439              		@ frame_needed = 0, uses_anonymous_args = 0
 7440 0000 08B5     		push	{r3, lr}
 7441              	.LCFI95:
 7442              		.cfi_def_cfa_offset 8
 7443              		.cfi_offset 3, -8
 7444              		.cfi_offset 14, -4
1362:Core/Src/Mytouch.c **** 	temp=AT24CXX_ReadOneByte(255);//避免每次开机都写AT24CXX			   
 7445              		.loc 1 1362 2 view .LVU2012
1363:Core/Src/Mytouch.c **** 	if(temp==0X55)return 0;		   
 7446              		.loc 1 1363 2 view .LVU2013
1363:Core/Src/Mytouch.c **** 	if(temp==0X55)return 0;		   
 7447              		.loc 1 1363 7 is_stmt 0 view .LVU2014
 7448 0002 FF20     		movs	r0, #255
 7449 0004 FFF7FEFF 		bl	AT24CXX_ReadOneByte
 7450              	.LVL663:
1364:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
 7451              		.loc 1 1364 2 is_stmt 1 view .LVU2015
1364:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
 7452              		.loc 1 1364 4 is_stmt 0 view .LVU2016
 7453 0008 5528     		cmp	r0, #85
 7454 000a 0AD0     		beq	.L384
1367:Core/Src/Mytouch.c **** 	    temp=AT24CXX_ReadOneByte(255);	  
 7455              		.loc 1 1367 3 is_stmt 1 view .LVU2017
 7456 000c 5521     		movs	r1, #85
 7457 000e FF20     		movs	r0, #255
 7458              	.LVL664:
1367:Core/Src/Mytouch.c **** 	    temp=AT24CXX_ReadOneByte(255);	  
 7459              		.loc 1 1367 3 is_stmt 0 view .LVU2018
 7460 0010 FFF7FEFF 		bl	AT24CXX_WriteOneByte
 7461              	.LVL665:
1368:Core/Src/Mytouch.c **** 		if(temp==0X55)return 0;
 7462              		.loc 1 1368 6 is_stmt 1 view .LVU2019
1368:Core/Src/Mytouch.c **** 		if(temp==0X55)return 0;
 7463              		.loc 1 1368 11 is_stmt 0 view .LVU2020
ARM GAS  /tmp/ccNZMix7.s 			page 177


 7464 0014 FF20     		movs	r0, #255
 7465 0016 FFF7FEFF 		bl	AT24CXX_ReadOneByte
 7466              	.LVL666:
1369:Core/Src/Mytouch.c **** 	}
 7467              		.loc 1 1369 3 is_stmt 1 view .LVU2021
1369:Core/Src/Mytouch.c **** 	}
 7468              		.loc 1 1369 5 is_stmt 0 view .LVU2022
 7469 001a 5528     		cmp	r0, #85
 7470 001c 03D0     		beq	.L385
1371:Core/Src/Mytouch.c **** }
 7471              		.loc 1 1371 9 view .LVU2023
 7472 001e 0120     		movs	r0, #1
 7473              	.LVL667:
 7474              	.L383:
1372:Core/Src/Mytouch.c **** 
 7475              		.loc 1 1372 1 view .LVU2024
 7476 0020 08BD     		pop	{r3, pc}
 7477              	.LVL668:
 7478              	.L384:
1364:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
 7479              		.loc 1 1364 23 view .LVU2025
 7480 0022 0020     		movs	r0, #0
 7481              	.LVL669:
1364:Core/Src/Mytouch.c **** 	else//排除第一次初始化的情况
 7482              		.loc 1 1364 23 view .LVU2026
 7483 0024 FCE7     		b	.L383
 7484              	.LVL670:
 7485              	.L385:
1369:Core/Src/Mytouch.c **** 	}
 7486              		.loc 1 1369 24 view .LVU2027
 7487 0026 0020     		movs	r0, #0
 7488              	.LVL671:
1369:Core/Src/Mytouch.c **** 	}
 7489              		.loc 1 1369 24 view .LVU2028
 7490 0028 FAE7     		b	.L383
 7491              		.cfi_endproc
 7492              	.LFE188:
 7494              		.section	.text.AT24CXX_Read,"ax",%progbits
 7495              		.align	1
 7496              		.global	AT24CXX_Read
 7497              		.syntax unified
 7498              		.thumb
 7499              		.thumb_func
 7500              		.fpu fpv5-d16
 7502              	AT24CXX_Read:
 7503              	.LVL672:
 7504              	.LFB189:
1379:Core/Src/Mytouch.c **** 	while(NumToRead)
 7505              		.loc 1 1379 1 is_stmt 1 view -0
 7506              		.cfi_startproc
 7507              		@ args = 0, pretend = 0, frame = 0
 7508              		@ frame_needed = 0, uses_anonymous_args = 0
1379:Core/Src/Mytouch.c **** 	while(NumToRead)
 7509              		.loc 1 1379 1 is_stmt 0 view .LVU2030
 7510 0000 70B5     		push	{r4, r5, r6, lr}
 7511              	.LCFI96:
 7512              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccNZMix7.s 			page 178


 7513              		.cfi_offset 4, -16
 7514              		.cfi_offset 5, -12
 7515              		.cfi_offset 6, -8
 7516              		.cfi_offset 14, -4
 7517 0002 0C46     		mov	r4, r1
 7518 0004 1546     		mov	r5, r2
1380:Core/Src/Mytouch.c **** 	{
 7519              		.loc 1 1380 2 is_stmt 1 view .LVU2031
1380:Core/Src/Mytouch.c **** 	{
 7520              		.loc 1 1380 7 is_stmt 0 view .LVU2032
 7521 0006 08E0     		b	.L388
 7522              	.LVL673:
 7523              	.L389:
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7524              		.loc 1 1382 3 is_stmt 1 view .LVU2033
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7525              		.loc 1 1382 14 is_stmt 0 view .LVU2034
 7526 0008 461C     		adds	r6, r0, #1
 7527 000a B6B2     		uxth	r6, r6
 7528              	.LVL674:
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7529              		.loc 1 1382 14 view .LVU2035
 7530 000c FFF7FEFF 		bl	AT24CXX_ReadOneByte
 7531              	.LVL675:
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7532              		.loc 1 1382 13 view .LVU2036
 7533 0010 04F8010B 		strb	r0, [r4], #1
 7534              	.LVL676:
1383:Core/Src/Mytouch.c **** 	}
 7535              		.loc 1 1383 3 is_stmt 1 view .LVU2037
1383:Core/Src/Mytouch.c **** 	}
 7536              		.loc 1 1383 12 is_stmt 0 view .LVU2038
 7537 0014 013D     		subs	r5, r5, #1
 7538              	.LVL677:
1383:Core/Src/Mytouch.c **** 	}
 7539              		.loc 1 1383 12 view .LVU2039
 7540 0016 ADB2     		uxth	r5, r5
 7541              	.LVL678:
1382:Core/Src/Mytouch.c **** 		NumToRead--;
 7542              		.loc 1 1382 14 view .LVU2040
 7543 0018 3046     		mov	r0, r6
 7544              	.LVL679:
 7545              	.L388:
1380:Core/Src/Mytouch.c **** 	{
 7546              		.loc 1 1380 7 is_stmt 1 view .LVU2041
 7547 001a 002D     		cmp	r5, #0
 7548 001c F4D1     		bne	.L389
1385:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入指定个数的数据
 7549              		.loc 1 1385 1 is_stmt 0 view .LVU2042
 7550 001e 70BD     		pop	{r4, r5, r6, pc}
1385:Core/Src/Mytouch.c **** //在AT24CXX里面的指定地址开始写入指定个数的数据
 7551              		.loc 1 1385 1 view .LVU2043
 7552              		.cfi_endproc
 7553              	.LFE189:
 7555              		.global	g_gt_tnum
 7556              		.global	GT911_TPX_TBL
 7557              		.global	FT5206_TPX_TBL
ARM GAS  /tmp/ccNZMix7.s 			page 179


 7558              		.global	CIP
 7559              		.global	OTT_TPX_TBL
 7560              		.global	GT9147_TPX_TBL
 7561              		.global	GT9147_CFG_TBL
 7562              		.global	TP_REMIND_MSG_TBL
 7563              		.global	CMD_RDY
 7564              		.global	CMD_RDX
 7565              		.global	tp_dev
 7566              		.section	.bss.CIP,"aw",%nobits
 7567              		.align	2
 7568              		.set	.LANCHOR9,. + 0
 7571              	CIP:
 7572 0000 00000000 		.space	5
 7572      00
 7573              		.section	.bss.t.0,"aw",%nobits
 7574              		.set	.LANCHOR8,. + 0
 7577              	t.0:
 7578 0000 00       		.space	1
 7579              		.section	.bss.t.1,"aw",%nobits
 7580              		.set	.LANCHOR6,. + 0
 7583              	t.1:
 7584 0000 00       		.space	1
 7585              		.section	.bss.t.2,"aw",%nobits
 7586              		.set	.LANCHOR4,. + 0
 7589              	t.2:
 7590 0000 00       		.space	1
 7591              		.section	.data.CMD_RDX,"aw"
 7592              		.set	.LANCHOR0,. + 0
 7595              	CMD_RDX:
 7596 0000 D0       		.byte	-48
 7597              		.section	.data.CMD_RDY,"aw"
 7598              		.set	.LANCHOR1,. + 0
 7601              	CMD_RDY:
 7602 0000 90       		.byte	-112
 7603              		.section	.data.g_gt_tnum,"aw"
 7604              		.set	.LANCHOR10,. + 0
 7607              	g_gt_tnum:
 7608 0000 05       		.byte	5
 7609              		.section	.data.tp_dev,"aw"
 7610              		.align	2
 7611              		.set	.LANCHOR2,. + 0
 7614              	tp_dev:
 7615 0000 00000000 		.word	TP_Init
 7616 0004 00000000 		.word	TP_Scan
 7617 0008 00000000 		.word	TP_Adjust
 7618 000c 0000     		.short	0
 7619 000e 0000     		.short	0
 7620 0010 0000     		.short	0
 7621 0012 0000     		.short	0
 7622 0014 0000     		.short	0
 7623 0016 0000     		.short	0
 7624 0018 0000     		.short	0
 7625 001a 0000     		.short	0
 7626 001c 00000000 		.space	4
 7627 0020 00000000 		.space	20
 7627      00000000 
 7627      00000000 
ARM GAS  /tmp/ccNZMix7.s 			page 180


 7627      00000000 
 7627      00000000 
 7628              		.section	.rodata.FT5206_TPX_TBL,"a"
 7629              		.align	2
 7630              		.set	.LANCHOR12,. + 0
 7633              	FT5206_TPX_TBL:
 7634 0000 0300     		.short	3
 7635 0002 0900     		.short	9
 7636 0004 0F00     		.short	15
 7637 0006 1500     		.short	21
 7638 0008 1B00     		.short	27
 7639              		.section	.rodata.GT911_TPX_TBL,"a"
 7640              		.align	2
 7641              		.set	.LANCHOR11,. + 0
 7644              	GT911_TPX_TBL:
 7645 0000 5081     		.short	-32432
 7646 0002 5881     		.short	-32424
 7647 0004 6081     		.short	-32416
 7648 0006 6881     		.short	-32408
 7649 0008 7081     		.short	-32400
 7650              		.section	.rodata.GT9147_CFG_TBL,"a"
 7651              		.align	2
 7652              		.set	.LANCHOR3,. + 0
 7655              	GT9147_CFG_TBL:
 7656 0000 60E00120 		.ascii	"`\340\001 \003\0055\000\002\010\036\010P<\017\005\000"
 7656      03053500 
 7656      02081E08 
 7656      503C0F05 
 7656      00
 7657 0011 00FF6750 		.ascii	"\000\377gP\000\000\030\032\036\024\211(\0120.\273\012"
 7657      0000181A 
 7657      1E148928 
 7657      0A302EBB 
 7657      0A
 7658 0022 03000002 		.ascii	"\003\000\000\0023\035\000\000\000\000\000\000\0002\000"
 7658      331D0000 
 7658      00000000 
 7658      003200
 7659 0031 002A1C5A 		.ascii	"\000*\034Z\224\305\002\007\000\000\000\265\037\000\220"
 7659      94C50207 
 7659      000000B5 
 7659      1F0090
 7660 0040 28007732 		.ascii	"(\000w2\000b?\000RP\000R\000\000\000\000\000\000\000"
 7660      00623F00 
 7660      52500052 
 7660      00000000 
 7660      000000
 7661 0053 00000000 		.ascii	"\000\000\000\000\000\000\000\000\000\000\000\000\000"
 7661      00000000 
 7661      00000000 
 7661      00
 7662 0060 0000000F 		.ascii	"\000\000\000\017\017\003\006\020B\370\017\024\000\000"
 7662      0F030610 
 7662      42F80F14 
 7662      0000
 7663 006e 00001A18 		.ascii	"\000\000\032\030\026\024\022\020\016\014\012\010\000"
 7663      16141210 
ARM GAS  /tmp/ccNZMix7.s 			page 181


 7663      0E0C0A08 
 7663      00
 7664 007b 00000000 		.ascii	"\000\000\000\000\000\000\000\000\000\000\000\000\000"
 7664      00000000 
 7664      00000000 
 7664      00
 7665 0088 00000000 		.ascii	"\000\000\000\000\000\000)($\" \037\036\035\016\014\012"
 7665      00002928 
 7665      2422201F 
 7665      1E1D0E0C 
 7665      0A
 7666 0099 08060504 		.ascii	"\010\006\005\004\002\000\377\000\000\000\000\000\000"
 7666      0200FF00 
 7666      00000000 
 7666      00
 7667 00a6 00000000 		.ascii	"\000\000\000\000\000\377\377\377\377\377\377\377\377"
 7667      00FFFFFF 
 7667      FFFFFFFF 
 7667      FF
 7668 00b3 FFFFFFFF 		.ascii	"\377\377\377\377\377"
 7668      FF
 7669              		.section	.rodata.GT9147_TPX_TBL,"a"
 7670              		.align	2
 7671              		.set	.LANCHOR5,. + 0
 7674              	GT9147_TPX_TBL:
 7675 0000 5081     		.short	-32432
 7676 0002 5881     		.short	-32424
 7677 0004 6081     		.short	-32416
 7678 0006 6881     		.short	-32408
 7679 0008 7081     		.short	-32400
 7680              		.section	.rodata.OTT_TPX_TBL,"a"
 7681              		.align	2
 7682              		.set	.LANCHOR7,. + 0
 7685              	OTT_TPX_TBL:
 7686 0000 0001     		.short	256
 7687 0002 0005     		.short	1280
 7688 0004 0010     		.short	4096
 7689 0006 0014     		.short	5120
 7690 0008 0018     		.short	6144
 7691              		.section	.rodata.TP_REMIND_MSG_TBL,"a"
 7692              		.align	2
 7695              	TP_REMIND_MSG_TBL:
 7696 0000 00000000 		.word	.LC14
 7697              		.text
 7698              	.Letext0:
 7699              		.file 2 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/machine/_default_types.h"
 7700              		.file 3 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/sys/_stdint.h"
 7701              		.file 4 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h743xx.h"
 7702              		.file 5 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_gpio.h"
 7703              		.file 6 "Core/Inc/main.h"
 7704              		.file 7 "Core/Inc/LCD.h"
 7705              		.file 8 "Core/Inc/Mytouch.h"
 7706              		.file 9 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 7707              		.file 10 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/string.h"
 7708              		.file 11 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/stdio.h"
 7709              		.file 12 "/home/akinya/gcc-arm-none-eabi/arm-none-eabi/include/math.h"
 7710              		.file 13 "<built-in>"
ARM GAS  /tmp/ccNZMix7.s 			page 182


ARM GAS  /tmp/ccNZMix7.s 			page 183


DEFINED SYMBOLS
                            *ABS*:0000000000000000 Mytouch.c
     /tmp/ccNZMix7.s:17     .text.TP_Write_Byte:0000000000000000 $t
     /tmp/ccNZMix7.s:25     .text.TP_Write_Byte:0000000000000000 TP_Write_Byte
     /tmp/ccNZMix7.s:113    .text.TP_Write_Byte:0000000000000050 $d
     /tmp/ccNZMix7.s:119    .text.TP_Read_AD:0000000000000000 $t
     /tmp/ccNZMix7.s:126    .text.TP_Read_AD:0000000000000000 TP_Read_AD
     /tmp/ccNZMix7.s:284    .text.TP_Read_AD:00000000000000b0 $d
     /tmp/ccNZMix7.s:291    .text.TP_Read_XOY:0000000000000000 $t
     /tmp/ccNZMix7.s:298    .text.TP_Read_XOY:0000000000000000 TP_Read_XOY
     /tmp/ccNZMix7.s:462    .text.TP_Read_XOY:0000000000000094 $d
     /tmp/ccNZMix7.s:467    .text.TP_Read_XY:0000000000000000 $t
     /tmp/ccNZMix7.s:474    .text.TP_Read_XY:0000000000000000 TP_Read_XY
     /tmp/ccNZMix7.s:526    .text.TP_Read_XY:0000000000000020 $d
     /tmp/ccNZMix7.s:532    .text.TP_Read_XY2:0000000000000000 $t
     /tmp/ccNZMix7.s:539    .text.TP_Read_XY2:0000000000000000 TP_Read_XY2
     /tmp/ccNZMix7.s:684    .text.TP_Scan:0000000000000000 $t
     /tmp/ccNZMix7.s:691    .text.TP_Scan:0000000000000000 TP_Scan
     /tmp/ccNZMix7.s:843    .text.TP_Scan:00000000000000dc $d
     /tmp/ccNZMix7.s:849    .text.TP_Drow_Touch_Point:0000000000000000 $t
     /tmp/ccNZMix7.s:856    .text.TP_Drow_Touch_Point:0000000000000000 TP_Drow_Touch_Point
     /tmp/ccNZMix7.s:939    .text.TP_Drow_Touch_Point:0000000000000074 $d
     /tmp/ccNZMix7.s:944    .text.TP_Draw_Big_Point:0000000000000000 $t
     /tmp/ccNZMix7.s:951    .text.TP_Draw_Big_Point:0000000000000000 TP_Draw_Big_Point
     /tmp/ccNZMix7.s:999    .text.TP_Draw_Big_Point:0000000000000030 $d
     /tmp/ccNZMix7.s:1004   .rodata.TP_Adj_Info_Show.str1.4:0000000000000000 $d
     /tmp/ccNZMix7.s:1032   .text.TP_Adj_Info_Show:0000000000000000 $t
     /tmp/ccNZMix7.s:1039   .text.TP_Adj_Info_Show:0000000000000000 TP_Adj_Info_Show
     /tmp/ccNZMix7.s:1252   .text.TP_Adj_Info_Show:000000000000014c $d
     /tmp/ccNZMix7.s:1267   .text.CT_Delay:0000000000000000 $t
     /tmp/ccNZMix7.s:1274   .text.CT_Delay:0000000000000000 CT_Delay
     /tmp/ccNZMix7.s:1295   .text.CT_IIC_Init:0000000000000000 $t
     /tmp/ccNZMix7.s:1302   .text.CT_IIC_Init:0000000000000000 CT_IIC_Init
     /tmp/ccNZMix7.s:1386   .text.CT_IIC_Init:0000000000000060 $d
     /tmp/ccNZMix7.s:1393   .text.CT_IIC_Start:0000000000000000 $t
     /tmp/ccNZMix7.s:1400   .text.CT_IIC_Start:0000000000000000 CT_IIC_Start
     /tmp/ccNZMix7.s:1453   .text.CT_IIC_Start:000000000000003c $d
     /tmp/ccNZMix7.s:1459   .text.CT_IIC_Stop:0000000000000000 $t
     /tmp/ccNZMix7.s:1466   .text.CT_IIC_Stop:0000000000000000 CT_IIC_Stop
     /tmp/ccNZMix7.s:1507   .text.CT_IIC_Stop:000000000000002c $d
     /tmp/ccNZMix7.s:1513   .text.CT_IIC_Wait_Ack:0000000000000000 $t
     /tmp/ccNZMix7.s:1520   .text.CT_IIC_Wait_Ack:0000000000000000 CT_IIC_Wait_Ack
     /tmp/ccNZMix7.s:1606   .text.CT_IIC_Wait_Ack:000000000000004c $d
     /tmp/ccNZMix7.s:1612   .text.CT_IIC_Ack:0000000000000000 $t
     /tmp/ccNZMix7.s:1619   .text.CT_IIC_Ack:0000000000000000 CT_IIC_Ack
     /tmp/ccNZMix7.s:1675   .text.CT_IIC_Ack:0000000000000040 $d
     /tmp/ccNZMix7.s:1681   .text.CT_IIC_NAck:0000000000000000 $t
     /tmp/ccNZMix7.s:1688   .text.CT_IIC_NAck:0000000000000000 CT_IIC_NAck
     /tmp/ccNZMix7.s:1732   .text.CT_IIC_NAck:0000000000000030 $d
     /tmp/ccNZMix7.s:1738   .text.CT_IIC_Send_Byte:0000000000000000 $t
     /tmp/ccNZMix7.s:1745   .text.CT_IIC_Send_Byte:0000000000000000 CT_IIC_Send_Byte
     /tmp/ccNZMix7.s:1839   .text.CT_IIC_Send_Byte:000000000000005c $d
     /tmp/ccNZMix7.s:1845   .text.CT_IIC_Read_Byte:0000000000000000 $t
     /tmp/ccNZMix7.s:1852   .text.CT_IIC_Read_Byte:0000000000000000 CT_IIC_Read_Byte
     /tmp/ccNZMix7.s:1955   .text.CT_IIC_Read_Byte:0000000000000054 $d
     /tmp/ccNZMix7.s:1961   .text.GT9147_WR_Reg:0000000000000000 $t
     /tmp/ccNZMix7.s:1968   .text.GT9147_WR_Reg:0000000000000000 GT9147_WR_Reg
ARM GAS  /tmp/ccNZMix7.s 			page 184


     /tmp/ccNZMix7.s:2063   .text.GT9147_Send_Cfg:0000000000000000 $t
     /tmp/ccNZMix7.s:2070   .text.GT9147_Send_Cfg:0000000000000000 GT9147_Send_Cfg
     /tmp/ccNZMix7.s:2152   .text.GT9147_Send_Cfg:0000000000000050 $d
     /tmp/ccNZMix7.s:2157   .text.GT9147_RD_Reg:0000000000000000 $t
     /tmp/ccNZMix7.s:2164   .text.GT9147_RD_Reg:0000000000000000 GT9147_RD_Reg
     /tmp/ccNZMix7.s:2257   .text.GT9147_Scan:0000000000000000 $t
     /tmp/ccNZMix7.s:2264   .text.GT9147_Scan:0000000000000000 GT9147_Scan
     /tmp/ccNZMix7.s:2774   .text.GT9147_Scan:00000000000002dc $d
     /tmp/ccNZMix7.s:2783   .rodata.GT9147_Init.str1.4:0000000000000000 $d
     /tmp/ccNZMix7.s:2793   .text.GT9147_Init:0000000000000000 $t
     /tmp/ccNZMix7.s:2800   .text.GT9147_Init:0000000000000000 GT9147_Init
     /tmp/ccNZMix7.s:3027   .text.GT9147_Init:0000000000000130 $d
     /tmp/ccNZMix7.s:3038   .text.OTT2001A_WR_Reg:0000000000000000 $t
     /tmp/ccNZMix7.s:3045   .text.OTT2001A_WR_Reg:0000000000000000 OTT2001A_WR_Reg
     /tmp/ccNZMix7.s:3140   .text.OTT2001A_RD_Reg:0000000000000000 $t
     /tmp/ccNZMix7.s:3147   .text.OTT2001A_RD_Reg:0000000000000000 OTT2001A_RD_Reg
     /tmp/ccNZMix7.s:3240   .text.OTT2001A_Scan:0000000000000000 $t
     /tmp/ccNZMix7.s:3247   .text.OTT2001A_Scan:0000000000000000 OTT2001A_Scan
     /tmp/ccNZMix7.s:3525   .text.OTT2001A_Scan:00000000000001a8 $d
     /tmp/ccNZMix7.s:3539   .text.OTT2001A_SensorControl:0000000000000000 $t
     /tmp/ccNZMix7.s:3546   .text.OTT2001A_SensorControl:0000000000000000 OTT2001A_SensorControl
     /tmp/ccNZMix7.s:3591   .rodata.OTT2001A_Init.str1.4:0000000000000000 $d
     /tmp/ccNZMix7.s:3595   .text.OTT2001A_Init:0000000000000000 $t
     /tmp/ccNZMix7.s:3602   .text.OTT2001A_Init:0000000000000000 OTT2001A_Init
     /tmp/ccNZMix7.s:3751   .text.OTT2001A_Init:00000000000000b8 $d
     /tmp/ccNZMix7.s:3759   .text.FT5206_WR_Reg:0000000000000000 $t
     /tmp/ccNZMix7.s:3766   .text.FT5206_WR_Reg:0000000000000000 FT5206_WR_Reg
     /tmp/ccNZMix7.s:3854   .text.FT5206_RD_Reg:0000000000000000 $t
     /tmp/ccNZMix7.s:3861   .text.FT5206_RD_Reg:0000000000000000 FT5206_RD_Reg
     /tmp/ccNZMix7.s:3947   .rodata.FT5206_Scan.str1.4:0000000000000000 $d
     /tmp/ccNZMix7.s:3951   .text.FT5206_Scan:0000000000000000 $t
     /tmp/ccNZMix7.s:3958   .text.FT5206_Scan:0000000000000000 FT5206_Scan
     /tmp/ccNZMix7.s:4478   .text.FT5206_Scan:00000000000002e4 $d
     /tmp/ccNZMix7.s:4490   .text.FT5206_Scan:0000000000000308 $t
     /tmp/ccNZMix7.s:4526   .text.FT5206_Scan:0000000000000340 $d
     /tmp/ccNZMix7.s:4531   .text.FT5206_Init:0000000000000000 $t
     /tmp/ccNZMix7.s:4538   .text.FT5206_Init:0000000000000000 FT5206_Init
     /tmp/ccNZMix7.s:4788   .text.FT5206_Init:0000000000000150 $d
     /tmp/ccNZMix7.s:4798   .text.IIC_Init:0000000000000000 $t
     /tmp/ccNZMix7.s:4805   .text.IIC_Init:0000000000000000 IIC_Init
     /tmp/ccNZMix7.s:4879   .text.IIC_Init:0000000000000050 $d
     /tmp/ccNZMix7.s:4885   .text.AT24CXX_Init:0000000000000000 $t
     /tmp/ccNZMix7.s:4892   .text.AT24CXX_Init:0000000000000000 AT24CXX_Init
     /tmp/ccNZMix7.s:4912   .text.IIC_Start:0000000000000000 $t
     /tmp/ccNZMix7.s:4919   .text.IIC_Start:0000000000000000 IIC_Start
     /tmp/ccNZMix7.s:4977   .text.IIC_Start:000000000000004c $d
     /tmp/ccNZMix7.s:4982   .text.IIC_Stop:0000000000000000 $t
     /tmp/ccNZMix7.s:4989   .text.IIC_Stop:0000000000000000 IIC_Stop
     /tmp/ccNZMix7.s:5047   .text.IIC_Stop:000000000000004c $d
     /tmp/ccNZMix7.s:5052   .text.IIC_Wait_Ack:0000000000000000 $t
     /tmp/ccNZMix7.s:5059   .text.IIC_Wait_Ack:0000000000000000 IIC_Wait_Ack
     /tmp/ccNZMix7.s:5152   .text.IIC_Wait_Ack:000000000000005c $d
     /tmp/ccNZMix7.s:5157   .text.IIC_Ack:0000000000000000 $t
     /tmp/ccNZMix7.s:5164   .text.IIC_Ack:0000000000000000 IIC_Ack
     /tmp/ccNZMix7.s:5222   .text.IIC_Ack:000000000000004c $d
     /tmp/ccNZMix7.s:5227   .text.IIC_NAck:0000000000000000 $t
     /tmp/ccNZMix7.s:5234   .text.IIC_NAck:0000000000000000 IIC_NAck
ARM GAS  /tmp/ccNZMix7.s 			page 185


     /tmp/ccNZMix7.s:5292   .text.IIC_NAck:000000000000004c $d
     /tmp/ccNZMix7.s:5297   .text.IIC_Send_Byte:0000000000000000 $t
     /tmp/ccNZMix7.s:5304   .text.IIC_Send_Byte:0000000000000000 IIC_Send_Byte
     /tmp/ccNZMix7.s:5414   .text.IIC_Send_Byte:0000000000000074 $d
     /tmp/ccNZMix7.s:5419   .text.AT24CXX_WriteOneByte:0000000000000000 $t
     /tmp/ccNZMix7.s:5426   .text.AT24CXX_WriteOneByte:0000000000000000 AT24CXX_WriteOneByte
     /tmp/ccNZMix7.s:5487   .text.AT24CXX_WriteLenByte:0000000000000000 $t
     /tmp/ccNZMix7.s:5494   .text.AT24CXX_WriteLenByte:0000000000000000 AT24CXX_WriteLenByte
     /tmp/ccNZMix7.s:5553   .text.TP_Save_Adjdata:0000000000000000 $t
     /tmp/ccNZMix7.s:5560   .text.TP_Save_Adjdata:0000000000000000 TP_Save_Adjdata
     /tmp/ccNZMix7.s:5642   .text.TP_Save_Adjdata:000000000000006c $d
     /tmp/ccNZMix7.s:5648   .text.AT24CXX_Write:0000000000000000 $t
     /tmp/ccNZMix7.s:5655   .text.AT24CXX_Write:0000000000000000 AT24CXX_Write
     /tmp/ccNZMix7.s:5711   .text.IIC_Read_Byte:0000000000000000 $t
     /tmp/ccNZMix7.s:5718   .text.IIC_Read_Byte:0000000000000000 IIC_Read_Byte
     /tmp/ccNZMix7.s:5836   .text.IIC_Read_Byte:0000000000000068 $d
     /tmp/ccNZMix7.s:5841   .text.AT24CXX_ReadOneByte:0000000000000000 $t
     /tmp/ccNZMix7.s:5848   .text.AT24CXX_ReadOneByte:0000000000000000 AT24CXX_ReadOneByte
     /tmp/ccNZMix7.s:5917   .text.AT24CXX_ReadLenByte:0000000000000000 $t
     /tmp/ccNZMix7.s:5924   .text.AT24CXX_ReadLenByte:0000000000000000 AT24CXX_ReadLenByte
     /tmp/ccNZMix7.s:5995   .text.TP_Get_Adjdata:0000000000000000 $t
     /tmp/ccNZMix7.s:6002   .text.TP_Get_Adjdata:0000000000000000 TP_Get_Adjdata
     /tmp/ccNZMix7.s:6138   .text.TP_Get_Adjdata:000000000000008c $d
     /tmp/ccNZMix7.s:6146   .rodata.TP_Adjust.str1.4:0000000000000000 $d
     /tmp/ccNZMix7.s:6158   .text.TP_Adjust:0000000000000000 $t
     /tmp/ccNZMix7.s:6165   .text.TP_Adjust:0000000000000000 TP_Adjust
     /tmp/ccNZMix7.s:6347   .text.TP_Adjust:00000000000000cc $d
     /tmp/ccNZMix7.s:6351   .text.TP_Adjust:00000000000000dc $t
     /tmp/ccNZMix7.s:6741   .text.TP_Adjust:0000000000000338 $d
     /tmp/ccNZMix7.s:6756   .text.TP_Adjust:0000000000000364 $t
     /tmp/ccNZMix7.s:7132   .text.TP_Adjust:00000000000005c0 $d
     /tmp/ccNZMix7.s:7149   .text.TP_Init:0000000000000000 $t
     /tmp/ccNZMix7.s:7156   .text.TP_Init:0000000000000000 TP_Init
     /tmp/ccNZMix7.s:7414   .text.TP_Init:0000000000000160 $d
     /tmp/ccNZMix7.s:7427   .text.AT24CXX_Check:0000000000000000 $t
     /tmp/ccNZMix7.s:7434   .text.AT24CXX_Check:0000000000000000 AT24CXX_Check
     /tmp/ccNZMix7.s:7495   .text.AT24CXX_Read:0000000000000000 $t
     /tmp/ccNZMix7.s:7502   .text.AT24CXX_Read:0000000000000000 AT24CXX_Read
     /tmp/ccNZMix7.s:7607   .data.g_gt_tnum:0000000000000000 g_gt_tnum
     /tmp/ccNZMix7.s:7644   .rodata.GT911_TPX_TBL:0000000000000000 GT911_TPX_TBL
     /tmp/ccNZMix7.s:7633   .rodata.FT5206_TPX_TBL:0000000000000000 FT5206_TPX_TBL
     /tmp/ccNZMix7.s:7571   .bss.CIP:0000000000000000 CIP
     /tmp/ccNZMix7.s:7685   .rodata.OTT_TPX_TBL:0000000000000000 OTT_TPX_TBL
     /tmp/ccNZMix7.s:7674   .rodata.GT9147_TPX_TBL:0000000000000000 GT9147_TPX_TBL
     /tmp/ccNZMix7.s:7655   .rodata.GT9147_CFG_TBL:0000000000000000 GT9147_CFG_TBL
     /tmp/ccNZMix7.s:7695   .rodata.TP_REMIND_MSG_TBL:0000000000000000 TP_REMIND_MSG_TBL
     /tmp/ccNZMix7.s:7601   .data.CMD_RDY:0000000000000000 CMD_RDY
     /tmp/ccNZMix7.s:7595   .data.CMD_RDX:0000000000000000 CMD_RDX
     /tmp/ccNZMix7.s:7614   .data.tp_dev:0000000000000000 tp_dev
     /tmp/ccNZMix7.s:7567   .bss.CIP:0000000000000000 $d
     /tmp/ccNZMix7.s:7577   .bss.t.0:0000000000000000 t.0
     /tmp/ccNZMix7.s:7578   .bss.t.0:0000000000000000 $d
     /tmp/ccNZMix7.s:7583   .bss.t.1:0000000000000000 t.1
     /tmp/ccNZMix7.s:7584   .bss.t.1:0000000000000000 $d
     /tmp/ccNZMix7.s:7589   .bss.t.2:0000000000000000 t.2
     /tmp/ccNZMix7.s:7590   .bss.t.2:0000000000000000 $d
     /tmp/ccNZMix7.s:7610   .data.tp_dev:0000000000000000 $d
ARM GAS  /tmp/ccNZMix7.s 			page 186


     /tmp/ccNZMix7.s:7629   .rodata.FT5206_TPX_TBL:0000000000000000 $d
     /tmp/ccNZMix7.s:7640   .rodata.GT911_TPX_TBL:0000000000000000 $d
     /tmp/ccNZMix7.s:7651   .rodata.GT9147_CFG_TBL:0000000000000000 $d
     /tmp/ccNZMix7.s:7670   .rodata.GT9147_TPX_TBL:0000000000000000 $d
     /tmp/ccNZMix7.s:7681   .rodata.OTT_TPX_TBL:0000000000000000 $d
     /tmp/ccNZMix7.s:7692   .rodata.TP_REMIND_MSG_TBL:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
delay_us
HAL_GPIO_ReadPin
LCD_DrawLine
LCD_DrawPoint
LCD_Draw_Circle
POINT_COLOR
LCD_ShowString
LCD_ShowNum
lcddev
HAL_GPIO_Init
HAL_Delay
printf
strcmp
LCD_Clear
sqrt
BACK_COLOR
abs
